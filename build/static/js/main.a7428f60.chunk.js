(this.webpackJsonprpum=this.webpackJsonprpum||[]).push([[0],{113:function(e,t,n){"use strict";var a=n(118),r=(n(1),n(104)),c=n(279),i=n(285),o=n(286),l=n(160),s=n(289),u=n(288),d=n(213),j=n(144),b=n(287),O=n(21),m=n(0);function h(e,t){return e.filter((function(e){return-1===t.indexOf(e)}))}function p(e,t){return e.filter((function(e){return-1!==t.indexOf(e)}))}t.a=function(e){var t=e.setListAvailable,n=e.setListCurrent,x=e.listAvailable,g=e.setChecked,f=e.checked,v=e.titleAvailable,y=e.listCurrent,C=e.titleCurrent,w=e.loading,S=p(f,x),k=p(f,y),I=function(e){return function(){var t=f.indexOf(e),n=Object(a.a)(f);-1===t?n.push(e):n.splice(t,1),g(n)}},A=function(e){return p(f,e).length},M=function(e){return function(){var t,n;A(e)===e.length?g(h(f,e)):g((t=f,n=e,[].concat(Object(a.a)(t),Object(a.a)(h(n,t)))))}},N=function(e,t){return Object(m.jsxs)(i.a,{children:[Object(m.jsx)(o.a,{avatar:Object(m.jsx)(d.a,{onClick:M(t),checked:A(t)===t.length&&0!==t.length,indeterminate:A(t)!==t.length&&0!==A(t),disabled:0===t.length,inputProps:{"aria-label":"all items selected"}}),title:e,subheader:"".concat(A(t),"/").concat(t.length," selected")}),Object(m.jsx)(b.a,{}),Object(m.jsxs)(c.a,{dense:!0,component:"div",role:"list",children:[w?Object(m.jsx)(O.a,{}):t.map((function(e){var t="transfer-list-all-item-".concat(e.name,"-label");return Object(m.jsxs)(l.a,{role:"listitem",button:!0,onClick:I(e),children:[Object(m.jsx)(u.a,{children:Object(m.jsx)(d.a,{checked:-1!==f.indexOf(e),tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":t}})}),Object(m.jsx)(s.a,{id:t,primary:"".concat(e.name)})]},e.id)})),Object(m.jsx)(l.a,{})]})]})};return Object(m.jsxs)(r.a,{container:!0,spacing:2,justify:"center",alignItems:"center",children:[Object(m.jsx)(r.a,{item:!0,children:N(v,x)}),Object(m.jsx)(r.a,{item:!0,children:Object(m.jsxs)(r.a,{container:!0,direction:"column",alignItems:"center",children:[Object(m.jsx)(j.a,{variant:"outlined",size:"small",onClick:function(){n(y.concat(S)),t(h(x,S)),g(h(f,S))},disabled:0===S.length,"aria-label":"move selected right",children:">"}),Object(m.jsx)(j.a,{variant:"outlined",size:"small",onClick:function(){t(x.concat(k)),n(h(y,k)),g(h(f,k))},disabled:0===k.length,"aria-label":"move selected left",children:"<"})]})}),Object(m.jsx)(r.a,{item:!0,children:N(C,y)})]})}},13:function(e,t,n){"use strict";n.d(t,"f",(function(){return a})),n.d(t,"h",(function(){return r})),n.d(t,"g",(function(){return c})),n.d(t,"e",(function(){return i})),n.d(t,"i",(function(){return o})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var a="Crear",r="Editar",c="Eliminar",i="Ver",o="SuperAdmin",l="Administraci\xf3n de modulos",s="Modulos",u="https://www.facturacionelectronica.us/facturacion/controller/ws_consulta_rucdni_v2.php?documento=DNI&usuario=10447915125&password=985511933&nro_documento=",d="https://www.facturacionelectronica.us/facturacion/controller/ws_consulta_rucdni_v2.php?documento=RUC&usuario=10447915125&password=985511933&nro_documento="},142:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a,r,c=n(118),i=n(3),o=n(12),l=n(5),s=Object(l.gql)(a||(a=Object(o.a)(["\n  mutation updateRole($roleInput: RoleUpdateInput!) {\n    updateRole(roleInput: $roleInput) {\n      id\n      name\n      description\n      modules {\n        id\n        name\n      }\n    }\n  }\n"]))),u=function(){var e=Object(l.useMutation)(s,{update:function(e,t){var n=t.data.updateRole;e.modify({fields:{updateRole:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=e.writeFragment({data:n,fragment:Object(l.gql)(r||(r=Object(o.a)(["\n                fragment NewRole on Role {\n                  id\n                  name\n                  description\n                  modules {\n                    id\n                    name\n                  }\n                }\n              "])))});return[].concat(Object(c.a)(t),[a])}}})}}),t=Object(i.a)(e,2),n=t[0],a=t[1];return{updateRole:n,error:a.error,loading:a.loading}}},16:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e){for(var t=0;t<e.graphQLErrors.length;t++)for(var n=e.graphQLErrors[t].extensions.exception.response.message,a=0;a<n.length;a++){return n[a]}}},200:function(e,t,n){"use strict";var a=n(14),r=n.n(a),c=n(19),i=n(3),o=n(1),l=n(8),s=n(281),u=n(6),d=n(104),j=n(144),b=n(79),O=n(142),m=n(113),h=n(13),p=n(16),x=n(0);t.a=function(t){var n=t.role,a=t.handleClose,g=Object(o.useState)([]),f=Object(i.a)(g,2),v=f[0],y=f[1],C=Object(o.useState)([]),w=Object(i.a)(C,2),S=w[0],k=w[1],I=Object(o.useState)([]),A=Object(i.a)(I,2),M=A[0],N=A[1],E=Object(u.c)(),D=Object(b.b)(),R=Object(O.a)(),F=Object(u.d)((function(e){return e.message})),U=F.type,Y=F.text,q=(Object(u.d)((function(e){return e.authReducer.authUser})),function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=S.map((function(e){return{name:e.name}})),e.prev=2,e.next=5,R.updateRole({variables:{roleInput:{id:n.id,modules:a}}});case 5:return e.abrupt("return",E(Object(l.b)({type:"success",text:"El rol actualiz\xf3 sus modulos correctamente."})));case 8:e.prev=8,e.t0=e.catch(2),E(Object(l.b)({type:"error",text:Object(p.a)(e.t0)}));case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()),P=Object(o.useCallback)((function(){var e=D.data.getModules.filter((function(e){var t;return!(null===(t=n.modules)||void 0===t?void 0:t.some((function(t){return e.name===t.name})))})).filter((function(e){return e.name!==h.d}));y(e)}),[n,D.data]);return Object(o.useEffect)((function(){if(n&&D.data){var e,t=null===(e=n.modules)||void 0===e?void 0:e.filter((function(e){return e.name!==h.d}));k(t||[]),P()}}),[n,D.data,P]),"error"===U?Object(x.jsx)("h1",{children:Y}):Object(x.jsx)("form",{onSubmit:q,children:Object(x.jsxs)(d.a,{container:!0,spacing:3,children:[Object(x.jsx)(d.a,{item:!0,xs:12,children:Object(x.jsx)(m.a,{setListAvailable:y,setListCurrent:k,setChecked:N,checked:M,listAvailable:v,titleAvailable:"Modulos disponibles",listCurrent:S,titleCurrent:"Modulos actuales",loading:D.loading})}),Object(x.jsxs)(s.a,{style:{width:"100%"},children:[Object(x.jsx)(j.a,{onClick:a,color:"primary",children:"Cancelar"}),Object(x.jsx)(j.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",disabled:!!R.loading,children:e.i?"Actualizar":"Registrar"})]})]})})}},21:function(e,t,n){"use strict";n(1);var a=n(280),r=n(0);t.a=function(){return Object(r.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(r.jsx)(a.a,{disableShrink:!0})})}},243:function(e,t,n){},247:function(e,t,n){},266:function(e,t,n){},267:function(e,t,n){},268:function(e,t,n){},269:function(e,t,n){},270:function(e,t,n){},273:function(e,t,n){},274:function(e,t,n){"use strict";n.r(t);var a,r=n(1),c=n.n(r),i=n(31),o=n.n(i),l=n(106),s=n(41),u=function(e){return localStorage.getItem(e)},d=function(e,t){return localStorage.setItem(e,t)},j=n(3),b=n(12),O=n(5),m=n(14),h=n.n(m),p=n(19),x=n(4),g=n(186),f=n(187),v=n(192),y=Object(O.gql)(a||(a=Object(b.a)(["\n  mutation refreshToken($authInput: AuthRefreshTokenInput!) {\n    refreshToken(authInput: $authInput) {\n      access_token\n    }\n  }\n"]))),C="https://web.kemaytechnology.com/graphql",w=!1,S=[],k=Object(v.a)((function(e){var t=e.graphQLErrors,n=e.networkError,a=e.operation,r=e.forward;if(t){var c,i=Object(g.a)(t);try{for(i.s();!(c=i.n()).done;){var o=c.value;switch(o.extensions.exception.status){case 401:var l=void 0;return w?l=Object(O.fromPromise)(new Promise((function(e){S.push((function(){return e()}))}))):(w=!0,l=Object(O.fromPromise)($e.mutate({mutation:y,variables:{authInput:{email:u("username"),refresh_token:u("refreshToken")}}}).then((function(e){var t=e.data.refreshToken.access_token;return d("accessToken",t),!0})).then((function(){return S.map((function(e){return e()})),S=[],!0})).catch((function(){return S=[],!1})).finally((function(){w=!1})))),l.flatMap((function(){return r(a)}));default:console.log("[ERROR]: Message: ".concat(o.message,", Location: ").concat(o.locations,", Path: ").concat(o.path))}}}catch(o){i.e(o)}finally{i.f()}}n&&console.log("[Network error]: ".concat(n))}));console.log(C);var I,A,M,N,E,D,R,F,U,Y,q,P,z,B,$,L,T,W,Q,_,V,J,G,K,H,X,Z,ee,te,ne,ae,re,ce,ie,oe,le,se,ue,de,je,be,Oe,me,he,pe,xe,ge,fe,ve,ye,Ce,we,Se,ke,Ie,Ae,Me,Ne,Ee,De,Re,Fe,Ue,Ye,qe,Pe,ze=Object(O.createHttpLink)({uri:C}),Be=Object(f.a)((function(e,t){var n=t.headers,a=u("accessToken");return{headers:Object(x.a)(Object(x.a)({},n),{},{authorization:a?"Bearer ".concat(a):""})}})),$e=new O.ApolloClient({link:Object(O.from)([k,Be,ze]),cache:new O.InMemoryCache}),Le=$e,Te="@auth/LOGIN_USER",We="@auth/LOGOUT_USER",Qe="@auth/LOADING_USER",_e="@auth/ERROR_USER",Ve={name:"Anonimo",lastName:""},Je=function(e){return{type:Qe,payload:e}},Ge=function(){return function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.clear(),Le.resetStore(),window.location.href="/",e.next=5,t({type:We,payload:Ve});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ke=n(6),He=Object(O.gql)(I||(I=Object(b.a)(["\n  query me {\n    me {\n      id\n      name\n      lastName\n      email\n      status\n      role {\n        name\n        modules {\n          id\n          name\n          access {\n            name\n          }\n          menus {\n            id\n            name\n            link\n          }\n        }\n      }\n    }\n  }\n"]))),Xe=(n(243),n(0)),Ze=Object(Ke.b)((function(e){return{loading:e.authReducer.loading,authUser:e.authReducer.authUser}}),{setLoading:Je,whoisme:function(e){return function(){var t=Object(p.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n(Je(!0));case 3:return t.next=5,n({type:Te,payload:e.me});case 5:return t.next=7,n(Je(!1));case 7:t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(0),t.next=13,n({type:_e,payload:t.t0.message});case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},logout:Ge})((function(e){var t,n=e.authUser,a=e.loading,c=e.whoisme,i=e.logout,o=function(){var e,t=Object(O.useLazyQuery)(He,{pollInterval:500}),n=Object(j.a)(t,2),a=n[0],r=n[1],c=r.data,i=r.loading,o=r.error,l=Object(Ke.c)();return o&&401===(null===o||void 0===o||null===(e=o.graphQLErrors[0].extensions)||void 0===e?void 0:e.exception.status)&&(alert(o.graphQLErrors[0].extensions.exception.response.message),l(Ge())),{me:a,data:c,loading:i}}(),l=o.me,s=o.data;return Object(r.useEffect)((function(){var e;l(),c(s),d("username",null===s||void 0===s||null===(e=s.me)||void 0===e?void 0:e.email)}),[l,c,s]),2===(null===s||void 0===s||null===(t=s.me)||void 0===t?void 0:t.status)&&i(),Object(Xe.jsxs)("header",{children:[Object(Xe.jsx)("a",{children:a?"Cargando usuario...":Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)("strong",{children:"Bienvenido, "}),null===n||void 0===n?void 0:n.name," ",null===n||void 0===n?void 0:n.lastName]})}),"\xa0\xa0",Object(Xe.jsx)("button",{className:"buttonLogout",onClick:function(){return i()},children:"Cerrar sesion"})]})})),et=n(143),tt=function(){return Object(Xe.jsx)(Xe.Fragment,{children:"4040404040404040"})},nt=n(13),at=function(e,t,n,a,r){var c,i,o,l,s,u,d,j;switch(e){case nt.f:var b=null===t||void 0===t||null===(c=t.role)||void 0===c||null===(i=c.modules)||void 0===i?void 0:i.map((function(t){var a;return null===(a=t.access)||void 0===a?void 0:a.filter((function(a){return t.name===n&&a.name===e}))}));return null===b||void 0===b?void 0:b.map((function(e,t){return e?(null===e||void 0===e?void 0:e.length)>0&&Object(Xe.jsx)(a,{},t):""}));case nt.h:var O=null===t||void 0===t||null===(o=t.role)||void 0===o||null===(l=o.modules)||void 0===l?void 0:l.map((function(t){var a;return null===(a=t.access)||void 0===a?void 0:a.filter((function(a){return t.name===n&&a.name===e}))}));return null===O||void 0===O?void 0:O.map((function(e,t){return e?(null===e||void 0===e?void 0:e.length)>0&&Object(Xe.jsx)(a,{},t):""}));case nt.g:var m=null===t||void 0===t||null===(s=t.role)||void 0===s||null===(u=s.modules)||void 0===u?void 0:u.map((function(t){var a;return null===(a=t.access)||void 0===a?void 0:a.filter((function(a){return t.name===n&&a.name===e}))}));return null===m||void 0===m?void 0:m.map((function(e,t){return e?(null===e||void 0===e?void 0:e.length)>0&&Object(Xe.jsx)(a,{},t):""}));case nt.e:var h=null===t||void 0===t||null===(d=t.role)||void 0===d||null===(j=d.modules)||void 0===j?void 0:j.map((function(t){var a;return null===(a=t.access)||void 0===a?void 0:a.filter((function(a){return t.name===n&&a.name===e}))}));return null===h||void 0===h?void 0:h.map((function(e,t){return e?(null===e||void 0===e?void 0:e.length)>0&&Object(Xe.jsx)(a,{},t):""}))}},rt=n(24),ct=Object(O.gql)(A||(A=Object(b.a)(["\n  query getBillings {\n    getBillings {\n      id\n      name\n      day\n      createdAt\n      updatedAt\n    }\n  }\n"]))),it=function(){var e=Object(O.useQuery)(ct);return{data:e.data,error:e.error,loading:e.loading}},ot=Object(O.gql)(M||(M=Object(b.a)(["\n  mutation registerBilling($billingInput: CreateBillingInput!) {\n    registerBilling(billingInput: $billingInput) {\n      id\n      name\n      day\n      createdAt\n      updatedAt\n    }\n  }\n"]))),lt=Object(O.gql)(N||(N=Object(b.a)(["\n  mutation updateBilling($billingInput: UpdateBillingInput!) {\n    updateBilling(billingInput: $billingInput) {\n      id\n      name\n      day\n      createdAt\n      updatedAt\n    }\n  }\n"]))),st=n(16),ut=n(8),dt=n(104),jt=n(327),bt=n(355),Ot=n(354),mt=Object(jt.a)((function(e){return Object(bt.a)({root:{border:"1px solid #e2e2e1",overflow:"hidden",borderRadius:4,backgroundColor:"#fcfcfb",transition:e.transitions.create(["border-color","box-shadow"]),"&:hover":{backgroundColor:"#fff"},"&$focused":{backgroundColor:"#fff",borderColor:e.palette.primary.main}},focused:{}})})),ht=function(e){var t=mt();return Object(Xe.jsx)(Ot.a,Object(x.a)({InputProps:{classes:t,disableUnderline:!0}},e))},pt=n(144),xt=n(281),gt=n(21),ft=function(e){var t=e.handleClose,n=e.billing,a={id:(null===n||void 0===n?void 0:n.id)||"",name:(null===n||void 0===n?void 0:n.name)||"",day:(null===n||void 0===n?void 0:n.day)||0},c=Object(r.useState)(a.id?a:{name:"",day:0}),i=Object(j.a)(c,2),o=i[0],l=i[1],s=Object(Ke.c)(),u=function(){var e=Object(O.useMutation)(lt,{refetchQueries:function(){return[{query:ct}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{updateBilling:n,error:a.error,loading:a.loading}}(),d=function(){var e=Object(O.useMutation)(ot,{refetchQueries:function(){return[{query:ct}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{registerBilling:n,error:a.error,loading:a.loading}}(),b=function(e){l(Object(x.a)(Object(x.a)({},o),{},Object(rt.a)({},e.target.name,e.target.value)))},m=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!o.id){e.next=13;break}return e.prev=2,e.next=5,u.updateBilling({variables:{billingInput:Object(x.a)(Object(x.a)({},o),{},{day:Number(o.day)})}});case 5:s(Object(ut.b)({type:"success",text:"El plan se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),s(Object(ut.b)({type:"error",text:Object(st.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,d.registerBilling({variables:{billingInput:Object(x.a)(Object(x.a)({},o),{},{day:Number(o.day)})}});case 16:s(Object(ut.b)({type:"success",text:"La plan ha sido registrado correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),s(Object(ut.b)({type:"error",text:Object(st.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)("form",{onSubmit:m,children:Object(Xe.jsxs)(dt.a,{container:!0,spacing:3,children:[Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(ht,{fullWidth:!0,type:"text",onChange:b,name:"name",autoComplete:"off",id:"idName",label:"Nombre",variant:"filled",value:o.name})}),Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(ht,{fullWidth:!0,type:"number",onChange:b,name:"day",autoComplete:"off",id:"idDay",label:"Dias",variant:"filled",value:o.day})}),Object(Xe.jsxs)(xt.a,{style:{width:"100%"},children:[Object(Xe.jsx)(pt.a,{onClick:t,color:"primary",children:"Cancelar"}),o.id?u.loading?Object(Xe.jsx)(gt.a,{}):Object(Xe.jsx)(pt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):d.loading?Object(Xe.jsx)(gt.a,{}):Object(Xe.jsx)(pt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})})},vt=Object(O.gql)(E||(E=Object(b.a)(["\n  mutation deleteBilling($id: String!) {\n    deleteBilling(id: $id)\n  }\n"]))),yt=n(337),Ct=n(338),wt=n(336),St=n(15),kt=n(334),It=n(335),At=n(74),Mt=n(333),Nt=n(78),Et=n(350),Dt=n(282),Rt=n(332),Ft=n(197),Ut=n.n(Ft),Yt=Object(St.a)((function(e){return Object(bt.a)({root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})}))((function(e){var t=e.children,n=e.classes,a=e.onClose,r=Object(et.a)(e,["children","classes","onClose"]);return Object(Xe.jsxs)(Rt.a,Object(x.a)(Object(x.a)({disableTypography:!0,className:n.root},r),{},{children:[Object(Xe.jsx)(At.a,{variant:"h6",children:t}),a?Object(Xe.jsx)(Dt.a,{"aria-label":"close",className:n.closeButton,onClick:a,children:Object(Xe.jsx)(Ut.a,{})}):null]}))})),qt=function(e){var t=e.open,n=e.dialog,a=e.title,r=e.component,c=e.handleClose,i=Object(Ke.d)((function(e){return e.message})),o=Object(Nt.a)(),l=Object(Mt.a)(o.breakpoints.down("sm"));return Object(Xe.jsxs)(kt.a,{fullScreen:l,open:t,"aria-labelledby":"idModal",disableBackdropClick:!0,disableEscapeKeyDown:!0,children:[Object(Xe.jsxs)(Yt,{id:"idModal",onClose:c,children:[a," ",null===n||void 0===n?void 0:n.name]}),i.type&&Object(Xe.jsx)(Et.a,{severity:i.type,children:i.text}),Object(Xe.jsx)(It.a,{dividers:!0,style:{overflowY:"visible"},children:r})]})},Pt=n(22),zt=n.n(Pt),Bt=n(29),$t=n.n(Bt),Lt=n(50),Tt=n.n(Lt),Wt={type:"",text:""},Qt={name:"",active:!1},_t=function(e){var t=e.billing,n=Object(Ke.d)((function(e){return e.authReducer.authUser})),a=Object(Ke.d)((function(e){return e.page.user.module})),c=Object(r.useState)(Qt),i=Object(j.a)(c,2),o=i[0],l=i[1],s=Object(Ke.c)(),u=function(){var e=Object(O.useMutation)(vt,{refetchQueries:function(){return[{query:ct}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{deleteBilling:n,error:a.error,loading:a.loading}}(),d=function(){l(Qt),s(Object(ut.b)(Wt))},b=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.deleteBilling({variables:{id:t}});case 3:e.next=10;break;case 5:e.prev=5,e.t0=e.catch(0),l({name:"error",active:!0}),s(Object(ut.b)({type:"error",text:Object(st.a)(e.t0)})),o.active,o.name;case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)(wt.a,{title:"Eliminar Cliente",onClick:function(){return b(t.id)},children:Object(Xe.jsx)(Dt.a,{"aria-label":"egress",size:"small",children:Object(Xe.jsx)(Tt.a,{})})})})},x=function(){return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)(wt.a,{title:"Editar plan de facturaci\xf3n",onClick:function(){return l({name:"Plan",active:!0})},children:Object(Xe.jsx)(Dt.a,{"aria-label":"billing",size:"small",children:Object(Xe.jsx)($t.a,{})})})})};return Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(qt,{open:o.active,dialog:t,title:o.name,component:function(e){switch(e){case"Plan":return Object(Xe.jsx)(ft,{billing:t,handleClose:d})}}(o.name),handleClose:d}),at(nt.e,n,a,(function(){return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsxs)(yt.a,{children:[Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",children:t.name}),Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",children:t.day}),Object(Xe.jsx)(Ct.a,{children:zt()(t.createdAt).format("DD/MM/YYYY")}),Object(Xe.jsx)(Ct.a,{children:zt()(t.updatedAt).format("DD/MM/YYYY")}),Object(Xe.jsxs)(Ct.a,{align:"right",children:[at(nt.h,n,a,x),at(nt.g,n,a,m)]})]})})}))]})},Vt=n(340),Jt=n(339),Gt=n(341),Kt=n(342),Ht=n(211),Xt=n(36),Zt=n.n(Xt),en={name:"",active:!1},tn={type:"",text:""},nn=function(){var e=Object(Ke.d)((function(e){return e.authReducer.authUser})),t=Object(Ke.d)((function(e){return e.page.user.module})),n=Object(r.useState)(en),a=Object(j.a)(n,2),c=a[0],i=a[1],o=Object(Ke.c)(),l=Object(r.useState)([]),s=Object(j.a)(l,2),u=s[0],d=s[1],b=it(),O=b.data,m=b.loading,h=b.error,p=function(){i(en),o(Object(ut.b)(tn))};if(Object(r.useEffect)((function(){O&&d(O.getBillings)}),[O]),m)return Object(Xe.jsx)("h1",{children:"Cargando..."});if(h)return Object(Xe.jsx)("h1",{children:Object(st.a)(h)});return Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(qt,{open:c.active,title:"".concat(c.name," Plan de facturaci\xf3n"),component:function(e){switch(e){case"Crear":return Object(Xe.jsx)(ft,{handleClose:p})}}(c.name),handleClose:p}),at(nt.f,e,t,(function(){return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)(wt.a,{title:"Crear plan de facturaci\xf3n",children:Object(Xe.jsx)(Dt.a,{"aria-label":"add",size:"small",onClick:function(){return i({name:"Crear",active:!0})},children:Object(Xe.jsx)(Zt.a,{})})})})})),Object(Xe.jsx)(Jt.a,{component:Ht.a,style:{marginTop:10,whiteSpace:"nowrap"},children:Object(Xe.jsxs)(Vt.a,{size:"small","aria-label":"a dense table",children:[Object(Xe.jsx)(Gt.a,{children:Object(Xe.jsxs)(yt.a,{children:[Object(Xe.jsx)(Ct.a,{children:"Nombre"}),Object(Xe.jsx)(Ct.a,{children:"Dias"}),Object(Xe.jsx)(Ct.a,{children:"Fecha creada"}),Object(Xe.jsx)(Ct.a,{children:"Fecha modificada"}),Object(Xe.jsx)(Ct.a,{align:"right",children:"Opciones"})]})}),Object(Xe.jsx)(Kt.a,{children:u.map((function(e){return Object(Xe.jsx)(_t,{billing:e},e.id)}))})]})})]})},an=n(331),rn=n(357),cn=n(343),on=n(349),ln=Object(O.gql)(D||(D=Object(b.a)(["\n  query getCategorys {\n    getCategorys {\n      id\n      name\n      createdAt\n      updatedAt\n    }\n  }\n"]))),sn=function(){var e=Object(O.useQuery)(ln);return{data:e.data,error:e.error,loading:e.loading}},un=Object(O.gql)(R||(R=Object(b.a)(["\n  query getBrands {\n    getBrands {\n      id\n      name\n      category {\n        id\n        name\n      }\n    }\n  }\n"]))),dn=function(){var e=Object(O.useQuery)(un);return{data:e.data,error:e.error,loading:e.loading}},jn=Object(O.gql)(F||(F=Object(b.a)(["\n  mutation updateBrand($brandInput: UpdateBrandInput!) {\n    updateBrand(brandInput: $brandInput) {\n      id\n      name\n    }\n  }\n"]))),bn=Object(O.gql)(U||(U=Object(b.a)(["\n  mutation registerBrand($brandInput: CreateBrandInput!) {\n    registerBrand(brandInput: $brandInput) {\n      id\n      name\n      category {\n        id\n        name\n      }\n    }\n  }\n"]))),On={type:"",text:""},mn=function(e){var t,n=e.handleClose,a=e.brand,c={id:(null===a||void 0===a?void 0:a.id)||"",name:(null===a||void 0===a?void 0:a.name)||"",category:(null===a||void 0===a||null===(t=a.category)||void 0===t?void 0:t.name)||""},i=Object(r.useState)(c.id?c:{name:"",category:""}),o=Object(j.a)(i,2),l=o[0],s=o[1],u=Object(r.useState)([]),d=Object(j.a)(u,2),b=d[0],m=d[1],g=sn().data,f=Object(Ke.c)(),v=function(){var e=Object(O.useMutation)(jn,{refetchQueries:function(){return[{query:un}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{updateBrand:n,error:a.error,loading:a.loading}}(),y=function(){var e=Object(O.useMutation)(bn,{refetchQueries:function(){return[{query:un}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{registerBrand:n,error:a.error,loading:a.loading}}(),C=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!l.id){e.next=13;break}return e.prev=2,e.next=5,v.updateBrand({variables:{brandInput:l}});case 5:f(Object(ut.b)({type:"success",text:"La marca se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),f(Object(ut.b)({type:"error",text:Object(st.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,y.registerBrand({variables:{brandInput:l}});case 16:f(Object(ut.b)({type:"success",text:"La marca ha sido registrada correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),f(Object(ut.b)({type:"error",text:Object(st.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){g&&m(g.getCategorys)}),[g]),Object(Xe.jsx)("form",{onSubmit:C,children:Object(Xe.jsxs)(dt.a,{container:!0,spacing:3,children:[Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsxs)(an.a,{variant:"outlined",fullWidth:!0,children:[Object(Xe.jsx)(rn.a,{id:"idCategory",children:"Categoria"}),Object(Xe.jsx)(on.a,{labelId:"Categoria",id:"idCategory",value:l.category,onChange:function(e){s(Object(x.a)(Object(x.a)({},l),{},Object(rt.a)({},e.target.name,e.target.value))),f(Object(ut.b)(On))},label:"Categoria",name:"category",children:b.map((function(e){return Object(Xe.jsx)(cn.a,{value:e.name,children:e.name},e.id)}))})]})}),Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Ot.a,{fullWidth:!0,onChange:function(e){s(Object(x.a)(Object(x.a)({},l),{},Object(rt.a)({},e.target.name,e.target.value))),f(Object(ut.b)(On))},name:"name",autoComplete:"off",id:"idName",label:"Marca",variant:"outlined",value:l.name})}),Object(Xe.jsxs)(xt.a,{style:{width:"100%"},children:[Object(Xe.jsx)(pt.a,{onClick:function(){return n()},color:"primary",children:"Cancelar"}),l.id?v.loading?Object(Xe.jsx)(gt.a,{}):Object(Xe.jsx)(pt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):y.loading?Object(Xe.jsx)(gt.a,{}):Object(Xe.jsx)(pt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})},hn={type:"",text:""},pn={name:"",active:!1},xn=function(e){var t=e.brand,n=Object(Ke.d)((function(e){return e.authReducer.authUser})),a=Object(Ke.d)((function(e){return e.page.user.module})),c=Object(r.useState)(pn),i=Object(j.a)(c,2),o=i[0],l=i[1],s=Object(Ke.c)(),u=function(){l(pn),s(Object(ut.b)(hn))},d=function(e){switch(e){case"Marca":return Object(Xe.jsx)(mn,{brand:t,handleClose:u})}},b=function(){return Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(qt,{open:o.active,dialog:t,title:o.name,component:d(o.name),handleClose:u}),Object(Xe.jsx)(Ct.a,{align:"right",children:Object(Xe.jsx)(wt.a,{title:"Editar Marca",onClick:function(){return l({name:"Marca",active:!0})},children:Object(Xe.jsx)(Dt.a,{"aria-label":"role",size:"small",children:Object(Xe.jsx)($t.a,{})})})})]})};return Object(Xe.jsx)(Xe.Fragment,{children:at(nt.e,n,a,(function(){return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsxs)(yt.a,{children:[Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",children:t.category.name}),Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",children:t.name}),Object(Xe.jsx)(Ct.a,{children:zt()(t.createdAt).format("DD/MM/YYYY")}),Object(Xe.jsx)(Ct.a,{children:zt()(t.updatedAt).format("DD/MM/YYYY")}),at(nt.h,n,a,b)]})})}))})},gn={type:"",text:""},fn={name:"",active:!1},vn=function(){var e=Object(Ke.d)((function(e){return e.authReducer.authUser})),t=Object(Ke.d)((function(e){return e.page.user.module})),n=Object(r.useState)(fn),a=Object(j.a)(n,2),c=a[0],i=a[1],o=Object(Ke.c)(),l=dn(),s=l.data,u=l.loading,d=l.error,b=Object(r.useState)([]),O=Object(j.a)(b,2),m=O[0],h=O[1],p=function(){i(fn),o(Object(ut.b)(gn))},x=function(e){switch(e){case"Crear":return Object(Xe.jsx)(mn,{handleClose:p})}};if(Object(r.useEffect)((function(){s&&h(s.getBrands)}),[s]),u)return Object(Xe.jsx)("h1",{children:"Cargando..."});if(d)return Object(Xe.jsx)("h1",{children:Object(st.a)(d)});return Object(Xe.jsxs)(Xe.Fragment,{children:[at(nt.f,e,t,(function(){return Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(qt,{open:c.active,title:"".concat(c.name," Marca"),component:x(c.name),handleClose:p}),Object(Xe.jsx)(wt.a,{title:"Crear Marca",children:Object(Xe.jsx)(Dt.a,{"aria-label":"add",size:"small",onClick:function(){return i({name:"Crear",active:!0})},children:Object(Xe.jsx)(Zt.a,{})})})]})})),Object(Xe.jsx)(Jt.a,{component:Ht.a,style:{whiteSpace:"nowrap",marginTop:10},children:Object(Xe.jsxs)(Vt.a,{size:"small","aria-label":"a dense table",children:[Object(Xe.jsx)(Gt.a,{children:Object(Xe.jsxs)(yt.a,{children:[Object(Xe.jsx)(Ct.a,{children:"Categoria"}),Object(Xe.jsx)(Ct.a,{children:"Marca"}),Object(Xe.jsx)(Ct.a,{children:"Fecha creada"}),Object(Xe.jsx)(Ct.a,{children:"Fecha modificada"}),at(nt.h,e,t,(function(){return Object(Xe.jsx)(Ct.a,{align:"right",children:"Opciones"})}))]})}),Object(Xe.jsx)(Kt.a,{children:m.map((function(e){return Object(Xe.jsx)(xn,{brand:e},e.id)}))})]})})]})},yn=Object(O.gql)(Y||(Y=Object(b.a)(["\n  mutation registerCategory($categoryInput: CreateCategoryInput!) {\n    registerCategory(categoryInput: $categoryInput) {\n      id\n      name\n    }\n  }\n"]))),Cn=Object(O.gql)(q||(q=Object(b.a)(["\n  mutation updateCategory($categoryInput: UpdateCategoryInput!) {\n    updateCategory(categoryInput: $categoryInput) {\n      id\n      name\n    }\n  }\n"]))),wn={type:"",text:""},Sn=function(e){var t=e.handleClose,n=e.category,a={id:(null===n||void 0===n?void 0:n.id)||"",name:(null===n||void 0===n?void 0:n.name)||""},c=Object(r.useState)(a.id?a:{name:""}),i=Object(j.a)(c,2),o=i[0],l=i[1],s=Object(Ke.c)(),u=function(){var e=Object(O.useMutation)(Cn),t=Object(j.a)(e,2),n=t[0],a=t[1];return{updateCategory:n,error:a.error,loading:a.loading}}(),d=function(){var e=Object(O.useMutation)(yn,{refetchQueries:function(){return[{query:ln}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{registerCategory:n,error:a.error,loading:a.loading}}(),b=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!o.id){e.next=13;break}return e.prev=2,e.next=5,u.updateCategory({variables:{categoryInput:o}});case 5:s(Object(ut.b)({type:"success",text:"La categoria se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),s(Object(ut.b)({type:"error",text:Object(st.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,d.registerCategory({variables:{categoryInput:o}});case 16:s(Object(ut.b)({type:"success",text:"La categoria ha sido registrado correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),s(Object(ut.b)({type:"error",text:Object(st.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(Xe.jsx)("form",{onSubmit:b,children:Object(Xe.jsxs)(dt.a,{container:!0,spacing:3,children:[Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Ot.a,{fullWidth:!0,onChange:function(e){l(Object(x.a)(Object(x.a)({},o),{},Object(rt.a)({},e.target.name,e.target.value))),s(Object(ut.b)(wn))},name:"name",autoComplete:"off",id:"idName",label:"Nombre",variant:"outlined",value:o.name})}),Object(Xe.jsxs)(xt.a,{style:{width:"100%"},children:[Object(Xe.jsx)(pt.a,{onClick:function(){return t()},color:"primary",children:"Cancelar"}),o.id?u.loading?Object(Xe.jsx)(gt.a,{}):Object(Xe.jsx)(pt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):d.loading?Object(Xe.jsx)(gt.a,{}):Object(Xe.jsx)(pt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})},kn={type:"",text:""},In={name:"",active:!1},An=function(e){var t=e.category,n=Object(Ke.d)((function(e){return e.authReducer.authUser})),a=Object(Ke.d)((function(e){return e.page.user.module})),c=Object(r.useState)(In),i=Object(j.a)(c,2),o=i[0],l=i[1],s=Object(Ke.c)(),u=function(){l(In),s(Object(ut.b)(kn))},d=function(e){switch(e){case"Categoria":return Object(Xe.jsx)(Sn,{category:t,handleClose:u})}},b=function(){return Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(qt,{open:o.active,dialog:t,title:o.name,component:d(o.name),handleClose:u}),Object(Xe.jsx)(Ct.a,{align:"right",children:Object(Xe.jsx)(wt.a,{title:"Editar categoria",onClick:function(){return l({name:"Categoria",active:!0})},children:Object(Xe.jsx)(Dt.a,{"aria-label":"role",size:"small",children:Object(Xe.jsx)($t.a,{})})})})]})};return Object(Xe.jsx)(Xe.Fragment,{children:at(nt.e,n,a,(function(){return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsxs)(yt.a,{children:[Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",children:t.name}),Object(Xe.jsx)(Ct.a,{children:zt()(t.createdAt).format("DD/MM/YYYY")}),Object(Xe.jsx)(Ct.a,{children:zt()(t.updatedAt).format("DD/MM/YYYY")}),at(nt.h,n,a,b)]})})}))})},Mn={type:"",text:""},Nn={name:"",active:!1},En=function(){var e=Object(Ke.d)((function(e){return e.authReducer.authUser})),t=Object(Ke.d)((function(e){return e.page.user.module})),n=Object(r.useState)(Nn),a=Object(j.a)(n,2),c=a[0],i=a[1],o=Object(Ke.c)(),l=sn(),s=l.data,u=l.loading,d=l.error,b=Object(r.useState)([]),O=Object(j.a)(b,2),m=O[0],h=O[1],p=function(){i(Nn),o(Object(ut.b)(Mn))},x=function(e){switch(e){case"Crear":return Object(Xe.jsx)(Sn,{handleClose:p})}};if(Object(r.useEffect)((function(){s&&h(s.getCategorys)}),[s]),u)return Object(Xe.jsx)("h1",{children:"Cargando..."});if(d)return Object(Xe.jsx)("h1",{children:Object(st.a)(d)});return Object(Xe.jsxs)(Xe.Fragment,{children:[at(nt.f,e,t,(function(){return Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(qt,{open:c.active,title:"".concat(c.name," Categoria"),component:x(c.name),handleClose:p}),Object(Xe.jsx)(wt.a,{title:"Crear Categoria",children:Object(Xe.jsx)(Dt.a,{"aria-label":"add",size:"small",onClick:function(){return i({name:"Crear",active:!0})},children:Object(Xe.jsx)(Zt.a,{})})})]})})),Object(Xe.jsx)(Jt.a,{component:Ht.a,style:{whiteSpace:"nowrap",marginTop:10},children:Object(Xe.jsxs)(Vt.a,{size:"small","aria-label":"a dense table",children:[Object(Xe.jsx)(Gt.a,{children:Object(Xe.jsxs)(yt.a,{children:[Object(Xe.jsx)(Ct.a,{children:"Categoria"}),Object(Xe.jsx)(Ct.a,{children:"Fecha creada"}),Object(Xe.jsx)(Ct.a,{children:"Fecha modificada"}),at(nt.h,e,t,(function(){return Object(Xe.jsx)(Ct.a,{align:"right",children:"Opciones"})}))]})}),Object(Xe.jsx)(Kt.a,{children:m.map((function(e){return Object(Xe.jsx)(An,{category:e},e.id)}))})]})})]})},Dn=function(e){return new Intl.NumberFormat("de-DE",{style:"currency",currency:"PEN"}).format(e)},Rn=Object(O.gql)(P||(P=Object(b.a)(["\n  query getEgress {\n    getEgress {\n      id\n      category {\n        name\n      }\n      user {\n        name\n      }\n      detail\n      observation\n      units\n      amount\n      createdAt\n      updatedAt\n    }\n  }\n"]))),Fn=Object(O.gql)(z||(z=Object(b.a)(["\n  mutation deleteEgress($id: String!) {\n    deleteEgress(id: $id)\n  }\n"]))),Un=n(352),Yn=Object(O.gql)(B||(B=Object(b.a)(["\n  mutation updateEgress($egressInput: UpdateEgressInput!) {\n    updateEgress(egressInput: $egressInput) {\n      id\n      category {\n        id\n        name\n      }\n      detail\n      observation\n      units\n      amount\n    }\n  }\n"]))),qn=Object(O.gql)($||($=Object(b.a)(["\n  mutation registerEgress($egressInput: CreateEgressInput!) {\n    registerEgress(egressInput: $egressInput) {\n      id\n      category {\n        id\n        name\n      }\n      detail\n      observation\n      units\n      amount\n    }\n  }\n"]))),Pn=n(344),zn={type:"",text:""},Bn={category:""},$n=function(e){var t,n=e.handleClose,a=e.egress,c={detail:"",amount:0,units:0,category:"",user:Object(Ke.d)((function(e){return e.authReducer.authUser})).name},i={id:(null===a||void 0===a?void 0:a.id)||"",detail:(null===a||void 0===a?void 0:a.detail)||"",amount:(null===a||void 0===a?void 0:a.amount)||0,units:(null===a||void 0===a?void 0:a.units)||0,category:(null===a||void 0===a||null===(t=a.category)||void 0===t?void 0:t.name)||"",observation:(null===a||void 0===a?void 0:a.observation)||""},o=Object(r.useState)(i.id?i:c),l=Object(j.a)(o,2),s=l[0],u=l[1],d=Object(r.useState)(Bn),b=Object(j.a)(d,2),m=b[0],g=b[1],f=Object(r.useState)([]),v=Object(j.a)(f,2),y=v[0],C=v[1],w=sn().data,S=function(){var e=Object(O.useMutation)(Yn,{refetchQueries:function(){return[{query:Rn}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{updateEgress:n,error:a.error,loading:a.loading}}(),k=function(){var e=Object(O.useMutation)(qn,{refetchQueries:function(){return[{query:Rn}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{registerEgress:n,error:a.error,loading:a.loading}}(),I=Object(Ke.c)(),A=function(e){u(Object(x.a)(Object(x.a)({},s),{},Object(rt.a)({},e.target.name,e.target.value))),I(Object(ut.b)(zn))},M=Object(r.useCallback)((function(){C((null===w||void 0===w?void 0:w.getCategorys)||[])}),[w]),N=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!s.id){e.next=13;break}return e.prev=2,e.next=5,S.updateEgress({variables:{egressInput:Object(x.a)(Object(x.a)({},s),{},{units:Number(s.units),amount:Number(s.amount)})}});case 5:I(Object(ut.b)({type:"success",text:"El egreso se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),I(Object(ut.b)({type:"error",text:Object(st.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,k.registerEgress({variables:{egressInput:Object(x.a)(Object(x.a)({},s),{},{units:Number(s.units),amount:Number(s.amount)})}});case 16:I(Object(ut.b)({type:"success",text:"El egreso ha sido registrado correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),I(Object(ut.b)({type:"error",text:Object(st.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){M()}),[M]),Object(Xe.jsx)("form",{onSubmit:N,children:Object(Xe.jsxs)(dt.a,{container:!0,spacing:3,children:[Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Un.a,{id:"idCategory",value:s.category,onChange:function(e,t){u(Object(x.a)(Object(x.a)({},s),{},{category:(null===t||void 0===t?void 0:t.name)||""})),I(Object(ut.b)(zn))},inputValue:m.category?m.category:s.category,onInputChange:function(e,t){g(Object(x.a)(Object(x.a)({},m),{},{category:t}))},options:y,getOptionLabel:function(e){return e.name?e.name:""},getOptionSelected:function(e,t){return e.name===t},renderInput:function(e){return Object(Xe.jsx)(Ot.a,Object(x.a)(Object(x.a)({},e),{},{name:"category",label:"Categoria",variant:"outlined"}))}})}),Object(Xe.jsx)(dt.a,{item:!0,xs:4,children:Object(Xe.jsx)(Ot.a,{fullWidth:!0,onChange:A,name:"units",autoComplete:"off",id:"idUnits",label:"Unidades",variant:"outlined",value:s.units})}),Object(Xe.jsx)(dt.a,{item:!0,xs:4,children:Object(Xe.jsx)(Ot.a,{fullWidth:!0,onChange:A,name:"amount",autoComplete:"off",id:"idAmount",label:"Monto",variant:"outlined",value:s.amount,InputProps:{startAdornment:Object(Xe.jsx)(Pn.a,{position:"start",children:"S/"})}})}),Object(Xe.jsx)(dt.a,{item:!0,xs:4,children:Object(Xe.jsx)(Ot.a,{fullWidth:!0,autoComplete:"off",id:"idTotal",label:"Total",variant:"outlined",value:s.units*s.amount,InputProps:{readOnly:!0,startAdornment:Object(Xe.jsx)(Pn.a,{position:"start",children:"S/"})}})}),Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Ot.a,{fullWidth:!0,onChange:A,name:"detail",autoComplete:"off",id:"idDetail",multiline:!0,rows:3,label:"Detalle",variant:"outlined",value:s.detail})}),Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Ot.a,{fullWidth:!0,onChange:A,name:"observation",autoComplete:"off",id:"idObservation",multiline:!0,rows:5,label:"Observaci\xf3n",variant:"outlined",value:s.observation})}),Object(Xe.jsxs)(xt.a,{style:{width:"100%"},children:[Object(Xe.jsx)(pt.a,{onClick:function(){return n()},color:"primary",children:"Cancelar"}),s.id?S.loading?Object(Xe.jsx)(gt.a,{}):Object(Xe.jsx)(pt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):k.loading?Object(Xe.jsx)(gt.a,{}):Object(Xe.jsx)(pt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})},Ln={type:"",text:""},Tn={name:"",active:!1},Wn=function(e){var t=e.egres,n=Object(Ke.d)((function(e){return e.authReducer.authUser})),a=Object(Ke.d)((function(e){return e.page.user})),c=a.module,i=a.page,o=Object(Ke.c)(),l=Object(r.useState)(Tn),s=Object(j.a)(l,2),u=s[0],d=s[1],b=function(){var e=Object(O.useMutation)(Fn,{refetchQueries:function(){return[{query:Rn}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{deleteEgress:n,error:a.error,loading:a.loading}}(),m=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.deleteEgress({variables:{id:t}});case 3:e.next=10;break;case 5:e.prev=5,e.t0=e.catch(0),d({name:"error",active:!0}),o(Object(ut.b)({type:"error",text:Object(st.a)(e.t0)})),u.active,u.name;case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){d(Tn),o(Object(ut.b)(Ln))},g=function(){return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)(wt.a,{title:"Editar egreso",onClick:function(){return d({name:"Egreso",active:!0})},children:Object(Xe.jsx)(Dt.a,{"aria-label":"egress",size:"small",children:Object(Xe.jsx)($t.a,{})})})})},f=function(){return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)(wt.a,{title:"Eliminar egreso",onClick:function(){return m(t.id)},children:Object(Xe.jsx)(Dt.a,{"aria-label":"egress",size:"small",children:Object(Xe.jsx)(Tt.a,{})})})})};return Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(qt,{open:u.active,dialog:t,title:u.name,component:function(e){switch(e){case"Egreso":return Object(Xe.jsx)($n,{egress:t,handleClose:x})}}(u.name),handleClose:x}),at(nt.e,n,c,(function(){var e;return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsxs)(yt.a,{children:[Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",style:{wordBreak:"break-all"},children:t.category.name}),Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",style:{wordBreak:"break-all"},children:t.detail}),"RESUMEN-CAJA"===i||Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",style:{wordBreak:"break-all"},children:t.observation})}),Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",children:null===t||void 0===t||null===(e=t.user)||void 0===e?void 0:e.name}),Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",align:"center",children:t.units}),Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",align:"right",children:Dn(t.amount)}),Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",align:"right",children:Dn(t.units*t.amount)}),"RESUMEN-CAJA"===i||"CONSULTAR-CAJA"===i?"":Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",align:"right",children:Object(Xe.jsxs)(Xe.Fragment,{children:[at(nt.h,n,c,g),at(nt.g,n,c,f)]})})]})})}))]})},Qn=Object(r.createContext)({summaryIngress:{ingress:0},setSummaryIngress:function(e){},summaryEgress:{egress:0},setSummaryEgress:function(e){}}),_n=Qn.Provider,Vn=(Qn.Consumer,{type:"",text:""}),Jn={name:"",active:!1},Gn=function(e){var t=e.checkMoney,n=e.resultEgress,a=Object(Ke.d)((function(e){return e.authReducer.authUser})),c=Object(Ke.d)((function(e){return e.page.user})),i=c.page,o=c.module,l=Object(r.useState)([]),s=Object(j.a)(l,2),u=s[0],d=s[1],b=function(){var e=Object(O.useQuery)(Rn);return{data:e.data,error:e.error,loading:e.loading}}(),m=b.data,h=b.loading,p=b.error,g=Object(r.useState)(Jn),f=Object(j.a)(g,2),v=f[0],y=f[1],C=Object(Ke.c)(),w=Object(r.useContext)(Qn),S=w.summaryEgress,k=w.setSummaryEgress,I=function(){y(Jn),C(Object(ut.b)(Vn))},A=u.map((function(e){return e.units*e.amount})).reduce((function(e,t){return e+t}),0);if(Object(r.useEffect)((function(){void 0===t?m&&d(m.getEgress):d(n),k(Object(x.a)(Object(x.a)({},S),{},{egress:A}))}),[m,k,A]),h)return Object(Xe.jsx)("h1",{children:"Cargando..."});if(p)return Object(Xe.jsx)("h1",{children:Object(st.a)(p)});return Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(qt,{open:v.active,title:"".concat(v.name," Egreso"),component:function(e){switch(e){case"Crear":return Object(Xe.jsx)($n,{handleClose:I})}}(v.name),handleClose:I}),"RESUMEN-CAJA"===i||"CONSULTAR-CAJA"===i?"":at(nt.f,a,o,(function(){return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)(wt.a,{title:"Crear Egreso",children:Object(Xe.jsx)(Dt.a,{"aria-label":"add",size:"small",onClick:function(){return y({name:"Crear",active:!0})},children:Object(Xe.jsx)(Zt.a,{})})})})})),Object(Xe.jsx)(Jt.a,{component:Ht.a,style:{whiteSpace:"nowrap",marginTop:"CONSULTAR-CAJA"===i?20:0},children:Object(Xe.jsxs)(Vt.a,{size:"small","aria-label":"a dense table",children:[Object(Xe.jsxs)(Gt.a,{children:[Object(Xe.jsxs)(yt.a,{style:{background:"#dc3545"},children:[Object(Xe.jsx)(Ct.a,{style:{color:"#fff"},align:"center",colSpan:"RESUMEN-CAJA"===i?4:5,children:"CONSULTAR-CAJA"===i?"Egreso Total":"Ingreso de hoy"}),Object(Xe.jsx)(Ct.a,{style:{color:"#fff"},align:"center",colSpan:"RESUMEN-CAJA"===i?2:3,children:"Costo"})]}),Object(Xe.jsxs)(yt.a,{children:[Object(Xe.jsx)(Ct.a,{children:"Categoria"}),Object(Xe.jsx)(Ct.a,{children:"Detalle"}),"RESUMEN-CAJA"===i||Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)(Ct.a,{children:"Observaci\xf3n"})}),Object(Xe.jsx)(Ct.a,{children:"Usuario"}),Object(Xe.jsx)(Ct.a,{align:"center",children:"Unidades"}),Object(Xe.jsx)(Ct.a,{align:"right",children:"Monto"}),Object(Xe.jsx)(Ct.a,{align:"right",children:"Monto total"}),"RESUMEN-CAJA"===i||"CONSULTAR-CAJA"===i?"":Object(Xe.jsx)(Ct.a,{align:"right",children:"Opciones"})]})]}),Object(Xe.jsxs)(Kt.a,{children:[u.map((function(e){return Object(Xe.jsx)(Wn,{egres:e},e.id)})),Object(Xe.jsxs)(yt.a,{children:[Object(Xe.jsx)(Ct.a,{colSpan:"RESUMEN-CAJA"===i?4:5}),Object(Xe.jsx)(Ct.a,{children:Object(Xe.jsx)("strong",{children:"Total"})}),Object(Xe.jsx)(Ct.a,{align:"right",children:Object(Xe.jsx)("strong",{style:{color:"red"},children:Dn(A)})}),"RESUMEN-CAJA"===i||"CONSULTAR-CAJA"===i?"":Object(Xe.jsx)(Ct.a,{colSpan:3})]})]})]})})]})},Kn=Object(O.gql)(L||(L=Object(b.a)(["\n  query getIngress {\n    getIngress {\n      id\n      category {\n        name\n      }\n      user {\n        name\n      }\n      detail\n      observation\n      units\n      amount\n      createdAt\n      updatedAt\n    }\n  }\n"]))),Hn=Object(O.gql)(T||(T=Object(b.a)(["\n  mutation deleteIngress($id: String!) {\n    deleteIngress(id: $id)\n  }\n"]))),Xn=Object(O.gql)(W||(W=Object(b.a)(["\n  mutation updateIngress($ingressInput: UpdateIngressInput!) {\n    updateIngress(ingressInput: $ingressInput) {\n      id\n      category {\n        id\n        name\n      }\n      detail\n      observation\n      units\n      amount\n    }\n  }\n"]))),Zn=Object(O.gql)(Q||(Q=Object(b.a)(["\n  mutation registerIngress($ingressInput: CreateIngressInput!) {\n    registerIngress(ingressInput: $ingressInput) {\n      id\n      category {\n        id\n        name\n      }\n      detail\n      observation\n      units\n      amount\n    }\n  }\n"]))),ea={type:"",text:""},ta={category:""},na=function(e){var t,n=e.handleClose,a=e.ingres,c={detail:"",amount:0,units:0,category:"",user:Object(Ke.d)((function(e){return e.authReducer.authUser})).name},i={id:(null===a||void 0===a?void 0:a.id)||"",detail:(null===a||void 0===a?void 0:a.detail)||"",amount:(null===a||void 0===a?void 0:a.amount)||0,units:(null===a||void 0===a?void 0:a.units)||0,category:(null===a||void 0===a||null===(t=a.category)||void 0===t?void 0:t.name)||"",observation:(null===a||void 0===a?void 0:a.observation)||""},o=Object(r.useState)(i.id?i:c),l=Object(j.a)(o,2),s=l[0],u=l[1],d=Object(r.useState)(ta),b=Object(j.a)(d,2),m=b[0],g=b[1],f=Object(r.useState)([]),v=Object(j.a)(f,2),y=v[0],C=v[1],w=sn().data,S=function(){var e=Object(O.useMutation)(Xn,{refetchQueries:function(){return[{query:Kn}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{updateIngress:n,error:a.error,loading:a.loading}}(),k=function(){var e=Object(O.useMutation)(Zn,{refetchQueries:function(){return[{query:Kn}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{registerIngress:n,error:a.error,loading:a.loading}}(),I=Object(Ke.c)(),A=function(e){u(Object(x.a)(Object(x.a)({},s),{},Object(rt.a)({},e.target.name,e.target.value))),I(Object(ut.b)(ea))},M=Object(r.useCallback)((function(){C((null===w||void 0===w?void 0:w.getCategorys)||[])}),[w]),N=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!s.id){e.next=13;break}return e.prev=2,e.next=5,S.updateIngress({variables:{ingressInput:Object(x.a)(Object(x.a)({},s),{},{units:Number(s.units),amount:Number(s.amount)})}});case 5:I(Object(ut.b)({type:"success",text:"El ingreso se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),I(Object(ut.b)({type:"error",text:Object(st.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,k.registerIngress({variables:{ingressInput:Object(x.a)(Object(x.a)({},s),{},{units:Number(s.units),amount:Number(s.amount)})}});case 16:I(Object(ut.b)({type:"success",text:"El ingreso ha sido registrado correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),I(Object(ut.b)({type:"error",text:Object(st.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){M()}),[M]),Object(Xe.jsx)("form",{onSubmit:N,children:Object(Xe.jsxs)(dt.a,{container:!0,spacing:3,children:[Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Un.a,{id:"idCategory",value:s.category,onChange:function(e,t){u(Object(x.a)(Object(x.a)({},s),{},{category:(null===t||void 0===t?void 0:t.name)||""})),I(Object(ut.b)(ea))},inputValue:m.category?m.category:s.category,onInputChange:function(e,t){g(Object(x.a)(Object(x.a)({},m),{},{category:t}))},options:y,getOptionLabel:function(e){return e.name?e.name:""},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){return Object(Xe.jsx)(Ot.a,Object(x.a)(Object(x.a)({},e),{},{name:"category",label:"Categoria",variant:"outlined"}))}})}),Object(Xe.jsx)(dt.a,{item:!0,xs:4,children:Object(Xe.jsx)(Ot.a,{fullWidth:!0,onChange:A,name:"units",autoComplete:"off",id:"idUnits",label:"Unidades",variant:"outlined",value:s.units})}),Object(Xe.jsx)(dt.a,{item:!0,xs:4,children:Object(Xe.jsx)(Ot.a,{fullWidth:!0,onChange:A,name:"amount",autoComplete:"off",id:"idAmount",label:"Monto",variant:"outlined",value:s.amount,InputProps:{startAdornment:Object(Xe.jsx)(Pn.a,{position:"start",children:"S/"})}})}),Object(Xe.jsx)(dt.a,{item:!0,xs:4,children:Object(Xe.jsx)(Ot.a,{fullWidth:!0,autoComplete:"off",id:"idTotal",label:"Total",variant:"outlined",value:s.units*s.amount,InputProps:{readOnly:!0,startAdornment:Object(Xe.jsx)(Pn.a,{position:"start",children:"S/"})}})}),Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Ot.a,{fullWidth:!0,onChange:A,name:"detail",autoComplete:"off",id:"idDetail",multiline:!0,rows:3,label:"Detalle",variant:"outlined",value:s.detail})}),Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Ot.a,{fullWidth:!0,onChange:A,name:"observation",autoComplete:"off",id:"idObservation",multiline:!0,rows:5,label:"Observaci\xf3n",variant:"outlined",value:s.observation})}),Object(Xe.jsxs)(xt.a,{style:{width:"100%"},children:[Object(Xe.jsx)(pt.a,{onClick:function(){return n()},color:"primary",children:"Cancelar"}),s.id?S.loading?Object(Xe.jsx)(gt.a,{}):Object(Xe.jsx)(pt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):k.loading?Object(Xe.jsx)(gt.a,{}):Object(Xe.jsx)(pt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})},aa={type:"",text:""},ra={name:"",active:!1},ca=Object(jt.a)((function(e){return{row:{width:700,backgroundColor:"grey"},cell_long:{fontSize:"10px",width:150,minWidth:1,backgroundColor:"#ee82ee"},cell_default:{fontSize:"10px",width:200,minWidth:1,backgroundColor:"#ee82ee"},cell_short:{fontSize:"10px",width:80,backgroundColor:"yellow"}}})),ia=function(e){var t=e.ingres,n=(ca(),Object(Ke.d)((function(e){return e.authReducer.authUser}))),a=Object(Ke.d)((function(e){return e.page.user})),c=a.module,i=a.page,o=Object(Ke.c)(),l=Object(r.useState)(ra),s=Object(j.a)(l,2),u=s[0],d=s[1],b=function(){var e=Object(O.useMutation)(Hn,{refetchQueries:function(){return[{query:Kn}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{deleteIngress:n,error:a.error,loading:a.loading}}(),m=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.deleteIngress({variables:{id:t}});case 3:e.next=10;break;case 5:e.prev=5,e.t0=e.catch(0),d({name:"error",active:!0}),o(Object(ut.b)({type:"error",text:Object(st.a)(e.t0)})),u.active,u.name;case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){d(ra),o(Object(ut.b)(aa))},g=function(){return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)(wt.a,{title:"Editar ingreso",onClick:function(){return d({name:"Ingreso",active:!0})},children:Object(Xe.jsx)(Dt.a,{"aria-label":"egress",size:"small",children:Object(Xe.jsx)($t.a,{})})})})},f=function(){return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)(wt.a,{title:"Eliminar ingreso",onClick:function(){return m(t.id)},children:Object(Xe.jsx)(Dt.a,{"aria-label":"egress",size:"small",children:Object(Xe.jsx)(Tt.a,{})})})})};return Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(qt,{open:u.active,dialog:t,title:u.name,component:function(e){switch(e){case"Ingreso":return Object(Xe.jsx)(na,{ingres:t,handleClose:x})}}(u.name),handleClose:x}),at(nt.e,n,c,(function(){var e;return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsxs)(yt.a,{children:[Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",style:{wordBreak:"break-all"},children:t.category.name}),Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",style:{wordBreak:"break-all"},children:t.detail}),"RESUMEN-CAJA"===i||Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",style:{wordBreak:"break-all"},children:t.observation})}),Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",children:null===t||void 0===t||null===(e=t.user)||void 0===e?void 0:e.name}),Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",align:"center",children:t.units}),Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",align:"right",children:Dn(t.amount)}),Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",align:"right",children:Dn(t.units*t.amount)}),"RESUMEN-CAJA"===i||"CONSULTAR-CAJA"===i?"":Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",align:"right",children:Object(Xe.jsxs)(Xe.Fragment,{children:[at(nt.h,n,c,g),at(nt.g,n,c,f)]})})]})})}))]})},oa={type:"",text:""},la={name:"",active:!1},sa=function(e){var t=e.checkMoney,n=e.resultIngress,a=Object(Ke.d)((function(e){return e.authReducer.authUser})),c=Object(Ke.d)((function(e){return e.page.user})),i=c.module,o=c.page,l=Object(r.useState)([]),s=Object(j.a)(l,2),u=s[0],d=s[1],b=function(){var e=Object(O.useQuery)(Kn);return{data:e.data,error:e.error,loading:e.loading}}(),m=b.data,h=b.loading,p=b.error,g=Object(r.useState)(la),f=Object(j.a)(g,2),v=f[0],y=f[1],C=Object(Ke.c)(),w=Object(r.useContext)(Qn),S=w.summaryIngress,k=w.setSummaryIngress,I=function(){y(la),C(Object(ut.b)(oa))},A=u.map((function(e){return e.units*e.amount})).reduce((function(e,t){return e+t}),0);if(Object(r.useEffect)((function(){void 0===t?m&&d(m.getIngress):d(n),k(Object(x.a)(Object(x.a)({},S),{},{ingress:A}))}),[m,k,A]),h)return Object(Xe.jsx)("h1",{children:"Cargando..."});if(p)return Object(Xe.jsx)("h1",{children:Object(st.a)(p)});return Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(qt,{open:v.active,title:"".concat(v.name," Ingreso"),component:function(e){switch(e){case"Crear":return Object(Xe.jsx)(na,{handleClose:I})}}(v.name),handleClose:I}),"RESUMEN-CAJA"===o||"CONSULTAR-CAJA"===o?"":at(nt.f,a,i,(function(){return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)(wt.a,{title:"Crear Ingreso",children:Object(Xe.jsx)(Dt.a,{"aria-label":"add",size:"small",onClick:function(){return y({name:"Crear",active:!0})},children:Object(Xe.jsx)(Zt.a,{})})})})})),Object(Xe.jsx)(Jt.a,{component:Ht.a,style:{whiteSpace:"nowrap",marginTop:"CONSULTAR-CAJA"===o?20:0},children:Object(Xe.jsxs)(Vt.a,{size:"small","aria-label":"a dense table",children:[Object(Xe.jsxs)(Gt.a,{children:[Object(Xe.jsxs)(yt.a,{style:{background:"#28a745"},children:[Object(Xe.jsx)(Ct.a,{style:{color:"#fff"},align:"center",colSpan:"RESUMEN-CAJA"===o?4:5,children:"CONSULTAR-CAJA"===o?"Ingreso Total":"Ingreso de hoy"}),Object(Xe.jsx)(Ct.a,{style:{color:"#fff"},align:"center",colSpan:"RESUMEN-CAJA"===o?2:4,children:"Costo"})]}),Object(Xe.jsxs)(yt.a,{children:[Object(Xe.jsx)(Ct.a,{children:"Categoria"}),Object(Xe.jsx)(Ct.a,{children:"Detalle"}),"RESUMEN-CAJA"===o||Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)(Ct.a,{children:"Observaci\xf3n"})}),Object(Xe.jsx)(Ct.a,{children:"Usuario"}),Object(Xe.jsx)(Ct.a,{align:"center",children:"Unidades"}),Object(Xe.jsx)(Ct.a,{align:"right",children:"Monto"}),Object(Xe.jsx)(Ct.a,{align:"right",children:"Monto total"}),"RESUMEN-CAJA"===o||"CONSULTAR-CAJA"===o?"":Object(Xe.jsx)(Ct.a,{align:"right",children:"Opciones"})]})]}),Object(Xe.jsxs)(Kt.a,{children:[u.map((function(e){return Object(Xe.jsx)(ia,{ingres:e},e.id)})),Object(Xe.jsxs)(yt.a,{children:[Object(Xe.jsx)(Ct.a,{colSpan:"RESUMEN-CAJA"===o?4:5}),Object(Xe.jsx)(Ct.a,{children:Object(Xe.jsx)("strong",{children:"Total"})}),Object(Xe.jsx)(Ct.a,{align:"right",children:Object(Xe.jsx)("strong",{style:{color:"green"},children:Dn(A)})}),"RESUMEN-CAJA"===o||"CONSULTAR-CAJA"===o?"":Object(Xe.jsx)(Ct.a,{colSpan:3})]})]})]})})]})},ua=(n(247),function(e){var t=e.checkMoney,n=e.resultIngress,a=e.resultEgress,c=Object(r.useState)({ingress:0}),i=Object(j.a)(c,2),o=i[0],l=i[1],s=Object(r.useState)({egress:0}),u=Object(j.a)(s,2),d=u[0],b=u[1];return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsxs)(_n,{value:{summaryIngress:o,setSummaryIngress:l,summaryEgress:d,setSummaryEgress:b},children:[Object(Xe.jsxs)("div",{className:"content-tables-i-e",children:[Object(Xe.jsx)("div",{className:"card-table",style:{marginRight:"4%"},children:Object(Xe.jsx)(sa,{checkMoney:t,resultIngress:n,resultEgress:a})}),Object(Xe.jsx)("div",{className:"card-table",children:Object(Xe.jsx)(Gn,{checkMoney:t,resultIngress:n,resultEgress:a})})]}),Object(Xe.jsx)("div",{style:{marginTop:20},children:Object(Xe.jsx)(Jt.a,{component:Ht.a,children:Object(Xe.jsx)(Vt.a,{size:"small","aria-label":"a dense table",children:Object(Xe.jsx)(Kt.a,{children:Object(Xe.jsxs)(yt.a,{children:[Object(Xe.jsx)(Ct.a,{children:Object(Xe.jsx)("strong",{children:"Resumen total"})}),Object(Xe.jsx)(Ct.a,{align:"right",children:Object(Xe.jsx)("strong",{style:o.ingress-d.egress<0?{color:"red"}:{color:"green"},children:o.ingress-d.egress<0?Dn(o.ingress-d.egress):"+".concat(Dn(o.ingress-d.egress))})})]})})})})})]})})}),da=Object(O.gql)(_||(_=Object(b.a)(["\n  query getEgressByDates($start: String!, $end: String!) {\n    getEgressByDates(start: $start, end: $end) {\n      id\n      detail\n      observation\n      units\n      amount\n      createdAt\n      updatedAt\n      category {\n        name\n      }\n      user {\n        name\n      }\n    }\n  }\n"]))),ja=Object(O.gql)(V||(V=Object(b.a)(["\n  query getIngressByDates($start: String!, $end: String!) {\n    getIngressByDates(start: $start, end: $end) {\n      id\n      detail\n      observation\n      units\n      amount\n      createdAt\n      updatedAt\n      category {\n        name\n      }\n      user {\n        name\n      }\n    }\n  }\n"]))),ba=function(){var e=zt()().utc().local().format("YYYY-MM-DD"),t=Object(Ke.d)((function(e){return e.authReducer.authUser})),n=Object(Ke.d)((function(e){return e.page.user})),a=n.module,c=(n.page,function(){var e=Object(O.useLazyQuery)(ja),t=Object(j.a)(e,2),n=t[0],a=t[1],r=a.error,c=a.loading;return{getIngressByDates:n,data:a.data,error:r,loading:c}}()),i=function(){var e=Object(O.useLazyQuery)(da),t=Object(j.a)(e,2),n=t[0],a=t[1],r=a.error,c=a.loading;return{getEgressByDates:n,data:a.data,error:r,loading:c}}(),o={dateStart:e,dateEnd:e},l=Object(r.useState)(o),s=Object(j.a)(l,2),u=s[0],d=s[1],b=Object(r.useState)([]),m=Object(j.a)(b,2),g=m[0],f=m[1],v=Object(r.useState)([]),y=Object(j.a)(v,2),C=y[0],w=y[1],S=function(e){d(Object(x.a)(Object(x.a)({},u),{},Object(rt.a)({},e.target.name,e.target.value)))},k=function(){var e=Object(p.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.getIngressByDates({variables:{start:t,end:n}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=Object(p.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.getEgressByDates({variables:{start:t,end:n}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){var e,t;c.data&&f((null===c||void 0===c||null===(e=c.data)||void 0===e?void 0:e.getIngressByDates)||[]);i.data&&w((null===i||void 0===i||null===(t=i.data)||void 0===t?void 0:t.getEgressByDates)||[])}),[c.data,i.data]);return Object(Xe.jsx)(Xe.Fragment,{children:at(nt.e,t,a,(function(){return Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsxs)(dt.a,{container:!0,spacing:3,children:[Object(Xe.jsx)(dt.a,{item:!0,xs:3,children:Object(Xe.jsx)(ht,{fullWidth:!0,type:"date",onChange:S,name:"dateStart",autoComplete:"off",id:"idStart",label:"Desde",variant:"filled",value:u.dateStart})}),Object(Xe.jsx)(dt.a,{item:!0,xs:3,children:Object(Xe.jsx)(ht,{fullWidth:!0,type:"date",onChange:S,name:"dateEnd",autoComplete:"off",id:"idEnd",label:"Hasta",variant:"filled",value:u.dateEnd})}),Object(Xe.jsx)(dt.a,{item:!0,xs:3,style:{display:"flex",alignItems:"center"},children:Object(Xe.jsx)(pt.a,{onClick:function(){return k(u.dateStart,u.dateEnd)&&I(u.dateStart,u.dateEnd)},variant:"contained",size:"large",color:"primary",children:"Consultar"})})]}),Object(Xe.jsx)(ua,{checkMoney:u,resultIngress:g,resultEgress:C})]})}))})},Oa=Object(O.gql)(J||(J=Object(b.a)(["\n  query getBrandsByCategory($category: String!) {\n    getBrandsByCategory(category: $category) {\n      id\n      name\n    }\n  }\n"]))),ma=function(e){var t=Object(O.useQuery)(Oa,{variables:{category:e}}),n=t.error,a=t.loading;return{data:t.data,error:n,loading:a}},ha=Object(O.gql)(G||(G=Object(b.a)(["\n  query getModelsByBrand($brand: String!) {\n    getModelsByBrand(brand: $brand) {\n      id\n      name\n    }\n  }\n"]))),pa=function(e){var t=Object(O.useQuery)(ha,{variables:{brand:e}}),n=t.error,a=t.loading;return{data:t.data,error:n,loading:a}},xa=Object(O.gql)(K||(K=Object(b.a)(["\n  query getProductsByCategoryBrandModel(\n    $category: String!\n    $brand: String!\n    $model: String!\n  ) {\n    getProductsByCategoryBrandModel(\n      category: $category\n      brand: $brand\n      model: $model\n    ) {\n      id\n      name\n    }\n  }\n"]))),ga=Object(O.gql)(H||(H=Object(b.a)(["\n  query getProductByName($product: String!) {\n    getProductByName(product: $product) {\n      id\n      name\n      description\n      price\n      createdAt\n      updatedAt\n    }\n  }\n"]))),fa=n(351),va=n(358),ya=n(345),Ca=Object(O.gql)(X||(X=Object(b.a)(["\n  query getServicesByCategory($category: String!) {\n    getServicesByCategory(category: $category) {\n      id\n      name\n      description\n      price\n    }\n  }\n"]))),wa=Object(O.gql)(Z||(Z=Object(b.a)(["\n  query getServiceByName($service: String!) {\n    getServiceByName(service: $service) {\n      id\n      name\n      description\n      price\n      createdAt\n      updatedAt\n    }\n  }\n"]))),Sa={category:"",brand:"",model:"",product:"",service:""},ka={category:"",brand:"",model:"",product:"",service:""},Ia={product:!0,service:!1},Aa=function(){Object(Ke.d)((function(e){return e.authReducer.authUser}));var e=Object(Ke.d)((function(e){return e.page.user})),t=(e.module,e.page,Object(r.useState)(ka)),n=Object(j.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(Sa),o=Object(j.a)(i,2),l=o[0],s=o[1],u=Object(r.useState)([]),d=Object(j.a)(u,2),b=d[0],m=d[1],g=Object(r.useState)([]),f=Object(j.a)(g,2),v=f[0],y=f[1],C=Object(r.useState)([]),w=Object(j.a)(C,2),S=w[0],k=w[1],I=Object(r.useState)([]),A=Object(j.a)(I,2),M=A[0],N=A[1],E=Object(r.useState)([]),D=Object(j.a)(E,2),R=D[0],F=D[1],U=Object(r.useState)(Ia),Y=Object(j.a)(U,2),q=Y[0],P=Y[1],z=sn().data,B=ma(a.category||""),$=function(e){var t=Object(O.useQuery)(Ca,{variables:{category:e}}),n=t.error,a=t.loading;return{data:t.data,error:n,loading:a}}(a.category||""),L=pa(a.brand||""),T=function(e,t,n){var a=Object(O.useQuery)(xa,{variables:{category:e,brand:t,model:n}}),r=a.error,c=a.loading;return{data:a.data,error:r,loading:c}}(a.category||"",a.brand||"",a.model||""),W=function(){var e=Object(O.useLazyQuery)(ga),t=Object(j.a)(e,2),n=t[0],a=t[1],r=a.error,c=a.loading;return{getProductByName:n,data:a.data,error:r,loading:c}}(),Q=function(){var e=Object(O.useLazyQuery)(wa),t=Object(j.a)(e,2),n=t[0],a=t[1],r=a.error,c=a.loading;return{getServiceByName:n,data:a.data,error:r,loading:c}}(),_=Object(r.useCallback)((function(){m((null===z||void 0===z?void 0:z.getCategorys)||[])}),[z]),V=Object(r.useCallback)((function(){var e;y((null===B||void 0===B||null===(e=B.data)||void 0===e?void 0:e.getBrandsByCategory)||[])}),[B]),J=Object(r.useCallback)((function(){var e;F((null===$||void 0===$||null===(e=$.data)||void 0===e?void 0:e.getServicesByCategory)||[])}),[$]),G=Object(r.useCallback)((function(){var e;k((null===L||void 0===L||null===(e=L.data)||void 0===e?void 0:e.getModelsByBrand)||[])}),[L]),K=Object(r.useCallback)((function(){var e;N((null===T||void 0===T||null===(e=T.data)||void 0===e?void 0:e.getProductsByCategoryBrandModel)||[])}),[T]),H=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.getProductByName({variables:{product:t}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.getServiceByName({variables:{service:t}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){_(),V(),G(),K(),J()}),[_,V,G,K,J]),Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsxs)("div",{style:{background:"#fff",borderRadius:6,border:"1px solid #e2e2e1"},children:[Object(Xe.jsx)("div",{style:{margin:"20px 20px 0px 20px"},children:Object(Xe.jsxs)(va.a,{row:!0,"aria-label":"position",onChange:function(e){"product"===e.target.name?P({product:q.service,service:!q.service}):P({product:!q.product,service:q.product})},children:[Object(Xe.jsx)(ya.a,{value:"product",checked:q.product,control:Object(Xe.jsx)(fa.a,{color:"primary",name:"product"}),label:"Producto"}),Object(Xe.jsx)(ya.a,{value:"service",checked:q.service,control:Object(Xe.jsx)(fa.a,{color:"primary",name:"service"}),label:"Servicio"})]})}),Object(Xe.jsxs)("div",{style:{display:"flex",padding:20},children:[Object(Xe.jsx)("div",{style:{width:"50%"},children:Object(Xe.jsxs)(dt.a,{container:!0,spacing:3,style:{display:"flex",flexDirection:"column"},children:[Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Un.a,{id:"idCategory",onChange:function(e,t){c(Object(x.a)(Object(x.a)({},a),{},{category:(null===t||void 0===t?void 0:t.name)||"",brand:"",model:"",product:""})),s(Object(x.a)(Object(x.a)({},l),{},{brand:"",model:""}))},onInputChange:function(e,t){s(Object(x.a)(Object(x.a)({},l),{},{category:t}))},options:b,getOptionLabel:function(e){return e.name},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){return Object(Xe.jsx)(Ot.a,Object(x.a)(Object(x.a)({},e),{},{name:"category",label:"Categoria",variant:"outlined"}))}})}),q.product?Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Un.a,{id:"idBrand",onChange:function(e,t){c(Object(x.a)(Object(x.a)({},a),{},{brand:(null===t||void 0===t?void 0:t.name)||"",model:"",product:""})),s(Object(x.a)(Object(x.a)({},l),{},{model:"",product:""}))},onInputChange:function(e,t){s(Object(x.a)(Object(x.a)({},l),{},{brand:t}))},options:v,getOptionLabel:function(e){return e.name},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){return Object(Xe.jsx)(Ot.a,Object(x.a)(Object(x.a)({},e),{},{name:"brand",label:"Marca",variant:"outlined"}))}})}),Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Un.a,{id:"idModel",onChange:function(e,t){c(Object(x.a)(Object(x.a)({},a),{},{model:(null===t||void 0===t?void 0:t.name)||"",product:""})),s(Object(x.a)(Object(x.a)({},l),{},{product:""}))},onInputChange:function(e,t){s(Object(x.a)(Object(x.a)({},l),{},{model:t}))},options:S,getOptionLabel:function(e){return e.name},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){return Object(Xe.jsx)(Ot.a,Object(x.a)(Object(x.a)({},e),{},{name:"model",label:"Modelo",variant:"outlined"}))}})}),Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Un.a,{id:"idProduct",onChange:function(e,t){c(Object(x.a)(Object(x.a)({},a),{},{product:(null===t||void 0===t?void 0:t.name)||""}))},onInputChange:function(e,t){s(Object(x.a)(Object(x.a)({},l),{},{product:t}))},options:M,getOptionLabel:function(e){return e.name},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){return Object(Xe.jsx)(Ot.a,Object(x.a)(Object(x.a)({},e),{},{name:"product",label:"Productos",variant:"outlined"}))}})})]}):Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Un.a,{id:"idService",onChange:function(e,t){c(Object(x.a)(Object(x.a)({},a),{},{service:(null===t||void 0===t?void 0:t.name)||""}))},onInputChange:function(e,t){s(Object(x.a)(Object(x.a)({},l),{},{service:t}))},options:R,getOptionLabel:function(e){return e.name},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){return Object(Xe.jsx)(Ot.a,Object(x.a)(Object(x.a)({},e),{},{name:"service",label:"Servicios",variant:"outlined"}))}})}),q.product?Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:W.loading?Object(Xe.jsx)(gt.a,{}):Object(Xe.jsx)(pt.a,{fullWidth:!0,type:"button",onClick:function(){return H(l.product)},color:"primary",variant:"contained",children:"Consultar"})}):Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Q.loading?Object(Xe.jsx)(gt.a,{}):Object(Xe.jsx)(pt.a,{fullWidth:!0,type:"button",onClick:function(){return X(l.service)},color:"primary",variant:"contained",children:"Consultar"})})]})}),Object(Xe.jsxs)("div",{style:{width:"50%",padding:"0px 0px 0px 20px",display:"flex",flexDirection:"column"},children:[Object(Xe.jsxs)("div",{style:{height:"80%",display:"flex",flexDirection:"column"},children:[Object(Xe.jsx)("div",{style:{height:"10%",display:"flex",justifyContent:"center",background:W.data||Q.data?"yellow":"#fff"},children:Object(Xe.jsx)("strong",{children:q.product?W.data&&"Descripci\xf3n del producto ".concat(W.data.getProductByName.name):Q.data&&"Descripci\xf3n del servicio ".concat(Q.data.getServiceByName.name)})}),Object(Xe.jsx)("div",{style:{height:"90%",display:"flex",justifyContent:"center",wordBreak:"break-all",fontSize:"15px",alignItems:"center"},children:q.product?W.data&&W.data.getProductByName.description:Q.data&&Q.data.getServiceByName.description})]}),Object(Xe.jsx)("div",{style:{height:"20%",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(Xe.jsx)("label",{style:{fontSize:75},children:q.product?W.data&&Dn(W.data.getProductByName.price):Q.data&&Dn(Q.data.getServiceByName.price)})})]})]})]})})},Ma=Object(O.gql)(ee||(ee=Object(b.a)(["\n  query getCustomer {\n    getCustomer {\n      id\n      name\n      lastName\n      document\n      numDocument\n      cellphone_1\n      cellphone_2\n      direction\n      username\n      password\n      createdAt\n      updatedAt\n    }\n  }\n"]))),Na=function(){var e=Object(O.useQuery)(Ma);return{data:e.data,error:e.error,loading:e.loading}},Ea=Object(O.gql)(te||(te=Object(b.a)(["\n  mutation updateCustomer($customerInput: UpdateCustomerInput!) {\n    updateCustomer(customerInput: $customerInput) {\n      id\n      name\n      lastName\n      document\n      numDocument\n      cellphone_1\n      cellphone_2\n      direction\n      username\n      password\n      createdAt\n      updatedAt\n    }\n  }\n"]))),Da=Object(O.gql)(ne||(ne=Object(b.a)(["\n  mutation registerCustomer($customerInput: CreateCustomerInput!) {\n    registerCustomer(customerInput: $customerInput) {\n      id\n      name\n      lastName\n      document\n      numDocument\n      cellphone_1\n      cellphone_2\n      direction\n      username\n      password\n      createdAt\n      updatedAt\n    }\n  }\n"]))),Ra=n(141),Fa=n.n(Ra),Ua=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fa.a.get("".concat(nt.a).concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ya=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fa.a.get("".concat(nt.b).concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qa=n(283),Pa=n(280),za=Object(jt.a)((function(e){return Object(bt.a)({backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}})})),Ba=function(e){var t=e.state,n=e.handleClose,a=za();return Object(Xe.jsx)(qa.a,{className:a.backdrop,open:t,onClick:n,children:Object(Xe.jsx)(Pa.a,{color:"inherit"})})},$a={type:"",text:""},La=function(e){var t=e.handleClose,n=e.customer,a={id:(null===n||void 0===n?void 0:n.id)||"",name:(null===n||void 0===n?void 0:n.name)||"",lastName:(null===n||void 0===n?void 0:n.lastName)||"",document:(null===n||void 0===n?void 0:n.document)||"",numDocument:(null===n||void 0===n?void 0:n.numDocument)||"",cellphone_1:(null===n||void 0===n?void 0:n.cellphone_1)||"",cellphone_2:(null===n||void 0===n?void 0:n.cellphone_2)||void 0,direction:(null===n||void 0===n?void 0:n.direction)||void 0,username:(null===n||void 0===n?void 0:n.username)||"",password:(null===n||void 0===n?void 0:n.password)||""},c=Object(r.useState)(a.id?a:{name:"",lastName:"",document:"DNI",numDocument:"",cellphone_1:"",username:"",password:""}),i=Object(j.a)(c,2),o=i[0],l=i[1],s=Object(r.useState)(!1),u=Object(j.a)(s,2),d=u[0],b=u[1],m=Object(Ke.c)(),g=function(){var e=Object(O.useMutation)(Ea,{refetchQueries:function(){return[{query:Ma}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{updateCustomer:n,error:a.error,loading:a.loading}}(),f=function(){var e=Object(O.useMutation)(Da,{refetchQueries:function(){return[{query:Ma}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{registerCustomer:n,error:a.error,loading:a.loading}}(),v=function(e){"direction"===e.target.name||"cellphone_2"===e.target.name?l(Object(x.a)(Object(x.a)({},o),{},Object(rt.a)({},e.target.name,""===e.target.value?void 0:e.target.value))):l(Object(x.a)(Object(x.a)({},o),{},Object(rt.a)({},e.target.name,e.target.value)))},y=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!o.id){e.next=13;break}return e.prev=2,e.next=5,g.updateCustomer({variables:{customerInput:o}});case 5:m(Object(ut.b)({type:"success",text:"La cliente se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),m(Object(ut.b)({type:"error",text:Object(st.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,f.registerCustomer({variables:{customerInput:o}});case 16:m(Object(ut.b)({type:"success",text:"La cliente ha sido registrado correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),m(Object(ut.b)({type:"error",text:Object(st.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}(),C=function(e){var t=e.target.value.substr(0,2);return"10"===t?(m(Object(ut.b)($a)),"PERSONA NATURAL"):"20"===t?(m(Object(ut.b)($a)),"PERSONA JURIDICA"):void 0},w=function(e){var t=!1,n=e.target.value.substr(0,2);return"10"===n||"20"===n?t=!1:(m(Object(ut.b)({type:"error",text:"Solo existe dos tipos de RUC. Persona natural(10) y Persona Juridica(20)."})),b(!1)),t},S=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,a,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("DNI"!==o.document){e.next=25;break}if(!(t.target.value.length>7&&t.target.value.length<9)){e.next=23;break}return b(!0),e.prev=3,e.next=6,Ua(t.target.value);case 6:if(n=e.sent,(a=n.data.result).Nombre||a.Paterno||a.Materno){e.next=14;break}return m(Object(ut.b)({type:"error",text:"No se ha encontrado a la persona. Verifique el nro de documento."})),b(!1),e.abrupt("return");case 14:m(Object(ut.b)($a));case 15:l(Object(x.a)(Object(x.a)({},o),{},{name:a.Nombre||"",lastName:a.Paterno+" "+a.Materno||""})),b(!1),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(3),alert(e.t0),b(!1);case 23:e.next=53;break;case 25:if("RUC"!==o.document){e.next=52;break}if(!(t.target.value.length>10&&t.target.value.length<12)){e.next=50;break}if(b(!0),!w(t)){e.next=30;break}return e.abrupt("return");case 30:return e.prev=30,e.next=33,Ya(t.target.value);case 33:if(r=e.sent,(c=r.data.result).RazonSocial){e.next=41;break}return m(Object(ut.b)({type:"error",text:"No se ha encontrado Razon social. Verifique el nro de documento"})),b(!1),e.abrupt("return");case 41:m(Object(ut.b)($a));case 42:l(Object(x.a)(Object(x.a)({},o),{},{name:c.RazonSocial||"",lastName:C(t),direction:"-"===c.Direccion?"SIN DIRECCION":c.Direccion||""})),b(!1),e.next=50;break;case 46:e.prev=46,e.t1=e.catch(30),alert(e.t1),b(!1);case 50:e.next=53;break;case 52:m(Object(ut.b)({type:"error",text:"Seleccione un documento v\xe1lido."}));case 53:case"end":return e.stop()}}),e,null,[[3,19],[30,46]])})));return function(t){return e.apply(this,arguments)}}();return Object(Xe.jsxs)(Xe.Fragment,{children:[d&&Object(Xe.jsx)(Ba,{state:d}),Object(Xe.jsx)("form",{onSubmit:y,children:Object(Xe.jsxs)(dt.a,{container:!0,spacing:3,children:[Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsxs)(an.a,{variant:"outlined",fullWidth:!0,children:[Object(Xe.jsx)(rn.a,{id:"idDocument",children:"Documento"}),Object(Xe.jsxs)(on.a,{labelId:"Document",id:"idDocument",value:o.document,onChange:function(e){var t;l(Object(x.a)(Object(x.a)({},o),{},(t={},Object(rt.a)(t,e.target.name,e.target.value),Object(rt.a)(t,"name",""),Object(rt.a)(t,"lastName",""),Object(rt.a)(t,"numDocument",""),Object(rt.a)(t,"direction","RUC"===o.document?void 0:o.direction),t))),m(Object(ut.b)($a))},label:"Documento",name:"document",children:[Object(Xe.jsx)(cn.a,{value:"DNI",children:"DNI"}),Object(Xe.jsx)(cn.a,{value:"RUC",children:"RUC"})]})]})}),Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(ht,{fullWidth:!0,onKeyUp:S,type:"text",onChange:v,name:"numDocument",autoComplete:"off",id:"idNumDocument",label:"Nro de documento",variant:"filled",value:o.numDocument})}),"RUC"===o.document?Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(ht,{fullWidth:!0,type:"text",onChange:v,name:"name",autoComplete:"off",id:"idName",label:"RUC"===o.document?"Razon social":"Nombres",variant:"filled",value:o.name})})}):Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(dt.a,{item:!0,xs:6,children:Object(Xe.jsx)(ht,{fullWidth:!0,type:"text",onChange:v,name:"name",autoComplete:"off",id:"idName",label:"Nombres",variant:"filled",value:o.name})}),Object(Xe.jsx)(dt.a,{item:!0,xs:6,children:Object(Xe.jsx)(ht,{fullWidth:!0,type:"text",onChange:v,name:"lastName",autoComplete:"off",id:"idLastName",label:"Apellidos",variant:"filled",value:o.lastName})})]}),Object(Xe.jsx)(dt.a,{item:!0,xs:6,children:Object(Xe.jsx)(ht,{fullWidth:!0,type:"text",onChange:v,name:"cellphone_1",autoComplete:"off",id:"idCellphone1",label:"Celular",variant:"filled",value:o.cellphone_1})}),Object(Xe.jsx)(dt.a,{item:!0,xs:6,children:Object(Xe.jsx)(ht,{fullWidth:!0,type:"text",onChange:v,name:"cellphone_2",autoComplete:"off",id:"idCellphonen2",label:"Celular (opcional)",variant:"filled",value:o.cellphone_2})}),Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(ht,{fullWidth:!0,type:"text",onChange:v,name:"direction",autoComplete:"off",id:"idDirection",label:"Direccion (opcional)",variant:"filled",value:o.direction||""})}),Object(Xe.jsx)(dt.a,{item:!0,xs:6,children:Object(Xe.jsx)(ht,{fullWidth:!0,type:"text",onChange:v,name:"username",autoComplete:"off",id:"idUserame",label:"Usuario",variant:"filled",value:o.username})}),Object(Xe.jsx)(dt.a,{item:!0,xs:6,children:Object(Xe.jsx)(ht,{fullWidth:!0,type:"text",onChange:v,name:"password",autoComplete:"off",id:"idPassword",label:"Contrase\xf1a",variant:"filled",value:o.password})}),Object(Xe.jsxs)(xt.a,{style:{width:"100%"},children:[Object(Xe.jsx)(pt.a,{onClick:t,color:"primary",children:"Cancelar"}),o.id?g.loading?Object(Xe.jsx)(gt.a,{}):Object(Xe.jsx)(pt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):f.loading?Object(Xe.jsx)(gt.a,{}):Object(Xe.jsx)(pt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})]})},Ta=Object(O.gql)(ae||(ae=Object(b.a)(["\n  mutation deleteCustomer($id: String!) {\n    deleteCustomer(id: $id)\n  }\n"]))),Wa={type:"",text:""},Qa={name:"",active:!1},_a=function(e){var t=e.customer,n=Object(Ke.d)((function(e){return e.authReducer.authUser})),a=Object(Ke.d)((function(e){return e.page.user.module})),c=Object(r.useState)(Qa),i=Object(j.a)(c,2),o=i[0],l=i[1],s=Object(Ke.c)(),u=function(){var e=Object(O.useMutation)(Ta,{refetchQueries:function(){return[{query:Ma}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{deleteCustomer:n,error:a.error,loading:a.loading}}(),d=function(){l(Qa),s(Object(ut.b)(Wa))},b=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.deleteCustomer({variables:{id:t}});case 3:e.next=10;break;case 5:e.prev=5,e.t0=e.catch(0),l({name:"error",active:!0}),s(Object(ut.b)({type:"error",text:Object(st.a)(e.t0)})),o.active,o.name;case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)(wt.a,{title:"Eliminar Cliente",onClick:function(){return b(t.id)},children:Object(Xe.jsx)(Dt.a,{"aria-label":"customer",size:"small",children:Object(Xe.jsx)(Tt.a,{})})})})},x=function(){return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)(wt.a,{title:"Editar Cliente",onClick:function(){return l({name:"Cliente",active:!0})},children:Object(Xe.jsx)(Dt.a,{"aria-label":"customer",size:"small",children:Object(Xe.jsx)($t.a,{})})})})};return Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(qt,{open:o.active,dialog:t,title:o.name,component:function(e){switch(e){case"Cliente":return Object(Xe.jsx)(La,{customer:t,handleClose:d})}}(o.name),handleClose:d}),at(nt.e,n,a,(function(){return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsxs)(yt.a,{children:[Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",children:"".concat(t.name," ").concat("RUC"===t.document?"":t.lastName)}),Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",children:t.document}),Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",children:t.numDocument}),Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",children:t.cellphone_2?"".concat(t.cellphone_1,", ").concat(t.cellphone_2):"".concat(t.cellphone_1)}),Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",children:t.direction}),Object(Xe.jsxs)(Ct.a,{component:"th",scope:"row",align:"center",children:[t.username,"/",t.password]}),Object(Xe.jsx)(Ct.a,{children:zt()(t.createdAt).format("DD/MM/YYYY")}),Object(Xe.jsx)(Ct.a,{children:zt()(t.updatedAt).format("DD/MM/YYYY")}),Object(Xe.jsxs)(Ct.a,{align:"right",children:[at(nt.h,n,a,x),at(nt.g,n,a,m)]})]})})}))]})},Va={name:"",active:!1},Ja={type:"",text:""},Ga=function(){var e=Object(Ke.d)((function(e){return e.authReducer.authUser})),t=Object(Ke.d)((function(e){return e.page.user.module})),n=Object(r.useState)(Va),a=Object(j.a)(n,2),c=a[0],i=a[1],o=Object(Ke.c)(),l=Object(r.useState)([]),s=Object(j.a)(l,2),u=s[0],d=s[1],b=Na(),O=b.data,m=b.loading,h=b.error,p=function(){i(Va),o(Object(ut.b)(Ja))};if(Object(r.useEffect)((function(){O&&d(O.getCustomer)}),[O]),m)return Object(Xe.jsx)("h1",{children:"Cargando..."});if(h)return Object(Xe.jsx)("h1",{children:Object(st.a)(h)});return Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(qt,{open:c.active,title:"".concat(c.name," Cliente"),component:function(e){switch(e){case"Crear":return Object(Xe.jsx)(La,{handleClose:p})}}(c.name),handleClose:p}),at(nt.f,e,t,(function(){return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)(wt.a,{title:"Crear Cliente",children:Object(Xe.jsx)(Dt.a,{"aria-label":"add",size:"small",onClick:function(){return i({name:"Crear",active:!0})},children:Object(Xe.jsx)(Zt.a,{})})})})})),Object(Xe.jsx)(Jt.a,{component:Ht.a,style:{marginTop:10,whiteSpace:"nowrap"},children:Object(Xe.jsxs)(Vt.a,{size:"small","aria-label":"a dense table",children:[Object(Xe.jsx)(Gt.a,{children:Object(Xe.jsxs)(yt.a,{children:[Object(Xe.jsx)(Ct.a,{children:"Nombres"}),Object(Xe.jsx)(Ct.a,{children:"Documento"}),Object(Xe.jsx)(Ct.a,{children:"Nro. Documento"}),Object(Xe.jsx)(Ct.a,{children:"Contacto"}),Object(Xe.jsx)(Ct.a,{children:"Direcci\xf3n"}),Object(Xe.jsx)(Ct.a,{children:"Credenciales"}),Object(Xe.jsx)(Ct.a,{children:"Fecha creada"}),Object(Xe.jsx)(Ct.a,{children:"Fecha modificada"}),Object(Xe.jsx)(Ct.a,{children:"Opciones"})]})}),Object(Xe.jsx)(Kt.a,{children:u.map((function(e){return Object(Xe.jsx)(_a,{customer:e},e.id)}))})]})})]})},Ka=Object(O.gql)(re||(re=Object(b.a)(["\n  query getDevices {\n    getDevices {\n      id\n      name\n      createdAt\n      updatedAt\n    }\n  }\n"]))),Ha=function(){var e=Object(O.useQuery)(Ka);return{data:e.data,error:e.error,loading:e.loading}},Xa=Object(O.gql)(ce||(ce=Object(b.a)(["\n  mutation updateDevice($deviceInput: UpdateDeviceInput!) {\n    updateDevice(deviceInput: $deviceInput) {\n      id\n      name\n      createdAt\n      updatedAt\n    }\n  }\n"]))),Za=Object(O.gql)(ie||(ie=Object(b.a)(["\n  mutation registerDevice($deviceInput: CreateDeviceInput!) {\n    registerDevice(deviceInput: $deviceInput) {\n      id\n      name\n      createdAt\n      updatedAt\n    }\n  }\n"]))),er=function(e){var t=e.handleClose,n=e.device,a={id:(null===n||void 0===n?void 0:n.id)||"",name:(null===n||void 0===n?void 0:n.name)||""},c=Object(r.useState)(a.id?a:{name:""}),i=Object(j.a)(c,2),o=i[0],l=i[1],s=Object(Ke.c)(),u=function(){var e=Object(O.useMutation)(Xa,{refetchQueries:function(){return[{query:Ka}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{updateDevice:n,error:a.error,loading:a.loading}}(),d=function(){var e=Object(O.useMutation)(Za,{refetchQueries:function(){return[{query:Ka}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{registerDevice:n,error:a.error,loading:a.loading}}(),b=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!o.id){e.next=13;break}return e.prev=2,e.next=5,u.updateDevice({variables:{deviceInput:o}});case 5:s(Object(ut.b)({type:"success",text:"El dispositivo se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),s(Object(ut.b)({type:"error",text:Object(st.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,d.registerDevice({variables:{deviceInput:o}});case 16:s(Object(ut.b)({type:"success",text:"La dispositivo ha sido registrado correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),s(Object(ut.b)({type:"error",text:Object(st.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)("form",{onSubmit:b,children:Object(Xe.jsxs)(dt.a,{container:!0,spacing:3,children:[Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(ht,{fullWidth:!0,type:"text",onChange:function(e){l(Object(x.a)(Object(x.a)({},o),{},Object(rt.a)({},e.target.name,e.target.value)))},name:"name",autoComplete:"off",id:"idName",label:"Nombre",variant:"filled",value:o.name})}),Object(Xe.jsxs)(xt.a,{style:{width:"100%"},children:[Object(Xe.jsx)(pt.a,{onClick:t,color:"primary",children:"Cancelar"}),o.id?u.loading?Object(Xe.jsx)(gt.a,{}):Object(Xe.jsx)(pt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):d.loading?Object(Xe.jsx)(gt.a,{}):Object(Xe.jsx)(pt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})})},tr=Object(O.gql)(oe||(oe=Object(b.a)(["\n  mutation deleteDevice($id: String!) {\n    deleteDevice(id: $id)\n  }\n"]))),nr={type:"",text:""},ar={name:"",active:!1},rr=function(e){var t=e.device,n=Object(Ke.d)((function(e){return e.authReducer.authUser})),a=Object(Ke.d)((function(e){return e.page.user.module})),c=Object(r.useState)(ar),i=Object(j.a)(c,2),o=i[0],l=i[1],s=Object(Ke.c)(),u=function(){var e=Object(O.useMutation)(tr,{refetchQueries:function(){return[{query:Ka}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{deleteDevice:n,error:a.error,loading:a.loading}}(),d=function(){l(ar),s(Object(ut.b)(nr))},b=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.deleteDevice({variables:{id:t}});case 3:e.next=10;break;case 5:e.prev=5,e.t0=e.catch(0),l({name:"error",active:!0}),s(Object(ut.b)({type:"error",text:Object(st.a)(e.t0)})),o.active,o.name;case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)(wt.a,{title:"Eliminar dispositivo",onClick:function(){return b(t.id)},children:Object(Xe.jsx)(Dt.a,{"aria-label":"device",size:"small",children:Object(Xe.jsx)(Tt.a,{})})})})},x=function(){return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)(wt.a,{title:"Editar dispositivo",onClick:function(){return l({name:"Device",active:!0})},children:Object(Xe.jsx)(Dt.a,{"aria-label":"device",size:"small",children:Object(Xe.jsx)($t.a,{})})})})};return Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(qt,{open:o.active,dialog:t,title:o.name,component:function(e){switch(e){case"Device":return Object(Xe.jsx)(er,{device:t,handleClose:d})}}(o.name),handleClose:d}),at(nt.e,n,a,(function(){return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsxs)(yt.a,{children:[Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",children:t.name}),Object(Xe.jsx)(Ct.a,{children:zt()(t.createdAt).format("DD/MM/YYYY")}),Object(Xe.jsx)(Ct.a,{children:zt()(t.updatedAt).format("DD/MM/YYYY")}),Object(Xe.jsxs)(Ct.a,{align:"right",children:[at(nt.h,n,a,x),at(nt.g,n,a,m)]})]})})}))]})},cr={name:"",active:!1},ir={type:"",text:""},or=function(){var e=Object(Ke.d)((function(e){return e.authReducer.authUser})),t=Object(Ke.d)((function(e){return e.page.user.module})),n=Object(r.useState)(cr),a=Object(j.a)(n,2),c=a[0],i=a[1],o=Object(Ke.c)(),l=Object(r.useState)([]),s=Object(j.a)(l,2),u=s[0],d=s[1],b=Ha(),O=b.data,m=b.loading,h=b.error,p=function(){i(cr),o(Object(ut.b)(ir))};if(Object(r.useEffect)((function(){O&&d(O.getDevices)}),[O]),m)return Object(Xe.jsx)("h1",{children:"Cargando..."});if(h)return Object(Xe.jsx)("h1",{children:Object(st.a)(h)});return Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(qt,{open:c.active,title:"".concat(c.name," Dispositivo"),component:function(e){switch(e){case"Crear":return Object(Xe.jsx)(er,{handleClose:p})}}(c.name),handleClose:p}),at(nt.f,e,t,(function(){return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)(wt.a,{title:"Crear dispositivo",children:Object(Xe.jsx)(Dt.a,{"aria-label":"add",size:"small",onClick:function(){return i({name:"Crear",active:!0})},children:Object(Xe.jsx)(Zt.a,{})})})})})),Object(Xe.jsx)(Jt.a,{component:Ht.a,style:{marginTop:10,whiteSpace:"nowrap"},children:Object(Xe.jsxs)(Vt.a,{size:"small","aria-label":"a dense table",children:[Object(Xe.jsx)(Gt.a,{children:Object(Xe.jsxs)(yt.a,{children:[Object(Xe.jsx)(Ct.a,{children:"Nombre"}),Object(Xe.jsx)(Ct.a,{children:"Fecha creada"}),Object(Xe.jsx)(Ct.a,{children:"Fecha modificada"}),Object(Xe.jsx)(Ct.a,{align:"right",children:"Opciones"})]})}),Object(Xe.jsx)(Kt.a,{children:u.map((function(e){return Object(Xe.jsx)(rr,{device:e},e.id)}))})]})})]})},lr=Object(O.gql)(le||(le=Object(b.a)(["\n  query getModels {\n    getModels {\n      id\n      name\n      brand {\n        id\n        name\n      }\n    }\n  }\n"]))),sr=Object(O.gql)(se||(se=Object(b.a)(["\n  mutation updateModel($modelInput: UpdateModelInput!) {\n    updateModel(modelInput: $modelInput) {\n      id\n      name\n    }\n  }\n"]))),ur=Object(O.gql)(ue||(ue=Object(b.a)(["\n  mutation registerModel($modelInput: CreateModelInput!) {\n    registerModel(modelInput: $modelInput) {\n      id\n      name\n      brand {\n        id\n        name\n      }\n    }\n  }\n"]))),dr={type:"",text:""},jr=function(e){var t,n=e.handleClose,a=e.model,c={id:(null===a||void 0===a?void 0:a.id)||"",name:(null===a||void 0===a?void 0:a.name)||"",brand:(null===a||void 0===a||null===(t=a.brand)||void 0===t?void 0:t.name)||""},i=Object(r.useState)(c.id?c:{name:"",brand:""}),o=Object(j.a)(i,2),l=o[0],s=o[1],u=Object(r.useState)([]),d=Object(j.a)(u,2),b=d[0],m=d[1],g=dn().data,f=Object(Ke.c)(),v=function(){var e=Object(O.useMutation)(sr,{refetchQueries:function(){return[{query:lr}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{updateModel:n,error:a.error,loading:a.loading}}(),y=function(){var e=Object(O.useMutation)(ur,{refetchQueries:function(){return[{query:lr}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{registerModel:n,error:a.error,loading:a.loading}}(),C=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!l.id){e.next=13;break}return e.prev=2,e.next=5,v.updateModel({variables:{modelInput:l}});case 5:f(Object(ut.b)({type:"success",text:"El modelo se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),f(Object(ut.b)({type:"error",text:Object(st.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,y.registerModel({variables:{modelInput:l}});case 16:f(Object(ut.b)({type:"success",text:"El modelo ha sido registrado correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),f(Object(ut.b)({type:"error",text:Object(st.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){g&&m(g.getBrands)}),[g]),Object(Xe.jsx)("form",{onSubmit:C,children:Object(Xe.jsxs)(dt.a,{container:!0,spacing:3,children:[Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsxs)(an.a,{variant:"outlined",fullWidth:!0,children:[Object(Xe.jsx)(rn.a,{id:"idMarca",children:"Marca"}),Object(Xe.jsx)(on.a,{labelId:"Marca",id:"idMarca",value:l.brand,onChange:function(e){s(Object(x.a)(Object(x.a)({},l),{},Object(rt.a)({},e.target.name,e.target.value))),f(Object(ut.b)(dr))},label:"Marca",name:"brand",children:b.map((function(e){return Object(Xe.jsx)(cn.a,{value:e.name,children:e.name},e.id)}))})]})}),Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Ot.a,{fullWidth:!0,onChange:function(e){s(Object(x.a)(Object(x.a)({},l),{},Object(rt.a)({},e.target.name,e.target.value))),f(Object(ut.b)(dr))},name:"name",autoComplete:"off",id:"idName",label:"Modelo",variant:"outlined",value:l.name})}),Object(Xe.jsxs)(xt.a,{style:{width:"100%"},children:[Object(Xe.jsx)(pt.a,{onClick:function(){return n()},color:"primary",children:"Cancelar"}),l.id?v.loading?Object(Xe.jsx)(gt.a,{}):Object(Xe.jsx)(pt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):y.loading?Object(Xe.jsx)(gt.a,{}):Object(Xe.jsx)(pt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})},br={type:"",text:""},Or={name:"",active:!1},mr=function(e){var t=e.model,n=Object(Ke.d)((function(e){return e.authReducer.authUser})),a=Object(Ke.d)((function(e){return e.page.user.module})),c=Object(r.useState)(Or),i=Object(j.a)(c,2),o=i[0],l=i[1],s=Object(Ke.c)(),u=function(){l(Or),s(Object(ut.b)(br))},d=function(e){switch(e){case"Modelo":return Object(Xe.jsx)(jr,{model:t,handleClose:u})}},b=function(){return Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(qt,{open:o.active,dialog:t,title:o.name,component:d(o.name),handleClose:u}),Object(Xe.jsx)(Ct.a,{align:"right",children:Object(Xe.jsx)(wt.a,{title:"Editar Modelo",onClick:function(){return l({name:"Modelo",active:!0})},children:Object(Xe.jsx)(Dt.a,{"aria-label":"role",size:"small",children:Object(Xe.jsx)($t.a,{})})})})]})};return Object(Xe.jsx)(Xe.Fragment,{children:at(nt.e,n,a,(function(){var e;return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsxs)(yt.a,{children:[Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",children:null===(e=t.brand)||void 0===e?void 0:e.name}),Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",children:t.name}),Object(Xe.jsx)(Ct.a,{children:zt()(t.createdAt).format("DD/MM/YYYY")}),Object(Xe.jsx)(Ct.a,{children:zt()(t.updatedAt).format("DD/MM/YYYY")}),at(nt.h,n,a,b)]})})}))})},hr={type:"",text:""},pr={name:"",active:!1},xr=function(){var e=Object(Ke.d)((function(e){return e.authReducer.authUser})),t=Object(Ke.d)((function(e){return e.page.user.module})),n=Object(r.useState)(pr),a=Object(j.a)(n,2),c=a[0],i=a[1],o=Object(Ke.c)(),l=function(){var e=Object(O.useQuery)(lr);return{data:e.data,error:e.error,loading:e.loading}}(),s=l.data,u=l.loading,d=l.error,b=Object(r.useState)([]),m=Object(j.a)(b,2),h=m[0],p=m[1],x=function(){i(pr),o(Object(ut.b)(hr))},g=function(e){switch(e){case"Crear":return Object(Xe.jsx)(jr,{handleClose:x})}};if(Object(r.useEffect)((function(){s&&p(s.getModels)}),[s]),u)return Object(Xe.jsx)("h1",{children:"Cargando..."});if(d)return Object(Xe.jsx)("h1",{children:Object(st.a)(d)});return Object(Xe.jsxs)(Xe.Fragment,{children:[at(nt.f,e,t,(function(){return Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(qt,{open:c.active,title:"".concat(c.name," Modelo"),component:g(c.name),handleClose:x}),Object(Xe.jsx)(wt.a,{title:"Crear Modelo",children:Object(Xe.jsx)(Dt.a,{"aria-label":"add",size:"small",onClick:function(){return i({name:"Crear",active:!0})},children:Object(Xe.jsx)(Zt.a,{})})})]})})),Object(Xe.jsx)(Jt.a,{component:Ht.a,style:{whiteSpace:"nowrap",marginTop:10},children:Object(Xe.jsxs)(Vt.a,{size:"small","aria-label":"a dense table",children:[Object(Xe.jsx)(Gt.a,{children:Object(Xe.jsxs)(yt.a,{children:[Object(Xe.jsx)(Ct.a,{children:"Marca"}),Object(Xe.jsx)(Ct.a,{children:"Modelo"}),Object(Xe.jsx)(Ct.a,{children:"Fecha creada"}),Object(Xe.jsx)(Ct.a,{children:"Fecha modificada"}),at(nt.h,e,t,(function(){return Object(Xe.jsx)(Ct.a,{align:"right",children:"Opciones"})}))]})}),Object(Xe.jsx)(Kt.a,{children:h.map((function(e){return Object(Xe.jsx)(mr,{model:e},e.id)}))})]})})]})},gr=n(79),fr=n(359),vr=function(e){var t=e.menu;return Object(Xe.jsxs)(Xe.Fragment,{children:[t.name===nt.c?Object(Xe.jsx)(fr.a,{style:{margin:"3px"},size:"small",label:t.name,color:"primary"}):Object(Xe.jsx)(fr.a,{style:{margin:"3px"},size:"small",label:t.name,onDelete:function(){return alert("keiner")},color:"primary"}),"\xa0"]})},yr=function(e){var t=e.access;return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)(fr.a,{style:{margin:"3px"},size:"small",label:t.name,onDelete:function(){return alert("keiner")},color:"primary"})})},Cr=n(155),wr=n.n(Cr),Sr=n(199),kr=n.n(Sr),Ir=Object(O.gql)(de||(de=Object(b.a)(["\n  mutation updateModule($moduleInput: UpdateModuleInput!) {\n    updateModule(moduleInput: $moduleInput) {\n      id\n      name\n      description\n      menus {\n        id\n        name\n      }\n      access {\n        id\n        name\n      }\n    }\n  }\n"]))),Ar=function(){var e=Object(O.useMutation)(Ir,{refetchQueries:function(){return[{query:gr.a}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{updateModule:n,error:a.error,loading:a.loading}},Mr=n(329),Nr=Object(O.gql)(je||(je=Object(b.a)(["\n  mutation registerModule($moduleInput: CreateModuleInput!) {\n    registerModule(moduleInput: $moduleInput) {\n      id\n      name\n      description\n      createdAt\n      updatedAt\n      menus {\n        id\n        name\n      }\n      access {\n        id\n        name\n      }\n    }\n  }\n"]))),Er=Object(O.gql)(be||(be=Object(b.a)(["\n  query getAccess {\n    getAccess {\n      id\n      name\n    }\n  }\n"]))),Dr=function(){var e=Object(O.useQuery)(Er),t=e.data,n=e.error,a=e.loading,r=Object(Ke.c)();return n&&r(Object(ut.b)({type:"error",text:n.message})),{data:t,error:n,loading:a}},Rr=Object(O.gql)(Oe||(Oe=Object(b.a)(["\n  query getMenus {\n    getMenus {\n      id\n      name\n      link\n      createdAt\n      updatedAt\n    }\n  }\n"]))),Fr=function(){var e=Object(O.useQuery)(Rr),t=e.data,n=e.error,a=e.loading,r=Object(Ke.c)();return n&&r(Object(ut.b)({type:"error",text:n.message})),{data:t,error:n,loading:a}},Ur=Object(jt.a)((function(e){return Object(bt.a)({formControl:{margin:e.spacing(1),minWidth:120,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}})})),Yr={PaperProps:{style:{maxHeight:224,width:250}}},qr=function(e){var t=e.module,n=e.handleClose,a={id:(null===t||void 0===t?void 0:t.id)||"",name:(null===t||void 0===t?void 0:t.name)||"",description:(null===t||void 0===t?void 0:t.description)||""},c=Ar(),i=function(){var e=Object(O.useMutation)(Nr,{refetchQueries:function(){return[{query:gr.a}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{registerModule:n,error:a.error,loading:a.loading}}(),o=Dr(),l=Fr(),s=Object(r.useState)([]),u=Object(j.a)(s,2),d=u[0],b=u[1],m=Object(r.useState)([]),g=Object(j.a)(m,2),f=g[0],v=g[1],y=Object(r.useState)([]),C=Object(j.a)(y,2),w=C[0],S=C[1],k=Object(r.useState)([]),I=Object(j.a)(k,2),A=I[0],M=I[1],N=Object(r.useState)(a.id?a:{name:"",description:""}),E=Object(j.a)(N,2),D=E[0],R=E[1],F=Object(Ke.c)(),U=Ur(),Y=Object(Nt.a)(),q=function(e){R(Object(x.a)(Object(x.a)({},D),{},Object(rt.a)({},e.target.name,e.target.value))),F(Object(ut.b)({type:"",text:""}))},P=d.map((function(e){return{name:e}})),z=f.map((function(e){return{name:e}}));function B(e,t,n){return{fontWeight:-1===t.indexOf(e)?n.typography.fontWeightRegular:n.typography.fontWeightMedium}}var $=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!D.id){e.next=13;break}return e.prev=2,e.next=5,c.updateModule({variables:{moduleInput:D}});case 5:F(Object(ut.b)({type:"success",text:"El modulo se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),F(Object(ut.b)({type:"error",text:Object(st.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,i.registerModule({variables:{moduleInput:Object(x.a)(Object(x.a)({},D),{},{access:z,menus:P})}});case 16:F(Object(ut.b)({type:"success",text:"El modulo se registr\xf3 correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),F(Object(ut.b)({type:"error",text:Object(st.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){if(l.data&&o.data){var e=l.data.getMenus.filter((function(e){return e.name!==nt.c}));S(e),M(o.data.getAccess)}}),[l.data,o.data,D.name]),Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)("form",{onSubmit:$,children:Object(Xe.jsxs)(dt.a,{container:!0,spacing:3,children:[D.id&&D.name===nt.d?"":Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Ot.a,{fullWidth:!0,onChange:q,name:"name",id:"idName",label:"Modulo",variant:"outlined",value:D.name})}),Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Ot.a,{fullWidth:!0,onChange:q,name:"description",id:"idDescription",label:"Descripci\xf3n",multiline:!0,value:D.description,variant:"outlined"})}),!a.id&&Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsxs)(an.a,{variant:"outlined",fullWidth:!0,children:[Object(Xe.jsx)(rn.a,{id:"menus-mutiple-chip-label",children:"Menus"}),Object(Xe.jsx)(on.a,{labelId:"menus-mutiple-chip-label",id:"menus-mutiple-chip",multiple:!0,value:d,onChange:function(e){b(e.target.value),F(Object(ut.b)({type:"",text:""}))},input:Object(Xe.jsx)(Mr.a,{id:"select-multiple-chip"}),renderValue:function(e){return Object(Xe.jsx)("div",{className:U.chips,children:e.map((function(e){return Object(Xe.jsx)(fr.a,{label:e,className:e.chip},e)}))})},MenuProps:Yr,children:w.map((function(e){return Object(Xe.jsx)(cn.a,{value:e.name,style:B(e.name,D.menus||[],Y),children:e.name},e.id)}))})]})}),Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsxs)(an.a,{variant:"outlined",fullWidth:!0,children:[Object(Xe.jsx)(rn.a,{id:"access-mutiple-chip-label",children:"Accesos"}),Object(Xe.jsx)(on.a,{labelId:"access-mutiple-chip-label",id:"access-mutiple-chip",multiple:!0,value:f,onChange:function(e){v(e.target.value),F(Object(ut.b)({type:"",text:""}))},input:Object(Xe.jsx)(Mr.a,{id:"select-multiple-chip"}),renderValue:function(e){return Object(Xe.jsx)("div",{className:U.chips,children:e.map((function(e){return Object(Xe.jsx)(fr.a,{label:e,className:e.chip},e)}))})},MenuProps:Yr,children:A.map((function(e){return Object(Xe.jsx)(cn.a,{value:e.name,style:B(e.name,D.access||[],Y),children:e.name},e.id)}))})]})})]}),Object(Xe.jsxs)(xt.a,{style:{width:"100%"},children:[Object(Xe.jsx)(pt.a,{onClick:function(){return n()},color:"primary",children:"Cancelar"}),D.id?c.loading?Object(Xe.jsx)(gt.a,{}):Object(Xe.jsx)(pt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):i.loading?Object(Xe.jsx)(gt.a,{}):Object(Xe.jsx)(pt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})})},Pr=n(113),zr=function(e){var t=e.module,n=e.handleClose,a=Object(r.useState)([]),c=Object(j.a)(a,2),i=c[0],o=c[1],l=Object(r.useState)([]),s=Object(j.a)(l,2),u=s[0],d=s[1],b=Object(r.useState)([]),O=Object(j.a)(b,2),m=O[0],x=O[1],g=Object(Ke.c)(),f=Ar(),v=Dr(),y=Object(Ke.d)((function(e){return e.message})),C=y.type,w=y.text,S=function(){var e=Object(p.a)(h.a.mark((function e(n){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=u.map((function(e){return{name:e.name}})),e.prev=2,e.next=5,f.updateModule({variables:{moduleInput:{id:t.id,access:a}}});case 5:return e.abrupt("return",g(Object(ut.b)({type:"success",text:"El modulo actualiz\xf3 sus accesos correctamente."})));case 8:e.prev=8,e.t0=e.catch(2),g(Object(ut.b)({type:"error",text:Object(st.a)(e.t0)}));case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),k=Object(r.useCallback)((function(){var e=v.data.getAccess.filter((function(e){var n;return!(null===(n=t.access)||void 0===n?void 0:n.some((function(t){return e.name===t.name})))}));o(e)}),[t,v.data]);return Object(r.useEffect)((function(){t&&v.data&&(d(t.access||[]),k())}),[t,v.data,k]),"error"===C?Object(Xe.jsx)("h1",{children:w}):Object(Xe.jsx)("form",{onSubmit:S,children:Object(Xe.jsxs)(dt.a,{container:!0,spacing:3,children:[Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Pr.a,{setListAvailable:o,setListCurrent:d,setChecked:x,checked:m,listAvailable:i,titleAvailable:"Accesos disponibles",listCurrent:u,titleCurrent:"Accesos actuales",loading:v.loading})}),Object(Xe.jsxs)(xt.a,{style:{width:"100%"},children:[Object(Xe.jsx)(pt.a,{onClick:n,color:"primary",children:"Cancelar"}),Object(Xe.jsx)(pt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",disabled:!!f.loading,children:t.id?"Actualizar":"Registrar"})]})]})})},Br=function(e){var t=e.module,n=e.handleClose,a=Object(r.useState)([]),c=Object(j.a)(a,2),i=c[0],o=c[1],l=Object(r.useState)([]),s=Object(j.a)(l,2),u=s[0],d=s[1],b=Object(r.useState)([]),O=Object(j.a)(b,2),m=O[0],x=O[1],g=Object(Ke.c)(),f=Fr(),v=Ar(),y=Object(Ke.d)((function(e){return e.message})),C=y.type,w=y.text,S=function(){var e=Object(p.a)(h.a.mark((function e(n){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=u.map((function(e){return{name:e.name}})),e.prev=2,e.next=5,v.updateModule({variables:{moduleInput:{id:t.id,menus:a}}});case 5:return e.abrupt("return",g(Object(ut.b)({type:"success",text:"El modulo actualiz\xf3 sus menu correctamente."})));case 8:e.prev=8,e.t0=e.catch(2),g(Object(ut.b)({type:"error",text:Object(st.a)(e.t0)}));case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),k=Object(r.useCallback)((function(){var e=f.data.getMenus.filter((function(e){var n;return!(null===(n=t.menus)||void 0===n?void 0:n.some((function(t){return e.name===t.name})))})).filter((function(e){return e.name!==nt.c}));o(e)}),[t,f.data]);return Object(r.useEffect)((function(){if(t&&f.data){var e,n=null===(e=t.menus)||void 0===e?void 0:e.filter((function(e){return e.name!==nt.c}));d(n||[]),k()}}),[t,f.data,k]),"error"===C?Object(Xe.jsx)("h1",{children:w}):Object(Xe.jsx)("form",{onSubmit:S,children:Object(Xe.jsxs)(dt.a,{container:!0,spacing:3,children:[Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Pr.a,{setListAvailable:o,setListCurrent:d,setChecked:x,checked:m,listAvailable:i,titleAvailable:"Menus disponibles",listCurrent:u,titleCurrent:"Menus actuales",loading:f.loading})}),Object(Xe.jsxs)(xt.a,{style:{width:"100%"},children:[Object(Xe.jsx)(pt.a,{onClick:n,color:"primary",children:"Cancelar"}),Object(Xe.jsx)(pt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",disabled:!!v.loading,children:t.id?"Actualizar":"Registrar"})]})]})})},$r={name:"",active:!1},Lr=function(e){var t=e.module,n=Object(r.useState)($r),a=Object(j.a)(n,2),c=a[0],i=a[1],o=Object(Ke.c)(),l=function(){i(Object(x.a)(Object(x.a)({},c),{},{active:!1})),o(Object(ut.b)({type:"",text:""}))};return Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(qt,{open:c.active,dialog:t,title:c.name,component:function(e){switch(e){case"Modulo":return Object(Xe.jsx)(qr,{module:t,handleClose:l});case"Acceso":return Object(Xe.jsx)(zr,{module:t,handleClose:l});case"Menu":return Object(Xe.jsx)(Br,{module:t,handleClose:l})}}(c.name),handleClose:l}),Object(Xe.jsxs)(yt.a,{children:[Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",children:t.name}),Object(Xe.jsx)(Ct.a,{children:t.description}),Object(Xe.jsx)(Ct.a,{children:zt()(t.createdAt).format("DD/MM/YYYY")}),Object(Xe.jsx)(Ct.a,{children:zt()(t.updatedAt).format("DD/MM/YYYY")}),Object(Xe.jsx)(Ct.a,{align:"center",children:t.menus&&t.menus.map((function(e){return Object(Xe.jsx)(vr,{menu:e},e.id)}))}),Object(Xe.jsx)(Ct.a,{align:"center",children:t.name===nt.d?Object(Xe.jsx)(fr.a,{style:{margin:"3px"},size:"small",label:"Todos los permisos",color:"primary"}):t.access&&t.access.map((function(e){return Object(Xe.jsx)(yr,{access:e},e.id)}))}),t.name===nt.d?Object(Xe.jsx)(Ct.a,{align:"center",children:Object(Xe.jsx)(wt.a,{title:"Asignar menu",onClick:function(){return i({name:"Menu",active:!0})},children:Object(Xe.jsx)(Dt.a,{"aria-label":"menu",size:"small",children:Object(Xe.jsx)(wr.a,{})})})}):Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsxs)(Ct.a,{align:"right",children:[Object(Xe.jsx)(wt.a,{title:"Asignar menu",onClick:function(){return i({name:"Menu",active:!0})},children:Object(Xe.jsx)(Dt.a,{"aria-label":"menu",size:"small",children:Object(Xe.jsx)(wr.a,{})})}),Object(Xe.jsx)(wt.a,{title:"Asignar acceso",onClick:function(){return i({name:"Acceso",active:!0})},children:Object(Xe.jsx)(Dt.a,{"aria-label":"acceso",size:"small",children:Object(Xe.jsx)(kr.a,{})})}),Object(Xe.jsx)(wt.a,{title:"Editar modulo",onClick:function(){return i({name:"Modulo",active:!0})},children:Object(Xe.jsx)(Dt.a,{"aria-label":"acceso",size:"small",children:Object(Xe.jsx)($t.a,{})})})]})})]})]})},Tr=Object(jt.a)({table:{minWidth:650}}),Wr={name:"",active:!1},Qr=function(){var e,t=Object(r.useState)([]),n=Object(j.a)(t,2),a=n[0],c=n[1],i=Object(gr.b)(),o=i.data,l=i.loading,s=i.error,u=Object(r.useState)(Wr),d=Object(j.a)(u,2),b=d[0],O=d[1],m=Object(Ke.c)(),h=Tr(),p=Object(Ke.d)((function(e){return e.authReducer.authUser})),g=function(){O(Object(x.a)(Object(x.a)({},b),{},{active:!1})),m(Object(ut.b)({type:"",text:""}))};return Object(r.useEffect)((function(){o&&c(o.getModules)}),[o]),l?Object(Xe.jsx)("h1",{children:"Cargando..."}):s?Object(Xe.jsx)("h1",{children:Object(st.a)(s)}):Object(Xe.jsx)(Xe.Fragment,{children:(null===p||void 0===p||null===(e=p.role)||void 0===e?void 0:e.name)===nt.i?Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(qt,{open:b.active,title:"".concat(b.name," Modulo"),component:function(e){switch(e){case"Crear":return Object(Xe.jsx)(qr,{handleClose:g})}}(b.name),handleClose:g}),Object(Xe.jsx)(wt.a,{title:"Crear Rol",children:Object(Xe.jsx)(Dt.a,{"aria-label":"add",size:"small",onClick:function(){return O({name:"Crear",active:!0})},children:Object(Xe.jsx)(Zt.a,{})})}),Object(Xe.jsx)(Jt.a,{style:{whiteSpace:"nowrap"},component:Ht.a,children:Object(Xe.jsxs)(Vt.a,{className:h.table,size:"small","aria-label":"a dense table",children:[Object(Xe.jsx)(Gt.a,{children:Object(Xe.jsxs)(yt.a,{children:[Object(Xe.jsx)(Ct.a,{children:"Modulo"}),Object(Xe.jsx)(Ct.a,{children:"Descripci\xf3n"}),Object(Xe.jsx)(Ct.a,{children:"Fecha creada"}),Object(Xe.jsx)(Ct.a,{children:"Fecha modificada"}),Object(Xe.jsx)(Ct.a,{align:"center",children:"Menus"}),Object(Xe.jsx)(Ct.a,{align:"center",children:"Permisos"}),Object(Xe.jsx)(Ct.a,{align:"right",children:"Opciones"})]})}),Object(Xe.jsx)(Kt.a,{children:a.map((function(e){return Object(Xe.jsx)(Lr,{module:e},e.id)}))})]})})]}):Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)("h1",{children:"No tiene permiso para acceder a este recurso."})})})},_r=Object(O.gql)(me||(me=Object(b.a)(["\n  query getProducts {\n    getProducts {\n      id\n      name\n      description\n      price\n      cant\n      createdAt\n      updatedAt\n      category {\n        id\n        name\n      }\n      brand {\n        id\n        name\n      }\n      model {\n        id\n        name\n      }\n    }\n  }\n"]))),Vr=Object(O.gql)(he||(he=Object(b.a)(["\n  mutation updateService($productInput: UpdateProductInput!) {\n    updateProduct(productInput: $productInput) {\n      id\n      name\n      description\n      price\n      category {\n        id\n        name\n      }\n      brand {\n        id\n        name\n      }\n      model {\n        id\n        name\n      }\n    }\n  }\n"]))),Jr=Object(O.gql)(pe||(pe=Object(b.a)(["\n  mutation registerProduct($productInput: CreateProductInput!) {\n    registerProduct(productInput: $productInput) {\n      id\n      name\n      description\n      price\n      category {\n        id\n        name\n      }\n      brand {\n        id\n        name\n      }\n      model {\n        id\n        name\n      }\n    }\n  }\n"]))),Gr={type:"",text:""},Kr={category:"",brand:"",model:""},Hr=function(e){var t,n,a,c=e.handleClose,i=e.product,o={id:(null===i||void 0===i?void 0:i.id)||"",name:(null===i||void 0===i?void 0:i.name)||"",description:(null===i||void 0===i?void 0:i.description)||"",price:(null===i||void 0===i?void 0:i.price)||0,cant:(null===i||void 0===i?void 0:i.cant)||0,category:(null===i||void 0===i||null===(t=i.category)||void 0===t?void 0:t.name)||"",brand:(null===i||void 0===i||null===(n=i.brand)||void 0===n?void 0:n.name)||"",model:(null===i||void 0===i||null===(a=i.model)||void 0===a?void 0:a.name)||""},l=Object(r.useState)(o.id?o:{name:"",price:0,category:"",brand:"",model:"",cant:0}),s=Object(j.a)(l,2),u=s[0],d=s[1],b=Object(r.useState)(Kr),m=Object(j.a)(b,2),g=m[0],f=m[1],v=Object(r.useState)([]),y=Object(j.a)(v,2),C=y[0],w=y[1],S=Object(r.useState)([]),k=Object(j.a)(S,2),I=k[0],A=k[1],M=sn().data,N=Object(r.useState)([]),E=Object(j.a)(N,2),D=E[0],R=E[1],F=Object(Ke.c)(),U=function(){var e=Object(O.useMutation)(Vr,{refetchQueries:function(){return[{query:_r}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{updateProduct:n,error:a.error,loading:a.loading}}(),Y=function(){var e=Object(O.useMutation)(Jr,{refetchQueries:function(){return[{query:_r}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{registerProduct:n,error:a.error,loading:a.loading}}(),q=ma(u.category||""),P=pa(u.brand||""),z=function(e){d(Object(x.a)(Object(x.a)({},u),{},Object(rt.a)({},e.target.name,e.target.value))),F(Object(ut.b)(Gr))},B=Object(r.useCallback)((function(){R(M.getCategorys)}),[M]),$=Object(r.useCallback)((function(){var e;w((null===q||void 0===q||null===(e=q.data)||void 0===e?void 0:e.getBrandsByCategory)||[])}),[q]),L=Object(r.useCallback)((function(){var e;A((null===P||void 0===P||null===(e=P.data)||void 0===e?void 0:e.getModelsByBrand)||[])}),[P]),T=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!u.id){e.next=13;break}return e.prev=2,e.next=5,U.updateProduct({variables:{productInput:Object(x.a)(Object(x.a)({},u),{},{price:Number(u.price),cant:Number(u.cant)})}});case 5:F(Object(ut.b)({type:"success",text:"El producto se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),F(Object(ut.b)({type:"error",text:Object(st.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,Y.registerProduct({variables:{productInput:Object(x.a)(Object(x.a)({},u),{},{price:Number(u.price),cant:Number(u.cant)})}});case 16:F(Object(ut.b)({type:"success",text:"El producto ha sido registrada correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),F(Object(ut.b)({type:"error",text:Object(st.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){M&&(B(),$(),L())}),[M,B,$,L]),Object(Xe.jsx)("form",{onSubmit:T,children:Object(Xe.jsxs)(dt.a,{container:!0,spacing:3,children:[Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Un.a,{id:"idCategory",onChange:function(e,t){d(Object(x.a)(Object(x.a)({},u),{},{category:(null===t||void 0===t?void 0:t.name)||"",brand:"",model:""})),f(Object(x.a)(Object(x.a)({},g),{},{brand:"",model:""})),F(Object(ut.b)(Gr))},onKeyUp:function(e){(e.target.value.length<u.category.length||0===e.target.value.length)&&(d(Object(x.a)(Object(x.a)({},u),{},{category:"",brand:"",model:""})),f(Object(x.a)(Object(x.a)({},g),{},{category:"",brand:"",model:""})))},inputValue:g.category?g.category:u.category,onInputChange:function(e,t){f(Object(x.a)(Object(x.a)({},g),{},{category:t}))},options:D,getOptionLabel:function(e){return e.name?e.name:""},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){return Object(Xe.jsx)(Ot.a,Object(x.a)(Object(x.a)({},e),{},{name:"category",label:"Categoria",variant:"outlined"}))}})}),Object(Xe.jsx)(dt.a,{item:!0,xs:6,children:Object(Xe.jsx)(Un.a,{id:"idBrand",onChange:function(e,t){d(Object(x.a)(Object(x.a)({},u),{},{brand:(null===t||void 0===t?void 0:t.name)||"",model:""})),f(Object(x.a)(Object(x.a)({},g),{},{model:""})),F(Object(ut.b)(Gr))},onKeyUp:function(e){(e.target.value.length<u.brand.length||0===e.target.value.length)&&(d(Object(x.a)(Object(x.a)({},u),{},{brand:"",model:""})),f(Object(x.a)(Object(x.a)({},g),{},{brand:"",model:""})))},inputValue:g.brand?g.brand:u.brand,onInputChange:function(e,t){f(Object(x.a)(Object(x.a)({},g),{},{brand:t}))},options:C,getOptionLabel:function(e){return e.name?e.name:""},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){return Object(Xe.jsx)(Ot.a,Object(x.a)(Object(x.a)({},e),{},{name:"brand",label:"Marca",variant:"outlined"}))}})}),Object(Xe.jsx)(dt.a,{item:!0,xs:6,children:Object(Xe.jsx)(Un.a,{id:"idModel",onChange:function(e,t){d(Object(x.a)(Object(x.a)({},u),{},{model:(null===t||void 0===t?void 0:t.name)||""})),F(Object(ut.b)(Gr))},onKeyUp:function(e){(e.target.value.length<u.model.length||0===e.target.value.length)&&(d(Object(x.a)(Object(x.a)({},u),{},{model:""})),f(Object(x.a)(Object(x.a)({},g),{},{model:""})))},inputValue:g.model?g.model:u.model,onInputChange:function(e,t){f(Object(x.a)(Object(x.a)({},g),{},{model:t}))},options:I,getOptionLabel:function(e){return e.name?e.name:""},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){return Object(Xe.jsx)(Ot.a,Object(x.a)(Object(x.a)({name:"model"},e),{},{label:"Modelo",variant:"outlined"}))}})}),Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Ot.a,{fullWidth:!0,onChange:z,name:"name",autoComplete:"off",id:"idName",label:"Producto",variant:"outlined",value:u.name})}),Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Ot.a,{fullWidth:!0,name:"description",onChange:z,id:"idDescription",label:"Descripci\xf3n",multiline:!0,rows:6,defaultValue:u.description,variant:"outlined"})}),Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Ot.a,{fullWidth:!0,onChange:z,name:"price",autoComplete:"off",id:"idPrice",label:"Precio",variant:"outlined",value:u.price,InputProps:{startAdornment:Object(Xe.jsx)(Pn.a,{position:"start",children:"S/"})}})}),Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Ot.a,{fullWidth:!0,onChange:z,name:"cant",autoComplete:"off",id:"idCant",label:"Cantidad",variant:"outlined",value:u.cant})}),Object(Xe.jsxs)(xt.a,{style:{width:"100%"},children:[Object(Xe.jsx)(pt.a,{onClick:function(){return c()},color:"primary",children:"Cancelar"}),u.id?U.loading?Object(Xe.jsx)(gt.a,{}):Object(Xe.jsx)(pt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):Y.loading?Object(Xe.jsx)(gt.a,{}):Object(Xe.jsx)(pt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})},Xr=Object(O.gql)(xe||(xe=Object(b.a)(["\n  mutation deleteProduct($id: String!) {\n    deleteProduct(id: $id)\n  }\n"]))),Zr={type:"",text:""},ec={name:"",active:!1},tc=function(e){var t=e.product,n=Object(Ke.d)((function(e){return e.authReducer.authUser})),a=Object(Ke.d)((function(e){return e.page.user.module})),c=Object(r.useState)(ec),i=Object(j.a)(c,2),o=i[0],l=i[1],s=Object(Ke.c)(),u=function(){var e=Object(O.useMutation)(Xr,{refetchQueries:function(){return[{query:_r}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{deleteProduct:n,error:a.error,loading:a.loading}}(),d=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.deleteProduct({variables:{id:t}});case 3:e.next=10;break;case 5:e.prev=5,e.t0=e.catch(0),l({name:"error",active:!0}),s(Object(ut.b)({type:"error",text:Object(st.a)(e.t0)})),o.active,o.name;case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){l(ec),s(Object(ut.b)(Zr))},m=function(){return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)(wt.a,{title:"Editar Producto",onClick:function(){return l({name:"Producto",active:!0})},children:Object(Xe.jsx)(Dt.a,{"aria-label":"product",size:"small",children:Object(Xe.jsx)($t.a,{})})})})},x=function(){return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)(wt.a,{title:"Eliminar Producto",onClick:function(){return d(t.id)},children:Object(Xe.jsx)(Dt.a,{"aria-label":"egress",size:"small",children:Object(Xe.jsx)(Tt.a,{})})})})};return Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(qt,{open:o.active,dialog:t,title:o.name,component:function(e){switch(e){case"Producto":return Object(Xe.jsx)(Hr,{product:t,handleClose:b})}}(o.name),handleClose:b}),at(nt.e,n,a,(function(){return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsxs)(yt.a,{children:[Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",children:t.category.name}),Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",children:t.brand.name}),Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",children:t.model.name}),Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",children:t.name}),Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",children:Dn(t.price)}),Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",align:"center",children:t.cant}),Object(Xe.jsx)(Ct.a,{children:zt()(t.createdAt).format("DD/MM/YYYY")}),Object(Xe.jsx)(Ct.a,{children:zt()(t.updatedAt).format("DD/MM/YYYY")}),Object(Xe.jsxs)(Ct.a,{align:"right",children:[at(nt.h,n,a,m),at(nt.g,n,a,x)]})]})})}))]})},nc={type:"",text:""},ac={name:"",active:!1},rc=function(){var e=Object(Ke.d)((function(e){return e.authReducer.authUser})),t=Object(Ke.d)((function(e){return e.page.user.module})),n=Object(r.useState)(ac),a=Object(j.a)(n,2),c=a[0],i=a[1],o=Object(Ke.c)(),l=function(){var e=Object(O.useQuery)(_r);return{data:e.data,error:e.error,loading:e.loading}}(),s=l.data,u=l.loading,d=l.error,b=Object(r.useState)([]),m=Object(j.a)(b,2),h=m[0],p=m[1],x=function(){i(ac),o(Object(ut.b)(nc))};if(Object(r.useEffect)((function(){s&&p(s.getProducts)}),[s]),u)return Object(Xe.jsx)("h1",{children:"Cargando..."});if(d)return Object(Xe.jsx)("h1",{children:Object(st.a)(d)});return Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(qt,{open:c.active,title:"".concat(c.name," Producto"),component:function(e){switch(e){case"Crear":return Object(Xe.jsx)(Hr,{handleClose:x})}}(c.name),handleClose:x}),at(nt.f,e,t,(function(){return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)(wt.a,{title:"Crear Producto",children:Object(Xe.jsx)(Dt.a,{"aria-label":"add",size:"small",onClick:function(){return i({name:"Crear",active:!0})},children:Object(Xe.jsx)(Zt.a,{})})})})})),Object(Xe.jsx)(Jt.a,{component:Ht.a,style:{whiteSpace:"nowrap",marginTop:10},children:Object(Xe.jsxs)(Vt.a,{size:"small","aria-label":"a dense table",children:[Object(Xe.jsx)(Gt.a,{children:Object(Xe.jsxs)(yt.a,{children:[Object(Xe.jsx)(Ct.a,{children:"Categoria"}),Object(Xe.jsx)(Ct.a,{children:"Marca"}),Object(Xe.jsx)(Ct.a,{children:"Model"}),Object(Xe.jsx)(Ct.a,{children:"Producto"}),Object(Xe.jsx)(Ct.a,{children:"Precio"}),Object(Xe.jsx)(Ct.a,{children:"Cantidad"}),Object(Xe.jsx)(Ct.a,{children:"Fecha creada"}),Object(Xe.jsx)(Ct.a,{children:"Fecha modificada"}),Object(Xe.jsx)(Ct.a,{align:"right",children:"Opciones"})," "]})}),Object(Xe.jsx)(Kt.a,{children:h.map((function(e){return Object(Xe.jsx)(tc,{product:e},e.id)}))})]})})]})},cc=Object(O.gql)(ge||(ge=Object(b.a)(["\n  query getRoles {\n    getRoles {\n      id\n      name\n      description\n      createdAt\n      updatedAt\n      modules {\n        id\n        name\n        description\n      }\n    }\n  }\n"]))),ic=function(){var e=Object(O.useQuery)(cc);return{data:e.data,loading:e.loading,error:e.error}},oc=function(e){var t=e.module;return Object(Xe.jsxs)(Xe.Fragment,{children:[t.name===nt.d?Object(Xe.jsx)(fr.a,{style:{margin:"3px"},size:"small",label:t.name,color:"primary"}):Object(Xe.jsx)(fr.a,{style:{margin:"3px"},size:"small",label:t.name,onDelete:function(){return alert("keiner")},color:"primary"}),"\xa0"]})},lc=n(142),sc=Object(O.gql)(fe||(fe=Object(b.a)(["\n  mutation registerRole($roleInput: RoleInput!) {\n    registerRole(roleInput: $roleInput) {\n      id\n      name\n      description\n      modules {\n        id\n        name\n      }\n    }\n  }\n"]))),uc=Object(jt.a)((function(e){return Object(bt.a)({formControl:{margin:e.spacing(1),minWidth:120,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}})})),dc={PaperProps:{style:{maxHeight:224,width:250}}},jc=function(e){var t=e.role,n=e.handleClose,a={id:(null===t||void 0===t?void 0:t.id)||"",name:(null===t||void 0===t?void 0:t.name)||"",description:(null===t||void 0===t?void 0:t.description)||""},c=Object(lc.a)(),i=function(){var e=Object(O.useMutation)(sc,{refetchQueries:function(){return[{query:cc}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{registerRole:n,error:a.error,loading:a.loading}}(),o=Object(gr.b)(),l=Object(r.useState)(a.id?a:{name:"",description:""}),s=Object(j.a)(l,2),u=s[0],d=s[1],b=Object(r.useState)([]),m=Object(j.a)(b,2),g=m[0],f=m[1],v=Object(r.useState)([]),y=Object(j.a)(v,2),C=y[0],w=y[1],S=Object(Nt.a)(),k=Object(Ke.c)(),I=uc(),A=Object(Ke.d)((function(e){return e.authReducer.authUser})),M=function(e){d(Object(x.a)(Object(x.a)({},u),{},Object(rt.a)({},e.target.name,e.target.value))),k(Object(ut.b)({type:"",text:""}))},N=g.map((function(e){return{name:e}}));function E(e,t,n){return{fontWeight:-1===t.indexOf(e)?n.typography.fontWeightRegular:n.typography.fontWeightMedium}}var D=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!u.id){e.next=13;break}return e.prev=2,e.next=5,c.updateRole({variables:{roleInput:u}});case 5:k(Object(ut.b)({type:"success",text:"El rol se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),k(Object(ut.b)({type:"error",text:Object(st.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,i.registerRole({variables:{roleInput:Object(x.a)(Object(x.a)({},u),{},{modules:N})}});case 16:k(Object(ut.b)({type:"success",text:"El rol se registr\xf3 correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),k(Object(ut.b)({type:"error",text:Object(st.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){if(o.data){var e=o.data.getModules.filter((function(e){return e.name!==nt.d}));w(e)}}),[o.data]),Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)("form",{onSubmit:D,children:Object(Xe.jsxs)(dt.a,{container:!0,spacing:3,children:[u.id&&u.name===nt.i?"":Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Ot.a,{fullWidth:!0,onChange:M,name:"name",id:"idName",label:"Role",variant:"outlined",value:u.name})}),Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Ot.a,{fullWidth:!0,onChange:M,name:"description",id:"idDescription",label:"Descripci\xf3n",multiline:!0,value:u.description,variant:"outlined"})}),!a.id&&Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsxs)(an.a,{variant:"outlined",fullWidth:!0,children:[Object(Xe.jsx)(rn.a,{id:"module-mutiple-chip-label",children:"Modulos"}),Object(Xe.jsx)(on.a,{labelId:"module-mutiple-chip-label",id:"module-mutiple-chip",multiple:!0,value:g,onChange:function(e){f(e.target.value),k(Object(ut.b)({type:"",text:""}))},input:Object(Xe.jsx)(Mr.a,{id:"select-multiple-chip"}),renderValue:function(e){return Object(Xe.jsx)("div",{className:I.chips,children:e.map((function(e){return Object(Xe.jsx)(fr.a,{label:e,className:I.chip},e)}))})},MenuProps:dc,children:C.map((function(e){var t;return((null===A||void 0===A||null===(t=A.role)||void 0===t?void 0:t.name)===nt.i||e.name!==nt.d)&&Object(Xe.jsx)(cn.a,{value:e.name,style:E(e.name,u.modules||[],S),children:e.name},e.id)}))})]})}),Object(Xe.jsxs)(xt.a,{style:{width:"100%"},children:[Object(Xe.jsx)(pt.a,{onClick:function(){return n()},color:"primary",children:"Cancelar"}),u.id?c.loading?Object(Xe.jsx)(gt.a,{}):Object(Xe.jsx)(pt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):i.loading?Object(Xe.jsx)(gt.a,{}):Object(Xe.jsx)(pt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})})},bc=n(200),Oc=n(156),mc=n.n(Oc),hc={name:"",active:!1},pc=function(e){var t=e.role,n=Object(r.useState)(hc),a=Object(j.a)(n,2),c=a[0],i=a[1],o=Object(Ke.c)(),l=Object(Ke.d)((function(e){return e.authReducer.authUser})),s=Object(Ke.d)((function(e){return e.page.user.module})),u=function(){i(Object(x.a)(Object(x.a)({},c),{},{active:!1})),o(Object(ut.b)({type:"",text:""}))},d=function(e){switch(e){case"Modulo":return Object(Xe.jsx)(bc.a,{role:t,handleClose:u});case"Rol":return Object(Xe.jsx)(jc,{role:t,handleClose:u})}},b=function(){return Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(qt,{open:c.active,dialog:t,title:c.name,component:d(c.name),handleClose:u}),t.name===nt.i?Object(Xe.jsx)(Ct.a,{align:"center",children:Object(Xe.jsx)(wt.a,{title:"Asignar modulos",onClick:function(){return i({name:"Modulo",active:!0})},children:Object(Xe.jsx)(Dt.a,{"aria-label":"modules",size:"small",children:Object(Xe.jsx)(mc.a,{})})})}):Object(Xe.jsxs)(Ct.a,{align:"right",children:[Object(Xe.jsx)(wt.a,{title:"Asignar modulos",onClick:function(){return i({name:"Modulo",active:!0})},children:Object(Xe.jsx)(Dt.a,{"aria-label":"modules",size:"small",children:Object(Xe.jsx)(mc.a,{})})}),Object(Xe.jsx)(wt.a,{title:"Editar rol",onClick:function(){return i({name:"Rol",active:!0})},children:Object(Xe.jsx)(Dt.a,{"aria-label":"role",size:"small",children:Object(Xe.jsx)($t.a,{})})})]})]})};return Object(Xe.jsx)(Xe.Fragment,{children:at(nt.e,l,s,(function(){var e;return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)(yt.a,{children:(null===l||void 0===l||null===(e=l.role)||void 0===e?void 0:e.name)===nt.i?Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",children:t.name}),Object(Xe.jsx)(Ct.a,{children:t.description}),Object(Xe.jsx)(Ct.a,{children:zt()(t.createdAt).format("DD/MM/YYYY")}),Object(Xe.jsx)(Ct.a,{children:zt()(t.updatedAt).format("DD/MM/YYYY")}),Object(Xe.jsx)(Ct.a,{align:"center",children:t.modules&&t.modules.map((function(e){return Object(Xe.jsx)(oc,{module:e},e.id)}))}),at(nt.h,l,s,b)]}):Object(Xe.jsx)(Xe.Fragment,{children:t.name===nt.i||Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",children:t.name}),Object(Xe.jsx)(Ct.a,{children:t.description}),Object(Xe.jsx)(Ct.a,{children:zt()(t.createdAt).format("DD/MM/YYYY")}),Object(Xe.jsx)(Ct.a,{children:zt()(t.updatedAt).format("DD/MM/YYYY")}),Object(Xe.jsx)(Ct.a,{align:"center",children:t.modules&&t.modules.map((function(e){return Object(Xe.jsx)(oc,{module:e},e.id)}))}),at(nt.h,l,s,b)]})})})})}))})},xc=Object(jt.a)({table:{minWidth:650}}),gc={name:"",active:!1},fc=function(){var e=Object(r.useState)([]),t=Object(j.a)(e,2),n=t[0],a=t[1],c=Object(Ke.d)((function(e){return e.authReducer.authUser})),i=Object(Ke.d)((function(e){return e.page.user.module})),o=Object(r.useState)(gc),l=Object(j.a)(o,2),s=l[0],u=l[1],d=Object(Ke.c)(),b=ic(),O=b.data,m=b.loading,h=b.error,p=xc(),g=function(){u(Object(x.a)(Object(x.a)({},s),{},{active:!1})),d(Object(ut.b)({type:"",text:""}))},f=function(e){switch(e){case"Crear":return Object(Xe.jsx)(jc,{handleClose:g})}};if(Object(r.useEffect)((function(){O&&a(O.getRoles)}),[O]),m)return Object(Xe.jsx)("h1",{children:"Cargando..."});if(h)return Object(Xe.jsx)("h1",{children:Object(st.a)(h)});return Object(Xe.jsxs)(Xe.Fragment,{children:[at(nt.f,c,i,(function(){return Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(qt,{open:s.active,title:"".concat(s.name," Rol"),component:f(s.name),handleClose:g}),Object(Xe.jsx)(wt.a,{title:"Crear Rol",children:Object(Xe.jsx)(Dt.a,{"aria-label":"add",size:"small",onClick:function(){return u({name:"Crear",active:!0})},children:Object(Xe.jsx)(Zt.a,{})})})]})})),Object(Xe.jsx)(Jt.a,{style:{whiteSpace:"nowrap"},component:Ht.a,children:Object(Xe.jsxs)(Vt.a,{className:p.table,size:"small","aria-label":"a dense table",children:[Object(Xe.jsx)(Gt.a,{children:Object(Xe.jsxs)(yt.a,{children:[Object(Xe.jsx)(Ct.a,{children:"Rol"}),Object(Xe.jsx)(Ct.a,{children:"Descripci\xf3n"}),Object(Xe.jsx)(Ct.a,{children:"Fecha creada"}),Object(Xe.jsx)(Ct.a,{children:"Fecha modificada"}),Object(Xe.jsx)(Ct.a,{align:"center",children:"Modulos"}),at(nt.h,c,i,(function(){return Object(Xe.jsx)(Ct.a,{align:"right",children:"Opciones"})}))]})}),Object(Xe.jsx)(Kt.a,{children:n.map((function(e){return Object(Xe.jsx)(pc,{role:e},e.id)}))})]})})]})},vc=Object(O.gql)(ve||(ve=Object(b.a)(["\n  query getServices {\n    getServices {\n      id\n      name\n      description\n      price\n      createdAt\n      updatedAt\n      category {\n        id\n        name\n      }\n    }\n  }\n"]))),yc=Object(O.gql)(ye||(ye=Object(b.a)(["\n  mutation updateService($serviceInput: UpdateServiceInput!) {\n    updateService(serviceInput: $serviceInput) {\n      id\n      name\n      description\n      price\n      category {\n        id\n        name\n      }\n    }\n  }\n"]))),Cc=Object(O.gql)(Ce||(Ce=Object(b.a)(["\n  mutation registerService($serviceInput: CreateServiceInput!) {\n    registerService(serviceInput: $serviceInput) {\n      id\n      name\n      description\n      price\n      category {\n        id\n        name\n      }\n    }\n  }\n"]))),wc={type:"",text:""},Sc=function(e){var t,n=e.handleClose,a=e.service,c={id:(null===a||void 0===a?void 0:a.id)||"",name:(null===a||void 0===a?void 0:a.name)||"",description:(null===a||void 0===a?void 0:a.description)||"",price:(null===a||void 0===a?void 0:a.price)||0,category:(null===a||void 0===a||null===(t=a.category)||void 0===t?void 0:t.name)||""},i=Object(r.useState)(c.id?c:{name:"",price:0,category:""}),o=Object(j.a)(i,2),l=o[0],s=o[1],u=Object(r.useState)([]),d=Object(j.a)(u,2),b=d[0],m=d[1],g=sn().data,f=Object(Ke.c)(),v=function(){var e=Object(O.useMutation)(yc,{refetchQueries:function(){return[{query:vc}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{updateService:n,error:a.error,loading:a.loading}}(),y=function(){var e=Object(O.useMutation)(Cc,{refetchQueries:function(){return[{query:vc}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{registerService:n,error:a.error,loading:a.loading}}(),C=function(e){s(Object(x.a)(Object(x.a)({},l),{},Object(rt.a)({},e.target.name,e.target.value))),f(Object(ut.b)(wc))},w=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!l.id){e.next=13;break}return e.prev=2,e.next=5,v.updateService({variables:{serviceInput:Object(x.a)(Object(x.a)({},l),{},{price:Number(l.price)})}});case 5:f(Object(ut.b)({type:"success",text:"El servicio se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),f(Object(ut.b)({type:"error",text:Object(st.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,y.registerService({variables:{serviceInput:Object(x.a)(Object(x.a)({},l),{},{price:Number(l.price)})}});case 16:f(Object(ut.b)({type:"success",text:"El servicio ha sido registrada correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),f(Object(ut.b)({type:"error",text:Object(st.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){g&&m(g.getCategorys)}),[g]),Object(Xe.jsx)("form",{onSubmit:w,children:Object(Xe.jsxs)(dt.a,{container:!0,spacing:3,children:[Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsxs)(an.a,{variant:"outlined",fullWidth:!0,children:[Object(Xe.jsx)(rn.a,{id:"idCategory",children:"Categoria"}),Object(Xe.jsx)(on.a,{labelId:"Categoria",id:"idCategory",value:l.category,onChange:function(e){s(Object(x.a)(Object(x.a)({},l),{},Object(rt.a)({},e.target.name,e.target.value))),f(Object(ut.b)(wc))},label:"Categoria",name:"category",children:b.map((function(e){return Object(Xe.jsx)(cn.a,{value:e.name,children:e.name},e.id)}))})]})}),Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Ot.a,{fullWidth:!0,onChange:C,name:"name",autoComplete:"off",id:"idName",label:"Servicio",variant:"outlined",value:l.name})}),Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Ot.a,{fullWidth:!0,onChange:C,name:"description",autoComplete:"off",id:"idDescription",label:"Descripci\xf3n",variant:"outlined",multiline:!0,value:l.description})}),Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Ot.a,{fullWidth:!0,onChange:C,name:"price",autoComplete:"off",id:"idPrice",label:"Precio",variant:"outlined",value:l.price,InputProps:{startAdornment:Object(Xe.jsx)(Pn.a,{position:"start",children:"S/"})}})}),Object(Xe.jsxs)(xt.a,{style:{width:"100%"},children:[Object(Xe.jsx)(pt.a,{onClick:function(){return n()},color:"primary",children:"Cancelar"}),l.id?v.loading?Object(Xe.jsx)(gt.a,{}):Object(Xe.jsx)(pt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):y.loading?Object(Xe.jsx)(gt.a,{}):Object(Xe.jsx)(pt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})},kc=Object(O.gql)(we||(we=Object(b.a)(["\n  mutation deleteService($id: String!) {\n    deleteService(id: $id)\n  }\n"]))),Ic={type:"",text:""},Ac={name:"",active:!1},Mc=function(e){var t=e.service,n=Object(Ke.d)((function(e){return e.authReducer.authUser})),a=Object(Ke.d)((function(e){return e.page.user.module})),c=Object(r.useState)(Ac),i=Object(j.a)(c,2),o=i[0],l=i[1],s=Object(Ke.c)(),u=function(){var e=Object(O.useMutation)(kc,{refetchQueries:function(){return[{query:vc}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{deleteService:n,error:a.error,loading:a.loading}}(),d=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.deleteService({variables:{id:t}});case 3:e.next=10;break;case 5:e.prev=5,e.t0=e.catch(0),l({name:"error",active:!0}),s(Object(ut.b)({type:"error",text:Object(st.a)(e.t0)})),o.active,o.name;case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){l(Ac),s(Object(ut.b)(Ic))},m=function(){return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)(wt.a,{title:"Editar Servicio",onClick:function(){return l({name:"Servicio",active:!0})},children:Object(Xe.jsx)(Dt.a,{"aria-label":"service",size:"small",children:Object(Xe.jsx)($t.a,{})})})})},x=function(){return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)(wt.a,{title:"Eliminar egreso",onClick:function(){return d(t.id)},children:Object(Xe.jsx)(Dt.a,{"aria-label":"egress",size:"small",children:Object(Xe.jsx)(Tt.a,{})})})})};return Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(qt,{open:o.active,dialog:t,title:o.name,component:function(e){switch(e){case"Servicio":return Object(Xe.jsx)(Sc,{service:t,handleClose:b})}}(o.name),handleClose:b}),at(nt.e,n,a,(function(){return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsxs)(yt.a,{children:[Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",children:t.category.name}),Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",children:t.name}),Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",children:Dn(t.price)}),Object(Xe.jsx)(Ct.a,{children:zt()(t.createdAt).format("DD/MM/YYYY")}),Object(Xe.jsx)(Ct.a,{children:zt()(t.updatedAt).format("DD/MM/YYYY")}),Object(Xe.jsxs)(Ct.a,{align:"right",children:[at(nt.h,n,a,m),at(nt.g,n,a,x)]})]})})}))]})},Nc={type:"",text:""},Ec={name:"",active:!1},Dc=function(){var e=Object(Ke.d)((function(e){return e.authReducer.authUser})),t=Object(Ke.d)((function(e){return e.page.user.module})),n=Object(r.useState)(Ec),a=Object(j.a)(n,2),c=a[0],i=a[1],o=Object(Ke.c)(),l=function(){var e=Object(O.useQuery)(vc);return{data:e.data,error:e.error,loading:e.loading}}(),s=l.data,u=l.loading,d=l.error,b=Object(r.useState)([]),m=Object(j.a)(b,2),h=m[0],p=m[1],x=function(){i(Ec),o(Object(ut.b)(Nc))},g=function(e){switch(e){case"Crear":return Object(Xe.jsx)(Sc,{handleClose:x})}};if(Object(r.useEffect)((function(){s&&p(s.getServices)}),[s]),u)return Object(Xe.jsx)("h1",{children:"Cargando..."});if(d)return Object(Xe.jsx)("h1",{children:Object(st.a)(d)});return Object(Xe.jsxs)(Xe.Fragment,{children:[at(nt.f,e,t,(function(){return Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(qt,{open:c.active,title:"".concat(c.name," Servicio"),component:g(c.name),handleClose:x}),Object(Xe.jsx)(wt.a,{title:"Crear Servicio",children:Object(Xe.jsx)(Dt.a,{"aria-label":"add",size:"small",onClick:function(){return i({name:"Crear",active:!0})},children:Object(Xe.jsx)(Zt.a,{})})})]})})),Object(Xe.jsx)(Jt.a,{component:Ht.a,style:{whiteSpace:"nowrap",marginTop:10},children:Object(Xe.jsxs)(Vt.a,{size:"small","aria-label":"a dense table",children:[Object(Xe.jsx)(Gt.a,{children:Object(Xe.jsxs)(yt.a,{children:[Object(Xe.jsx)(Ct.a,{children:"Categoria"}),Object(Xe.jsx)(Ct.a,{children:"Servicio"}),Object(Xe.jsx)(Ct.a,{children:"Precio"}),Object(Xe.jsx)(Ct.a,{children:"Fecha creada"}),Object(Xe.jsx)(Ct.a,{children:"Fecha modificada"}),Object(Xe.jsx)(Ct.a,{align:"right",children:"Opciones"})]})}),Object(Xe.jsx)(Kt.a,{children:h.map((function(e){return Object(Xe.jsx)(Mc,{service:e},e.id)}))})]})})]})},Rc=Object(O.gql)(Se||(Se=Object(b.a)(["\n  query getUsers {\n    getUsers {\n      id\n      name\n      lastName\n      email\n      status\n      createdAt\n      updatedAt\n      role {\n        name\n        description\n        modules {\n          access {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n"]))),Fc=n(201),Uc=n.n(Fc),Yc=Object(O.gql)(ke||(ke=Object(b.a)(["\n  mutation updateRole($userInput: UserUpdateInput!) {\n    updateUser(userInput: $userInput) {\n      id\n      name\n      lastName\n      email\n      role {\n        id\n        name\n      }\n    }\n  }\n"]))),qc=Object(O.gql)(Ie||(Ie=Object(b.a)(["\n  mutation registerUser($userInput: UserInput!) {\n    registerUser(userInput: $userInput) {\n      id\n      name\n      lastName\n      email\n      createdAt\n      updatedAt\n      role {\n        name\n      }\n    }\n  }\n"]))),Pc=function(e){var t,n,a,c=e.user,i=e.handleClose,o={id:(null===c||void 0===c?void 0:c.id)||"",name:(null===c||void 0===c?void 0:c.name)||"",lastName:(null===c||void 0===c?void 0:c.lastName)||"",role:{name:(null===c||void 0===c||null===(t=c.role)||void 0===t?void 0:t.name)||""},email:(null===c||void 0===c?void 0:c.email)||""},l=Object(r.useState)(o.id?o:{name:"",lastName:"",role:{name:""},email:"",password:"",confirmPassword:""}),s=Object(j.a)(l,2),u=s[0],d=s[1],b=Object(r.useState)([]),m=Object(j.a)(b,2),g=m[0],f=m[1],v=Object(Ke.c)(),y=function(){var e=Object(O.useMutation)(Yc),t=Object(j.a)(e,2),n=t[0],a=t[1];return{updateUser:n,error:a.error,loading:a.loading}}(),C=ic().data,w=function(){var e=Object(O.useMutation)(qc,{refetchQueries:function(){return[{query:Rc}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{registerUser:n,error:a.error,loading:a.loading}}(),S=Object(Ke.d)((function(e){return e.authReducer.authUser})),k=function(e){d(Object(x.a)(Object(x.a)({},u),{},Object(rt.a)({},e.target.name,e.target.value))),v(Object(ut.b)({type:"",text:""}))},I=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!u.id){e.next=13;break}return e.prev=2,e.next=5,y.updateUser({variables:{userInput:u}});case 5:v(Object(ut.b)({type:"success",text:"El usuario se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),v(Object(ut.b)({type:"error",text:Object(st.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,w.registerUser({variables:{userInput:u}});case 16:v(Object(ut.b)({type:"success",text:"El usuario ha sido registrado correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),v(Object(ut.b)({type:"error",text:Object(st.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){C&&f(C.getRoles)}),[C]),Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)("form",{onSubmit:I,children:Object(Xe.jsxs)(dt.a,{container:!0,spacing:3,children:[Object(Xe.jsx)(dt.a,{item:!0,xs:6,children:Object(Xe.jsx)(Ot.a,{fullWidth:!0,onChange:k,name:"name",autoComplete:"off",id:"idNombres",label:"Nombres",variant:"outlined",value:u.name})}),Object(Xe.jsx)(dt.a,{item:!0,xs:6,children:Object(Xe.jsx)(Ot.a,{fullWidth:!0,onChange:k,name:"lastName",autoComplete:"off",id:"idApellidos",label:"Apellidos",value:u.lastName,variant:"outlined"})}),(null===(n=u.role)||void 0===n?void 0:n.name)===nt.i||Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsxs)(an.a,{variant:"outlined",fullWidth:!0,children:[Object(Xe.jsx)(rn.a,{id:"idRole",children:"Rol"}),Object(Xe.jsx)(on.a,{labelId:"Rol",id:"idRole",value:null===(a=u.role)||void 0===a?void 0:a.name,onChange:function(e){d(Object(x.a)(Object(x.a)({},u),{},Object(rt.a)({},e.target.name,{name:e.target.value}))),v(Object(ut.b)({type:"",text:""}))},label:"Rol",name:"role",children:g.map((function(e){var t;return((null===S||void 0===S||null===(t=S.role)||void 0===t?void 0:t.name)===nt.i||e.name!==nt.i)&&Object(Xe.jsx)(cn.a,{value:e.name,children:e.name},e.id)}))})]})})}),Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Ot.a,{fullWidth:!0,onChange:k,name:"email",autoComplete:"off",id:"idEmail",label:"Correo",value:u.email,variant:"outlined",InputProps:{readOnly:!!u.id}})}),u.id?"":Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Ot.a,{fullWidth:!0,onChange:k,name:"password",autoComplete:"off",id:"idPassword",label:"Contrase\xf1a",value:u.password,variant:"outlined",type:"password"})}),Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Ot.a,{fullWidth:!0,onChange:k,name:"confirmPassword",autoComplete:"off",id:"idConfirmPassword",label:"Repetir contrase\xf1a",value:u.confirmPassword,variant:"outlined",type:"password"})})]}),Object(Xe.jsxs)(xt.a,{style:{width:"100%"},children:[Object(Xe.jsx)(pt.a,{onClick:function(){return i()},color:"primary",children:"Cancelar"}),u.id?y.loading?Object(Xe.jsx)(gt.a,{}):Object(Xe.jsx)(pt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):w.loading?Object(Xe.jsx)(gt.a,{}):Object(Xe.jsx)(pt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})})},zc=n(202),Bc=n.n(zc),$c=Object(O.gql)(Ae||(Ae=Object(b.a)(["\n  mutation activateUser($id: String!) {\n    activateUser(id: $id) {\n      id\n      status\n    }\n  }\n"]))),Lc=Object(O.gql)(Me||(Me=Object(b.a)(["\n  mutation desactivateUser($id: String!) {\n    desactivateUser(id: $id) {\n      id\n      status\n    }\n  }\n"]))),Tc=n(203),Wc=n.n(Tc),Qc=Object(O.gql)(Ne||(Ne=Object(b.a)(["\n  mutation changePasswordToAdmin($authInput: AuthChangePasswordInputToAdmin!) {\n    changePasswordToAdmin(authInput: $authInput)\n  }\n"]))),_c=(Object(O.gql)(Ee||(Ee=Object(b.a)(["\n  mutation changePasswordToUser($authInput: AuthChangePasswordInputToUser!) {\n    changePasswordToUser(authInput: $authInput)\n  }\n"]))),function(e){var t=e.user,n=e.handleClose,a={id:(null===t||void 0===t?void 0:t.id)||"",newPassword:"",confirmNewPassword:""},c=Object(r.useState)(a),i=Object(j.a)(c,2),o=i[0],l=i[1],s=Object(Ke.c)(),u=function(){var e=Object(O.useMutation)(Qc),t=Object(j.a)(e,2),n=t[0],a=t[1];return{changePasswordToAdmin:n,error:a.error,loading:a.loading}}(),d=u.changePasswordToAdmin,b=(u.error,u.loading),m=function(e){l(Object(x.a)(Object(x.a)({},o),{},Object(rt.a)({},e.target.name,e.target.value))),s(Object(ut.b)({type:"",text:""}))},g=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,d({variables:{authInput:o}});case 4:s(Object(ut.b)({type:"success",text:"La contrase\xf1a ha sido cambiada correctamente."})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),s(Object(ut.b)({type:"error",text:Object(st.a)(e.t0)}));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(Xe.jsx)("form",{onSubmit:g,children:Object(Xe.jsxs)(dt.a,{container:!0,spacing:3,children:[Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Ot.a,{fullWidth:!0,onChange:m,name:"newPassword",autoComplete:"off",id:"idNewPassword",label:"Nueva Contrase\xf1a",value:o.newPassword,variant:"outlined"})}),Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Ot.a,{fullWidth:!0,onChange:m,name:"confirmNewPassword",autoComplete:"off",id:"idConfirmNewPassword",label:"Confirmar nueva contrase\xf1a",value:o.confirmNewPassword,variant:"outlined"})}),Object(Xe.jsxs)(xt.a,{style:{width:"100%"},children:[Object(Xe.jsx)(pt.a,{onClick:function(){return n()},color:"primary",children:"Cancelar"}),b?Object(Xe.jsx)(gt.a,{}):Object(Xe.jsx)(pt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"})]})]})})}),Vc={name:"",active:!1},Jc=function(e){var t=e.user,n=Object(Ke.d)((function(e){return e.authReducer.authUser})),a=Object(Ke.d)((function(e){return e.page.user.module})),c=Object(r.useState)(Vc),i=Object(j.a)(c,2),o=i[0],l=i[1],s=Object(Ke.c)(),u=function(){var e=Object(O.useMutation)($c),t=Object(j.a)(e,2),n=t[0],a=t[1];return{activateUser:n,error:a.error,loading:a.loading}}(),d=function(){var e=Object(O.useMutation)(Lc),t=Object(j.a)(e,2),n=t[0],a=t[1];return{desactivateUser:n,error:a.error,loading:a.loading}}(),b=function(){l(Object(x.a)(Object(x.a)({},o),{},{active:!1})),s(Object(ut.b)({type:"",text:""}))},m=function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.desactivateUser({variables:{id:t.id}});case 3:e.next=10;break;case 5:e.prev=5,e.t0=e.catch(0),l({name:"error",active:!0}),s(Object(ut.b)({type:"error",text:Object(st.a)(e.t0)})),o.active,o.name;case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),g=function(e){switch(e){case"Usuario":return Object(Xe.jsx)(Pc,{user:t,handleClose:b});case"Contrase\xf1a":return Object(Xe.jsx)(_c,{user:t,handleClose:b})}},f=function(){var e;return Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(qt,{open:o.active,dialog:t,title:o.name,component:g(o.name),handleClose:b}),Object(Xe.jsxs)(Ct.a,{align:"right",children:[(null===(e=t.role)||void 0===e?void 0:e.name)===nt.i?"":Object(Xe.jsx)(Xe.Fragment,{children:2===t.status?Object(Xe.jsx)(wt.a,{title:"Activar usuario",onClick:function(){return u.activateUser({variables:{id:t.id}})},children:Object(Xe.jsx)(Dt.a,{"aria-label":"desactivate",size:"small",color:"secondary",children:Object(Xe.jsx)(Uc.a,{style:{color:"#F44336"}})})}):1===t.status?Object(Xe.jsx)(wt.a,{title:"Desactivar usuario",onClick:m,children:Object(Xe.jsx)(Dt.a,{"aria-label":"activate",size:"small",style:{color:"#4CAF50"},children:Object(Xe.jsx)(Bc.a,{style:{color:"#4CAF50"}})})}):""}),Object(Xe.jsx)(wt.a,{title:"Editar usuario",onClick:function(){return l({name:"Usuario",active:!0})},children:Object(Xe.jsx)(Dt.a,{"aria-label":"role",size:"small",children:Object(Xe.jsx)($t.a,{})})}),Object(Xe.jsx)(wt.a,{title:"Cambiar contrase\xf1a",onClick:function(){return l({name:"Contrase\xf1a",active:!0})},children:Object(Xe.jsx)(Dt.a,{"aria-label":"password",size:"small",children:Object(Xe.jsx)(Wc.a,{})})})]})]})};return Object(Xe.jsx)(Xe.Fragment,{children:at(nt.e,n,a,(function(){var e,r,c,i;return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)(yt.a,{children:(null===n||void 0===n||null===(e=n.role)||void 0===e?void 0:e.name)===nt.i?Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsxs)(Ct.a,{component:"th",scope:"row",children:[t.name," ",t.lastName]}),Object(Xe.jsx)(Ct.a,{children:null===(r=t.role)||void 0===r?void 0:r.name}),Object(Xe.jsx)(Ct.a,{children:t.email}),Object(Xe.jsx)(Ct.a,{children:zt()(t.createdAt).format("DD/MM/YYYY")}),Object(Xe.jsx)(Ct.a,{children:zt()(t.updatedAt).format("DD/MM/YYYY")}),at(nt.h,n,a,f)]}):Object(Xe.jsx)(Xe.Fragment,{children:(null===(c=t.role)||void 0===c?void 0:c.name)===nt.i||Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsxs)(Ct.a,{component:"th",scope:"row",children:[t.name," ",t.lastName]}),Object(Xe.jsx)(Ct.a,{children:null===(i=t.role)||void 0===i?void 0:i.name}),Object(Xe.jsx)(Ct.a,{children:t.email}),Object(Xe.jsx)(Ct.a,{children:zt()(t.createdAt).format("DD/MM/YYYY")}),Object(Xe.jsx)(Ct.a,{children:zt()(t.updatedAt).format("DD/MM/YYYY")}),at(nt.h,n,a,f)]})})})})}))})},Gc=Object(jt.a)({table:{minWidth:650}}),Kc={name:"",active:!1},Hc=function(){var e=Object(Ke.d)((function(e){return e.authReducer.authUser})),t=Object(Ke.d)((function(e){return e.page.user.module})),n=Gc(),a=Object(r.useState)([]),c=Object(j.a)(a,2),i=c[0],o=c[1],l=Object(r.useState)(Kc),s=Object(j.a)(l,2),u=s[0],d=s[1],b=function(){var e=Object(O.useQuery)(Rc);return{data:e.data,loading:e.loading,error:e.error}}(),m=b.data,h=b.loading,p=b.error,g=Object(Ke.c)(),f=function(){d(Object(x.a)(Object(x.a)({},u),{},{active:!1})),g(Object(ut.b)({type:"",text:""}))},v=function(e){switch(e){case"Crear":return Object(Xe.jsx)(Pc,{handleClose:f})}};if(Object(r.useEffect)((function(){m&&o(m.getUsers)}),[m]),h)return Object(Xe.jsx)("h1",{children:"Cargando..."});if(p)return Object(Xe.jsx)("h1",{children:Object(st.a)(p)});return Object(Xe.jsxs)(Xe.Fragment,{children:[at(nt.f,e,t,(function(){return Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(qt,{open:u.active,title:"".concat(u.name," Usuario"),component:v(u.name),handleClose:f}),Object(Xe.jsx)(wt.a,{title:"Crear Usuario",children:Object(Xe.jsx)(Dt.a,{"aria-label":"add",size:"small",onClick:function(){return d({name:"Crear",active:!0})},children:Object(Xe.jsx)(Zt.a,{})})})]})})),Object(Xe.jsx)(Jt.a,{component:Ht.a,style:{marginTop:10,whiteSpace:"nowrap"},children:Object(Xe.jsxs)(Vt.a,{className:n.table,size:"small","aria-label":"a dense table",children:[Object(Xe.jsx)(Gt.a,{children:Object(Xe.jsxs)(yt.a,{children:[Object(Xe.jsx)(Ct.a,{children:"Nombres"}),Object(Xe.jsx)(Ct.a,{children:"Rol"}),Object(Xe.jsx)(Ct.a,{children:"Correo"}),Object(Xe.jsx)(Ct.a,{children:"Fecha creada"}),Object(Xe.jsx)(Ct.a,{children:"Fecha modificada"}),at(nt.h,e,t,(function(){return Object(Xe.jsx)(Ct.a,{align:"right",children:"Opciones"})}))]})}),Object(Xe.jsx)(Kt.a,{children:i.map((function(e){return Object(Xe.jsx)(Jc,{user:e},e.id)}))})]})})]})},Xc=Object(O.gql)(De||(De=Object(b.a)(["\n  query getVehicles {\n    getVehicles {\n      id\n      customer {\n        id\n        name\n        lastName\n        document\n        numDocument\n      }\n      createdBy {\n        id\n        name\n      }\n      updatedBy {\n        id\n        name\n      }\n      device {\n        id\n        name\n      }\n      billing {\n        id\n        name\n        day\n      }\n      sim\n      platform\n      plate\n      nroGPS\n      billigStart\n      billigEnd\n      createdAt\n      updatedAt\n    }\n  }\n"]))),Zc=Object(O.gql)(Re||(Re=Object(b.a)(["\n  mutation deleteVehicle($id: String!) {\n    deleteVehicle(id: $id)\n  }\n"]))),ei=Object(O.gql)(Fe||(Fe=Object(b.a)(["\n  mutation registerVehicle($vehicleInput: CreateVehicleInput!) {\n    registerVehicle(vehicleInput: $vehicleInput) {\n      id\n      customer {\n        id\n        name\n        lastName\n        document\n        numDocument\n      }\n      createdBy {\n        id\n        name\n      }\n      updatedBy {\n        id\n        name\n      }\n      device {\n        id\n        name\n      }\n      billing {\n        id\n        name\n      }\n      sim\n      platform\n      plate\n      nroGPS\n      billigStart\n      billigEnd\n      createdAt\n      updatedAt\n    }\n  }\n"]))),ti=Object(O.gql)(Ue||(Ue=Object(b.a)(["\n  mutation updateVehicle($vehicleInput: UpdateVehicleInput!) {\n    updateVehicle(vehicleInput: $vehicleInput) {\n      id\n      customer {\n        id\n        name\n        lastName\n        document\n        numDocument\n      }\n      createdBy {\n        id\n        name\n      }\n      updatedBy {\n        id\n        name\n      }\n      device {\n        id\n        name\n      }\n      billing {\n        id\n        name\n      }\n      sim\n      platform\n      plate\n      nroGPS\n      billigStart\n      billigEnd\n      createdAt\n      updatedAt\n    }\n  }\n"]))),ni=function(e){var t,n,a,c,i,o,l=e.handleClose,s=e.vehicle,u=zt()().utc().local().format("YYYY-MM-DD"),d={customer:"",device:"",billing:"",plate:"",nroGPS:"",platform:"",sim:"",billigStart:u},b={id:(null===s||void 0===s?void 0:s.id)||"",customer:(null===s||void 0===s||null===(t=s.customer)||void 0===t?void 0:t.id)||"",device:(null===s||void 0===s||null===(n=s.device)||void 0===n?void 0:n.name)||"",billing:(null===s||void 0===s||null===(a=s.billing)||void 0===a?void 0:a.name)||"",plate:(null===s||void 0===s?void 0:s.plate)||"",nroGPS:(null===s||void 0===s?void 0:s.nroGPS)||"",platform:(null===s||void 0===s?void 0:s.platform)||"",sim:(null===s||void 0===s?void 0:s.sim)||"",billigStart:zt()(null===s||void 0===s?void 0:s.billigStart).format("YYYY-MM-DD")||u},m=Object(r.useState)(b.id?b:d),g=Object(j.a)(m,2),f=g[0],v=g[1],y=Object(Ke.c)(),C=function(){var e=Object(O.useMutation)(ti,{refetchQueries:function(){return[{query:Xc}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{updateVehicle:n,error:a.error,loading:a.loading}}(),w=function(){var e=Object(O.useMutation)(ei,{refetchQueries:function(){return[{query:Xc}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{registerVehicle:n,error:a.error,loading:a.loading}}(),S=Object(r.useState)([]),k=Object(j.a)(S,2),I=k[0],A=k[1],M=Object(r.useState)({name:"",lastName:"",document:"",numDocument:"",cellphone_1:"",username:"",password:""}),N=Object(j.a)(M,2),E=N[0],D=N[1],R=Object(r.useState)([]),F=Object(j.a)(R,2),U=F[0],Y=F[1],q=Object(r.useState)({name:""}),P=Object(j.a)(q,2),z=P[0],B=P[1],$=Object(r.useState)([]),L=Object(j.a)($,2),T=L[0],W=L[1],Q=Object(r.useState)({name:""}),_=Object(j.a)(Q,2),V=_[0],J=_[1],G=Na(),K=Ha(),H=it(),X=function(e){v(Object(x.a)(Object(x.a)({},f),{},Object(rt.a)({},e.target.name,e.target.value)))},Z=function(e){v(Object(x.a)(Object(x.a)({},f),{},Object(rt.a)({},e.target.name,e.target.value)))},ee=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!f.id){e.next=13;break}return e.prev=2,e.next=5,C.updateVehicle({variables:{vehicleInput:f}});case 5:y(Object(ut.b)({type:"success",text:"El vehiculo se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),y(Object(ut.b)({type:"error",text:Object(st.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,w.registerVehicle({variables:{vehicleInput:f}});case 16:y(Object(ut.b)({type:"success",text:"El vehiculo ha sido registrado correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),y(Object(ut.b)({type:"error",text:Object(st.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){var e,t,n,a,r,c,i,o,l,u,d;G.data&&A(null===G||void 0===G||null===(t=G.data)||void 0===t?void 0:t.getCustomer);K.data&&Y(null===K||void 0===K||null===(n=K.data)||void 0===n?void 0:n.getDevices);H.data&&W(null===H||void 0===H||null===(a=H.data)||void 0===a?void 0:a.getBillings);(null===(e=I[0])||void 0===e?void 0:e.name)&&(D(Object(x.a)(Object(x.a)({},E),{},{name:f.id?null===s||void 0===s?void 0:s.customer.name:null===(r=I[0])||void 0===r?void 0:r.name,lastName:f.id?null===s||void 0===s?void 0:s.customer.lastName:null===(c=I[0])||void 0===c?void 0:c.lastName})),B(Object(x.a)(Object(x.a)({},z),{},{name:f.id?null===s||void 0===s?void 0:s.device.name:null===(i=U[0])||void 0===i?void 0:i.name})),J(Object(x.a)(Object(x.a)({},V),{},{name:f.id?null===s||void 0===s?void 0:s.billing.name:null===(o=T[0])||void 0===o?void 0:o.name})),v(Object(x.a)(Object(x.a)({},f),{},{customer:f.id?null===s||void 0===s?void 0:s.customer.id:null===(l=I[0])||void 0===l?void 0:l.id,device:f.id?null===s||void 0===s?void 0:s.device.name:null===(u=U[0])||void 0===u?void 0:u.name,billing:f.id?null===s||void 0===s?void 0:s.billing.name:null===(d=T[0])||void 0===d?void 0:d.name,platform:f.id?s.platform:"PREMIUM",sim:f.id?s.sim:"MOVISTAR"})))}),[G.data,K.data,H.data,null===(c=I[0])||void 0===c?void 0:c.name,null===(i=U[0])||void 0===i?void 0:i.name,null===(o=T[0])||void 0===o?void 0:o.name]),Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)("form",{onSubmit:ee,children:Object(Xe.jsxs)(dt.a,{container:!0,spacing:3,children:[Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Un.a,{id:"idCustomer",value:{name:null===E||void 0===E?void 0:E.name,lastName:null===E||void 0===E?void 0:E.lastName,document:null===E||void 0===E?void 0:E.document,numDocument:null===E||void 0===E?void 0:E.numDocument,cellphone_1:null===E||void 0===E?void 0:E.cellphone_1,username:null===E||void 0===E?void 0:E.username,password:null===E||void 0===E?void 0:E.password},onChange:function(e,t){var n,a,r;D(Object(x.a)(Object(x.a)({},E),{},{name:t?t.name:null===(n=I[0])||void 0===n?void 0:n.name,lastName:t?t.lastName:null===(a=I[0])||void 0===a?void 0:a.lastName})),v(Object(x.a)(Object(x.a)({},f),{},{customer:"".concat(t?t.id:null===(r=I[0])||void 0===r?void 0:r.id)}))},options:I,getOptionLabel:function(e){return e.name?"".concat(e.name," ").concat(e.lastName):""},getOptionSelected:function(e,t){var n,a;return t.name||(t=Object(x.a)(Object(x.a)({},t),{},{name:null===(n=I[0])||void 0===n?void 0:n.name,lastName:null===(a=I[0])||void 0===a?void 0:a.lastName})),"".concat(e.name," ").concat(e.lastName)==="".concat(t.name," ").concat(t.lastName)},loading:G.loading,loadingText:"Cargando...",noOptionsText:"No hay resultados",renderInput:function(e){return Object(Xe.jsx)(Ot.a,Object(x.a)(Object(x.a)({},e),{},{name:"customer",label:"Cliente",variant:"outlined"}))}})}),Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Un.a,{id:"idDevice",value:{name:null===z||void 0===z?void 0:z.name},onChange:function(e,t){var n,a;B(Object(x.a)(Object(x.a)({},z),{},{name:t?t.name:null===(n=U[0])||void 0===n?void 0:n.name})),v(Object(x.a)(Object(x.a)({},f),{},{device:"".concat(t?t.name:null===(a=U[0])||void 0===a?void 0:a.name)}))},options:U,getOptionLabel:function(e){return e.name?e.name:""},getOptionSelected:function(e,t){var n;return t.name||(t=Object(x.a)(Object(x.a)({},t),{},{name:null===(n=U[0])||void 0===n?void 0:n.name})),e.name===t.name},loading:K.loading,loadingText:"Cargando...",noOptionsText:"No hay resultados",renderInput:function(e){return Object(Xe.jsx)(Ot.a,Object(x.a)(Object(x.a)({},e),{},{name:"device",label:"Dispositivo",variant:"outlined"}))}})}),Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(Un.a,{id:"idBilling",value:{name:null===V||void 0===V?void 0:V.name},onChange:function(e,t){var n,a;J(Object(x.a)(Object(x.a)({},V),{},{name:t?t.name:null===(n=T[0])||void 0===n?void 0:n.name})),v(Object(x.a)(Object(x.a)({},f),{},{billing:"".concat(t?t.name:null===(a=T[0])||void 0===a?void 0:a.name)}))},options:T,getOptionLabel:function(e){return e.name?e.name:""},getOptionSelected:function(e,t){var n;return t.name||(t=Object(x.a)(Object(x.a)({},t),{},{name:null===(n=T[0])||void 0===n?void 0:n.name})),e.name===t.name},loading:H.loading,loadingText:"Cargando...",noOptionsText:"No hay resultados",renderInput:function(e){return Object(Xe.jsx)(Ot.a,Object(x.a)(Object(x.a)({},e),{},{name:"billing",label:"Plan de facturaci\xf3n",variant:"outlined"}))}})}),Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsxs)(Ot.a,{id:"idPlatform",select:!0,label:"Plataforma",fullWidth:!0,value:f.platform,onChange:Z,name:"platform",variant:"outlined",children:[Object(Xe.jsx)(cn.a,{value:"PREMIUM",children:"PREMIUM"}),Object(Xe.jsx)(cn.a,{value:"STANDAR",children:"STANDAR"}),Object(Xe.jsx)(cn.a,{value:"SIN PLATAFORMA",children:"SIN PLATAFORMA"})]})}),Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(ht,{fullWidth:!0,type:"text",onChange:X,name:"plate",autoComplete:"off",id:"idPlate",label:"Placa",variant:"filled",value:f.plate})}),Object(Xe.jsx)(dt.a,{item:!0,xs:6,children:Object(Xe.jsxs)(Ot.a,{id:"idChip",select:!0,label:"Chip",fullWidth:!0,name:"sim",value:f.sim,onChange:Z,variant:"outlined",children:[Object(Xe.jsx)(cn.a,{value:"CLARO",children:"CLARO"}),Object(Xe.jsx)(cn.a,{value:"MOVISTAR",children:"MOVISTAR"}),Object(Xe.jsx)(cn.a,{value:"INKACEL",children:"INKACEL"}),Object(Xe.jsx)(cn.a,{value:"MULTIOPERADOR",children:"MULTIOPERADOR"})]})}),Object(Xe.jsx)(dt.a,{item:!0,xs:6,children:Object(Xe.jsx)(ht,{fullWidth:!0,type:"text",onChange:X,name:"nroGPS",autoComplete:"off",id:"idNro",label:"Nro de GPS",variant:"filled",value:f.nroGPS})}),Object(Xe.jsx)(dt.a,{item:!0,xs:12,children:Object(Xe.jsx)(ht,{fullWidth:!0,type:"date",onChange:X,name:"billigStart",autoComplete:"off",id:"idBilligStart",label:"Fecha de inicio",variant:"filled",value:f.billigStart})}),Object(Xe.jsxs)(xt.a,{style:{width:"100%"},children:[Object(Xe.jsx)(pt.a,{onClick:l,color:"primary",children:"Cancelar"}),f.id?C.loading?Object(Xe.jsx)(gt.a,{}):Object(Xe.jsx)(pt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):w.loading?Object(Xe.jsx)(gt.a,{}):Object(Xe.jsx)(pt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})})},ai=n(205),ri=n.n(ai),ci=n(287),ii=Object(O.gql)(Ye||(Ye=Object(b.a)(["\n  mutation registerRenew($renewInput: CreateRenewInput!) {\n    registerRenew(renewInput: $renewInput) {\n      id\n      registeredBy {\n        id\n        name\n        lastName\n      }\n      updatedBy {\n        id\n        name\n        lastName\n      }\n      vehicle {\n        id\n        plate\n      }\n      billing {\n        id\n        name\n      }\n      expirationDate\n      renovationStart\n      renovationEnd\n      createdAt\n      updatedAt\n    }\n  }\n"]))),oi=n(346),li=n(353),si=n(204),ui=n.n(si),di=Object(O.gql)(qe||(qe=Object(b.a)(["\n  query getBillingByName($name: String!) {\n    getBillingByName(name: $name) {\n      id\n      name\n      day\n    }\n  }\n"]))),ji=function(e){var t=e.handleClose,n=e.vehicle,a=Object(r.useState)(!1),c=Object(j.a)(a,2),i=c[0],o=c[1],l=Object(r.useState)([]),s=Object(j.a)(l,2),u=s[0],d=s[1],b=Object(Ke.c)(),m=Object(r.useState)({vehicle:n.plate,billing:n.billing.name}),g=Object(j.a)(m,2),f=g[0],v=g[1],y=Object(r.useState)({day:n.billing.day}),C=Object(j.a)(y,2),w=C[0],S=C[1],k=it(),I=function(){var e=Object(O.useLazyQuery)(di),t=Object(j.a)(e,2),n=t[0],a=t[1];return{getBillingByName:n,data:a.data,error:a.error,loading:a.loading}}(),A=function(){var e=Object(O.useMutation)(ii,{refetchQueries:function(){return[{query:Xc}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{registerRenew:n,error:a.error,loading:a.loading}}(),M=Object(oi.a)(new Date),N=Object(li.a)(M,{days:w.day}),E=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.getBillingByName({variables:{name:t}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),b(Object(ut.b)({type:"error",text:Object(st.a)(e.t0)}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.registerRenew({variables:{renewInput:f}});case 3:b(Object(ut.b)({type:"success",text:"Se ha renovado correctamente."})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),b(Object(ut.b)({type:"error",text:Object(st.a)(e.t0)}));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){k.data&&d(k.data.getBillings),I.data&&S(Object(x.a)(Object(x.a)({},w),{},{day:I.data.getBillingByName.day}))}),[k.data,I.data]),Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsxs)("p",{children:["Estas apunto de renovar su inscripci\xf3n del vehiculo"," ",Object(Xe.jsx)("strong",{children:n.plate})," que pertenece a"," ",Object(Xe.jsxs)("strong",{children:[n.customer.name," ",n.customer.lastName]})," ","con n\xfamero de ",Object(Xe.jsx)("strong",{children:n.customer.document}),","," ",Object(Xe.jsx)("strong",{children:n.customer.numDocument}),"."]}),Object(Xe.jsx)("br",{}),Object(Xe.jsx)(ci.a,{}),Object(Xe.jsx)("br",{}),i?Object(Xe.jsxs)(an.a,{variant:"outlined",style:{width:300},children:[Object(Xe.jsx)(rn.a,{id:"idBilling-label",children:"Plan de facturaci\xf3n"}),Object(Xe.jsx)(on.a,{labelId:"idBilling-label",id:"idBilling",value:f.billing,onChange:function(e){v(Object(x.a)(Object(x.a)({},f),{},{billing:e.target.value}))},label:"Age",children:u.map((function(e){return Object(Xe.jsx)(cn.a,{value:e.name,children:e.name},e.id)}))})]}):Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)("label",{children:f.billing!==n.billing.name?Object(Xe.jsx)("label",{style:{background:"yellow"},children:"Cambiado a"}):"Actualmente tiene"})," ",f.billing]})," ",Object(Xe.jsx)(wt.a,{title:"Editar plan de facturaci\xf3n",onClick:function(){o(!i),E(f.billing)},children:Object(Xe.jsxs)(Dt.a,{"aria-label":"vehicle",size:"small",style:{color:"blue"},children:[i?"Guardar":"Editar",i?Object(Xe.jsx)(ui.a,{}):Object(Xe.jsx)($t.a,{})]})}),Object(Xe.jsx)("br",{}),Object(Xe.jsx)("br",{}),Object(Xe.jsxs)("div",{style:{width:"100%",height:"auto"},children:[Object(Xe.jsxs)("div",{style:{width:"50%",float:"left"},children:[Object(Xe.jsx)("label",{children:"Fecha de caducidad"})," "]}),Object(Xe.jsx)("div",{style:{width:"50%",float:"left"},children:zt()(n.billigEnd).format("DD/MM/YYYY")})]}),Object(Xe.jsx)("br",{}),Object(Xe.jsx)("br",{}),Object(Xe.jsx)(ci.a,{}),Object(Xe.jsx)("br",{}),Object(Xe.jsxs)("div",{style:{filter:i?"blur(4px)":"blur(0)",userSelect:i?"none":"text"},children:[Object(Xe.jsxs)("div",{style:{width:"100%",height:"auto"},children:[Object(Xe.jsx)("div",{style:{width:"50%",float:"left",backgroundColor:"#fff"},children:"Renueva desde"}),Object(Xe.jsx)("div",{style:{width:"50%",float:"left"},children:zt()().format("DD/MM/YYYY")})]}),Object(Xe.jsxs)("div",{style:{width:"100%",height:"auto"},children:[Object(Xe.jsx)("div",{style:{width:"50%",float:"left",backgroundColor:"#fff"},children:"\xa0"}),Object(Xe.jsxs)("div",{style:{width:"50%",float:"left"},children:[Object(Xe.jsx)("strong",{children:"+"})," ",w.day," d\xedas"]})]}),Object(Xe.jsxs)("div",{style:{width:"100%",height:"auto"},children:[Object(Xe.jsx)("div",{style:{width:"50%",float:"left",backgroundColor:"#fff"},children:"Renovando hasta"}),Object(Xe.jsx)("div",{style:{width:"50%",float:"left"},children:zt()(N).format("DD/MM/YYYY")})]})]}),Object(Xe.jsxs)(xt.a,{style:{width:"100%"},children:[Object(Xe.jsx)(pt.a,{onClick:t,color:"primary",children:"Cancelar"}),A.loading?Object(Xe.jsx)(gt.a,{}):Object(Xe.jsx)(pt.a,{onClick:D,color:"primary",autoFocus:!0,disabled:!!i,variant:"contained",children:"Aceptar"})]})]})},bi={type:"",text:""},Oi={name:"",active:!1},mi=function(e){var t=e.vehicle,n=Object(Ke.d)((function(e){return e.authReducer.authUser})),a=Object(Ke.d)((function(e){return e.page.user.module})),c=Object(r.useState)(Oi),i=Object(j.a)(c,2),o=i[0],l=i[1],s=Object(Ke.c)(),u=function(){var e=Object(O.useMutation)(Zc,{refetchQueries:function(){return[{query:Xc}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{deleteVehicle:n,error:a.error,loading:a.loading}}(),d=function(){l(Oi),s(Object(ut.b)(bi))},b=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.deleteVehicle({variables:{id:t}});case 3:e.next=10;break;case 5:e.prev=5,e.t0=e.catch(0),l({name:"error",active:!0}),s(Object(ut.b)({type:"error",text:Object(st.a)(e.t0)})),o.active,o.name;case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)(wt.a,{title:"Eliminar vehiculo",onClick:function(){return b(t.id)},children:Object(Xe.jsx)(Dt.a,{"aria-label":"vehicle",size:"small",children:Object(Xe.jsx)(Tt.a,{})})})})},x=function(){return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)(wt.a,{title:"Editar vehiclo",onClick:function(){return l({name:"Vehiculo",active:!0})},children:Object(Xe.jsx)(Dt.a,{"aria-label":"vehicle",size:"small",children:Object(Xe.jsx)($t.a,{})})})})};return Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(qt,{open:o.active,dialog:t,title:o.name,component:function(e){switch(e){case"Vehiculo":return Object(Xe.jsx)(ni,{vehicle:t,handleClose:d});case"Renovar":return Object(Xe.jsx)(ji,{vehicle:t,handleClose:d})}}(o.name),handleClose:d}),at(nt.e,n,a,(function(){return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsxs)(yt.a,{children:[Object(Xe.jsxs)(Ct.a,{component:"th",scope:"row",children:[t.customer.name," ",t.customer.lastName]}),Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",children:t.device.name}),Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",children:t.platform}),Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",children:t.billing.name}),Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",children:t.plate}),Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",children:t.sim}),Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",children:t.nroGPS}),Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",align:"center",children:zt()(t.billigStart).format("DD/MM/YYYY")}),Object(Xe.jsx)(Ct.a,{component:"th",scope:"row",align:"center",children:zt()(t.billigEnd).format("DD/MM/YYYY")}),Object(Xe.jsx)(Ct.a,{children:zt()(t.createdAt).format("DD/MM/YYYY")}),Object(Xe.jsx)(Ct.a,{children:zt()(t.updatedAt).format("DD/MM/YYYY")}),Object(Xe.jsxs)(Ct.a,{align:"right",children:[at(nt.h,n,a,x),at(nt.g,n,a,m),Object(Xe.jsx)(wt.a,{title:"Renovar vehiculo",onClick:function(){return l({name:"Renovar",active:!0})},children:Object(Xe.jsx)(Dt.a,{"aria-label":"renew",size:"small",children:Object(Xe.jsx)(ri.a,{})})})]})]})})}))]})},hi={name:"",active:!1},pi={type:"",text:""},xi=function(){var e=Object(Ke.d)((function(e){return e.authReducer.authUser})),t=Object(Ke.d)((function(e){return e.page.user.module})),n=Object(r.useState)(hi),a=Object(j.a)(n,2),c=a[0],i=a[1],o=Object(Ke.c)(),l=Object(r.useState)([]),s=Object(j.a)(l,2),u=s[0],d=s[1],b=function(){var e=Object(O.useQuery)(Xc);return{data:e.data,error:e.error,loading:e.loading}}(),m=b.data,h=b.loading,p=b.error,x=function(){i(hi),o(Object(ut.b)(pi))};if(Object(r.useEffect)((function(){m&&d(m.getVehicles)}),[m]),h)return Object(Xe.jsx)("h1",{children:"Cargando..."});if(p)return Object(Xe.jsx)("h1",{children:Object(st.a)(p)});return Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(qt,{open:c.active,title:"".concat(c.name," Vehiculo"),component:function(e){switch(e){case"Crear":return Object(Xe.jsx)(ni,{handleClose:x})}}(c.name),handleClose:x}),at(nt.f,e,t,(function(){return Object(Xe.jsx)(Xe.Fragment,{children:Object(Xe.jsx)(wt.a,{title:"Crear vehiculo",children:Object(Xe.jsx)(Dt.a,{"aria-label":"add",size:"small",onClick:function(){return i({name:"Crear",active:!0})},children:Object(Xe.jsx)(Zt.a,{})})})})})),Object(Xe.jsx)(Jt.a,{component:Ht.a,style:{whiteSpace:"nowrap",marginTop:10},children:Object(Xe.jsxs)(Vt.a,{size:"small","aria-label":"a dense table",children:[Object(Xe.jsx)(Gt.a,{children:Object(Xe.jsxs)(yt.a,{children:[Object(Xe.jsx)(Ct.a,{children:"Cliente"}),Object(Xe.jsx)(Ct.a,{children:"Dispositivo"}),Object(Xe.jsx)(Ct.a,{children:"Plataforma"}),Object(Xe.jsx)(Ct.a,{children:"Plan"}),Object(Xe.jsx)(Ct.a,{children:"Placa"}),Object(Xe.jsx)(Ct.a,{children:"Chip"}),Object(Xe.jsx)(Ct.a,{children:"Nro GPS"}),Object(Xe.jsx)(Ct.a,{children:"Fecha de instalaci\xf3n"}),Object(Xe.jsx)(Ct.a,{children:"Fecha de termino"}),Object(Xe.jsx)(Ct.a,{children:"Fecha creada"}),Object(Xe.jsx)(Ct.a,{children:"Fecha modificada"}),Object(Xe.jsx)(Ct.a,{align:"right",children:"Opciones"})]})}),Object(Xe.jsx)(Kt.a,{children:u.map((function(e){return Object(Xe.jsx)(mi,{vehicle:e},e.id)}))})]})})]})},gi=Object(Ke.b)((function(e){var t=e.page.user;return{link:t.link,page:t.page}}),null)((function(e){var t=e.link,n=e.page,a=Object(s.h)(),c=a.pathname.replace("/",""),i=function(e){var t=e.component,n=e.toLogin,a=Object(et.a)(e,["component","toLogin"]);return Object(Xe.jsx)(s.b,Object(x.a)(Object(x.a)({},a),{},{render:function(e){switch(n){case!0:return u("accessToken")?Object(Xe.jsx)(s.a,{to:{pathname:"/"}}):Object(r.createElement)(t,e);case!1:return u("accessToken")?Object(r.createElement)(t,e):Object(Xe.jsx)(s.a,{to:{pathname:"/"}})}}}))};return Object(Xe.jsx)(Xe.Fragment,{children:t===c||t===a.pathname?Object(Xe.jsx)(i,{exact:!0,path:"/".concat(t),toLogin:!1,component:function(e){switch(e){case"DASHBOARD":return function(){return Object(Xe.jsx)("h1",{children:"Bienvenido"})};case"MODULOS":return function(){return Object(Xe.jsx)(Qr,{})};case"ROLES":return function(){return Object(Xe.jsx)(fc,{})};case"USUARIOS":return function(){return Object(Xe.jsx)(Hc,{})};case"CATEGORIAS":return function(){return Object(Xe.jsx)(En,{})};case"MARCAS":return function(){return Object(Xe.jsx)(vn,{})};case"MODELOS":return function(){return Object(Xe.jsx)(xr,{})};case"PRODUCTOS":return function(){return Object(Xe.jsx)(rc,{})};case"SERVICIOS":return function(){return Object(Xe.jsx)(Dc,{})};case"INGRESOS":return function(){return Object(Xe.jsx)(sa,{})};case"EGRESOS":return function(){return Object(Xe.jsx)(Gn,{})};case"RESUMEN-CAJA":return function(){return Object(Xe.jsx)(ua,{})};case"CONSULTAR-CAJA":return function(){return Object(Xe.jsx)(ba,{})};case"CONSULTAR-PRECIOS":return function(){return Object(Xe.jsx)(Aa,{})};case"CLIENTES":return function(){return Object(Xe.jsx)(Ga,{})};case"VEHICULOS":return function(){return Object(Xe.jsx)(xi,{})};case"DISPOSITIVOS":return function(){return Object(Xe.jsx)(or,{})};case"PLAN-DE-FACTURACION":return function(){return Object(Xe.jsx)(nn,{})};default:return function(){return Object(Xe.jsx)(tt,{})}}}("".concat(n))}):Object(Xe.jsx)(i,{toLogin:!1,path:"*",component:tt})})})),fi=function(){return Object(Xe.jsx)(s.d,{children:Object(Xe.jsx)(gi,{})})},vi=(n(266),function(){var e=Object(Ke.d)((function(e){return e.page.user})),t=e.module,n=(e.page,e.name),a=null===n||void 0===n?void 0:n.charAt(0).toUpperCase(),r=null===n||void 0===n?void 0:n.substr(1,null===n||void 0===n?void 0:n.length),c="".concat(a).concat(r.toLowerCase());return Object(Xe.jsx)("div",{className:"wrapper",children:Object(Xe.jsxs)("div",{className:"content-wrapper",children:[Object(Xe.jsxs)("div",{className:"content-wrapper-header items-center",children:[Object(Xe.jsx)("h1",{children:n.toUpperCase()}),Object(Xe.jsxs)("ol",{children:[Object(Xe.jsx)("li",{className:"list-style-none text-active",children:Object(Xe.jsx)("strong",{children:t})}),Object(Xe.jsx)("li",{className:"list-style-none text-inactive",children:c})]})]}),Object(Xe.jsx)("div",{className:"content-wrapper-main",children:Object(Xe.jsx)(fi,{})})]})})}),yi=(n(267),function(){return Object(Xe.jsx)("footer",{children:Object(Xe.jsx)("div",{className:"center",children:Object(Xe.jsxs)("p",{children:["\xa9 2020-2021 by"," ",Object(Xe.jsx)("a",{href:"https://kemaytechnology.com/",target:"_blank",rel:"noreferrer",children:"Kemay Technology"}),". Todos los derechos reservados. Si tuviese alg\xfan inconveniente por favor contactarnos al siguiente correo:",Object(Xe.jsx)("a",{href:"mailto:dperez@kemaytechnology.com",target:"_blank",rel:"noreferrer",children:"dperez@kemaytechnology.com"}),Object(Xe.jsx)("br",{})," Version: 0.0.1 | Powered by",Object(Xe.jsx)("a",{href:"http://github.com/davisperezg",target:"_blank",rel:"noreferrer",children:"@davisperezg"})]})})})}),Ci=n(347),wi=n(348),Si="@page/LINK_USER",ki=function(e,t,n){return function(){var a=Object(p.a)(h.a.mark((function a(r){return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r({type:Si,payload:{link:t,module:e,page:"/"===t?"DASHBOARD":t.toUpperCase(),name:n}});case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},Ii=Object(Ke.b)(null,{setLink:ki})((function(e){var t,n=e.menu,a=e.setLink,r=e.module,c=Object(s.g)(),i=Object(Ke.d)((function(e){return e.authReducer.authUser})),o=function(){a(r.name,n.link,n.name),document.title="RPUM - ".concat(n.link.toUpperCase()),c.push("/".concat(n.link))};return Object(Xe.jsx)(Xe.Fragment,{children:((null===i||void 0===i||null===(t=i.role)||void 0===t?void 0:t.name)===nt.i||n.name!==nt.c)&&Object(Xe.jsx)("li",{onClick:function(){return o()},children:n.name})})})),Ai=function(e){var t=e.module,n=Object(r.useState)(!1),a=Object(j.a)(n,2),i=a[0],o=a[1],l=Object(r.useState)(!1),s=Object(j.a)(l,2),u=s[0],d=s[1],b=t.menus,O=c.a.useState([]),m=Object(j.a)(O,2),h=m[0],p=m[1];return Object(r.useEffect)((function(){p(b||[])}),[b]),Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsxs)("li",{style:u?{color:"#fff",fontWeight:"bold"}:{color:"#67677e"},onClick:function(){return o(!i),void d(!u)},children:[t.name," ",i?Object(Xe.jsx)(Ci.a,{}):Object(Xe.jsx)(wi.a,{})]}),i&&Object(Xe.jsx)("ul",{children:h.map((function(e){return Object(Xe.jsx)(Ii,{menu:e,module:t},e.id)}))})]})},Mi=n.p+"static/media/logo_kemay_antena.16ba1da3.png",Ni=(n(268),function(){var e,t=Object(Ke.d)((function(e){return e.authReducer.authUser})),n=Object(Ke.d)((function(e){return e.page.user})),a=(n.module,n.page,null===t||void 0===t||null===(e=t.role)||void 0===e?void 0:e.modules),c=Object(r.useState)([]),i=Object(j.a)(c,2),o=i[0],l=i[1],u=Object(s.g)(),d=Object(Ke.c)();return Object(r.useEffect)((function(){l(a||[])}),[a]),Object(Xe.jsxs)("aside",{children:[Object(Xe.jsx)("div",{className:"content-logo",children:Object(Xe.jsx)("div",{className:"logo",onClick:function(){u.push("/"),d(ki("Inicio","/","Dashboard"))},children:Object(Xe.jsx)("img",{width:"100",height:"100",src:Mi,alt:"Logo"})})}),Object(Xe.jsx)("div",{className:"sidebar",children:Object(Xe.jsx)("ul",{children:o.map((function(e){return Object(Xe.jsx)(Ai,{module:e},e.id)}))})})]})}),Ei=(n(269),function(){return Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)("section",{className:"menu",children:Object(Xe.jsx)(Ni,{})}),Object(Xe.jsxs)("section",{className:"content",children:[Object(Xe.jsxs)("div",{className:"body",children:[Object(Xe.jsx)(Ze,{}),Object(Xe.jsx)(vi,{})]}),Object(Xe.jsx)(yi,{})]})]})}),Di=n.p+"static/media/B_logo_kemay.bec2fe6e.png",Ri=Object(O.gql)(Pe||(Pe=Object(b.a)(["\n  mutation login($authInput: AuthInput!) {\n    login(authInput: $authInput) {\n      access_token\n      refresh_token\n    }\n  }\n"]))),Fi=(n(270),{email:"",password:""}),Ui={path:"",message:""},Yi=Object(Ke.b)((function(e){return{loading:e.authReducer.loading}}),{setLoading:Je})((function(e){var t=e.loading,n=e.setLoading,a=Object(r.useState)(Ui),c=Object(j.a)(a,2),i=c[0],o=c[1],l=Object(r.useState)(Fi),s=Object(j.a)(l,2),u=s[0],b=s[1],m=Object(Ke.d)((function(e){return e.message})),g=function(){var e=Object(O.useMutation)(Ri);return Object(j.a)(e,1)[0]}(),f=Object(Ke.c)(),v=function(e){f(Object(ut.b)({type:"",text:""})),o(Ui),b(Object(x.a)(Object(x.a)({},u),{},Object(rt.a)({},e.target.name,e.target.value)))},y=function(){var e=Object(p.a)(h.a.mark((function e(t){var a,r,c,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n(!0),e.prev=2,e.next=5,g({variables:{authInput:{email:u.email,password:u.password}}});case 5:a=e.sent,r=a.data.login,c=r.access_token,i=r.refresh_token,d("accessToken",c),d("refreshToken",i),Le.resetStore(),window.location.href="/",e.next=21;break;case 13:if(e.prev=13,e.t0=e.catch(2),401!==e.t0.graphQLErrors[0].extensions.exception.status){e.next=19;break}return f(Object(ut.b)({type:"error",text:Object(st.a)(e.t0)})),n(!1),e.abrupt("return");case 19:o(e.t0.graphQLErrors[0].extensions.exception.response),n(!1);case 21:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(Xe.jsxs)("div",{className:"login",children:[Object(Xe.jsx)("div",{className:"content-login-logo content-items-center",children:Object(Xe.jsx)("img",{width:"450",height:"400",src:Di,alt:"Logo"})}),Object(Xe.jsx)("div",{className:"content-login-form content-items-center",children:Object(Xe.jsxs)("div",{className:"content-login-form-main",children:[Object(Xe.jsx)("div",{className:"content-login-form-header content-items-center",children:Object(Xe.jsx)("h1",{children:"ACCESO AL SISTEMA"})}),m.type&&Object(Xe.jsx)(Et.a,{severity:m.type,children:m.text}),Object(Xe.jsx)("form",{onSubmit:y,children:Object(Xe.jsxs)("div",{className:"content-login-form-body",children:[Object(Xe.jsx)("div",{className:"content-login-form-input",children:Object(Xe.jsx)(Ot.a,{error:"username"===(null===i||void 0===i?void 0:i.path),id:"idUsername",label:"Usuario",helperText:"username"===(null===i||void 0===i?void 0:i.path)?null===i||void 0===i?void 0:i.message:"",name:"email",onChange:v,variant:"outlined",fullWidth:!0})}),Object(Xe.jsx)("br",{}),Object(Xe.jsx)("div",{className:"content-login-form-input",children:Object(Xe.jsx)(Ot.a,{error:"password"===(null===i||void 0===i?void 0:i.path),id:"idPassword",label:"Contrase\xf1a",helperText:"password"===(null===i||void 0===i?void 0:i.path)?null===i||void 0===i?void 0:i.message:"",name:"password",onChange:v,variant:"outlined",type:"password",fullWidth:!0})}),Object(Xe.jsx)("br",{}),Object(Xe.jsx)("div",{className:"content-login-form-input content-items-center",children:t?Object(Xe.jsx)(Pa.a,{}):Object(Xe.jsx)(pt.a,{disabled:!!t,type:"submit",size:"large",variant:"contained",color:"primary",fullWidth:!0,children:"Iniciar sesion"})}),Object(Xe.jsx)("br",{}),Object(Xe.jsx)("div",{className:"content-login-form-footer content-items-center",children:"\xbfOlvidaste tu contrase\xf1a?"})]})})]})})]})})),qi=function(){return Object(Xe.jsx)(l.a,{children:u("accessToken")?Object(Xe.jsx)(Ei,{}):Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(Yi,{}),Object(Xe.jsx)(s.a,{to:"/"})]})})},Pi=n(90),zi=n(206),Bi=n(207),$i=n(159),Li=n(208),Ti=n.n(Li),Wi={loading:!1,authUser:void 0,error:void 0},Qi={user:{link:"/",module:"Inicio",page:"DASHBOARD",name:"Dashboard"}},_i={type:"",text:""},Vi=Object(Pi.combineReducers)({authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wi,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Qe:return Object(x.a)(Object(x.a)({},e),{},{loading:t.payload});case Te:case We:return Object(x.a)(Object(x.a)({},e),{},{authUser:t.payload});case _e:return Object(x.a)(Object(x.a)({},e),{},{error:t.payload});default:return e}},page:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qi,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Si:return Object(x.a)(Object(x.a)({},e),{},{user:t.payload});default:return e}},message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ut.a:return t.payload;default:return e}}}),Ji={key:"root",storage:Ti.a,whitelist:["page"]},Gi=Object($i.a)(Ji,Vi),Ki=Object(Pi.createStore)(Gi,Object(Bi.composeWithDevTools)(Object(Pi.applyMiddleware)(zi.a))),Hi=Object($i.b)(Ki),Xi=n(209);n(273);o.a.render(Object(Xe.jsx)(c.a.StrictMode,{children:Object(Xe.jsx)(O.ApolloProvider,{client:Le,children:Object(Xe.jsx)(Ke.a,{store:Ki,children:Object(Xe.jsx)(Xi.a,{loading:null,persistor:Hi,children:Object(Xe.jsx)(qi,{})})})})}),document.getElementById("root"))},79:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var a,r=n(12),c=n(5),i=Object(c.gql)(a||(a=Object(r.a)(["\n  query getModules {\n    getModules {\n      id\n      name\n      description\n      createdAt\n      updatedAt\n      menus {\n        id\n        name\n        link\n      }\n      access {\n        id\n        name\n      }\n    }\n  }\n"]))),o=function(){var e=Object(c.useQuery)(i);return{data:e.data,loading:e.loading,error:e.error}}},8:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var a="@message/ALERT",r=function(e){return{type:a,payload:e}}}},[[274,1,2]]]);
//# sourceMappingURL=main.a7428f60.chunk.js.map