(this.webpackJsonprpum=this.webpackJsonprpum||[]).push([[0],{114:function(e,t,n){"use strict";var a=n(119),r=(n(1),n(105)),c=n(284),i=n(290),o=n(291),l=n(165),s=n(294),u=n(293),d=n(217),j=n(144),b=n(292),O=n(21),m=n(0);function h(e,t){return e.filter((function(e){return-1===t.indexOf(e)}))}function p(e,t){return e.filter((function(e){return-1!==t.indexOf(e)}))}t.a=function(e){var t=e.setListAvailable,n=e.setListCurrent,x=e.listAvailable,g=e.setChecked,f=e.checked,v=e.titleAvailable,y=e.listCurrent,C=e.titleCurrent,w=e.loading,S=p(f,x),k=p(f,y),I=function(e){return function(){var t=f.indexOf(e),n=Object(a.a)(f);-1===t?n.push(e):n.splice(t,1),g(n)}},A=function(e){return p(f,e).length},M=function(e){return function(){var t,n;A(e)===e.length?g(h(f,e)):g((t=f,n=e,[].concat(Object(a.a)(t),Object(a.a)(h(n,t)))))}},D=function(e,t){return Object(m.jsxs)(i.a,{children:[Object(m.jsx)(o.a,{avatar:Object(m.jsx)(d.a,{onClick:M(t),checked:A(t)===t.length&&0!==t.length,indeterminate:A(t)!==t.length&&0!==A(t),disabled:0===t.length,inputProps:{"aria-label":"all items selected"}}),title:e,subheader:"".concat(A(t),"/").concat(t.length," selected")}),Object(m.jsx)(b.a,{}),Object(m.jsxs)(c.a,{dense:!0,component:"div",role:"list",children:[w?Object(m.jsx)(O.a,{}):t.map((function(e){var t="transfer-list-all-item-".concat(e.name,"-label");return Object(m.jsxs)(l.a,{role:"listitem",button:!0,onClick:I(e),children:[Object(m.jsx)(u.a,{children:Object(m.jsx)(d.a,{checked:-1!==f.indexOf(e),tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":t}})}),Object(m.jsx)(s.a,{id:t,primary:"".concat(e.name)})]},e.id)})),Object(m.jsx)(l.a,{})]})]})};return Object(m.jsxs)(r.a,{container:!0,spacing:2,justify:"center",alignItems:"center",children:[Object(m.jsx)(r.a,{item:!0,children:D(v,x)}),Object(m.jsx)(r.a,{item:!0,children:Object(m.jsxs)(r.a,{container:!0,direction:"column",alignItems:"center",children:[Object(m.jsx)(j.a,{variant:"outlined",size:"small",onClick:function(){n(y.concat(S)),t(h(x,S)),g(h(f,S))},disabled:0===S.length,"aria-label":"move selected right",children:">"}),Object(m.jsx)(j.a,{variant:"outlined",size:"small",onClick:function(){t(x.concat(k)),n(h(y,k)),g(h(f,k))},disabled:0===k.length,"aria-label":"move selected left",children:"<"})]})}),Object(m.jsx)(r.a,{item:!0,children:D(C,y)})]})}},13:function(e,t,n){"use strict";n.d(t,"f",(function(){return a})),n.d(t,"h",(function(){return r})),n.d(t,"g",(function(){return c})),n.d(t,"e",(function(){return i})),n.d(t,"i",(function(){return o})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var a="Crear",r="Editar",c="Eliminar",i="Ver",o="SuperAdmin",l="Administraci\xf3n de modulos",s="Modulos",u="https://www.facturacionelectronica.us/facturacion/controller/ws_consulta_rucdni_v2.php?documento=DNI&usuario=10447915125&password=985511933&nro_documento=",d="https://www.facturacionelectronica.us/facturacion/controller/ws_consulta_rucdni_v2.php?documento=RUC&usuario=10447915125&password=985511933&nro_documento="},142:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a,r,c=n(119),i=n(4),o=n(12),l=n(5),s=Object(l.gql)(a||(a=Object(o.a)(["\n  mutation updateRole($roleInput: RoleUpdateInput!) {\n    updateRole(roleInput: $roleInput) {\n      id\n      name\n      description\n      modules {\n        id\n        name\n      }\n    }\n  }\n"]))),u=function(){var e=Object(l.useMutation)(s,{update:function(e,t){var n=t.data.updateRole;e.modify({fields:{updateRole:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=e.writeFragment({data:n,fragment:Object(l.gql)(r||(r=Object(o.a)(["\n                fragment NewRole on Role {\n                  id\n                  name\n                  description\n                  modules {\n                    id\n                    name\n                  }\n                }\n              "])))});return[].concat(Object(c.a)(t),[a])}}})}}),t=Object(i.a)(e,2),n=t[0],a=t[1];return{updateRole:n,error:a.error,loading:a.loading}}},16:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e){for(var t=0;t<e.graphQLErrors.length;t++)for(var n=e.graphQLErrors[t].extensions.exception.response.message,a=0;a<n.length;a++){return n[a]}}},204:function(e,t,n){"use strict";var a=n(14),r=n.n(a),c=n(19),i=n(4),o=n(1),l=n(8),s=n(286),u=n(6),d=n(105),j=n(144),b=n(79),O=n(142),m=n(114),h=n(13),p=n(16),x=n(0);t.a=function(t){var n=t.role,a=t.handleClose,g=Object(o.useState)([]),f=Object(i.a)(g,2),v=f[0],y=f[1],C=Object(o.useState)([]),w=Object(i.a)(C,2),S=w[0],k=w[1],I=Object(o.useState)([]),A=Object(i.a)(I,2),M=A[0],D=A[1],N=Object(u.c)(),E=Object(b.b)(),R=Object(O.a)(),F=Object(u.d)((function(e){return e.message})),U=F.type,P=F.text,Y=(Object(u.d)((function(e){return e.authReducer.authUser})),function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=S.map((function(e){return{name:e.name}})),e.prev=2,e.next=5,R.updateRole({variables:{roleInput:{id:n.id,modules:a}}});case 5:return e.abrupt("return",N(Object(l.b)({type:"success",text:"El rol actualiz\xf3 sus modulos correctamente."})));case 8:e.prev=8,e.t0=e.catch(2),N(Object(l.b)({type:"error",text:Object(p.a)(e.t0)}));case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()),q=Object(o.useCallback)((function(){var e=E.data.getModules.filter((function(e){var t;return!(null===(t=n.modules)||void 0===t?void 0:t.some((function(t){return e.name===t.name})))})).filter((function(e){return e.name!==h.d}));y(e)}),[n,E.data]);return Object(o.useEffect)((function(){if(n&&E.data){var e,t=null===(e=n.modules)||void 0===e?void 0:e.filter((function(e){return e.name!==h.d}));k(t||[]),q()}}),[n,E.data,q]),"error"===U?Object(x.jsx)("h1",{children:P}):Object(x.jsx)("form",{onSubmit:Y,children:Object(x.jsxs)(d.a,{container:!0,spacing:3,children:[Object(x.jsx)(d.a,{item:!0,xs:12,children:Object(x.jsx)(m.a,{setListAvailable:y,setListCurrent:k,setChecked:D,checked:M,listAvailable:v,titleAvailable:"Modulos disponibles",listCurrent:S,titleCurrent:"Modulos actuales",loading:E.loading})}),Object(x.jsxs)(s.a,{style:{width:"100%"},children:[Object(x.jsx)(j.a,{onClick:a,color:"primary",children:"Cancelar"}),Object(x.jsx)(j.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",disabled:!!R.loading,children:e.i?"Actualizar":"Registrar"})]})]})})}},21:function(e,t,n){"use strict";n(1);var a=n(285),r=n(0);t.a=function(){return Object(r.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(r.jsx)(a.a,{disableShrink:!0})})}},248:function(e,t,n){},252:function(e,t,n){},271:function(e,t,n){},272:function(e,t,n){},273:function(e,t,n){},274:function(e,t,n){},275:function(e,t,n){},278:function(e,t,n){},279:function(e,t,n){"use strict";n.r(t);var a,r=n(1),c=n.n(r),i=n(33),o=n.n(i),l=n(108),s=n(42),u=function(e){return localStorage.getItem(e)},d=function(e,t){return localStorage.setItem(e,t)},j=n(4),b=n(12),O=n(5),m=n(14),h=n.n(m),p=n(19),x=n(3),g=n(190),f=n(191),v=n(196),y=Object(O.gql)(a||(a=Object(b.a)(["\n  mutation refreshToken($authInput: AuthRefreshTokenInput!) {\n    refreshToken(authInput: $authInput) {\n      access_token\n    }\n  }\n"]))),C="https://web.kemaytechnology.com/graphql",w=!1,S=[],k=Object(v.a)((function(e){var t=e.graphQLErrors,n=e.networkError,a=e.operation,r=e.forward;if(t){var c,i=Object(g.a)(t);try{for(i.s();!(c=i.n()).done;){var o=c.value;switch(o.extensions.exception.status){case 401:var l=void 0;return w?l=Object(O.fromPromise)(new Promise((function(e){S.push((function(){return e()}))}))):(w=!0,l=Object(O.fromPromise)(ie.mutate({mutation:y,variables:{authInput:{email:u("username"),refresh_token:u("refreshToken")}}}).then((function(e){var t=e.data.refreshToken.access_token;return d("accessToken",t),!0})).then((function(){return S.map((function(e){return e()})),S=[],!0})).catch((function(){return S=[],!1})).finally((function(){w=!1})))),l.flatMap((function(){return r(a)}));default:console.log("[ERROR]: Message: ".concat(o.message,", Location: ").concat(o.locations,", Path: ").concat(o.path))}}}catch(o){i.e(o)}finally{i.f()}}n&&console.log("[Network error]: ".concat(n))}));console.log(C);var I,A,M,D,N,E,R,F,U,P,Y,q,z,B,$,L,T,W,Q,_,V,J,G,H,K,X,Z,ee,te,ne,ae,re=Object(O.createHttpLink)({uri:C}),ce=Object(f.a)((function(e,t){var n=t.headers,a=u("accessToken");return{headers:Object(x.a)(Object(x.a)({},n),{},{authorization:a?"Bearer ".concat(a):""})}})),ie=new O.ApolloClient({link:Object(O.from)([k,ce,re]),cache:new O.InMemoryCache}),oe=ie,le="@auth/LOGIN_USER",se="@auth/LOGOUT_USER",ue="@auth/LOADING_USER",de="@auth/ERROR_USER",je={name:"Anonimo",lastName:""},be=function(e){return{type:ue,payload:e}},Oe=function(){return function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.clear(),oe.resetStore(),window.location.href="/",e.next=5,t({type:se,payload:je});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},me=n(6),he=Object(O.gql)(I||(I=Object(b.a)(["\n  query me {\n    me {\n      id\n      name\n      lastName\n      email\n      status\n      role {\n        name\n        modules {\n          id\n          name\n          access {\n            name\n          }\n          menus {\n            id\n            name\n            link\n          }\n        }\n      }\n    }\n  }\n"]))),pe=(n(248),n(0)),xe=Object(me.b)((function(e){return{loading:e.authReducer.loading,authUser:e.authReducer.authUser}}),{setLoading:be,whoisme:function(e){return function(){var t=Object(p.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n(be(!0));case 3:return t.next=5,n({type:le,payload:e.me});case 5:return t.next=7,n(be(!1));case 7:t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(0),t.next=13,n({type:de,payload:t.t0.message});case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},logout:Oe})((function(e){var t,n=e.authUser,a=e.loading,c=e.whoisme,i=e.logout,o=function(){var e,t=Object(O.useLazyQuery)(he,{pollInterval:500}),n=Object(j.a)(t,2),a=n[0],r=n[1],c=r.data,i=r.loading,o=r.error,l=Object(me.c)();return o&&401===(null===o||void 0===o||null===(e=o.graphQLErrors[0].extensions)||void 0===e?void 0:e.exception.status)&&(alert(o.graphQLErrors[0].extensions.exception.response.message),l(Oe())),{me:a,data:c,loading:i}}(),l=o.me,s=o.data;return Object(r.useEffect)((function(){var e;l(),c(s),d("username",null===s||void 0===s||null===(e=s.me)||void 0===e?void 0:e.email)}),[l,c,s]),2===(null===s||void 0===s||null===(t=s.me)||void 0===t?void 0:t.status)&&i(),Object(pe.jsxs)("header",{children:[Object(pe.jsx)("a",{children:a?"Cargando usuario...":Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)("strong",{children:"Bienvenido, "}),null===n||void 0===n?void 0:n.name," ",null===n||void 0===n?void 0:n.lastName]})}),"\xa0\xa0",Object(pe.jsx)("button",{className:"buttonLogout",onClick:function(){return i()},children:"Cerrar sesion"})]})})),ge=n(143),fe=function(){return Object(pe.jsx)(pe.Fragment,{children:"4040404040404040"})},ve=n(13),ye=function(e,t,n,a,r){var c,i,o,l,s,u,d,j;switch(e){case ve.f:var b=null===t||void 0===t||null===(c=t.role)||void 0===c||null===(i=c.modules)||void 0===i?void 0:i.map((function(t){var a;return null===(a=t.access)||void 0===a?void 0:a.filter((function(a){return t.name===n&&a.name===e}))}));return null===b||void 0===b?void 0:b.map((function(e,t){return e?(null===e||void 0===e?void 0:e.length)>0&&Object(pe.jsx)(a,{},t):""}));case ve.h:var O=null===t||void 0===t||null===(o=t.role)||void 0===o||null===(l=o.modules)||void 0===l?void 0:l.map((function(t){var a;return null===(a=t.access)||void 0===a?void 0:a.filter((function(a){return t.name===n&&a.name===e}))}));return null===O||void 0===O?void 0:O.map((function(e,t){return e?(null===e||void 0===e?void 0:e.length)>0&&Object(pe.jsx)(a,{},t):""}));case ve.g:var m=null===t||void 0===t||null===(s=t.role)||void 0===s||null===(u=s.modules)||void 0===u?void 0:u.map((function(t){var a;return null===(a=t.access)||void 0===a?void 0:a.filter((function(a){return t.name===n&&a.name===e}))}));return null===m||void 0===m?void 0:m.map((function(e,t){return e?(null===e||void 0===e?void 0:e.length)>0&&Object(pe.jsx)(a,{},t):""}));case ve.e:var h=null===t||void 0===t||null===(d=t.role)||void 0===d||null===(j=d.modules)||void 0===j?void 0:j.map((function(t){var a;return null===(a=t.access)||void 0===a?void 0:a.filter((function(a){return t.name===n&&a.name===e}))}));return null===h||void 0===h?void 0:h.map((function(e,t){return e?(null===e||void 0===e?void 0:e.length)>0&&Object(pe.jsx)(a,{},t):""}))}},Ce=n(24),we=Object(O.gql)(A||(A=Object(b.a)(["\n  query getBillings {\n    getBillings {\n      id\n      name\n      day\n      createdAt\n      updatedAt\n    }\n  }\n"]))),Se=function(){var e=Object(O.useQuery)(we);return{data:e.data,error:e.error,loading:e.loading}},ke=Object(O.gql)(M||(M=Object(b.a)(["\n  mutation registerBilling($billingInput: CreateBillingInput!) {\n    registerBilling(billingInput: $billingInput) {\n      id\n      name\n      day\n      createdAt\n      updatedAt\n    }\n  }\n"]))),Ie=Object(O.gql)(D||(D=Object(b.a)(["\n  mutation updateBilling($billingInput: UpdateBillingInput!) {\n    updateBilling(billingInput: $billingInput) {\n      id\n      name\n      day\n      createdAt\n      updatedAt\n    }\n  }\n"]))),Ae=n(16),Me=n(8),De=n(105),Ne=n(333),Ee=n(362),Re=n(361),Fe=Object(Ne.a)((function(e){return Object(Ee.a)({root:{border:"1px solid #e2e2e1",overflow:"hidden",borderRadius:4,backgroundColor:"#fcfcfb",transition:e.transitions.create(["border-color","box-shadow"]),"&:hover":{backgroundColor:"#fff"},"&$focused":{backgroundColor:"#fff",borderColor:e.palette.primary.main}},focused:{}})})),Ue=function(e){var t=Fe();return Object(pe.jsx)(Re.a,Object(x.a)({InputProps:{classes:t,disableUnderline:!0}},e))},Pe=n(144),Ye=n(286),qe=n(21),ze=function(e){var t=e.handleClose,n=e.billing,a={id:(null===n||void 0===n?void 0:n.id)||"",name:(null===n||void 0===n?void 0:n.name)||"",day:(null===n||void 0===n?void 0:n.day)||0},c=Object(r.useState)(a.id?a:{name:"",day:0}),i=Object(j.a)(c,2),o=i[0],l=i[1],s=Object(me.c)(),u=function(){var e=Object(O.useMutation)(Ie,{refetchQueries:function(){return[{query:we}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{updateBilling:n,error:a.error,loading:a.loading}}(),d=function(){var e=Object(O.useMutation)(ke,{refetchQueries:function(){return[{query:we}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{registerBilling:n,error:a.error,loading:a.loading}}(),b=function(e){l(Object(x.a)(Object(x.a)({},o),{},Object(Ce.a)({},e.target.name,e.target.value)))},m=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!o.id){e.next=13;break}return e.prev=2,e.next=5,u.updateBilling({variables:{billingInput:Object(x.a)(Object(x.a)({},o),{},{day:Number(o.day)})}});case 5:s(Object(Me.b)({type:"success",text:"El plan se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),s(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,d.registerBilling({variables:{billingInput:Object(x.a)(Object(x.a)({},o),{},{day:Number(o.day)})}});case 16:s(Object(Me.b)({type:"success",text:"La plan ha sido registrado correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),s(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)("form",{onSubmit:m,children:Object(pe.jsxs)(De.a,{container:!0,spacing:3,children:[Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Ue,{fullWidth:!0,type:"text",onChange:b,name:"name",autoComplete:"off",id:"idName",label:"Nombre",variant:"filled",value:o.name})}),Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Ue,{fullWidth:!0,type:"number",onChange:b,name:"day",autoComplete:"off",id:"idDay",label:"Dias",variant:"filled",value:o.day})}),Object(pe.jsxs)(Ye.a,{style:{width:"100%"},children:[Object(pe.jsx)(Pe.a,{onClick:t,color:"primary",children:"Cancelar"}),o.id?u.loading?Object(pe.jsx)(qe.a,{}):Object(pe.jsx)(Pe.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):d.loading?Object(pe.jsx)(qe.a,{}):Object(pe.jsx)(Pe.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})})},Be=Object(O.gql)(N||(N=Object(b.a)(["\n  mutation deleteBilling($id: String!) {\n    deleteBilling(id: $id)\n  }\n"]))),$e=n(343),Le=n(344),Te=n(342),We=n(15),Qe=n(340),_e=n(341),Ve=n(76),Je=n(339),Ge=n(71),He=n(356),Ke=n(287),Xe=n(338),Ze=n(201),et=n.n(Ze),tt=Object(We.a)((function(e){return Object(Ee.a)({root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})}))((function(e){var t=e.children,n=e.classes,a=e.onClose,r=Object(ge.a)(e,["children","classes","onClose"]);return Object(pe.jsxs)(Xe.a,Object(x.a)(Object(x.a)({disableTypography:!0,className:n.root},r),{},{children:[Object(pe.jsx)(Ve.a,{variant:"h6",children:t}),a?Object(pe.jsx)(Ke.a,{"aria-label":"close",className:n.closeButton,onClick:a,children:Object(pe.jsx)(et.a,{})}):null]}))})),nt=function(e){var t=e.open,n=e.dialog,a=e.title,r=e.component,c=e.handleClose,i=Object(me.d)((function(e){return e.message})),o=Object(Ge.a)(),l=Object(Je.a)(o.breakpoints.down("sm"));return Object(pe.jsxs)(Qe.a,{fullScreen:l,open:t,"aria-labelledby":"idModal",disableBackdropClick:!0,disableEscapeKeyDown:!0,children:[Object(pe.jsxs)(tt,{id:"idModal",onClose:c,children:[a," ",null===n||void 0===n?void 0:n.name]}),i.type&&Object(pe.jsx)(He.a,{severity:i.type,children:i.text}),Object(pe.jsx)(_e.a,{dividers:!0,style:{overflowY:"visible"},children:r})]})},at=n(22),rt=n.n(at),ct=n(29),it=n.n(ct),ot=n(53),lt=n.n(ot),st={type:"",text:""},ut={name:"",active:!1},dt=function(e){var t=e.billing,n=Object(me.d)((function(e){return e.authReducer.authUser})),a=Object(me.d)((function(e){return e.page.user.module})),c=Object(r.useState)(ut),i=Object(j.a)(c,2),o=i[0],l=i[1],s=Object(me.c)(),u=function(){var e=Object(O.useMutation)(Be,{refetchQueries:function(){return[{query:we}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{deleteBilling:n,error:a.error,loading:a.loading}}(),d=function(){l(ut),s(Object(Me.b)(st))},b=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.deleteBilling({variables:{id:t}});case 3:e.next=10;break;case 5:e.prev=5,e.t0=e.catch(0),l({name:"error",active:!0}),s(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t0)})),o.active,o.name;case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(Te.a,{title:"Eliminar Cliente",onClick:function(){return b(t.id)},children:Object(pe.jsx)(Ke.a,{"aria-label":"egress",size:"small",children:Object(pe.jsx)(lt.a,{})})})})},x=function(){return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(Te.a,{title:"Editar plan de facturaci\xf3n",onClick:function(){return l({name:"Plan",active:!0})},children:Object(pe.jsx)(Ke.a,{"aria-label":"billing",size:"small",children:Object(pe.jsx)(it.a,{})})})})};return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(nt,{open:o.active,dialog:t,title:o.name,component:function(e){switch(e){case"Plan":return Object(pe.jsx)(ze,{billing:t,handleClose:d})}}(o.name),handleClose:d}),ye(ve.e,n,a,(function(){return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsxs)($e.a,{children:[Object(pe.jsx)(Le.a,{component:"th",scope:"row",children:t.name}),Object(pe.jsx)(Le.a,{component:"th",scope:"row",children:t.day}),Object(pe.jsx)(Le.a,{children:rt()(t.createdAt).format("DD/MM/YYYY")}),Object(pe.jsx)(Le.a,{children:rt()(t.updatedAt).format("DD/MM/YYYY")}),Object(pe.jsxs)(Le.a,{align:"right",children:[ye(ve.h,n,a,x),ye(ve.g,n,a,m)]})]})})}))]})},jt=n(346),bt=n(345),Ot=n(347),mt=n(348),ht=n(215),pt=n(37),xt=n.n(pt),gt={name:"",active:!1},ft={type:"",text:""},vt=function(){var e=Object(me.d)((function(e){return e.authReducer.authUser})),t=Object(me.d)((function(e){return e.page.user.module})),n=Object(r.useState)(gt),a=Object(j.a)(n,2),c=a[0],i=a[1],o=Object(me.c)(),l=Object(r.useState)([]),s=Object(j.a)(l,2),u=s[0],d=s[1],b=Se(),O=b.data,m=b.loading,h=b.error,p=function(){i(gt),o(Object(Me.b)(ft))};if(Object(r.useEffect)((function(){O&&d(O.getBillings)}),[O]),m)return Object(pe.jsx)("h1",{children:"Cargando..."});if(h)return Object(pe.jsx)("h1",{children:Object(Ae.a)(h)});return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(nt,{open:c.active,title:"".concat(c.name," Plan de facturaci\xf3n"),component:function(e){switch(e){case"Crear":return Object(pe.jsx)(ze,{handleClose:p})}}(c.name),handleClose:p}),ye(ve.f,e,t,(function(){return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(Te.a,{title:"Crear plan de facturaci\xf3n",children:Object(pe.jsx)(Ke.a,{"aria-label":"add",size:"small",onClick:function(){return i({name:"Crear",active:!0})},children:Object(pe.jsx)(xt.a,{})})})})})),Object(pe.jsx)(bt.a,{component:ht.a,style:{marginTop:10,whiteSpace:"nowrap"},children:Object(pe.jsxs)(jt.a,{size:"small","aria-label":"a dense table",children:[Object(pe.jsx)(Ot.a,{children:Object(pe.jsxs)($e.a,{children:[Object(pe.jsx)(Le.a,{children:"Nombre"}),Object(pe.jsx)(Le.a,{children:"Dias"}),Object(pe.jsx)(Le.a,{children:"Fecha creada"}),Object(pe.jsx)(Le.a,{children:"Fecha modificada"}),Object(pe.jsx)(Le.a,{align:"right",children:"Opciones"})]})}),Object(pe.jsx)(mt.a,{children:u.map((function(e){return Object(pe.jsx)(dt,{billing:e},e.id)}))})]})})]})},yt=n(337),Ct=n(364),wt=n(349),St=n(355),kt=Object(O.gql)(E||(E=Object(b.a)(["\n  query getCategorys {\n    getCategorys {\n      id\n      name\n      createdAt\n      updatedAt\n    }\n  }\n"]))),It=function(){var e=Object(O.useQuery)(kt);return{data:e.data,error:e.error,loading:e.loading}},At=Object(O.gql)(R||(R=Object(b.a)(["\n  query getBrands {\n    getBrands {\n      id\n      name\n      category {\n        id\n        name\n      }\n    }\n  }\n"]))),Mt=function(){var e=Object(O.useQuery)(At);return{data:e.data,error:e.error,loading:e.loading}},Dt=Object(O.gql)(F||(F=Object(b.a)(["\n  mutation updateBrand($brandInput: UpdateBrandInput!) {\n    updateBrand(brandInput: $brandInput) {\n      id\n      name\n    }\n  }\n"]))),Nt=Object(O.gql)(U||(U=Object(b.a)(["\n  mutation registerBrand($brandInput: CreateBrandInput!) {\n    registerBrand(brandInput: $brandInput) {\n      id\n      name\n      category {\n        id\n        name\n      }\n    }\n  }\n"]))),Et={type:"",text:""},Rt=function(e){var t,n=e.handleClose,a=e.brand,c={id:(null===a||void 0===a?void 0:a.id)||"",name:(null===a||void 0===a?void 0:a.name)||"",category:(null===a||void 0===a||null===(t=a.category)||void 0===t?void 0:t.name)||""},i=Object(r.useState)(c.id?c:{name:"",category:""}),o=Object(j.a)(i,2),l=o[0],s=o[1],u=Object(r.useState)([]),d=Object(j.a)(u,2),b=d[0],m=d[1],g=It().data,f=Object(me.c)(),v=function(){var e=Object(O.useMutation)(Dt,{refetchQueries:function(){return[{query:At}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{updateBrand:n,error:a.error,loading:a.loading}}(),y=function(){var e=Object(O.useMutation)(Nt,{refetchQueries:function(){return[{query:At}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{registerBrand:n,error:a.error,loading:a.loading}}(),C=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!l.id){e.next=13;break}return e.prev=2,e.next=5,v.updateBrand({variables:{brandInput:l}});case 5:f(Object(Me.b)({type:"success",text:"La marca se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),f(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,y.registerBrand({variables:{brandInput:l}});case 16:f(Object(Me.b)({type:"success",text:"La marca ha sido registrada correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),f(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){g&&m(g.getCategorys)}),[g]),Object(pe.jsx)("form",{onSubmit:C,children:Object(pe.jsxs)(De.a,{container:!0,spacing:3,children:[Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsxs)(yt.a,{variant:"outlined",fullWidth:!0,children:[Object(pe.jsx)(Ct.a,{id:"idCategory",children:"Categoria"}),Object(pe.jsx)(St.a,{labelId:"Categoria",id:"idCategory",value:l.category,onChange:function(e){s(Object(x.a)(Object(x.a)({},l),{},Object(Ce.a)({},e.target.name,e.target.value))),f(Object(Me.b)(Et))},label:"Categoria",name:"category",children:b.map((function(e){return Object(pe.jsx)(wt.a,{value:e.name,children:e.name},e.id)}))})]})}),Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Re.a,{fullWidth:!0,onChange:function(e){s(Object(x.a)(Object(x.a)({},l),{},Object(Ce.a)({},e.target.name,e.target.value))),f(Object(Me.b)(Et))},name:"name",autoComplete:"off",id:"idName",label:"Marca",variant:"outlined",value:l.name})}),Object(pe.jsxs)(Ye.a,{style:{width:"100%"},children:[Object(pe.jsx)(Pe.a,{onClick:function(){return n()},color:"primary",children:"Cancelar"}),l.id?v.loading?Object(pe.jsx)(qe.a,{}):Object(pe.jsx)(Pe.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):y.loading?Object(pe.jsx)(qe.a,{}):Object(pe.jsx)(Pe.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})},Ft={type:"",text:""},Ut={name:"",active:!1},Pt=function(e){var t=e.brand,n=Object(me.d)((function(e){return e.authReducer.authUser})),a=Object(me.d)((function(e){return e.page.user.module})),c=Object(r.useState)(Ut),i=Object(j.a)(c,2),o=i[0],l=i[1],s=Object(me.c)(),u=function(){l(Ut),s(Object(Me.b)(Ft))},d=function(e){switch(e){case"Marca":return Object(pe.jsx)(Rt,{brand:t,handleClose:u})}},b=function(){return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(nt,{open:o.active,dialog:t,title:o.name,component:d(o.name),handleClose:u}),Object(pe.jsx)(Le.a,{align:"right",children:Object(pe.jsx)(Te.a,{title:"Editar Marca",onClick:function(){return l({name:"Marca",active:!0})},children:Object(pe.jsx)(Ke.a,{"aria-label":"role",size:"small",children:Object(pe.jsx)(it.a,{})})})})]})};return Object(pe.jsx)(pe.Fragment,{children:ye(ve.e,n,a,(function(){return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsxs)($e.a,{children:[Object(pe.jsx)(Le.a,{component:"th",scope:"row",children:t.category.name}),Object(pe.jsx)(Le.a,{component:"th",scope:"row",children:t.name}),Object(pe.jsx)(Le.a,{children:rt()(t.createdAt).format("DD/MM/YYYY")}),Object(pe.jsx)(Le.a,{children:rt()(t.updatedAt).format("DD/MM/YYYY")}),ye(ve.h,n,a,b)]})})}))})},Yt={type:"",text:""},qt={name:"",active:!1},zt=function(){var e=Object(me.d)((function(e){return e.authReducer.authUser})),t=Object(me.d)((function(e){return e.page.user.module})),n=Object(r.useState)(qt),a=Object(j.a)(n,2),c=a[0],i=a[1],o=Object(me.c)(),l=Mt(),s=l.data,u=l.loading,d=l.error,b=Object(r.useState)([]),O=Object(j.a)(b,2),m=O[0],h=O[1],p=function(){i(qt),o(Object(Me.b)(Yt))},x=function(e){switch(e){case"Crear":return Object(pe.jsx)(Rt,{handleClose:p})}};if(Object(r.useEffect)((function(){s&&h(s.getBrands)}),[s]),u)return Object(pe.jsx)("h1",{children:"Cargando..."});if(d)return Object(pe.jsx)("h1",{children:Object(Ae.a)(d)});return Object(pe.jsxs)(pe.Fragment,{children:[ye(ve.f,e,t,(function(){return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(nt,{open:c.active,title:"".concat(c.name," Marca"),component:x(c.name),handleClose:p}),Object(pe.jsx)(Te.a,{title:"Crear Marca",children:Object(pe.jsx)(Ke.a,{"aria-label":"add",size:"small",onClick:function(){return i({name:"Crear",active:!0})},children:Object(pe.jsx)(xt.a,{})})})]})})),Object(pe.jsx)(bt.a,{component:ht.a,style:{whiteSpace:"nowrap",marginTop:10},children:Object(pe.jsxs)(jt.a,{size:"small","aria-label":"a dense table",children:[Object(pe.jsx)(Ot.a,{children:Object(pe.jsxs)($e.a,{children:[Object(pe.jsx)(Le.a,{children:"Categoria"}),Object(pe.jsx)(Le.a,{children:"Marca"}),Object(pe.jsx)(Le.a,{children:"Fecha creada"}),Object(pe.jsx)(Le.a,{children:"Fecha modificada"}),ye(ve.h,e,t,(function(){return Object(pe.jsx)(Le.a,{align:"right",children:"Opciones"})}))]})}),Object(pe.jsx)(mt.a,{children:m.map((function(e){return Object(pe.jsx)(Pt,{brand:e},e.id)}))})]})})]})},Bt=Object(O.gql)(P||(P=Object(b.a)(["\n  mutation registerCategory($categoryInput: CreateCategoryInput!) {\n    registerCategory(categoryInput: $categoryInput) {\n      id\n      name\n    }\n  }\n"]))),$t=Object(O.gql)(Y||(Y=Object(b.a)(["\n  mutation updateCategory($categoryInput: UpdateCategoryInput!) {\n    updateCategory(categoryInput: $categoryInput) {\n      id\n      name\n    }\n  }\n"]))),Lt={type:"",text:""},Tt=function(e){var t=e.handleClose,n=e.category,a={id:(null===n||void 0===n?void 0:n.id)||"",name:(null===n||void 0===n?void 0:n.name)||""},c=Object(r.useState)(a.id?a:{name:""}),i=Object(j.a)(c,2),o=i[0],l=i[1],s=Object(me.c)(),u=function(){var e=Object(O.useMutation)($t),t=Object(j.a)(e,2),n=t[0],a=t[1];return{updateCategory:n,error:a.error,loading:a.loading}}(),d=function(){var e=Object(O.useMutation)(Bt,{refetchQueries:function(){return[{query:kt}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{registerCategory:n,error:a.error,loading:a.loading}}(),b=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!o.id){e.next=13;break}return e.prev=2,e.next=5,u.updateCategory({variables:{categoryInput:o}});case 5:s(Object(Me.b)({type:"success",text:"La categoria se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),s(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,d.registerCategory({variables:{categoryInput:o}});case 16:s(Object(Me.b)({type:"success",text:"La categoria ha sido registrado correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),s(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(pe.jsx)("form",{onSubmit:b,children:Object(pe.jsxs)(De.a,{container:!0,spacing:3,children:[Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Re.a,{fullWidth:!0,onChange:function(e){l(Object(x.a)(Object(x.a)({},o),{},Object(Ce.a)({},e.target.name,e.target.value))),s(Object(Me.b)(Lt))},name:"name",autoComplete:"off",id:"idName",label:"Nombre",variant:"outlined",value:o.name})}),Object(pe.jsxs)(Ye.a,{style:{width:"100%"},children:[Object(pe.jsx)(Pe.a,{onClick:function(){return t()},color:"primary",children:"Cancelar"}),o.id?u.loading?Object(pe.jsx)(qe.a,{}):Object(pe.jsx)(Pe.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):d.loading?Object(pe.jsx)(qe.a,{}):Object(pe.jsx)(Pe.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})},Wt={type:"",text:""},Qt={name:"",active:!1},_t=function(e){var t=e.category,n=Object(me.d)((function(e){return e.authReducer.authUser})),a=Object(me.d)((function(e){return e.page.user.module})),c=Object(r.useState)(Qt),i=Object(j.a)(c,2),o=i[0],l=i[1],s=Object(me.c)(),u=function(){l(Qt),s(Object(Me.b)(Wt))},d=function(e){switch(e){case"Categoria":return Object(pe.jsx)(Tt,{category:t,handleClose:u})}},b=function(){return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(nt,{open:o.active,dialog:t,title:o.name,component:d(o.name),handleClose:u}),Object(pe.jsx)(Le.a,{align:"right",children:Object(pe.jsx)(Te.a,{title:"Editar categoria",onClick:function(){return l({name:"Categoria",active:!0})},children:Object(pe.jsx)(Ke.a,{"aria-label":"role",size:"small",children:Object(pe.jsx)(it.a,{})})})})]})};return Object(pe.jsx)(pe.Fragment,{children:ye(ve.e,n,a,(function(){return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsxs)($e.a,{children:[Object(pe.jsx)(Le.a,{component:"th",scope:"row",children:t.name}),Object(pe.jsx)(Le.a,{children:rt()(t.createdAt).format("DD/MM/YYYY")}),Object(pe.jsx)(Le.a,{children:rt()(t.updatedAt).format("DD/MM/YYYY")}),ye(ve.h,n,a,b)]})})}))})},Vt={type:"",text:""},Jt={name:"",active:!1},Gt=function(){var e=Object(me.d)((function(e){return e.authReducer.authUser})),t=Object(me.d)((function(e){return e.page.user.module})),n=Object(r.useState)(Jt),a=Object(j.a)(n,2),c=a[0],i=a[1],o=Object(me.c)(),l=It(),s=l.data,u=l.loading,d=l.error,b=Object(r.useState)([]),O=Object(j.a)(b,2),m=O[0],h=O[1],p=function(){i(Jt),o(Object(Me.b)(Vt))},x=function(e){switch(e){case"Crear":return Object(pe.jsx)(Tt,{handleClose:p})}};if(Object(r.useEffect)((function(){s&&h(s.getCategorys)}),[s]),u)return Object(pe.jsx)("h1",{children:"Cargando..."});if(d)return Object(pe.jsx)("h1",{children:Object(Ae.a)(d)});return Object(pe.jsxs)(pe.Fragment,{children:[ye(ve.f,e,t,(function(){return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(nt,{open:c.active,title:"".concat(c.name," Categoria"),component:x(c.name),handleClose:p}),Object(pe.jsx)(Te.a,{title:"Crear Categoria",children:Object(pe.jsx)(Ke.a,{"aria-label":"add",size:"small",onClick:function(){return i({name:"Crear",active:!0})},children:Object(pe.jsx)(xt.a,{})})})]})})),Object(pe.jsx)(bt.a,{component:ht.a,style:{whiteSpace:"nowrap",marginTop:10},children:Object(pe.jsxs)(jt.a,{size:"small","aria-label":"a dense table",children:[Object(pe.jsx)(Ot.a,{children:Object(pe.jsxs)($e.a,{children:[Object(pe.jsx)(Le.a,{children:"Categoria"}),Object(pe.jsx)(Le.a,{children:"Fecha creada"}),Object(pe.jsx)(Le.a,{children:"Fecha modificada"}),ye(ve.h,e,t,(function(){return Object(pe.jsx)(Le.a,{align:"right",children:"Opciones"})}))]})}),Object(pe.jsx)(mt.a,{children:m.map((function(e){return Object(pe.jsx)(_t,{category:e},e.id)}))})]})})]})},Ht=function(e){return new Intl.NumberFormat("de-DE",{style:"currency",currency:"PEN"}).format(e)},Kt=Object(O.gql)(q||(q=Object(b.a)(["\n  query getEgress {\n    getEgress {\n      id\n      category {\n        name\n      }\n      user {\n        name\n      }\n      detail\n      observation\n      units\n      amount\n      createdAt\n      updatedAt\n    }\n  }\n"]))),Xt=Object(O.gql)(z||(z=Object(b.a)(["\n  mutation deleteEgress($id: String!) {\n    deleteEgress(id: $id)\n  }\n"]))),Zt=n(359),en=Object(O.gql)(B||(B=Object(b.a)(["\n  mutation updateEgress($egressInput: UpdateEgressInput!) {\n    updateEgress(egressInput: $egressInput) {\n      id\n      category {\n        id\n        name\n      }\n      detail\n      observation\n      units\n      amount\n    }\n  }\n"]))),tn=Object(O.gql)($||($=Object(b.a)(["\n  mutation registerEgress($egressInput: CreateEgressInput!) {\n    registerEgress(egressInput: $egressInput) {\n      id\n      category {\n        id\n        name\n      }\n      detail\n      observation\n      units\n      amount\n    }\n  }\n"]))),nn=n(350),an={type:"",text:""},rn={category:""},cn=function(e){var t,n=e.handleClose,a=e.egress,c={detail:"",amount:0,units:0,category:"",user:Object(me.d)((function(e){return e.authReducer.authUser})).name},i={id:(null===a||void 0===a?void 0:a.id)||"",detail:(null===a||void 0===a?void 0:a.detail)||"",amount:(null===a||void 0===a?void 0:a.amount)||0,units:(null===a||void 0===a?void 0:a.units)||0,category:(null===a||void 0===a||null===(t=a.category)||void 0===t?void 0:t.name)||"",observation:(null===a||void 0===a?void 0:a.observation)||""},o=Object(r.useState)(i.id?i:c),l=Object(j.a)(o,2),s=l[0],u=l[1],d=Object(r.useState)(rn),b=Object(j.a)(d,2),m=b[0],g=b[1],f=Object(r.useState)([]),v=Object(j.a)(f,2),y=v[0],C=v[1],w=It().data,S=function(){var e=Object(O.useMutation)(en,{refetchQueries:function(){return[{query:Kt}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{updateEgress:n,error:a.error,loading:a.loading}}(),k=function(){var e=Object(O.useMutation)(tn,{refetchQueries:function(){return[{query:Kt}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{registerEgress:n,error:a.error,loading:a.loading}}(),I=Object(me.c)(),A=function(e){u(Object(x.a)(Object(x.a)({},s),{},Object(Ce.a)({},e.target.name,e.target.value))),I(Object(Me.b)(an))},M=Object(r.useCallback)((function(){C((null===w||void 0===w?void 0:w.getCategorys)||[])}),[w]),D=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!s.id){e.next=13;break}return e.prev=2,e.next=5,S.updateEgress({variables:{egressInput:Object(x.a)(Object(x.a)({},s),{},{units:Number(s.units),amount:Number(s.amount)})}});case 5:I(Object(Me.b)({type:"success",text:"El egreso se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),I(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,k.registerEgress({variables:{egressInput:Object(x.a)(Object(x.a)({},s),{},{units:Number(s.units),amount:Number(s.amount)})}});case 16:I(Object(Me.b)({type:"success",text:"El egreso ha sido registrado correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),I(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){M()}),[M]),Object(pe.jsx)("form",{onSubmit:D,children:Object(pe.jsxs)(De.a,{container:!0,spacing:3,children:[Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Zt.a,{id:"idCategory",value:s.category,onChange:function(e,t){u(Object(x.a)(Object(x.a)({},s),{},{category:(null===t||void 0===t?void 0:t.name)||""})),I(Object(Me.b)(an))},inputValue:m.category?m.category:s.category,onInputChange:function(e,t){g(Object(x.a)(Object(x.a)({},m),{},{category:t}))},options:y,getOptionLabel:function(e){return e.name?e.name:""},getOptionSelected:function(e,t){return e.name===t},renderInput:function(e){return Object(pe.jsx)(Re.a,Object(x.a)(Object(x.a)({},e),{},{name:"category",label:"Categoria",variant:"outlined"}))}})}),Object(pe.jsx)(De.a,{item:!0,xs:4,children:Object(pe.jsx)(Re.a,{fullWidth:!0,onChange:A,name:"units",autoComplete:"off",id:"idUnits",label:"Unidades",variant:"outlined",value:s.units})}),Object(pe.jsx)(De.a,{item:!0,xs:4,children:Object(pe.jsx)(Re.a,{fullWidth:!0,onChange:A,name:"amount",autoComplete:"off",id:"idAmount",label:"Monto",variant:"outlined",value:s.amount,InputProps:{startAdornment:Object(pe.jsx)(nn.a,{position:"start",children:"S/"})}})}),Object(pe.jsx)(De.a,{item:!0,xs:4,children:Object(pe.jsx)(Re.a,{fullWidth:!0,autoComplete:"off",id:"idTotal",label:"Total",variant:"outlined",value:s.units*s.amount,InputProps:{readOnly:!0,startAdornment:Object(pe.jsx)(nn.a,{position:"start",children:"S/"})}})}),Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Re.a,{fullWidth:!0,onChange:A,name:"detail",autoComplete:"off",id:"idDetail",multiline:!0,rows:3,label:"Detalle",variant:"outlined",value:s.detail})}),Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Re.a,{fullWidth:!0,onChange:A,name:"observation",autoComplete:"off",id:"idObservation",multiline:!0,rows:5,label:"Observaci\xf3n",variant:"outlined",value:s.observation})}),Object(pe.jsxs)(Ye.a,{style:{width:"100%"},children:[Object(pe.jsx)(Pe.a,{onClick:function(){return n()},color:"primary",children:"Cancelar"}),s.id?S.loading?Object(pe.jsx)(qe.a,{}):Object(pe.jsx)(Pe.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):k.loading?Object(pe.jsx)(qe.a,{}):Object(pe.jsx)(Pe.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})},on={type:"",text:""},ln={name:"",active:!1},sn=function(e){var t=e.egres,n=Object(me.d)((function(e){return e.authReducer.authUser})),a=Object(me.d)((function(e){return e.page.user})),c=a.module,i=a.page,o=Object(me.c)(),l=Object(r.useState)(ln),s=Object(j.a)(l,2),u=s[0],d=s[1],b=function(){var e=Object(O.useMutation)(Xt,{refetchQueries:function(){return[{query:Kt}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{deleteEgress:n,error:a.error,loading:a.loading}}(),m=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.deleteEgress({variables:{id:t}});case 3:e.next=10;break;case 5:e.prev=5,e.t0=e.catch(0),d({name:"error",active:!0}),o(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t0)})),u.active,u.name;case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){d(ln),o(Object(Me.b)(on))},g=function(){return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(Te.a,{title:"Editar egreso",onClick:function(){return d({name:"Egreso",active:!0})},children:Object(pe.jsx)(Ke.a,{"aria-label":"egress",size:"small",children:Object(pe.jsx)(it.a,{})})})})},f=function(){return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(Te.a,{title:"Eliminar egreso",onClick:function(){return m(t.id)},children:Object(pe.jsx)(Ke.a,{"aria-label":"egress",size:"small",children:Object(pe.jsx)(lt.a,{})})})})};return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(nt,{open:u.active,dialog:t,title:u.name,component:function(e){switch(e){case"Egreso":return Object(pe.jsx)(cn,{egress:t,handleClose:x})}}(u.name),handleClose:x}),ye(ve.e,n,c,(function(){var e;return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsxs)($e.a,{children:[Object(pe.jsx)(Le.a,{component:"th",scope:"row",style:{wordBreak:"break-all"},children:t.category.name}),Object(pe.jsx)(Le.a,{component:"th",scope:"row",style:{wordBreak:"break-all"},children:t.detail}),"RESUMEN-CAJA"===i||Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(Le.a,{component:"th",scope:"row",style:{wordBreak:"break-all"},children:t.observation})}),Object(pe.jsx)(Le.a,{component:"th",scope:"row",children:null===t||void 0===t||null===(e=t.user)||void 0===e?void 0:e.name}),Object(pe.jsx)(Le.a,{component:"th",scope:"row",align:"center",children:t.units}),Object(pe.jsx)(Le.a,{component:"th",scope:"row",align:"right",children:Ht(t.amount)}),Object(pe.jsx)(Le.a,{component:"th",scope:"row",align:"right",children:Ht(t.units*t.amount)}),"RESUMEN-CAJA"===i||"CONSULTAR-CAJA"===i?"":Object(pe.jsx)(Le.a,{component:"th",scope:"row",align:"right",children:Object(pe.jsxs)(pe.Fragment,{children:[ye(ve.h,n,c,g),ye(ve.g,n,c,f)]})})]})})}))]})},un=Object(r.createContext)({summaryIngress:{ingress:0},setSummaryIngress:function(e){},summaryEgress:{egress:0},setSummaryEgress:function(e){}}),dn=un.Provider,jn=(un.Consumer,{type:"",text:""}),bn={name:"",active:!1},On=function(e){var t=e.checkMoney,n=e.resultEgress,a=Object(me.d)((function(e){return e.authReducer.authUser})),c=Object(me.d)((function(e){return e.page.user})),i=c.page,o=c.module,l=Object(r.useState)([]),s=Object(j.a)(l,2),u=s[0],d=s[1],b=function(){var e=Object(O.useQuery)(Kt);return{data:e.data,error:e.error,loading:e.loading}}(),m=b.data,h=b.loading,p=b.error,g=Object(r.useState)(bn),f=Object(j.a)(g,2),v=f[0],y=f[1],C=Object(me.c)(),w=Object(r.useContext)(un),S=w.summaryEgress,k=w.setSummaryEgress,I=function(){y(bn),C(Object(Me.b)(jn))},A=u.map((function(e){return e.units*e.amount})).reduce((function(e,t){return e+t}),0);if(Object(r.useEffect)((function(){void 0===t?m&&d(m.getEgress):d(n),k(Object(x.a)(Object(x.a)({},S),{},{egress:A}))}),[m,k,A]),h)return Object(pe.jsx)("h1",{children:"Cargando..."});if(p)return Object(pe.jsx)("h1",{children:Object(Ae.a)(p)});return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(nt,{open:v.active,title:"".concat(v.name," Egreso"),component:function(e){switch(e){case"Crear":return Object(pe.jsx)(cn,{handleClose:I})}}(v.name),handleClose:I}),"RESUMEN-CAJA"===i||"CONSULTAR-CAJA"===i?"":ye(ve.f,a,o,(function(){return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(Te.a,{title:"Crear Egreso",children:Object(pe.jsx)(Ke.a,{"aria-label":"add",size:"small",onClick:function(){return y({name:"Crear",active:!0})},children:Object(pe.jsx)(xt.a,{})})})})})),Object(pe.jsx)(bt.a,{component:ht.a,style:{whiteSpace:"nowrap",marginTop:"CONSULTAR-CAJA"===i?20:0},children:Object(pe.jsxs)(jt.a,{size:"small","aria-label":"a dense table",children:[Object(pe.jsxs)(Ot.a,{children:[Object(pe.jsxs)($e.a,{style:{background:"#dc3545"},children:[Object(pe.jsx)(Le.a,{style:{color:"#fff"},align:"center",colSpan:"RESUMEN-CAJA"===i?4:5,children:"CONSULTAR-CAJA"===i?"Egreso Total":"Ingreso de hoy"}),Object(pe.jsx)(Le.a,{style:{color:"#fff"},align:"center",colSpan:"RESUMEN-CAJA"===i?2:3,children:"Costo"})]}),Object(pe.jsxs)($e.a,{children:[Object(pe.jsx)(Le.a,{children:"Categoria"}),Object(pe.jsx)(Le.a,{children:"Detalle"}),"RESUMEN-CAJA"===i||Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(Le.a,{children:"Observaci\xf3n"})}),Object(pe.jsx)(Le.a,{children:"Usuario"}),Object(pe.jsx)(Le.a,{align:"center",children:"Unidades"}),Object(pe.jsx)(Le.a,{align:"right",children:"Monto"}),Object(pe.jsx)(Le.a,{align:"right",children:"Monto total"}),"RESUMEN-CAJA"===i||"CONSULTAR-CAJA"===i?"":Object(pe.jsx)(Le.a,{align:"right",children:"Opciones"})]})]}),Object(pe.jsxs)(mt.a,{children:[u.map((function(e){return Object(pe.jsx)(sn,{egres:e},e.id)})),Object(pe.jsxs)($e.a,{children:[Object(pe.jsx)(Le.a,{colSpan:"RESUMEN-CAJA"===i?4:5}),Object(pe.jsx)(Le.a,{children:Object(pe.jsx)("strong",{children:"Total"})}),Object(pe.jsx)(Le.a,{align:"right",children:Object(pe.jsx)("strong",{style:{color:"red"},children:Ht(A)})}),"RESUMEN-CAJA"===i||"CONSULTAR-CAJA"===i?"":Object(pe.jsx)(Le.a,{colSpan:3})]})]})]})})]})},mn=Object(O.gql)(L||(L=Object(b.a)(["\n  query getIngress {\n    getIngress {\n      id\n      category {\n        name\n      }\n      user {\n        name\n      }\n      detail\n      observation\n      units\n      amount\n      createdAt\n      updatedAt\n    }\n  }\n"]))),hn=Object(O.gql)(T||(T=Object(b.a)(["\n  mutation deleteIngress($id: String!) {\n    deleteIngress(id: $id)\n  }\n"]))),pn=Object(O.gql)(W||(W=Object(b.a)(["\n  mutation updateIngress($ingressInput: UpdateIngressInput!) {\n    updateIngress(ingressInput: $ingressInput) {\n      id\n      category {\n        id\n        name\n      }\n      detail\n      observation\n      units\n      amount\n    }\n  }\n"]))),xn=Object(O.gql)(Q||(Q=Object(b.a)(["\n  mutation registerIngress($ingressInput: CreateIngressInput!) {\n    registerIngress(ingressInput: $ingressInput) {\n      id\n      category {\n        id\n        name\n      }\n      detail\n      observation\n      units\n      amount\n    }\n  }\n"]))),gn={type:"",text:""},fn={category:""},vn=function(e){var t,n=e.handleClose,a=e.ingres,c={detail:"",amount:0,units:0,category:"",user:Object(me.d)((function(e){return e.authReducer.authUser})).name},i={id:(null===a||void 0===a?void 0:a.id)||"",detail:(null===a||void 0===a?void 0:a.detail)||"",amount:(null===a||void 0===a?void 0:a.amount)||0,units:(null===a||void 0===a?void 0:a.units)||0,category:(null===a||void 0===a||null===(t=a.category)||void 0===t?void 0:t.name)||"",observation:(null===a||void 0===a?void 0:a.observation)||""},o=Object(r.useState)(i.id?i:c),l=Object(j.a)(o,2),s=l[0],u=l[1],d=Object(r.useState)(fn),b=Object(j.a)(d,2),m=b[0],g=b[1],f=Object(r.useState)([]),v=Object(j.a)(f,2),y=v[0],C=v[1],w=It().data,S=function(){var e=Object(O.useMutation)(pn,{refetchQueries:function(){return[{query:mn}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{updateIngress:n,error:a.error,loading:a.loading}}(),k=function(){var e=Object(O.useMutation)(xn,{refetchQueries:function(){return[{query:mn}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{registerIngress:n,error:a.error,loading:a.loading}}(),I=Object(me.c)(),A=function(e){u(Object(x.a)(Object(x.a)({},s),{},Object(Ce.a)({},e.target.name,e.target.value))),I(Object(Me.b)(gn))},M=Object(r.useCallback)((function(){C((null===w||void 0===w?void 0:w.getCategorys)||[])}),[w]),D=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!s.id){e.next=13;break}return e.prev=2,e.next=5,S.updateIngress({variables:{ingressInput:Object(x.a)(Object(x.a)({},s),{},{units:Number(s.units),amount:Number(s.amount)})}});case 5:I(Object(Me.b)({type:"success",text:"El ingreso se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),I(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,k.registerIngress({variables:{ingressInput:Object(x.a)(Object(x.a)({},s),{},{units:Number(s.units),amount:Number(s.amount)})}});case 16:I(Object(Me.b)({type:"success",text:"El ingreso ha sido registrado correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),I(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){M()}),[M]),Object(pe.jsx)("form",{onSubmit:D,children:Object(pe.jsxs)(De.a,{container:!0,spacing:3,children:[Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Zt.a,{id:"idCategory",value:s.category,onChange:function(e,t){u(Object(x.a)(Object(x.a)({},s),{},{category:(null===t||void 0===t?void 0:t.name)||""})),I(Object(Me.b)(gn))},inputValue:m.category?m.category:s.category,onInputChange:function(e,t){g(Object(x.a)(Object(x.a)({},m),{},{category:t}))},options:y,getOptionLabel:function(e){return e.name?e.name:""},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){return Object(pe.jsx)(Re.a,Object(x.a)(Object(x.a)({},e),{},{name:"category",label:"Categoria",variant:"outlined"}))}})}),Object(pe.jsx)(De.a,{item:!0,xs:4,children:Object(pe.jsx)(Re.a,{fullWidth:!0,onChange:A,name:"units",autoComplete:"off",id:"idUnits",label:"Unidades",variant:"outlined",value:s.units})}),Object(pe.jsx)(De.a,{item:!0,xs:4,children:Object(pe.jsx)(Re.a,{fullWidth:!0,onChange:A,name:"amount",autoComplete:"off",id:"idAmount",label:"Monto",variant:"outlined",value:s.amount,InputProps:{startAdornment:Object(pe.jsx)(nn.a,{position:"start",children:"S/"})}})}),Object(pe.jsx)(De.a,{item:!0,xs:4,children:Object(pe.jsx)(Re.a,{fullWidth:!0,autoComplete:"off",id:"idTotal",label:"Total",variant:"outlined",value:s.units*s.amount,InputProps:{readOnly:!0,startAdornment:Object(pe.jsx)(nn.a,{position:"start",children:"S/"})}})}),Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Re.a,{fullWidth:!0,onChange:A,name:"detail",autoComplete:"off",id:"idDetail",multiline:!0,rows:3,label:"Detalle",variant:"outlined",value:s.detail})}),Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Re.a,{fullWidth:!0,onChange:A,name:"observation",autoComplete:"off",id:"idObservation",multiline:!0,rows:5,label:"Observaci\xf3n",variant:"outlined",value:s.observation})}),Object(pe.jsxs)(Ye.a,{style:{width:"100%"},children:[Object(pe.jsx)(Pe.a,{onClick:function(){return n()},color:"primary",children:"Cancelar"}),s.id?S.loading?Object(pe.jsx)(qe.a,{}):Object(pe.jsx)(Pe.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):k.loading?Object(pe.jsx)(qe.a,{}):Object(pe.jsx)(Pe.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})},yn={type:"",text:""},Cn={name:"",active:!1},wn=Object(Ne.a)((function(e){return{row:{width:700,backgroundColor:"grey"},cell_long:{fontSize:"10px",width:150,minWidth:1,backgroundColor:"#ee82ee"},cell_default:{fontSize:"10px",width:200,minWidth:1,backgroundColor:"#ee82ee"},cell_short:{fontSize:"10px",width:80,backgroundColor:"yellow"}}})),Sn=function(e){var t=e.ingres,n=(wn(),Object(me.d)((function(e){return e.authReducer.authUser}))),a=Object(me.d)((function(e){return e.page.user})),c=a.module,i=a.page,o=Object(me.c)(),l=Object(r.useState)(Cn),s=Object(j.a)(l,2),u=s[0],d=s[1],b=function(){var e=Object(O.useMutation)(hn,{refetchQueries:function(){return[{query:mn}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{deleteIngress:n,error:a.error,loading:a.loading}}(),m=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.deleteIngress({variables:{id:t}});case 3:e.next=10;break;case 5:e.prev=5,e.t0=e.catch(0),d({name:"error",active:!0}),o(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t0)})),u.active,u.name;case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){d(Cn),o(Object(Me.b)(yn))},g=function(){return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(Te.a,{title:"Editar ingreso",onClick:function(){return d({name:"Ingreso",active:!0})},children:Object(pe.jsx)(Ke.a,{"aria-label":"egress",size:"small",children:Object(pe.jsx)(it.a,{})})})})},f=function(){return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(Te.a,{title:"Eliminar ingreso",onClick:function(){return m(t.id)},children:Object(pe.jsx)(Ke.a,{"aria-label":"egress",size:"small",children:Object(pe.jsx)(lt.a,{})})})})};return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(nt,{open:u.active,dialog:t,title:u.name,component:function(e){switch(e){case"Ingreso":return Object(pe.jsx)(vn,{ingres:t,handleClose:x})}}(u.name),handleClose:x}),ye(ve.e,n,c,(function(){var e;return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsxs)($e.a,{children:[Object(pe.jsx)(Le.a,{component:"th",scope:"row",style:{wordBreak:"break-all"},children:t.category.name}),Object(pe.jsx)(Le.a,{component:"th",scope:"row",style:{wordBreak:"break-all"},children:t.detail}),"RESUMEN-CAJA"===i||Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(Le.a,{component:"th",scope:"row",style:{wordBreak:"break-all"},children:t.observation})}),Object(pe.jsx)(Le.a,{component:"th",scope:"row",children:null===t||void 0===t||null===(e=t.user)||void 0===e?void 0:e.name}),Object(pe.jsx)(Le.a,{component:"th",scope:"row",align:"center",children:t.units}),Object(pe.jsx)(Le.a,{component:"th",scope:"row",align:"right",children:Ht(t.amount)}),Object(pe.jsx)(Le.a,{component:"th",scope:"row",align:"right",children:Ht(t.units*t.amount)}),"RESUMEN-CAJA"===i||"CONSULTAR-CAJA"===i?"":Object(pe.jsx)(Le.a,{component:"th",scope:"row",align:"right",children:Object(pe.jsxs)(pe.Fragment,{children:[ye(ve.h,n,c,g),ye(ve.g,n,c,f)]})})]})})}))]})},kn={type:"",text:""},In={name:"",active:!1},An=function(e){var t=e.checkMoney,n=e.resultIngress,a=Object(me.d)((function(e){return e.authReducer.authUser})),c=Object(me.d)((function(e){return e.page.user})),i=c.module,o=c.page,l=Object(r.useState)([]),s=Object(j.a)(l,2),u=s[0],d=s[1],b=function(){var e=Object(O.useQuery)(mn);return{data:e.data,error:e.error,loading:e.loading}}(),m=b.data,h=b.loading,p=b.error,g=Object(r.useState)(In),f=Object(j.a)(g,2),v=f[0],y=f[1],C=Object(me.c)(),w=Object(r.useContext)(un),S=w.summaryIngress,k=w.setSummaryIngress,I=function(){y(In),C(Object(Me.b)(kn))},A=u.map((function(e){return e.units*e.amount})).reduce((function(e,t){return e+t}),0);if(Object(r.useEffect)((function(){void 0===t?m&&d(m.getIngress):d(n),k(Object(x.a)(Object(x.a)({},S),{},{ingress:A}))}),[m,k,A]),h)return Object(pe.jsx)("h1",{children:"Cargando..."});if(p)return Object(pe.jsx)("h1",{children:Object(Ae.a)(p)});return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(nt,{open:v.active,title:"".concat(v.name," Ingreso"),component:function(e){switch(e){case"Crear":return Object(pe.jsx)(vn,{handleClose:I})}}(v.name),handleClose:I}),"RESUMEN-CAJA"===o||"CONSULTAR-CAJA"===o?"":ye(ve.f,a,i,(function(){return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(Te.a,{title:"Crear Ingreso",children:Object(pe.jsx)(Ke.a,{"aria-label":"add",size:"small",onClick:function(){return y({name:"Crear",active:!0})},children:Object(pe.jsx)(xt.a,{})})})})})),Object(pe.jsx)(bt.a,{component:ht.a,style:{whiteSpace:"nowrap",marginTop:"CONSULTAR-CAJA"===o?20:0},children:Object(pe.jsxs)(jt.a,{size:"small","aria-label":"a dense table",children:[Object(pe.jsxs)(Ot.a,{children:[Object(pe.jsxs)($e.a,{style:{background:"#28a745"},children:[Object(pe.jsx)(Le.a,{style:{color:"#fff"},align:"center",colSpan:"RESUMEN-CAJA"===o?4:5,children:"CONSULTAR-CAJA"===o?"Ingreso Total":"Ingreso de hoy"}),Object(pe.jsx)(Le.a,{style:{color:"#fff"},align:"center",colSpan:"RESUMEN-CAJA"===o?2:4,children:"Costo"})]}),Object(pe.jsxs)($e.a,{children:[Object(pe.jsx)(Le.a,{children:"Categoria"}),Object(pe.jsx)(Le.a,{children:"Detalle"}),"RESUMEN-CAJA"===o||Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(Le.a,{children:"Observaci\xf3n"})}),Object(pe.jsx)(Le.a,{children:"Usuario"}),Object(pe.jsx)(Le.a,{align:"center",children:"Unidades"}),Object(pe.jsx)(Le.a,{align:"right",children:"Monto"}),Object(pe.jsx)(Le.a,{align:"right",children:"Monto total"}),"RESUMEN-CAJA"===o||"CONSULTAR-CAJA"===o?"":Object(pe.jsx)(Le.a,{align:"right",children:"Opciones"})]})]}),Object(pe.jsxs)(mt.a,{children:[u.map((function(e){return Object(pe.jsx)(Sn,{ingres:e},e.id)})),Object(pe.jsxs)($e.a,{children:[Object(pe.jsx)(Le.a,{colSpan:"RESUMEN-CAJA"===o?4:5}),Object(pe.jsx)(Le.a,{children:Object(pe.jsx)("strong",{children:"Total"})}),Object(pe.jsx)(Le.a,{align:"right",children:Object(pe.jsx)("strong",{style:{color:"green"},children:Ht(A)})}),"RESUMEN-CAJA"===o||"CONSULTAR-CAJA"===o?"":Object(pe.jsx)(Le.a,{colSpan:3})]})]})]})})]})},Mn=(n(252),function(e){var t=e.checkMoney,n=e.resultIngress,a=e.resultEgress,c=Object(r.useState)({ingress:0}),i=Object(j.a)(c,2),o=i[0],l=i[1],s=Object(r.useState)({egress:0}),u=Object(j.a)(s,2),d=u[0],b=u[1];return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsxs)(dn,{value:{summaryIngress:o,setSummaryIngress:l,summaryEgress:d,setSummaryEgress:b},children:[Object(pe.jsxs)("div",{className:"content-tables-i-e",children:[Object(pe.jsx)("div",{className:"card-table",style:{marginRight:"4%"},children:Object(pe.jsx)(An,{checkMoney:t,resultIngress:n,resultEgress:a})}),Object(pe.jsx)("div",{className:"card-table",children:Object(pe.jsx)(On,{checkMoney:t,resultIngress:n,resultEgress:a})})]}),Object(pe.jsx)("div",{style:{marginTop:20},children:Object(pe.jsx)(bt.a,{component:ht.a,children:Object(pe.jsx)(jt.a,{size:"small","aria-label":"a dense table",children:Object(pe.jsx)(mt.a,{children:Object(pe.jsxs)($e.a,{children:[Object(pe.jsx)(Le.a,{children:Object(pe.jsx)("strong",{children:"Resumen total"})}),Object(pe.jsx)(Le.a,{align:"right",children:Object(pe.jsx)("strong",{style:o.ingress-d.egress<0?{color:"red"}:{color:"green"},children:o.ingress-d.egress<0?Ht(o.ingress-d.egress):"+".concat(Ht(o.ingress-d.egress))})})]})})})})})]})})}),Dn=Object(O.gql)(_||(_=Object(b.a)(["\n  query getEgressByDates($start: String!, $end: String!) {\n    getEgressByDates(start: $start, end: $end) {\n      id\n      detail\n      observation\n      units\n      amount\n      createdAt\n      updatedAt\n      category {\n        name\n      }\n      user {\n        name\n      }\n    }\n  }\n"]))),Nn=Object(O.gql)(V||(V=Object(b.a)(["\n  query getIngressByDates($start: String!, $end: String!) {\n    getIngressByDates(start: $start, end: $end) {\n      id\n      detail\n      observation\n      units\n      amount\n      createdAt\n      updatedAt\n      category {\n        name\n      }\n      user {\n        name\n      }\n    }\n  }\n"]))),En=function(){var e=rt()().utc().local().format("YYYY-MM-DD"),t=Object(me.d)((function(e){return e.authReducer.authUser})),n=Object(me.d)((function(e){return e.page.user})),a=n.module,c=(n.page,function(){var e=Object(O.useLazyQuery)(Nn),t=Object(j.a)(e,2),n=t[0],a=t[1],r=a.error,c=a.loading;return{getIngressByDates:n,data:a.data,error:r,loading:c}}()),i=function(){var e=Object(O.useLazyQuery)(Dn),t=Object(j.a)(e,2),n=t[0],a=t[1],r=a.error,c=a.loading;return{getEgressByDates:n,data:a.data,error:r,loading:c}}(),o={dateStart:e,dateEnd:e},l=Object(r.useState)(o),s=Object(j.a)(l,2),u=s[0],d=s[1],b=Object(r.useState)([]),m=Object(j.a)(b,2),g=m[0],f=m[1],v=Object(r.useState)([]),y=Object(j.a)(v,2),C=y[0],w=y[1],S=function(e){d(Object(x.a)(Object(x.a)({},u),{},Object(Ce.a)({},e.target.name,e.target.value)))},k=function(){var e=Object(p.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.getIngressByDates({variables:{start:t,end:n}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=Object(p.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.getEgressByDates({variables:{start:t,end:n}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){var e,t;c.data&&f((null===c||void 0===c||null===(e=c.data)||void 0===e?void 0:e.getIngressByDates)||[]);i.data&&w((null===i||void 0===i||null===(t=i.data)||void 0===t?void 0:t.getEgressByDates)||[])}),[c.data,i.data]);return Object(pe.jsx)(pe.Fragment,{children:ye(ve.e,t,a,(function(){return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsxs)(De.a,{container:!0,spacing:3,children:[Object(pe.jsx)(De.a,{item:!0,xs:3,children:Object(pe.jsx)(Ue,{fullWidth:!0,type:"date",onChange:S,name:"dateStart",autoComplete:"off",id:"idStart",label:"Desde",variant:"filled",value:u.dateStart})}),Object(pe.jsx)(De.a,{item:!0,xs:3,children:Object(pe.jsx)(Ue,{fullWidth:!0,type:"date",onChange:S,name:"dateEnd",autoComplete:"off",id:"idEnd",label:"Hasta",variant:"filled",value:u.dateEnd})}),Object(pe.jsx)(De.a,{item:!0,xs:3,style:{display:"flex",alignItems:"center"},children:Object(pe.jsx)(Pe.a,{onClick:function(){return k(u.dateStart,u.dateEnd)&&I(u.dateStart,u.dateEnd)},variant:"contained",size:"large",color:"primary",children:"Consultar"})})]}),Object(pe.jsx)(Mn,{checkMoney:u,resultIngress:g,resultEgress:C})]})}))})},Rn=Object(O.gql)(J||(J=Object(b.a)(["\n  query getBrandsByCategory($category: String!) {\n    getBrandsByCategory(category: $category) {\n      id\n      name\n    }\n  }\n"]))),Fn=function(e){var t=Object(O.useQuery)(Rn,{variables:{category:e}}),n=t.error,a=t.loading;return{data:t.data,error:n,loading:a}},Un=Object(O.gql)(G||(G=Object(b.a)(["\n  query getModelsByBrand($brand: String!) {\n    getModelsByBrand(brand: $brand) {\n      id\n      name\n    }\n  }\n"]))),Pn=function(e){var t=Object(O.useQuery)(Un,{variables:{brand:e}}),n=t.error,a=t.loading;return{data:t.data,error:n,loading:a}},Yn=Object(O.gql)(H||(H=Object(b.a)(["\n  query getProductsByCategoryBrandModel(\n    $category: String!\n    $brand: String!\n    $model: String!\n  ) {\n    getProductsByCategoryBrandModel(\n      category: $category\n      brand: $brand\n      model: $model\n    ) {\n      id\n      name\n    }\n  }\n"]))),qn=Object(O.gql)(K||(K=Object(b.a)(["\n  query getProductByName($product: String!) {\n    getProductByName(product: $product) {\n      id\n      name\n      description\n      price\n      createdAt\n      updatedAt\n    }\n  }\n"]))),zn=n(357),Bn=n(365),$n=n(351),Ln=Object(O.gql)(X||(X=Object(b.a)(["\n  query getServicesByCategory($category: String!) {\n    getServicesByCategory(category: $category) {\n      id\n      name\n      description\n      price\n    }\n  }\n"]))),Tn=Object(O.gql)(Z||(Z=Object(b.a)(["\n  query getServiceByName($service: String!) {\n    getServiceByName(service: $service) {\n      id\n      name\n      description\n      price\n      createdAt\n      updatedAt\n    }\n  }\n"]))),Wn={category:"",brand:"",model:"",product:"",service:""},Qn={category:"",brand:"",model:"",product:"",service:""},_n={product:!0,service:!1},Vn=function(){Object(me.d)((function(e){return e.authReducer.authUser}));var e=Object(me.d)((function(e){return e.page.user})),t=(e.module,e.page,Object(r.useState)(Qn)),n=Object(j.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(Wn),o=Object(j.a)(i,2),l=o[0],s=o[1],u=Object(r.useState)([]),d=Object(j.a)(u,2),b=d[0],m=d[1],g=Object(r.useState)([]),f=Object(j.a)(g,2),v=f[0],y=f[1],C=Object(r.useState)([]),w=Object(j.a)(C,2),S=w[0],k=w[1],I=Object(r.useState)([]),A=Object(j.a)(I,2),M=A[0],D=A[1],N=Object(r.useState)([]),E=Object(j.a)(N,2),R=E[0],F=E[1],U=Object(r.useState)(_n),P=Object(j.a)(U,2),Y=P[0],q=P[1],z=It().data,B=Fn(a.category||""),$=function(e){var t=Object(O.useQuery)(Ln,{variables:{category:e}}),n=t.error,a=t.loading;return{data:t.data,error:n,loading:a}}(a.category||""),L=Pn(a.brand||""),T=function(e,t,n){var a=Object(O.useQuery)(Yn,{variables:{category:e,brand:t,model:n}}),r=a.error,c=a.loading;return{data:a.data,error:r,loading:c}}(a.category||"",a.brand||"",a.model||""),W=function(){var e=Object(O.useLazyQuery)(qn),t=Object(j.a)(e,2),n=t[0],a=t[1],r=a.error,c=a.loading;return{getProductByName:n,data:a.data,error:r,loading:c}}(),Q=function(){var e=Object(O.useLazyQuery)(Tn),t=Object(j.a)(e,2),n=t[0],a=t[1],r=a.error,c=a.loading;return{getServiceByName:n,data:a.data,error:r,loading:c}}(),_=Object(r.useCallback)((function(){m((null===z||void 0===z?void 0:z.getCategorys)||[])}),[z]),V=Object(r.useCallback)((function(){var e;y((null===B||void 0===B||null===(e=B.data)||void 0===e?void 0:e.getBrandsByCategory)||[])}),[B]),J=Object(r.useCallback)((function(){var e;F((null===$||void 0===$||null===(e=$.data)||void 0===e?void 0:e.getServicesByCategory)||[])}),[$]),G=Object(r.useCallback)((function(){var e;k((null===L||void 0===L||null===(e=L.data)||void 0===e?void 0:e.getModelsByBrand)||[])}),[L]),H=Object(r.useCallback)((function(){var e;D((null===T||void 0===T||null===(e=T.data)||void 0===e?void 0:e.getProductsByCategoryBrandModel)||[])}),[T]),K=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.getProductByName({variables:{product:t}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.getServiceByName({variables:{service:t}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){_(),V(),G(),H(),J()}),[_,V,G,H,J]),Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsxs)("div",{style:{background:"#fff",borderRadius:6,border:"1px solid #e2e2e1"},children:[Object(pe.jsx)("div",{style:{margin:"20px 20px 0px 20px"},children:Object(pe.jsxs)(Bn.a,{row:!0,"aria-label":"position",onChange:function(e){"product"===e.target.name?q({product:Y.service,service:!Y.service}):q({product:!Y.product,service:Y.product})},children:[Object(pe.jsx)($n.a,{value:"product",checked:Y.product,control:Object(pe.jsx)(zn.a,{color:"primary",name:"product"}),label:"Producto"}),Object(pe.jsx)($n.a,{value:"service",checked:Y.service,control:Object(pe.jsx)(zn.a,{color:"primary",name:"service"}),label:"Servicio"})]})}),Object(pe.jsxs)("div",{style:{display:"flex",padding:20},children:[Object(pe.jsx)("div",{style:{width:"50%"},children:Object(pe.jsxs)(De.a,{container:!0,spacing:3,style:{display:"flex",flexDirection:"column"},children:[Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Zt.a,{id:"idCategory",onChange:function(e,t){c(Object(x.a)(Object(x.a)({},a),{},{category:(null===t||void 0===t?void 0:t.name)||"",brand:"",model:"",product:""})),s(Object(x.a)(Object(x.a)({},l),{},{brand:"",model:""}))},onInputChange:function(e,t){s(Object(x.a)(Object(x.a)({},l),{},{category:t}))},options:b,getOptionLabel:function(e){return e.name},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){return Object(pe.jsx)(Re.a,Object(x.a)(Object(x.a)({},e),{},{name:"category",label:"Categoria",variant:"outlined"}))}})}),Y.product?Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Zt.a,{id:"idBrand",onChange:function(e,t){c(Object(x.a)(Object(x.a)({},a),{},{brand:(null===t||void 0===t?void 0:t.name)||"",model:"",product:""})),s(Object(x.a)(Object(x.a)({},l),{},{model:"",product:""}))},onInputChange:function(e,t){s(Object(x.a)(Object(x.a)({},l),{},{brand:t}))},options:v,getOptionLabel:function(e){return e.name},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){return Object(pe.jsx)(Re.a,Object(x.a)(Object(x.a)({},e),{},{name:"brand",label:"Marca",variant:"outlined"}))}})}),Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Zt.a,{id:"idModel",onChange:function(e,t){c(Object(x.a)(Object(x.a)({},a),{},{model:(null===t||void 0===t?void 0:t.name)||"",product:""})),s(Object(x.a)(Object(x.a)({},l),{},{product:""}))},onInputChange:function(e,t){s(Object(x.a)(Object(x.a)({},l),{},{model:t}))},options:S,getOptionLabel:function(e){return e.name},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){return Object(pe.jsx)(Re.a,Object(x.a)(Object(x.a)({},e),{},{name:"model",label:"Modelo",variant:"outlined"}))}})}),Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Zt.a,{id:"idProduct",onChange:function(e,t){c(Object(x.a)(Object(x.a)({},a),{},{product:(null===t||void 0===t?void 0:t.name)||""}))},onInputChange:function(e,t){s(Object(x.a)(Object(x.a)({},l),{},{product:t}))},options:M,getOptionLabel:function(e){return e.name},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){return Object(pe.jsx)(Re.a,Object(x.a)(Object(x.a)({},e),{},{name:"product",label:"Productos",variant:"outlined"}))}})})]}):Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Zt.a,{id:"idService",onChange:function(e,t){c(Object(x.a)(Object(x.a)({},a),{},{service:(null===t||void 0===t?void 0:t.name)||""}))},onInputChange:function(e,t){s(Object(x.a)(Object(x.a)({},l),{},{service:t}))},options:R,getOptionLabel:function(e){return e.name},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){return Object(pe.jsx)(Re.a,Object(x.a)(Object(x.a)({},e),{},{name:"service",label:"Servicios",variant:"outlined"}))}})}),Y.product?Object(pe.jsx)(De.a,{item:!0,xs:12,children:W.loading?Object(pe.jsx)(qe.a,{}):Object(pe.jsx)(Pe.a,{fullWidth:!0,type:"button",onClick:function(){return K(l.product)},color:"primary",variant:"contained",children:"Consultar"})}):Object(pe.jsx)(De.a,{item:!0,xs:12,children:Q.loading?Object(pe.jsx)(qe.a,{}):Object(pe.jsx)(Pe.a,{fullWidth:!0,type:"button",onClick:function(){return X(l.service)},color:"primary",variant:"contained",children:"Consultar"})})]})}),Object(pe.jsxs)("div",{style:{width:"50%",padding:"0px 0px 0px 20px",display:"flex",flexDirection:"column"},children:[Object(pe.jsxs)("div",{style:{height:"80%",display:"flex",flexDirection:"column"},children:[Object(pe.jsx)("div",{style:{height:"10%",display:"flex",justifyContent:"center",background:W.data||Q.data?"yellow":"#fff"},children:Object(pe.jsx)("strong",{children:Y.product?W.data&&"Descripci\xf3n del producto ".concat(W.data.getProductByName.name):Q.data&&"Descripci\xf3n del servicio ".concat(Q.data.getServiceByName.name)})}),Object(pe.jsx)("div",{style:{height:"90%",display:"flex",justifyContent:"center",wordBreak:"break-all",fontSize:"15px",alignItems:"center"},children:Y.product?W.data&&W.data.getProductByName.description:Q.data&&Q.data.getServiceByName.description})]}),Object(pe.jsx)("div",{style:{height:"20%",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(pe.jsx)("label",{style:{fontSize:75},children:Y.product?W.data&&Ht(W.data.getProductByName.price):Q.data&&Ht(Q.data.getServiceByName.price)})})]})]})]})})},Jn=Object(O.gql)(ee||(ee=Object(b.a)(["\n  query getCustomer {\n    getCustomer {\n      id\n      name\n      lastName\n      document\n      numDocument\n      cellphone_1\n      cellphone_2\n      direction\n      username\n      password\n      createdAt\n      updatedAt\n    }\n  }\n"]))),Gn=function(){var e=Object(O.useQuery)(Jn);return{data:e.data,error:e.error,loading:e.loading}},Hn=Object(O.gql)(te||(te=Object(b.a)(["\n  mutation updateCustomer($customerInput: UpdateCustomerInput!) {\n    updateCustomer(customerInput: $customerInput) {\n      id\n      name\n      lastName\n      document\n      numDocument\n      cellphone_1\n      cellphone_2\n      direction\n      username\n      password\n      createdAt\n      updatedAt\n    }\n  }\n"]))),Kn=Object(O.gql)(ne||(ne=Object(b.a)(["\n  mutation registerCustomer($customerInput: CreateCustomerInput!) {\n    registerCustomer(customerInput: $customerInput) {\n      id\n      name\n      lastName\n      document\n      numDocument\n      cellphone_1\n      cellphone_2\n      direction\n      username\n      password\n      createdAt\n      updatedAt\n    }\n  }\n"]))),Xn=n(141),Zn=n.n(Xn),ea=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zn.a.get("".concat(ve.a).concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ta=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zn.a.get("".concat(ve.b).concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),na=n(288),aa=n(285),ra=Object(Ne.a)((function(e){return Object(Ee.a)({backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}})})),ca=function(e){var t=e.state,n=e.handleClose,a=ra();return Object(pe.jsx)(na.a,{className:a.backdrop,open:t,onClick:n,children:Object(pe.jsx)(aa.a,{color:"inherit"})})},ia={type:"",text:""},oa=function(e){var t=e.handleClose,n=e.customer,a={id:(null===n||void 0===n?void 0:n.id)||"",name:(null===n||void 0===n?void 0:n.name)||"",lastName:(null===n||void 0===n?void 0:n.lastName)||"",document:(null===n||void 0===n?void 0:n.document)||"",numDocument:(null===n||void 0===n?void 0:n.numDocument)||"",cellphone_1:(null===n||void 0===n?void 0:n.cellphone_1)||"",cellphone_2:(null===n||void 0===n?void 0:n.cellphone_2)||void 0,direction:(null===n||void 0===n?void 0:n.direction)||void 0,username:(null===n||void 0===n?void 0:n.username)||"",password:(null===n||void 0===n?void 0:n.password)||""},c=Object(r.useState)(a.id?a:{name:"",lastName:"",document:"DNI",numDocument:"",cellphone_1:"",username:"",password:""}),i=Object(j.a)(c,2),o=i[0],l=i[1],s=Object(r.useState)(!1),u=Object(j.a)(s,2),d=u[0],b=u[1],m=Object(me.c)(),g=function(){var e=Object(O.useMutation)(Hn,{refetchQueries:function(){return[{query:Jn}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{updateCustomer:n,error:a.error,loading:a.loading}}(),f=function(){var e=Object(O.useMutation)(Kn,{refetchQueries:function(){return[{query:Jn}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{registerCustomer:n,error:a.error,loading:a.loading}}(),v=function(e){"direction"===e.target.name||"cellphone_2"===e.target.name?l(Object(x.a)(Object(x.a)({},o),{},Object(Ce.a)({},e.target.name,""===e.target.value?void 0:e.target.value))):l(Object(x.a)(Object(x.a)({},o),{},Object(Ce.a)({},e.target.name,e.target.value)))},y=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!o.id){e.next=13;break}return e.prev=2,e.next=5,g.updateCustomer({variables:{customerInput:o}});case 5:m(Object(Me.b)({type:"success",text:"La cliente se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),m(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,f.registerCustomer({variables:{customerInput:o}});case 16:m(Object(Me.b)({type:"success",text:"La cliente ha sido registrado correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),m(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}(),C=function(e){var t=e.target.value.substr(0,2);return"10"===t?(m(Object(Me.b)(ia)),"PERSONA NATURAL"):"20"===t?(m(Object(Me.b)(ia)),"PERSONA JURIDICA"):void 0},w=function(e){var t=!1,n=e.target.value.substr(0,2);return"10"===n||"20"===n?t=!1:(m(Object(Me.b)({type:"error",text:"Solo existe dos tipos de RUC. Persona natural(10) y Persona Juridica(20)."})),b(!1)),t},S=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,a,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("DNI"!==o.document){e.next=25;break}if(!(t.target.value.length>7&&t.target.value.length<9)){e.next=23;break}return b(!0),e.prev=3,e.next=6,ea(t.target.value);case 6:if(n=e.sent,(a=n.data.result).Nombre||a.Paterno||a.Materno){e.next=14;break}return m(Object(Me.b)({type:"error",text:"No se ha encontrado a la persona. Verifique el nro de documento."})),b(!1),e.abrupt("return");case 14:m(Object(Me.b)(ia));case 15:l(Object(x.a)(Object(x.a)({},o),{},{name:a.Nombre||"",lastName:a.Paterno+" "+a.Materno||""})),b(!1),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(3),alert(e.t0),b(!1);case 23:e.next=53;break;case 25:if("RUC"!==o.document){e.next=52;break}if(!(t.target.value.length>10&&t.target.value.length<12)){e.next=50;break}if(b(!0),!w(t)){e.next=30;break}return e.abrupt("return");case 30:return e.prev=30,e.next=33,ta(t.target.value);case 33:if(r=e.sent,(c=r.data.result).RazonSocial){e.next=41;break}return m(Object(Me.b)({type:"error",text:"No se ha encontrado Razon social. Verifique el nro de documento"})),b(!1),e.abrupt("return");case 41:m(Object(Me.b)(ia));case 42:l(Object(x.a)(Object(x.a)({},o),{},{name:c.RazonSocial||"",lastName:C(t),direction:"-"===c.Direccion?"SIN DIRECCION":c.Direccion||""})),b(!1),e.next=50;break;case 46:e.prev=46,e.t1=e.catch(30),alert(e.t1),b(!1);case 50:e.next=53;break;case 52:m(Object(Me.b)({type:"error",text:"Seleccione un documento v\xe1lido."}));case 53:case"end":return e.stop()}}),e,null,[[3,19],[30,46]])})));return function(t){return e.apply(this,arguments)}}();return Object(pe.jsxs)(pe.Fragment,{children:[d&&Object(pe.jsx)(ca,{state:d}),Object(pe.jsx)("form",{onSubmit:y,children:Object(pe.jsxs)(De.a,{container:!0,spacing:3,children:[Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsxs)(yt.a,{variant:"outlined",fullWidth:!0,children:[Object(pe.jsx)(Ct.a,{id:"idDocument",children:"Documento"}),Object(pe.jsxs)(St.a,{labelId:"Document",id:"idDocument",value:o.document,onChange:function(e){var t;l(Object(x.a)(Object(x.a)({},o),{},(t={},Object(Ce.a)(t,e.target.name,e.target.value),Object(Ce.a)(t,"name",""),Object(Ce.a)(t,"lastName",""),Object(Ce.a)(t,"numDocument",""),Object(Ce.a)(t,"direction","RUC"===o.document?void 0:o.direction),t))),m(Object(Me.b)(ia))},label:"Documento",name:"document",children:[Object(pe.jsx)(wt.a,{value:"DNI",children:"DNI"}),Object(pe.jsx)(wt.a,{value:"RUC",children:"RUC"})]})]})}),Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Ue,{fullWidth:!0,onKeyUp:S,type:"text",onChange:v,name:"numDocument",autoComplete:"off",id:"idNumDocument",label:"Nro de documento",variant:"filled",value:o.numDocument})}),"RUC"===o.document?Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Ue,{fullWidth:!0,type:"text",onChange:v,name:"name",autoComplete:"off",id:"idName",label:"RUC"===o.document?"Razon social":"Nombres",variant:"filled",value:o.name})})}):Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(De.a,{item:!0,xs:6,children:Object(pe.jsx)(Ue,{fullWidth:!0,type:"text",onChange:v,name:"name",autoComplete:"off",id:"idName",label:"Nombres",variant:"filled",value:o.name})}),Object(pe.jsx)(De.a,{item:!0,xs:6,children:Object(pe.jsx)(Ue,{fullWidth:!0,type:"text",onChange:v,name:"lastName",autoComplete:"off",id:"idLastName",label:"Apellidos",variant:"filled",value:o.lastName})})]}),Object(pe.jsx)(De.a,{item:!0,xs:6,children:Object(pe.jsx)(Ue,{fullWidth:!0,type:"text",onChange:v,name:"cellphone_1",autoComplete:"off",id:"idCellphone1",label:"Celular",variant:"filled",value:o.cellphone_1})}),Object(pe.jsx)(De.a,{item:!0,xs:6,children:Object(pe.jsx)(Ue,{fullWidth:!0,type:"text",onChange:v,name:"cellphone_2",autoComplete:"off",id:"idCellphonen2",label:"Celular (opcional)",variant:"filled",value:o.cellphone_2})}),Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Ue,{fullWidth:!0,type:"text",onChange:v,name:"direction",autoComplete:"off",id:"idDirection",label:"Direccion (opcional)",variant:"filled",value:o.direction||""})}),Object(pe.jsx)(De.a,{item:!0,xs:6,children:Object(pe.jsx)(Ue,{fullWidth:!0,type:"text",onChange:v,name:"username",autoComplete:"off",id:"idUserame",label:"Usuario",variant:"filled",value:o.username})}),Object(pe.jsx)(De.a,{item:!0,xs:6,children:Object(pe.jsx)(Ue,{fullWidth:!0,type:"text",onChange:v,name:"password",autoComplete:"off",id:"idPassword",label:"Contrase\xf1a",variant:"filled",value:o.password})}),Object(pe.jsxs)(Ye.a,{style:{width:"100%"},children:[Object(pe.jsx)(Pe.a,{onClick:t,color:"primary",children:"Cancelar"}),o.id?g.loading?Object(pe.jsx)(qe.a,{}):Object(pe.jsx)(Pe.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):f.loading?Object(pe.jsx)(qe.a,{}):Object(pe.jsx)(Pe.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})]})},la=Object(O.gql)(ae||(ae=Object(b.a)(["\n  mutation deleteCustomer($id: String!) {\n    deleteCustomer(id: $id)\n  }\n"]))),sa={type:"",text:""},ua={name:"",active:!1},da=function(e){var t=e.customer,n=Object(me.d)((function(e){return e.authReducer.authUser})),a=Object(me.d)((function(e){return e.page.user.module})),c=Object(r.useState)(ua),i=Object(j.a)(c,2),o=i[0],l=i[1],s=Object(me.c)(),u=function(){var e=Object(O.useMutation)(la,{refetchQueries:function(){return[{query:Jn}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{deleteCustomer:n,error:a.error,loading:a.loading}}(),d=function(){l(ua),s(Object(Me.b)(sa))},b=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.deleteCustomer({variables:{id:t}});case 3:e.next=10;break;case 5:e.prev=5,e.t0=e.catch(0),l({name:"error",active:!0}),s(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t0)})),o.active,o.name;case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(Te.a,{title:"Eliminar Cliente",onClick:function(){return b(t.id)},children:Object(pe.jsx)(Ke.a,{"aria-label":"customer",size:"small",children:Object(pe.jsx)(lt.a,{})})})})},x=function(){return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(Te.a,{title:"Editar Cliente",onClick:function(){return l({name:"Cliente",active:!0})},children:Object(pe.jsx)(Ke.a,{"aria-label":"customer",size:"small",children:Object(pe.jsx)(it.a,{})})})})};return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(nt,{open:o.active,dialog:t,title:o.name,component:function(e){switch(e){case"Cliente":return Object(pe.jsx)(oa,{customer:t,handleClose:d})}}(o.name),handleClose:d}),ye(ve.e,n,a,(function(){return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsxs)($e.a,{children:[Object(pe.jsx)(Le.a,{component:"th",scope:"row",children:"".concat(t.name," ").concat("RUC"===t.document?"":t.lastName)}),Object(pe.jsx)(Le.a,{component:"th",scope:"row",children:t.document}),Object(pe.jsx)(Le.a,{component:"th",scope:"row",children:t.numDocument}),Object(pe.jsx)(Le.a,{component:"th",scope:"row",children:t.cellphone_2?"".concat(t.cellphone_1,", ").concat(t.cellphone_2):"".concat(t.cellphone_1)}),Object(pe.jsx)(Le.a,{component:"th",scope:"row",children:t.direction}),Object(pe.jsxs)(Le.a,{component:"th",scope:"row",align:"center",children:[t.username,"/",t.password]}),Object(pe.jsx)(Le.a,{children:rt()(t.createdAt).format("DD/MM/YYYY")}),Object(pe.jsx)(Le.a,{children:rt()(t.updatedAt).format("DD/MM/YYYY")}),Object(pe.jsxs)(Le.a,{align:"right",children:[ye(ve.h,n,a,x),ye(ve.g,n,a,m)]})]})})}))]})},ja=n(157),ba=n.n(ja),Oa=n(159),ma=n.n(Oa),ha=n(158),pa=n.n(ha),xa=n(156),ga=n.n(xa),fa=Object(Ne.a)((function(e){return Object(Ee.a)({root:{flexShrink:0,marginLeft:e.spacing(2.5)}})}));function va(e){var t=fa(),n=Object(Ge.a)(),a=e.count,r=e.page,c=e.rowsPerPage,i=e.onPageChange;return Object(pe.jsxs)("div",{className:t.root,children:[Object(pe.jsx)(Ke.a,{onClick:function(e){i(e,0)},disabled:0===r,"aria-label":"first page",children:"rtl"===n.direction?Object(pe.jsx)(ga.a,{}):Object(pe.jsx)(ba.a,{})}),Object(pe.jsx)(Ke.a,{onClick:function(e){i(e,r-1)},disabled:0===r,"aria-label":"previous page",children:"rtl"===n.direction?Object(pe.jsx)(pa.a,{}):Object(pe.jsx)(ma.a,{})}),Object(pe.jsx)(Ke.a,{onClick:function(e){i(e,r+1)},disabled:r>=Math.ceil(a/c)-1,"aria-label":"next page",children:"rtl"===n.direction?Object(pe.jsx)(ma.a,{}):Object(pe.jsx)(pa.a,{})}),Object(pe.jsx)(Ke.a,{onClick:function(e){i(e,Math.max(0,Math.ceil(a/c)-1))},disabled:r>=Math.ceil(a/c)-1,"aria-label":"last page",children:"rtl"===n.direction?Object(pe.jsx)(ba.a,{}):Object(pe.jsx)(ga.a,{})})]})}var ya,Ca,wa,Sa,ka,Ia,Aa,Ma,Da,Na,Ea,Ra,Fa,Ua,Pa,Ya,qa,za,Ba,$a,La,Ta,Wa,Qa,_a,Va,Ja,Ga,Ha,Ka,Xa,Za,er,tr,nr,ar=n(358),rr={name:"",active:!1},cr={type:"",text:""},ir=function(){var e=Object(me.d)((function(e){return e.authReducer.authUser})),t=Object(me.d)((function(e){return e.page.user.module})),n=Object(r.useState)(rr),a=Object(j.a)(n,2),c=a[0],i=a[1],o=Object(me.c)(),l=Object(r.useState)([]),s=Object(j.a)(l,2),u=s[0],d=s[1],b=Gn(),O=b.data,m=b.loading,h=b.error,p=Object(r.useState)(5),g=Object(j.a)(p,2),f=g[0],v=g[1],y=Object(r.useState)(0),C=Object(j.a)(y,2),w=C[0],S=C[1],k=(Math.min(f,u.length-w*f),function(){i(rr),o(Object(Me.b)(cr))});if(Object(r.useEffect)((function(){if(O){var e=O.getCustomer.map((function(e){return Object(x.a)(Object(x.a)({},e),{},{createdAt:e.createdAt?new Date(e.createdAt):new Date,updatedAt:e.updatedAt?new Date(e.updatedAt):new Date})})).sort((function(e,t){return t.createdAt.getTime()-e.createdAt.getTime()}));d(e)}}),[O]),m)return Object(pe.jsx)("h1",{children:"Cargando..."});if(h)return Object(pe.jsx)("h1",{children:Object(Ae.a)(h)});return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(nt,{open:c.active,title:"".concat(c.name," Cliente"),component:function(e){switch(e){case"Crear":return Object(pe.jsx)(oa,{handleClose:k})}}(c.name),handleClose:k}),ye(ve.f,e,t,(function(){return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(Te.a,{title:"Crear Cliente",children:Object(pe.jsx)(Ke.a,{"aria-label":"add",size:"small",onClick:function(){return i({name:"Crear",active:!0})},children:Object(pe.jsx)(xt.a,{})})})})})),Object(pe.jsx)(bt.a,{component:ht.a,style:{whiteSpace:"nowrap",marginTop:10},children:Object(pe.jsxs)(jt.a,{stickyHeader:!0,size:"small","aria-label":"a dense table",children:[Object(pe.jsx)(Ot.a,{children:Object(pe.jsxs)($e.a,{children:[Object(pe.jsx)(Le.a,{children:"Nombres"}),Object(pe.jsx)(Le.a,{children:"Documento"}),Object(pe.jsx)(Le.a,{children:"Nro. Documento"}),Object(pe.jsx)(Le.a,{children:"Contacto"}),Object(pe.jsx)(Le.a,{children:"Direcci\xf3n"}),Object(pe.jsx)(Le.a,{children:"Credenciales"}),Object(pe.jsx)(Le.a,{children:"Fecha creada"}),Object(pe.jsx)(Le.a,{children:"Fecha modificada"}),Object(pe.jsx)(Le.a,{children:"Opciones"})]})}),Object(pe.jsx)(mt.a,{children:(f>0?u.slice(w*f,w*f+f):u).map((function(e){return Object(pe.jsx)(da,{customer:e},e.id)}))})]})}),Object(pe.jsx)("div",{children:Object(pe.jsx)(ar.a,{rowsPerPageOptions:[5,10,25,{label:"Todos los registros",value:-1}],style:{borderBottom:"none"},count:u.length,rowsPerPage:f,page:w,SelectProps:{inputProps:{"aria-label":"filas por p\xe1gina"},native:!0},labelRowsPerPage:"filas por p\xe1gina",labelDisplayedRows:function(e){var t=e.from,n=e.to,a=e.count;return"".concat(t,"-").concat(n," de ").concat(a)},onPageChange:function(e,t){S(t)},onRowsPerPageChange:function(e){v(parseInt(e.target.value,10)),S(0)},ActionsComponent:va})})]})},or=Object(O.gql)(ya||(ya=Object(b.a)(["\n  query getDevices {\n    getDevices {\n      id\n      name\n      createdAt\n      updatedAt\n    }\n  }\n"]))),lr=function(){var e=Object(O.useQuery)(or);return{data:e.data,error:e.error,loading:e.loading}},sr=Object(O.gql)(Ca||(Ca=Object(b.a)(["\n  mutation updateDevice($deviceInput: UpdateDeviceInput!) {\n    updateDevice(deviceInput: $deviceInput) {\n      id\n      name\n      createdAt\n      updatedAt\n    }\n  }\n"]))),ur=Object(O.gql)(wa||(wa=Object(b.a)(["\n  mutation registerDevice($deviceInput: CreateDeviceInput!) {\n    registerDevice(deviceInput: $deviceInput) {\n      id\n      name\n      createdAt\n      updatedAt\n    }\n  }\n"]))),dr=function(e){var t=e.handleClose,n=e.device,a={id:(null===n||void 0===n?void 0:n.id)||"",name:(null===n||void 0===n?void 0:n.name)||""},c=Object(r.useState)(a.id?a:{name:""}),i=Object(j.a)(c,2),o=i[0],l=i[1],s=Object(me.c)(),u=function(){var e=Object(O.useMutation)(sr,{refetchQueries:function(){return[{query:or}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{updateDevice:n,error:a.error,loading:a.loading}}(),d=function(){var e=Object(O.useMutation)(ur,{refetchQueries:function(){return[{query:or}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{registerDevice:n,error:a.error,loading:a.loading}}(),b=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!o.id){e.next=13;break}return e.prev=2,e.next=5,u.updateDevice({variables:{deviceInput:o}});case 5:s(Object(Me.b)({type:"success",text:"El dispositivo se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),s(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,d.registerDevice({variables:{deviceInput:o}});case 16:s(Object(Me.b)({type:"success",text:"La dispositivo ha sido registrado correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),s(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)("form",{onSubmit:b,children:Object(pe.jsxs)(De.a,{container:!0,spacing:3,children:[Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Ue,{fullWidth:!0,type:"text",onChange:function(e){l(Object(x.a)(Object(x.a)({},o),{},Object(Ce.a)({},e.target.name,e.target.value)))},name:"name",autoComplete:"off",id:"idName",label:"Nombre",variant:"filled",value:o.name})}),Object(pe.jsxs)(Ye.a,{style:{width:"100%"},children:[Object(pe.jsx)(Pe.a,{onClick:t,color:"primary",children:"Cancelar"}),o.id?u.loading?Object(pe.jsx)(qe.a,{}):Object(pe.jsx)(Pe.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):d.loading?Object(pe.jsx)(qe.a,{}):Object(pe.jsx)(Pe.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})})},jr=Object(O.gql)(Sa||(Sa=Object(b.a)(["\n  mutation deleteDevice($id: String!) {\n    deleteDevice(id: $id)\n  }\n"]))),br={type:"",text:""},Or={name:"",active:!1},mr=function(e){var t=e.device,n=Object(me.d)((function(e){return e.authReducer.authUser})),a=Object(me.d)((function(e){return e.page.user.module})),c=Object(r.useState)(Or),i=Object(j.a)(c,2),o=i[0],l=i[1],s=Object(me.c)(),u=function(){var e=Object(O.useMutation)(jr,{refetchQueries:function(){return[{query:or}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{deleteDevice:n,error:a.error,loading:a.loading}}(),d=function(){l(Or),s(Object(Me.b)(br))},b=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.deleteDevice({variables:{id:t}});case 3:e.next=10;break;case 5:e.prev=5,e.t0=e.catch(0),l({name:"error",active:!0}),s(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t0)})),o.active,o.name;case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(Te.a,{title:"Eliminar dispositivo",onClick:function(){return b(t.id)},children:Object(pe.jsx)(Ke.a,{"aria-label":"device",size:"small",children:Object(pe.jsx)(lt.a,{})})})})},x=function(){return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(Te.a,{title:"Editar dispositivo",onClick:function(){return l({name:"Device",active:!0})},children:Object(pe.jsx)(Ke.a,{"aria-label":"device",size:"small",children:Object(pe.jsx)(it.a,{})})})})};return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(nt,{open:o.active,dialog:t,title:o.name,component:function(e){switch(e){case"Device":return Object(pe.jsx)(dr,{device:t,handleClose:d})}}(o.name),handleClose:d}),ye(ve.e,n,a,(function(){return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsxs)($e.a,{children:[Object(pe.jsx)(Le.a,{component:"th",scope:"row",children:t.name}),Object(pe.jsx)(Le.a,{children:rt()(t.createdAt).format("DD/MM/YYYY")}),Object(pe.jsx)(Le.a,{children:rt()(t.updatedAt).format("DD/MM/YYYY")}),Object(pe.jsxs)(Le.a,{align:"right",children:[ye(ve.h,n,a,x),ye(ve.g,n,a,m)]})]})})}))]})},hr={name:"",active:!1},pr={type:"",text:""},xr=function(){var e=Object(me.d)((function(e){return e.authReducer.authUser})),t=Object(me.d)((function(e){return e.page.user.module})),n=Object(r.useState)(hr),a=Object(j.a)(n,2),c=a[0],i=a[1],o=Object(me.c)(),l=Object(r.useState)([]),s=Object(j.a)(l,2),u=s[0],d=s[1],b=lr(),O=b.data,m=b.loading,h=b.error,p=function(){i(hr),o(Object(Me.b)(pr))};if(Object(r.useEffect)((function(){O&&d(O.getDevices)}),[O]),m)return Object(pe.jsx)("h1",{children:"Cargando..."});if(h)return Object(pe.jsx)("h1",{children:Object(Ae.a)(h)});return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(nt,{open:c.active,title:"".concat(c.name," Dispositivo"),component:function(e){switch(e){case"Crear":return Object(pe.jsx)(dr,{handleClose:p})}}(c.name),handleClose:p}),ye(ve.f,e,t,(function(){return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(Te.a,{title:"Crear dispositivo",children:Object(pe.jsx)(Ke.a,{"aria-label":"add",size:"small",onClick:function(){return i({name:"Crear",active:!0})},children:Object(pe.jsx)(xt.a,{})})})})})),Object(pe.jsx)(bt.a,{component:ht.a,style:{marginTop:10,whiteSpace:"nowrap"},children:Object(pe.jsxs)(jt.a,{size:"small","aria-label":"a dense table",children:[Object(pe.jsx)(Ot.a,{children:Object(pe.jsxs)($e.a,{children:[Object(pe.jsx)(Le.a,{children:"Nombre"}),Object(pe.jsx)(Le.a,{children:"Fecha creada"}),Object(pe.jsx)(Le.a,{children:"Fecha modificada"}),Object(pe.jsx)(Le.a,{align:"right",children:"Opciones"})]})}),Object(pe.jsx)(mt.a,{children:u.map((function(e){return Object(pe.jsx)(mr,{device:e},e.id)}))})]})})]})},gr=Object(O.gql)(ka||(ka=Object(b.a)(["\n  query getModels {\n    getModels {\n      id\n      name\n      brand {\n        id\n        name\n      }\n    }\n  }\n"]))),fr=Object(O.gql)(Ia||(Ia=Object(b.a)(["\n  mutation updateModel($modelInput: UpdateModelInput!) {\n    updateModel(modelInput: $modelInput) {\n      id\n      name\n    }\n  }\n"]))),vr=Object(O.gql)(Aa||(Aa=Object(b.a)(["\n  mutation registerModel($modelInput: CreateModelInput!) {\n    registerModel(modelInput: $modelInput) {\n      id\n      name\n      brand {\n        id\n        name\n      }\n    }\n  }\n"]))),yr={type:"",text:""},Cr=function(e){var t,n=e.handleClose,a=e.model,c={id:(null===a||void 0===a?void 0:a.id)||"",name:(null===a||void 0===a?void 0:a.name)||"",brand:(null===a||void 0===a||null===(t=a.brand)||void 0===t?void 0:t.name)||""},i=Object(r.useState)(c.id?c:{name:"",brand:""}),o=Object(j.a)(i,2),l=o[0],s=o[1],u=Object(r.useState)([]),d=Object(j.a)(u,2),b=d[0],m=d[1],g=Mt().data,f=Object(me.c)(),v=function(){var e=Object(O.useMutation)(fr,{refetchQueries:function(){return[{query:gr}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{updateModel:n,error:a.error,loading:a.loading}}(),y=function(){var e=Object(O.useMutation)(vr,{refetchQueries:function(){return[{query:gr}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{registerModel:n,error:a.error,loading:a.loading}}(),C=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!l.id){e.next=13;break}return e.prev=2,e.next=5,v.updateModel({variables:{modelInput:l}});case 5:f(Object(Me.b)({type:"success",text:"El modelo se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),f(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,y.registerModel({variables:{modelInput:l}});case 16:f(Object(Me.b)({type:"success",text:"El modelo ha sido registrado correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),f(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){g&&m(g.getBrands)}),[g]),Object(pe.jsx)("form",{onSubmit:C,children:Object(pe.jsxs)(De.a,{container:!0,spacing:3,children:[Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsxs)(yt.a,{variant:"outlined",fullWidth:!0,children:[Object(pe.jsx)(Ct.a,{id:"idMarca",children:"Marca"}),Object(pe.jsx)(St.a,{labelId:"Marca",id:"idMarca",value:l.brand,onChange:function(e){s(Object(x.a)(Object(x.a)({},l),{},Object(Ce.a)({},e.target.name,e.target.value))),f(Object(Me.b)(yr))},label:"Marca",name:"brand",children:b.map((function(e){return Object(pe.jsx)(wt.a,{value:e.name,children:e.name},e.id)}))})]})}),Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Re.a,{fullWidth:!0,onChange:function(e){s(Object(x.a)(Object(x.a)({},l),{},Object(Ce.a)({},e.target.name,e.target.value))),f(Object(Me.b)(yr))},name:"name",autoComplete:"off",id:"idName",label:"Modelo",variant:"outlined",value:l.name})}),Object(pe.jsxs)(Ye.a,{style:{width:"100%"},children:[Object(pe.jsx)(Pe.a,{onClick:function(){return n()},color:"primary",children:"Cancelar"}),l.id?v.loading?Object(pe.jsx)(qe.a,{}):Object(pe.jsx)(Pe.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):y.loading?Object(pe.jsx)(qe.a,{}):Object(pe.jsx)(Pe.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})},wr={type:"",text:""},Sr={name:"",active:!1},kr=function(e){var t=e.model,n=Object(me.d)((function(e){return e.authReducer.authUser})),a=Object(me.d)((function(e){return e.page.user.module})),c=Object(r.useState)(Sr),i=Object(j.a)(c,2),o=i[0],l=i[1],s=Object(me.c)(),u=function(){l(Sr),s(Object(Me.b)(wr))},d=function(e){switch(e){case"Modelo":return Object(pe.jsx)(Cr,{model:t,handleClose:u})}},b=function(){return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(nt,{open:o.active,dialog:t,title:o.name,component:d(o.name),handleClose:u}),Object(pe.jsx)(Le.a,{align:"right",children:Object(pe.jsx)(Te.a,{title:"Editar Modelo",onClick:function(){return l({name:"Modelo",active:!0})},children:Object(pe.jsx)(Ke.a,{"aria-label":"role",size:"small",children:Object(pe.jsx)(it.a,{})})})})]})};return Object(pe.jsx)(pe.Fragment,{children:ye(ve.e,n,a,(function(){var e;return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsxs)($e.a,{children:[Object(pe.jsx)(Le.a,{component:"th",scope:"row",children:null===(e=t.brand)||void 0===e?void 0:e.name}),Object(pe.jsx)(Le.a,{component:"th",scope:"row",children:t.name}),Object(pe.jsx)(Le.a,{children:rt()(t.createdAt).format("DD/MM/YYYY")}),Object(pe.jsx)(Le.a,{children:rt()(t.updatedAt).format("DD/MM/YYYY")}),ye(ve.h,n,a,b)]})})}))})},Ir={type:"",text:""},Ar={name:"",active:!1},Mr=function(){var e=Object(me.d)((function(e){return e.authReducer.authUser})),t=Object(me.d)((function(e){return e.page.user.module})),n=Object(r.useState)(Ar),a=Object(j.a)(n,2),c=a[0],i=a[1],o=Object(me.c)(),l=function(){var e=Object(O.useQuery)(gr);return{data:e.data,error:e.error,loading:e.loading}}(),s=l.data,u=l.loading,d=l.error,b=Object(r.useState)([]),m=Object(j.a)(b,2),h=m[0],p=m[1],x=function(){i(Ar),o(Object(Me.b)(Ir))},g=function(e){switch(e){case"Crear":return Object(pe.jsx)(Cr,{handleClose:x})}};if(Object(r.useEffect)((function(){s&&p(s.getModels)}),[s]),u)return Object(pe.jsx)("h1",{children:"Cargando..."});if(d)return Object(pe.jsx)("h1",{children:Object(Ae.a)(d)});return Object(pe.jsxs)(pe.Fragment,{children:[ye(ve.f,e,t,(function(){return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(nt,{open:c.active,title:"".concat(c.name," Modelo"),component:g(c.name),handleClose:x}),Object(pe.jsx)(Te.a,{title:"Crear Modelo",children:Object(pe.jsx)(Ke.a,{"aria-label":"add",size:"small",onClick:function(){return i({name:"Crear",active:!0})},children:Object(pe.jsx)(xt.a,{})})})]})})),Object(pe.jsx)(bt.a,{component:ht.a,style:{whiteSpace:"nowrap",marginTop:10},children:Object(pe.jsxs)(jt.a,{size:"small","aria-label":"a dense table",children:[Object(pe.jsx)(Ot.a,{children:Object(pe.jsxs)($e.a,{children:[Object(pe.jsx)(Le.a,{children:"Marca"}),Object(pe.jsx)(Le.a,{children:"Modelo"}),Object(pe.jsx)(Le.a,{children:"Fecha creada"}),Object(pe.jsx)(Le.a,{children:"Fecha modificada"}),ye(ve.h,e,t,(function(){return Object(pe.jsx)(Le.a,{align:"right",children:"Opciones"})}))]})}),Object(pe.jsx)(mt.a,{children:h.map((function(e){return Object(pe.jsx)(kr,{model:e},e.id)}))})]})})]})},Dr=n(79),Nr=n(366),Er=function(e){var t=e.menu;return Object(pe.jsxs)(pe.Fragment,{children:[t.name===ve.c?Object(pe.jsx)(Nr.a,{style:{margin:"3px"},size:"small",label:t.name,color:"primary"}):Object(pe.jsx)(Nr.a,{style:{margin:"3px"},size:"small",label:t.name,onDelete:function(){return alert("keiner")},color:"primary"}),"\xa0"]})},Rr=function(e){var t=e.access;return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(Nr.a,{style:{margin:"3px"},size:"small",label:t.name,onDelete:function(){return alert("keiner")},color:"primary"})})},Fr=n(160),Ur=n.n(Fr),Pr=n(203),Yr=n.n(Pr),qr=Object(O.gql)(Ma||(Ma=Object(b.a)(["\n  mutation updateModule($moduleInput: UpdateModuleInput!) {\n    updateModule(moduleInput: $moduleInput) {\n      id\n      name\n      description\n      menus {\n        id\n        name\n      }\n      access {\n        id\n        name\n      }\n    }\n  }\n"]))),zr=function(){var e=Object(O.useMutation)(qr,{refetchQueries:function(){return[{query:Dr.a}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{updateModule:n,error:a.error,loading:a.loading}},Br=n(335),$r=Object(O.gql)(Da||(Da=Object(b.a)(["\n  mutation registerModule($moduleInput: CreateModuleInput!) {\n    registerModule(moduleInput: $moduleInput) {\n      id\n      name\n      description\n      createdAt\n      updatedAt\n      menus {\n        id\n        name\n      }\n      access {\n        id\n        name\n      }\n    }\n  }\n"]))),Lr=Object(O.gql)(Na||(Na=Object(b.a)(["\n  query getAccess {\n    getAccess {\n      id\n      name\n    }\n  }\n"]))),Tr=function(){var e=Object(O.useQuery)(Lr),t=e.data,n=e.error,a=e.loading,r=Object(me.c)();return n&&r(Object(Me.b)({type:"error",text:n.message})),{data:t,error:n,loading:a}},Wr=Object(O.gql)(Ea||(Ea=Object(b.a)(["\n  query getMenus {\n    getMenus {\n      id\n      name\n      link\n      createdAt\n      updatedAt\n    }\n  }\n"]))),Qr=function(){var e=Object(O.useQuery)(Wr),t=e.data,n=e.error,a=e.loading,r=Object(me.c)();return n&&r(Object(Me.b)({type:"error",text:n.message})),{data:t,error:n,loading:a}},_r=Object(Ne.a)((function(e){return Object(Ee.a)({formControl:{margin:e.spacing(1),minWidth:120,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}})})),Vr={PaperProps:{style:{maxHeight:224,width:250}}},Jr=function(e){var t=e.module,n=e.handleClose,a={id:(null===t||void 0===t?void 0:t.id)||"",name:(null===t||void 0===t?void 0:t.name)||"",description:(null===t||void 0===t?void 0:t.description)||""},c=zr(),i=function(){var e=Object(O.useMutation)($r,{refetchQueries:function(){return[{query:Dr.a}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{registerModule:n,error:a.error,loading:a.loading}}(),o=Tr(),l=Qr(),s=Object(r.useState)([]),u=Object(j.a)(s,2),d=u[0],b=u[1],m=Object(r.useState)([]),g=Object(j.a)(m,2),f=g[0],v=g[1],y=Object(r.useState)([]),C=Object(j.a)(y,2),w=C[0],S=C[1],k=Object(r.useState)([]),I=Object(j.a)(k,2),A=I[0],M=I[1],D=Object(r.useState)(a.id?a:{name:"",description:""}),N=Object(j.a)(D,2),E=N[0],R=N[1],F=Object(me.c)(),U=_r(),P=Object(Ge.a)(),Y=function(e){R(Object(x.a)(Object(x.a)({},E),{},Object(Ce.a)({},e.target.name,e.target.value))),F(Object(Me.b)({type:"",text:""}))},q=d.map((function(e){return{name:e}})),z=f.map((function(e){return{name:e}}));function B(e,t,n){return{fontWeight:-1===t.indexOf(e)?n.typography.fontWeightRegular:n.typography.fontWeightMedium}}var $=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!E.id){e.next=13;break}return e.prev=2,e.next=5,c.updateModule({variables:{moduleInput:E}});case 5:F(Object(Me.b)({type:"success",text:"El modulo se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),F(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,i.registerModule({variables:{moduleInput:Object(x.a)(Object(x.a)({},E),{},{access:z,menus:q})}});case 16:F(Object(Me.b)({type:"success",text:"El modulo se registr\xf3 correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),F(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){if(l.data&&o.data){var e=l.data.getMenus.filter((function(e){return e.name!==ve.c}));S(e),M(o.data.getAccess)}}),[l.data,o.data,E.name]),Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)("form",{onSubmit:$,children:Object(pe.jsxs)(De.a,{container:!0,spacing:3,children:[E.id&&E.name===ve.d?"":Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Re.a,{fullWidth:!0,onChange:Y,name:"name",id:"idName",label:"Modulo",variant:"outlined",value:E.name})}),Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Re.a,{fullWidth:!0,onChange:Y,name:"description",id:"idDescription",label:"Descripci\xf3n",multiline:!0,value:E.description,variant:"outlined"})}),!a.id&&Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsxs)(yt.a,{variant:"outlined",fullWidth:!0,children:[Object(pe.jsx)(Ct.a,{id:"menus-mutiple-chip-label",children:"Menus"}),Object(pe.jsx)(St.a,{labelId:"menus-mutiple-chip-label",id:"menus-mutiple-chip",multiple:!0,value:d,onChange:function(e){b(e.target.value),F(Object(Me.b)({type:"",text:""}))},input:Object(pe.jsx)(Br.a,{id:"select-multiple-chip"}),renderValue:function(e){return Object(pe.jsx)("div",{className:U.chips,children:e.map((function(e){return Object(pe.jsx)(Nr.a,{label:e,className:e.chip},e)}))})},MenuProps:Vr,children:w.map((function(e){return Object(pe.jsx)(wt.a,{value:e.name,style:B(e.name,E.menus||[],P),children:e.name},e.id)}))})]})}),Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsxs)(yt.a,{variant:"outlined",fullWidth:!0,children:[Object(pe.jsx)(Ct.a,{id:"access-mutiple-chip-label",children:"Accesos"}),Object(pe.jsx)(St.a,{labelId:"access-mutiple-chip-label",id:"access-mutiple-chip",multiple:!0,value:f,onChange:function(e){v(e.target.value),F(Object(Me.b)({type:"",text:""}))},input:Object(pe.jsx)(Br.a,{id:"select-multiple-chip"}),renderValue:function(e){return Object(pe.jsx)("div",{className:U.chips,children:e.map((function(e){return Object(pe.jsx)(Nr.a,{label:e,className:e.chip},e)}))})},MenuProps:Vr,children:A.map((function(e){return Object(pe.jsx)(wt.a,{value:e.name,style:B(e.name,E.access||[],P),children:e.name},e.id)}))})]})})]}),Object(pe.jsxs)(Ye.a,{style:{width:"100%"},children:[Object(pe.jsx)(Pe.a,{onClick:function(){return n()},color:"primary",children:"Cancelar"}),E.id?c.loading?Object(pe.jsx)(qe.a,{}):Object(pe.jsx)(Pe.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):i.loading?Object(pe.jsx)(qe.a,{}):Object(pe.jsx)(Pe.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})})},Gr=n(114),Hr=function(e){var t=e.module,n=e.handleClose,a=Object(r.useState)([]),c=Object(j.a)(a,2),i=c[0],o=c[1],l=Object(r.useState)([]),s=Object(j.a)(l,2),u=s[0],d=s[1],b=Object(r.useState)([]),O=Object(j.a)(b,2),m=O[0],x=O[1],g=Object(me.c)(),f=zr(),v=Tr(),y=Object(me.d)((function(e){return e.message})),C=y.type,w=y.text,S=function(){var e=Object(p.a)(h.a.mark((function e(n){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=u.map((function(e){return{name:e.name}})),e.prev=2,e.next=5,f.updateModule({variables:{moduleInput:{id:t.id,access:a}}});case 5:return e.abrupt("return",g(Object(Me.b)({type:"success",text:"El modulo actualiz\xf3 sus accesos correctamente."})));case 8:e.prev=8,e.t0=e.catch(2),g(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t0)}));case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),k=Object(r.useCallback)((function(){var e=v.data.getAccess.filter((function(e){var n;return!(null===(n=t.access)||void 0===n?void 0:n.some((function(t){return e.name===t.name})))}));o(e)}),[t,v.data]);return Object(r.useEffect)((function(){t&&v.data&&(d(t.access||[]),k())}),[t,v.data,k]),"error"===C?Object(pe.jsx)("h1",{children:w}):Object(pe.jsx)("form",{onSubmit:S,children:Object(pe.jsxs)(De.a,{container:!0,spacing:3,children:[Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Gr.a,{setListAvailable:o,setListCurrent:d,setChecked:x,checked:m,listAvailable:i,titleAvailable:"Accesos disponibles",listCurrent:u,titleCurrent:"Accesos actuales",loading:v.loading})}),Object(pe.jsxs)(Ye.a,{style:{width:"100%"},children:[Object(pe.jsx)(Pe.a,{onClick:n,color:"primary",children:"Cancelar"}),Object(pe.jsx)(Pe.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",disabled:!!f.loading,children:t.id?"Actualizar":"Registrar"})]})]})})},Kr=function(e){var t=e.module,n=e.handleClose,a=Object(r.useState)([]),c=Object(j.a)(a,2),i=c[0],o=c[1],l=Object(r.useState)([]),s=Object(j.a)(l,2),u=s[0],d=s[1],b=Object(r.useState)([]),O=Object(j.a)(b,2),m=O[0],x=O[1],g=Object(me.c)(),f=Qr(),v=zr(),y=Object(me.d)((function(e){return e.message})),C=y.type,w=y.text,S=function(){var e=Object(p.a)(h.a.mark((function e(n){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=u.map((function(e){return{name:e.name}})),e.prev=2,e.next=5,v.updateModule({variables:{moduleInput:{id:t.id,menus:a}}});case 5:return e.abrupt("return",g(Object(Me.b)({type:"success",text:"El modulo actualiz\xf3 sus menu correctamente."})));case 8:e.prev=8,e.t0=e.catch(2),g(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t0)}));case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),k=Object(r.useCallback)((function(){var e=f.data.getMenus.filter((function(e){var n;return!(null===(n=t.menus)||void 0===n?void 0:n.some((function(t){return e.name===t.name})))})).filter((function(e){return e.name!==ve.c}));o(e)}),[t,f.data]);return Object(r.useEffect)((function(){if(t&&f.data){var e,n=null===(e=t.menus)||void 0===e?void 0:e.filter((function(e){return e.name!==ve.c}));d(n||[]),k()}}),[t,f.data,k]),"error"===C?Object(pe.jsx)("h1",{children:w}):Object(pe.jsx)("form",{onSubmit:S,children:Object(pe.jsxs)(De.a,{container:!0,spacing:3,children:[Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Gr.a,{setListAvailable:o,setListCurrent:d,setChecked:x,checked:m,listAvailable:i,titleAvailable:"Menus disponibles",listCurrent:u,titleCurrent:"Menus actuales",loading:f.loading})}),Object(pe.jsxs)(Ye.a,{style:{width:"100%"},children:[Object(pe.jsx)(Pe.a,{onClick:n,color:"primary",children:"Cancelar"}),Object(pe.jsx)(Pe.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",disabled:!!v.loading,children:t.id?"Actualizar":"Registrar"})]})]})})},Xr={name:"",active:!1},Zr=function(e){var t=e.module,n=Object(r.useState)(Xr),a=Object(j.a)(n,2),c=a[0],i=a[1],o=Object(me.c)(),l=function(){i(Object(x.a)(Object(x.a)({},c),{},{active:!1})),o(Object(Me.b)({type:"",text:""}))};return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(nt,{open:c.active,dialog:t,title:c.name,component:function(e){switch(e){case"Modulo":return Object(pe.jsx)(Jr,{module:t,handleClose:l});case"Acceso":return Object(pe.jsx)(Hr,{module:t,handleClose:l});case"Menu":return Object(pe.jsx)(Kr,{module:t,handleClose:l})}}(c.name),handleClose:l}),Object(pe.jsxs)($e.a,{children:[Object(pe.jsx)(Le.a,{component:"th",scope:"row",children:t.name}),Object(pe.jsx)(Le.a,{children:t.description}),Object(pe.jsx)(Le.a,{children:rt()(t.createdAt).format("DD/MM/YYYY")}),Object(pe.jsx)(Le.a,{children:rt()(t.updatedAt).format("DD/MM/YYYY")}),Object(pe.jsx)(Le.a,{align:"center",children:t.menus&&t.menus.map((function(e){return Object(pe.jsx)(Er,{menu:e},e.id)}))}),Object(pe.jsx)(Le.a,{align:"center",children:t.name===ve.d?Object(pe.jsx)(Nr.a,{style:{margin:"3px"},size:"small",label:"Todos los permisos",color:"primary"}):t.access&&t.access.map((function(e){return Object(pe.jsx)(Rr,{access:e},e.id)}))}),t.name===ve.d?Object(pe.jsx)(Le.a,{align:"center",children:Object(pe.jsx)(Te.a,{title:"Asignar menu",onClick:function(){return i({name:"Menu",active:!0})},children:Object(pe.jsx)(Ke.a,{"aria-label":"menu",size:"small",children:Object(pe.jsx)(Ur.a,{})})})}):Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsxs)(Le.a,{align:"right",children:[Object(pe.jsx)(Te.a,{title:"Asignar menu",onClick:function(){return i({name:"Menu",active:!0})},children:Object(pe.jsx)(Ke.a,{"aria-label":"menu",size:"small",children:Object(pe.jsx)(Ur.a,{})})}),Object(pe.jsx)(Te.a,{title:"Asignar acceso",onClick:function(){return i({name:"Acceso",active:!0})},children:Object(pe.jsx)(Ke.a,{"aria-label":"acceso",size:"small",children:Object(pe.jsx)(Yr.a,{})})}),Object(pe.jsx)(Te.a,{title:"Editar modulo",onClick:function(){return i({name:"Modulo",active:!0})},children:Object(pe.jsx)(Ke.a,{"aria-label":"acceso",size:"small",children:Object(pe.jsx)(it.a,{})})})]})})]})]})},ec=Object(Ne.a)({table:{minWidth:650}}),tc={name:"",active:!1},nc=function(){var e,t=Object(r.useState)([]),n=Object(j.a)(t,2),a=n[0],c=n[1],i=Object(Dr.b)(),o=i.data,l=i.loading,s=i.error,u=Object(r.useState)(tc),d=Object(j.a)(u,2),b=d[0],O=d[1],m=Object(me.c)(),h=ec(),p=Object(me.d)((function(e){return e.authReducer.authUser})),g=function(){O(Object(x.a)(Object(x.a)({},b),{},{active:!1})),m(Object(Me.b)({type:"",text:""}))};return Object(r.useEffect)((function(){o&&c(o.getModules)}),[o]),l?Object(pe.jsx)("h1",{children:"Cargando..."}):s?Object(pe.jsx)("h1",{children:Object(Ae.a)(s)}):Object(pe.jsx)(pe.Fragment,{children:(null===p||void 0===p||null===(e=p.role)||void 0===e?void 0:e.name)===ve.i?Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(nt,{open:b.active,title:"".concat(b.name," Modulo"),component:function(e){switch(e){case"Crear":return Object(pe.jsx)(Jr,{handleClose:g})}}(b.name),handleClose:g}),Object(pe.jsx)(Te.a,{title:"Crear Rol",children:Object(pe.jsx)(Ke.a,{"aria-label":"add",size:"small",onClick:function(){return O({name:"Crear",active:!0})},children:Object(pe.jsx)(xt.a,{})})}),Object(pe.jsx)(bt.a,{style:{whiteSpace:"nowrap"},component:ht.a,children:Object(pe.jsxs)(jt.a,{className:h.table,size:"small","aria-label":"a dense table",children:[Object(pe.jsx)(Ot.a,{children:Object(pe.jsxs)($e.a,{children:[Object(pe.jsx)(Le.a,{children:"Modulo"}),Object(pe.jsx)(Le.a,{children:"Descripci\xf3n"}),Object(pe.jsx)(Le.a,{children:"Fecha creada"}),Object(pe.jsx)(Le.a,{children:"Fecha modificada"}),Object(pe.jsx)(Le.a,{align:"center",children:"Menus"}),Object(pe.jsx)(Le.a,{align:"center",children:"Permisos"}),Object(pe.jsx)(Le.a,{align:"right",children:"Opciones"})]})}),Object(pe.jsx)(mt.a,{children:a.map((function(e){return Object(pe.jsx)(Zr,{module:e},e.id)}))})]})})]}):Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)("h1",{children:"No tiene permiso para acceder a este recurso."})})})},ac=Object(O.gql)(Ra||(Ra=Object(b.a)(["\n  query getProducts {\n    getProducts {\n      id\n      name\n      description\n      price\n      cant\n      createdAt\n      updatedAt\n      category {\n        id\n        name\n      }\n      brand {\n        id\n        name\n      }\n      model {\n        id\n        name\n      }\n    }\n  }\n"]))),rc=Object(O.gql)(Fa||(Fa=Object(b.a)(["\n  mutation updateService($productInput: UpdateProductInput!) {\n    updateProduct(productInput: $productInput) {\n      id\n      name\n      description\n      price\n      category {\n        id\n        name\n      }\n      brand {\n        id\n        name\n      }\n      model {\n        id\n        name\n      }\n    }\n  }\n"]))),cc=Object(O.gql)(Ua||(Ua=Object(b.a)(["\n  mutation registerProduct($productInput: CreateProductInput!) {\n    registerProduct(productInput: $productInput) {\n      id\n      name\n      description\n      price\n      category {\n        id\n        name\n      }\n      brand {\n        id\n        name\n      }\n      model {\n        id\n        name\n      }\n    }\n  }\n"]))),ic={type:"",text:""},oc={category:"",brand:"",model:""},lc=function(e){var t,n,a,c=e.handleClose,i=e.product,o={id:(null===i||void 0===i?void 0:i.id)||"",name:(null===i||void 0===i?void 0:i.name)||"",description:(null===i||void 0===i?void 0:i.description)||"",price:(null===i||void 0===i?void 0:i.price)||0,cant:(null===i||void 0===i?void 0:i.cant)||0,category:(null===i||void 0===i||null===(t=i.category)||void 0===t?void 0:t.name)||"",brand:(null===i||void 0===i||null===(n=i.brand)||void 0===n?void 0:n.name)||"",model:(null===i||void 0===i||null===(a=i.model)||void 0===a?void 0:a.name)||""},l=Object(r.useState)(o.id?o:{name:"",price:0,category:"",brand:"",model:"",cant:0}),s=Object(j.a)(l,2),u=s[0],d=s[1],b=Object(r.useState)(oc),m=Object(j.a)(b,2),g=m[0],f=m[1],v=Object(r.useState)([]),y=Object(j.a)(v,2),C=y[0],w=y[1],S=Object(r.useState)([]),k=Object(j.a)(S,2),I=k[0],A=k[1],M=It().data,D=Object(r.useState)([]),N=Object(j.a)(D,2),E=N[0],R=N[1],F=Object(me.c)(),U=function(){var e=Object(O.useMutation)(rc,{refetchQueries:function(){return[{query:ac}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{updateProduct:n,error:a.error,loading:a.loading}}(),P=function(){var e=Object(O.useMutation)(cc,{refetchQueries:function(){return[{query:ac}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{registerProduct:n,error:a.error,loading:a.loading}}(),Y=Fn(u.category||""),q=Pn(u.brand||""),z=function(e){d(Object(x.a)(Object(x.a)({},u),{},Object(Ce.a)({},e.target.name,e.target.value))),F(Object(Me.b)(ic))},B=Object(r.useCallback)((function(){R(M.getCategorys)}),[M]),$=Object(r.useCallback)((function(){var e;w((null===Y||void 0===Y||null===(e=Y.data)||void 0===e?void 0:e.getBrandsByCategory)||[])}),[Y]),L=Object(r.useCallback)((function(){var e;A((null===q||void 0===q||null===(e=q.data)||void 0===e?void 0:e.getModelsByBrand)||[])}),[q]),T=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!u.id){e.next=13;break}return e.prev=2,e.next=5,U.updateProduct({variables:{productInput:Object(x.a)(Object(x.a)({},u),{},{price:Number(u.price),cant:Number(u.cant)})}});case 5:F(Object(Me.b)({type:"success",text:"El producto se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),F(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,P.registerProduct({variables:{productInput:Object(x.a)(Object(x.a)({},u),{},{price:Number(u.price),cant:Number(u.cant)})}});case 16:F(Object(Me.b)({type:"success",text:"El producto ha sido registrada correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),F(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){M&&(B(),$(),L())}),[M,B,$,L]),Object(pe.jsx)("form",{onSubmit:T,children:Object(pe.jsxs)(De.a,{container:!0,spacing:3,children:[Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Zt.a,{id:"idCategory",onChange:function(e,t){d(Object(x.a)(Object(x.a)({},u),{},{category:(null===t||void 0===t?void 0:t.name)||"",brand:"",model:""})),f(Object(x.a)(Object(x.a)({},g),{},{brand:"",model:""})),F(Object(Me.b)(ic))},onKeyUp:function(e){(e.target.value.length<u.category.length||0===e.target.value.length)&&(d(Object(x.a)(Object(x.a)({},u),{},{category:"",brand:"",model:""})),f(Object(x.a)(Object(x.a)({},g),{},{category:"",brand:"",model:""})))},inputValue:g.category?g.category:u.category,onInputChange:function(e,t){f(Object(x.a)(Object(x.a)({},g),{},{category:t}))},options:E,getOptionLabel:function(e){return e.name?e.name:""},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){return Object(pe.jsx)(Re.a,Object(x.a)(Object(x.a)({},e),{},{name:"category",label:"Categoria",variant:"outlined"}))}})}),Object(pe.jsx)(De.a,{item:!0,xs:6,children:Object(pe.jsx)(Zt.a,{id:"idBrand",onChange:function(e,t){d(Object(x.a)(Object(x.a)({},u),{},{brand:(null===t||void 0===t?void 0:t.name)||"",model:""})),f(Object(x.a)(Object(x.a)({},g),{},{model:""})),F(Object(Me.b)(ic))},onKeyUp:function(e){(e.target.value.length<u.brand.length||0===e.target.value.length)&&(d(Object(x.a)(Object(x.a)({},u),{},{brand:"",model:""})),f(Object(x.a)(Object(x.a)({},g),{},{brand:"",model:""})))},inputValue:g.brand?g.brand:u.brand,onInputChange:function(e,t){f(Object(x.a)(Object(x.a)({},g),{},{brand:t}))},options:C,getOptionLabel:function(e){return e.name?e.name:""},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){return Object(pe.jsx)(Re.a,Object(x.a)(Object(x.a)({},e),{},{name:"brand",label:"Marca",variant:"outlined"}))}})}),Object(pe.jsx)(De.a,{item:!0,xs:6,children:Object(pe.jsx)(Zt.a,{id:"idModel",onChange:function(e,t){d(Object(x.a)(Object(x.a)({},u),{},{model:(null===t||void 0===t?void 0:t.name)||""})),F(Object(Me.b)(ic))},onKeyUp:function(e){(e.target.value.length<u.model.length||0===e.target.value.length)&&(d(Object(x.a)(Object(x.a)({},u),{},{model:""})),f(Object(x.a)(Object(x.a)({},g),{},{model:""})))},inputValue:g.model?g.model:u.model,onInputChange:function(e,t){f(Object(x.a)(Object(x.a)({},g),{},{model:t}))},options:I,getOptionLabel:function(e){return e.name?e.name:""},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){return Object(pe.jsx)(Re.a,Object(x.a)(Object(x.a)({name:"model"},e),{},{label:"Modelo",variant:"outlined"}))}})}),Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Re.a,{fullWidth:!0,onChange:z,name:"name",autoComplete:"off",id:"idName",label:"Producto",variant:"outlined",value:u.name})}),Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Re.a,{fullWidth:!0,name:"description",onChange:z,id:"idDescription",label:"Descripci\xf3n",multiline:!0,rows:6,defaultValue:u.description,variant:"outlined"})}),Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Re.a,{fullWidth:!0,onChange:z,name:"price",autoComplete:"off",id:"idPrice",label:"Precio",variant:"outlined",value:u.price,InputProps:{startAdornment:Object(pe.jsx)(nn.a,{position:"start",children:"S/"})}})}),Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Re.a,{fullWidth:!0,onChange:z,name:"cant",autoComplete:"off",id:"idCant",label:"Cantidad",variant:"outlined",value:u.cant})}),Object(pe.jsxs)(Ye.a,{style:{width:"100%"},children:[Object(pe.jsx)(Pe.a,{onClick:function(){return c()},color:"primary",children:"Cancelar"}),u.id?U.loading?Object(pe.jsx)(qe.a,{}):Object(pe.jsx)(Pe.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):P.loading?Object(pe.jsx)(qe.a,{}):Object(pe.jsx)(Pe.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})},sc=Object(O.gql)(Pa||(Pa=Object(b.a)(["\n  mutation deleteProduct($id: String!) {\n    deleteProduct(id: $id)\n  }\n"]))),uc={type:"",text:""},dc={name:"",active:!1},jc=function(e){var t=e.product,n=Object(me.d)((function(e){return e.authReducer.authUser})),a=Object(me.d)((function(e){return e.page.user.module})),c=Object(r.useState)(dc),i=Object(j.a)(c,2),o=i[0],l=i[1],s=Object(me.c)(),u=function(){var e=Object(O.useMutation)(sc,{refetchQueries:function(){return[{query:ac}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{deleteProduct:n,error:a.error,loading:a.loading}}(),d=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.deleteProduct({variables:{id:t}});case 3:e.next=10;break;case 5:e.prev=5,e.t0=e.catch(0),l({name:"error",active:!0}),s(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t0)})),o.active,o.name;case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){l(dc),s(Object(Me.b)(uc))},m=function(){return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(Te.a,{title:"Editar Producto",onClick:function(){return l({name:"Producto",active:!0})},children:Object(pe.jsx)(Ke.a,{"aria-label":"product",size:"small",children:Object(pe.jsx)(it.a,{})})})})},x=function(){return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(Te.a,{title:"Eliminar Producto",onClick:function(){return d(t.id)},children:Object(pe.jsx)(Ke.a,{"aria-label":"egress",size:"small",children:Object(pe.jsx)(lt.a,{})})})})};return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(nt,{open:o.active,dialog:t,title:o.name,component:function(e){switch(e){case"Producto":return Object(pe.jsx)(lc,{product:t,handleClose:b})}}(o.name),handleClose:b}),ye(ve.e,n,a,(function(){return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsxs)($e.a,{children:[Object(pe.jsx)(Le.a,{component:"th",scope:"row",children:t.category.name}),Object(pe.jsx)(Le.a,{component:"th",scope:"row",children:t.brand.name}),Object(pe.jsx)(Le.a,{component:"th",scope:"row",children:t.model.name}),Object(pe.jsx)(Le.a,{component:"th",scope:"row",children:t.name}),Object(pe.jsx)(Le.a,{component:"th",scope:"row",children:Ht(t.price)}),Object(pe.jsx)(Le.a,{component:"th",scope:"row",align:"center",children:t.cant}),Object(pe.jsx)(Le.a,{children:rt()(t.createdAt).format("DD/MM/YYYY")}),Object(pe.jsx)(Le.a,{children:rt()(t.updatedAt).format("DD/MM/YYYY")}),Object(pe.jsxs)(Le.a,{align:"right",children:[ye(ve.h,n,a,m),ye(ve.g,n,a,x)]})]})})}))]})},bc={type:"",text:""},Oc={name:"",active:!1},mc=function(){var e=Object(me.d)((function(e){return e.authReducer.authUser})),t=Object(me.d)((function(e){return e.page.user.module})),n=Object(r.useState)(Oc),a=Object(j.a)(n,2),c=a[0],i=a[1],o=Object(me.c)(),l=function(){var e=Object(O.useQuery)(ac);return{data:e.data,error:e.error,loading:e.loading}}(),s=l.data,u=l.loading,d=l.error,b=Object(r.useState)([]),m=Object(j.a)(b,2),h=m[0],p=m[1],x=function(){i(Oc),o(Object(Me.b)(bc))};if(Object(r.useEffect)((function(){s&&p(s.getProducts)}),[s]),u)return Object(pe.jsx)("h1",{children:"Cargando..."});if(d)return Object(pe.jsx)("h1",{children:Object(Ae.a)(d)});return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(nt,{open:c.active,title:"".concat(c.name," Producto"),component:function(e){switch(e){case"Crear":return Object(pe.jsx)(lc,{handleClose:x})}}(c.name),handleClose:x}),ye(ve.f,e,t,(function(){return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(Te.a,{title:"Crear Producto",children:Object(pe.jsx)(Ke.a,{"aria-label":"add",size:"small",onClick:function(){return i({name:"Crear",active:!0})},children:Object(pe.jsx)(xt.a,{})})})})})),Object(pe.jsx)(bt.a,{component:ht.a,style:{whiteSpace:"nowrap",marginTop:10},children:Object(pe.jsxs)(jt.a,{size:"small","aria-label":"a dense table",children:[Object(pe.jsx)(Ot.a,{children:Object(pe.jsxs)($e.a,{children:[Object(pe.jsx)(Le.a,{children:"Categoria"}),Object(pe.jsx)(Le.a,{children:"Marca"}),Object(pe.jsx)(Le.a,{children:"Model"}),Object(pe.jsx)(Le.a,{children:"Producto"}),Object(pe.jsx)(Le.a,{children:"Precio"}),Object(pe.jsx)(Le.a,{children:"Cantidad"}),Object(pe.jsx)(Le.a,{children:"Fecha creada"}),Object(pe.jsx)(Le.a,{children:"Fecha modificada"}),Object(pe.jsx)(Le.a,{align:"right",children:"Opciones"})," "]})}),Object(pe.jsx)(mt.a,{children:h.map((function(e){return Object(pe.jsx)(jc,{product:e},e.id)}))})]})})]})},hc=Object(O.gql)(Ya||(Ya=Object(b.a)(["\n  query getRoles {\n    getRoles {\n      id\n      name\n      description\n      createdAt\n      updatedAt\n      modules {\n        id\n        name\n        description\n      }\n    }\n  }\n"]))),pc=function(){var e=Object(O.useQuery)(hc);return{data:e.data,loading:e.loading,error:e.error}},xc=function(e){var t=e.module;return Object(pe.jsxs)(pe.Fragment,{children:[t.name===ve.d?Object(pe.jsx)(Nr.a,{style:{margin:"3px"},size:"small",label:t.name,color:"primary"}):Object(pe.jsx)(Nr.a,{style:{margin:"3px"},size:"small",label:t.name,onDelete:function(){return alert("keiner")},color:"primary"}),"\xa0"]})},gc=n(142),fc=Object(O.gql)(qa||(qa=Object(b.a)(["\n  mutation registerRole($roleInput: RoleInput!) {\n    registerRole(roleInput: $roleInput) {\n      id\n      name\n      description\n      modules {\n        id\n        name\n      }\n    }\n  }\n"]))),vc=Object(Ne.a)((function(e){return Object(Ee.a)({formControl:{margin:e.spacing(1),minWidth:120,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}})})),yc={PaperProps:{style:{maxHeight:224,width:250}}},Cc=function(e){var t=e.role,n=e.handleClose,a={id:(null===t||void 0===t?void 0:t.id)||"",name:(null===t||void 0===t?void 0:t.name)||"",description:(null===t||void 0===t?void 0:t.description)||""},c=Object(gc.a)(),i=function(){var e=Object(O.useMutation)(fc,{refetchQueries:function(){return[{query:hc}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{registerRole:n,error:a.error,loading:a.loading}}(),o=Object(Dr.b)(),l=Object(r.useState)(a.id?a:{name:"",description:""}),s=Object(j.a)(l,2),u=s[0],d=s[1],b=Object(r.useState)([]),m=Object(j.a)(b,2),g=m[0],f=m[1],v=Object(r.useState)([]),y=Object(j.a)(v,2),C=y[0],w=y[1],S=Object(Ge.a)(),k=Object(me.c)(),I=vc(),A=Object(me.d)((function(e){return e.authReducer.authUser})),M=function(e){d(Object(x.a)(Object(x.a)({},u),{},Object(Ce.a)({},e.target.name,e.target.value))),k(Object(Me.b)({type:"",text:""}))},D=g.map((function(e){return{name:e}}));function N(e,t,n){return{fontWeight:-1===t.indexOf(e)?n.typography.fontWeightRegular:n.typography.fontWeightMedium}}var E=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!u.id){e.next=13;break}return e.prev=2,e.next=5,c.updateRole({variables:{roleInput:u}});case 5:k(Object(Me.b)({type:"success",text:"El rol se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),k(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,i.registerRole({variables:{roleInput:Object(x.a)(Object(x.a)({},u),{},{modules:D})}});case 16:k(Object(Me.b)({type:"success",text:"El rol se registr\xf3 correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),k(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){if(o.data){var e=o.data.getModules.filter((function(e){return e.name!==ve.d}));w(e)}}),[o.data]),Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)("form",{onSubmit:E,children:Object(pe.jsxs)(De.a,{container:!0,spacing:3,children:[u.id&&u.name===ve.i?"":Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Re.a,{fullWidth:!0,onChange:M,name:"name",id:"idName",label:"Role",variant:"outlined",value:u.name})}),Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Re.a,{fullWidth:!0,onChange:M,name:"description",id:"idDescription",label:"Descripci\xf3n",multiline:!0,value:u.description,variant:"outlined"})}),!a.id&&Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsxs)(yt.a,{variant:"outlined",fullWidth:!0,children:[Object(pe.jsx)(Ct.a,{id:"module-mutiple-chip-label",children:"Modulos"}),Object(pe.jsx)(St.a,{labelId:"module-mutiple-chip-label",id:"module-mutiple-chip",multiple:!0,value:g,onChange:function(e){f(e.target.value),k(Object(Me.b)({type:"",text:""}))},input:Object(pe.jsx)(Br.a,{id:"select-multiple-chip"}),renderValue:function(e){return Object(pe.jsx)("div",{className:I.chips,children:e.map((function(e){return Object(pe.jsx)(Nr.a,{label:e,className:I.chip},e)}))})},MenuProps:yc,children:C.map((function(e){var t;return((null===A||void 0===A||null===(t=A.role)||void 0===t?void 0:t.name)===ve.i||e.name!==ve.d)&&Object(pe.jsx)(wt.a,{value:e.name,style:N(e.name,u.modules||[],S),children:e.name},e.id)}))})]})}),Object(pe.jsxs)(Ye.a,{style:{width:"100%"},children:[Object(pe.jsx)(Pe.a,{onClick:function(){return n()},color:"primary",children:"Cancelar"}),u.id?c.loading?Object(pe.jsx)(qe.a,{}):Object(pe.jsx)(Pe.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):i.loading?Object(pe.jsx)(qe.a,{}):Object(pe.jsx)(Pe.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})})},wc=n(204),Sc=n(161),kc=n.n(Sc),Ic={name:"",active:!1},Ac=function(e){var t=e.role,n=Object(r.useState)(Ic),a=Object(j.a)(n,2),c=a[0],i=a[1],o=Object(me.c)(),l=Object(me.d)((function(e){return e.authReducer.authUser})),s=Object(me.d)((function(e){return e.page.user.module})),u=function(){i(Object(x.a)(Object(x.a)({},c),{},{active:!1})),o(Object(Me.b)({type:"",text:""}))},d=function(e){switch(e){case"Modulo":return Object(pe.jsx)(wc.a,{role:t,handleClose:u});case"Rol":return Object(pe.jsx)(Cc,{role:t,handleClose:u})}},b=function(){return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(nt,{open:c.active,dialog:t,title:c.name,component:d(c.name),handleClose:u}),t.name===ve.i?Object(pe.jsx)(Le.a,{align:"center",children:Object(pe.jsx)(Te.a,{title:"Asignar modulos",onClick:function(){return i({name:"Modulo",active:!0})},children:Object(pe.jsx)(Ke.a,{"aria-label":"modules",size:"small",children:Object(pe.jsx)(kc.a,{})})})}):Object(pe.jsxs)(Le.a,{align:"right",children:[Object(pe.jsx)(Te.a,{title:"Asignar modulos",onClick:function(){return i({name:"Modulo",active:!0})},children:Object(pe.jsx)(Ke.a,{"aria-label":"modules",size:"small",children:Object(pe.jsx)(kc.a,{})})}),Object(pe.jsx)(Te.a,{title:"Editar rol",onClick:function(){return i({name:"Rol",active:!0})},children:Object(pe.jsx)(Ke.a,{"aria-label":"role",size:"small",children:Object(pe.jsx)(it.a,{})})})]})]})};return Object(pe.jsx)(pe.Fragment,{children:ye(ve.e,l,s,(function(){var e;return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)($e.a,{children:(null===l||void 0===l||null===(e=l.role)||void 0===e?void 0:e.name)===ve.i?Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(Le.a,{component:"th",scope:"row",children:t.name}),Object(pe.jsx)(Le.a,{children:t.description}),Object(pe.jsx)(Le.a,{children:rt()(t.createdAt).format("DD/MM/YYYY")}),Object(pe.jsx)(Le.a,{children:rt()(t.updatedAt).format("DD/MM/YYYY")}),Object(pe.jsx)(Le.a,{align:"center",children:t.modules&&t.modules.map((function(e){return Object(pe.jsx)(xc,{module:e},e.id)}))}),ye(ve.h,l,s,b)]}):Object(pe.jsx)(pe.Fragment,{children:t.name===ve.i||Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(Le.a,{component:"th",scope:"row",children:t.name}),Object(pe.jsx)(Le.a,{children:t.description}),Object(pe.jsx)(Le.a,{children:rt()(t.createdAt).format("DD/MM/YYYY")}),Object(pe.jsx)(Le.a,{children:rt()(t.updatedAt).format("DD/MM/YYYY")}),Object(pe.jsx)(Le.a,{align:"center",children:t.modules&&t.modules.map((function(e){return Object(pe.jsx)(xc,{module:e},e.id)}))}),ye(ve.h,l,s,b)]})})})})}))})},Mc=Object(Ne.a)({table:{minWidth:650}}),Dc={name:"",active:!1},Nc=function(){var e=Object(r.useState)([]),t=Object(j.a)(e,2),n=t[0],a=t[1],c=Object(me.d)((function(e){return e.authReducer.authUser})),i=Object(me.d)((function(e){return e.page.user.module})),o=Object(r.useState)(Dc),l=Object(j.a)(o,2),s=l[0],u=l[1],d=Object(me.c)(),b=pc(),O=b.data,m=b.loading,h=b.error,p=Mc(),g=function(){u(Object(x.a)(Object(x.a)({},s),{},{active:!1})),d(Object(Me.b)({type:"",text:""}))},f=function(e){switch(e){case"Crear":return Object(pe.jsx)(Cc,{handleClose:g})}};if(Object(r.useEffect)((function(){O&&a(O.getRoles)}),[O]),m)return Object(pe.jsx)("h1",{children:"Cargando..."});if(h)return Object(pe.jsx)("h1",{children:Object(Ae.a)(h)});return Object(pe.jsxs)(pe.Fragment,{children:[ye(ve.f,c,i,(function(){return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(nt,{open:s.active,title:"".concat(s.name," Rol"),component:f(s.name),handleClose:g}),Object(pe.jsx)(Te.a,{title:"Crear Rol",children:Object(pe.jsx)(Ke.a,{"aria-label":"add",size:"small",onClick:function(){return u({name:"Crear",active:!0})},children:Object(pe.jsx)(xt.a,{})})})]})})),Object(pe.jsx)(bt.a,{style:{whiteSpace:"nowrap"},component:ht.a,children:Object(pe.jsxs)(jt.a,{className:p.table,size:"small","aria-label":"a dense table",children:[Object(pe.jsx)(Ot.a,{children:Object(pe.jsxs)($e.a,{children:[Object(pe.jsx)(Le.a,{children:"Rol"}),Object(pe.jsx)(Le.a,{children:"Descripci\xf3n"}),Object(pe.jsx)(Le.a,{children:"Fecha creada"}),Object(pe.jsx)(Le.a,{children:"Fecha modificada"}),Object(pe.jsx)(Le.a,{align:"center",children:"Modulos"}),ye(ve.h,c,i,(function(){return Object(pe.jsx)(Le.a,{align:"right",children:"Opciones"})}))]})}),Object(pe.jsx)(mt.a,{children:n.map((function(e){return Object(pe.jsx)(Ac,{role:e},e.id)}))})]})})]})},Ec=Object(O.gql)(za||(za=Object(b.a)(["\n  query getServices {\n    getServices {\n      id\n      name\n      description\n      price\n      createdAt\n      updatedAt\n      category {\n        id\n        name\n      }\n    }\n  }\n"]))),Rc=Object(O.gql)(Ba||(Ba=Object(b.a)(["\n  mutation updateService($serviceInput: UpdateServiceInput!) {\n    updateService(serviceInput: $serviceInput) {\n      id\n      name\n      description\n      price\n      category {\n        id\n        name\n      }\n    }\n  }\n"]))),Fc=Object(O.gql)($a||($a=Object(b.a)(["\n  mutation registerService($serviceInput: CreateServiceInput!) {\n    registerService(serviceInput: $serviceInput) {\n      id\n      name\n      description\n      price\n      category {\n        id\n        name\n      }\n    }\n  }\n"]))),Uc={type:"",text:""},Pc=function(e){var t,n=e.handleClose,a=e.service,c={id:(null===a||void 0===a?void 0:a.id)||"",name:(null===a||void 0===a?void 0:a.name)||"",description:(null===a||void 0===a?void 0:a.description)||"",price:(null===a||void 0===a?void 0:a.price)||0,category:(null===a||void 0===a||null===(t=a.category)||void 0===t?void 0:t.name)||""},i=Object(r.useState)(c.id?c:{name:"",price:0,category:""}),o=Object(j.a)(i,2),l=o[0],s=o[1],u=Object(r.useState)([]),d=Object(j.a)(u,2),b=d[0],m=d[1],g=It().data,f=Object(me.c)(),v=function(){var e=Object(O.useMutation)(Rc,{refetchQueries:function(){return[{query:Ec}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{updateService:n,error:a.error,loading:a.loading}}(),y=function(){var e=Object(O.useMutation)(Fc,{refetchQueries:function(){return[{query:Ec}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{registerService:n,error:a.error,loading:a.loading}}(),C=function(e){s(Object(x.a)(Object(x.a)({},l),{},Object(Ce.a)({},e.target.name,e.target.value))),f(Object(Me.b)(Uc))},w=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!l.id){e.next=13;break}return e.prev=2,e.next=5,v.updateService({variables:{serviceInput:Object(x.a)(Object(x.a)({},l),{},{price:Number(l.price)})}});case 5:f(Object(Me.b)({type:"success",text:"El servicio se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),f(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,y.registerService({variables:{serviceInput:Object(x.a)(Object(x.a)({},l),{},{price:Number(l.price)})}});case 16:f(Object(Me.b)({type:"success",text:"El servicio ha sido registrada correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),f(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){g&&m(g.getCategorys)}),[g]),Object(pe.jsx)("form",{onSubmit:w,children:Object(pe.jsxs)(De.a,{container:!0,spacing:3,children:[Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsxs)(yt.a,{variant:"outlined",fullWidth:!0,children:[Object(pe.jsx)(Ct.a,{id:"idCategory",children:"Categoria"}),Object(pe.jsx)(St.a,{labelId:"Categoria",id:"idCategory",value:l.category,onChange:function(e){s(Object(x.a)(Object(x.a)({},l),{},Object(Ce.a)({},e.target.name,e.target.value))),f(Object(Me.b)(Uc))},label:"Categoria",name:"category",children:b.map((function(e){return Object(pe.jsx)(wt.a,{value:e.name,children:e.name},e.id)}))})]})}),Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Re.a,{fullWidth:!0,onChange:C,name:"name",autoComplete:"off",id:"idName",label:"Servicio",variant:"outlined",value:l.name})}),Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Re.a,{fullWidth:!0,onChange:C,name:"description",autoComplete:"off",id:"idDescription",label:"Descripci\xf3n",variant:"outlined",multiline:!0,value:l.description})}),Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Re.a,{fullWidth:!0,onChange:C,name:"price",autoComplete:"off",id:"idPrice",label:"Precio",variant:"outlined",value:l.price,InputProps:{startAdornment:Object(pe.jsx)(nn.a,{position:"start",children:"S/"})}})}),Object(pe.jsxs)(Ye.a,{style:{width:"100%"},children:[Object(pe.jsx)(Pe.a,{onClick:function(){return n()},color:"primary",children:"Cancelar"}),l.id?v.loading?Object(pe.jsx)(qe.a,{}):Object(pe.jsx)(Pe.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):y.loading?Object(pe.jsx)(qe.a,{}):Object(pe.jsx)(Pe.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})},Yc=Object(O.gql)(La||(La=Object(b.a)(["\n  mutation deleteService($id: String!) {\n    deleteService(id: $id)\n  }\n"]))),qc={type:"",text:""},zc={name:"",active:!1},Bc=function(e){var t=e.service,n=Object(me.d)((function(e){return e.authReducer.authUser})),a=Object(me.d)((function(e){return e.page.user.module})),c=Object(r.useState)(zc),i=Object(j.a)(c,2),o=i[0],l=i[1],s=Object(me.c)(),u=function(){var e=Object(O.useMutation)(Yc,{refetchQueries:function(){return[{query:Ec}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{deleteService:n,error:a.error,loading:a.loading}}(),d=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.deleteService({variables:{id:t}});case 3:e.next=10;break;case 5:e.prev=5,e.t0=e.catch(0),l({name:"error",active:!0}),s(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t0)})),o.active,o.name;case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){l(zc),s(Object(Me.b)(qc))},m=function(){return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(Te.a,{title:"Editar Servicio",onClick:function(){return l({name:"Servicio",active:!0})},children:Object(pe.jsx)(Ke.a,{"aria-label":"service",size:"small",children:Object(pe.jsx)(it.a,{})})})})},x=function(){return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(Te.a,{title:"Eliminar egreso",onClick:function(){return d(t.id)},children:Object(pe.jsx)(Ke.a,{"aria-label":"egress",size:"small",children:Object(pe.jsx)(lt.a,{})})})})};return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(nt,{open:o.active,dialog:t,title:o.name,component:function(e){switch(e){case"Servicio":return Object(pe.jsx)(Pc,{service:t,handleClose:b})}}(o.name),handleClose:b}),ye(ve.e,n,a,(function(){return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsxs)($e.a,{children:[Object(pe.jsx)(Le.a,{component:"th",scope:"row",children:t.category.name}),Object(pe.jsx)(Le.a,{component:"th",scope:"row",children:t.name}),Object(pe.jsx)(Le.a,{component:"th",scope:"row",children:Ht(t.price)}),Object(pe.jsx)(Le.a,{children:rt()(t.createdAt).format("DD/MM/YYYY")}),Object(pe.jsx)(Le.a,{children:rt()(t.updatedAt).format("DD/MM/YYYY")}),Object(pe.jsxs)(Le.a,{align:"right",children:[ye(ve.h,n,a,m),ye(ve.g,n,a,x)]})]})})}))]})},$c={type:"",text:""},Lc={name:"",active:!1},Tc=function(){var e=Object(me.d)((function(e){return e.authReducer.authUser})),t=Object(me.d)((function(e){return e.page.user.module})),n=Object(r.useState)(Lc),a=Object(j.a)(n,2),c=a[0],i=a[1],o=Object(me.c)(),l=function(){var e=Object(O.useQuery)(Ec);return{data:e.data,error:e.error,loading:e.loading}}(),s=l.data,u=l.loading,d=l.error,b=Object(r.useState)([]),m=Object(j.a)(b,2),h=m[0],p=m[1],x=function(){i(Lc),o(Object(Me.b)($c))},g=function(e){switch(e){case"Crear":return Object(pe.jsx)(Pc,{handleClose:x})}};if(Object(r.useEffect)((function(){s&&p(s.getServices)}),[s]),u)return Object(pe.jsx)("h1",{children:"Cargando..."});if(d)return Object(pe.jsx)("h1",{children:Object(Ae.a)(d)});return Object(pe.jsxs)(pe.Fragment,{children:[ye(ve.f,e,t,(function(){return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(nt,{open:c.active,title:"".concat(c.name," Servicio"),component:g(c.name),handleClose:x}),Object(pe.jsx)(Te.a,{title:"Crear Servicio",children:Object(pe.jsx)(Ke.a,{"aria-label":"add",size:"small",onClick:function(){return i({name:"Crear",active:!0})},children:Object(pe.jsx)(xt.a,{})})})]})})),Object(pe.jsx)(bt.a,{component:ht.a,style:{whiteSpace:"nowrap",marginTop:10},children:Object(pe.jsxs)(jt.a,{size:"small","aria-label":"a dense table",children:[Object(pe.jsx)(Ot.a,{children:Object(pe.jsxs)($e.a,{children:[Object(pe.jsx)(Le.a,{children:"Categoria"}),Object(pe.jsx)(Le.a,{children:"Servicio"}),Object(pe.jsx)(Le.a,{children:"Precio"}),Object(pe.jsx)(Le.a,{children:"Fecha creada"}),Object(pe.jsx)(Le.a,{children:"Fecha modificada"}),Object(pe.jsx)(Le.a,{align:"right",children:"Opciones"})]})}),Object(pe.jsx)(mt.a,{children:h.map((function(e){return Object(pe.jsx)(Bc,{service:e},e.id)}))})]})})]})},Wc=Object(O.gql)(Ta||(Ta=Object(b.a)(["\n  query getUsers {\n    getUsers {\n      id\n      name\n      lastName\n      email\n      status\n      createdAt\n      updatedAt\n      role {\n        name\n        description\n        modules {\n          access {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n"]))),Qc=n(205),_c=n.n(Qc),Vc=Object(O.gql)(Wa||(Wa=Object(b.a)(["\n  mutation updateRole($userInput: UserUpdateInput!) {\n    updateUser(userInput: $userInput) {\n      id\n      name\n      lastName\n      email\n      role {\n        id\n        name\n      }\n    }\n  }\n"]))),Jc=Object(O.gql)(Qa||(Qa=Object(b.a)(["\n  mutation registerUser($userInput: UserInput!) {\n    registerUser(userInput: $userInput) {\n      id\n      name\n      lastName\n      email\n      createdAt\n      updatedAt\n      role {\n        name\n      }\n    }\n  }\n"]))),Gc=function(e){var t,n,a,c=e.user,i=e.handleClose,o={id:(null===c||void 0===c?void 0:c.id)||"",name:(null===c||void 0===c?void 0:c.name)||"",lastName:(null===c||void 0===c?void 0:c.lastName)||"",role:{name:(null===c||void 0===c||null===(t=c.role)||void 0===t?void 0:t.name)||""},email:(null===c||void 0===c?void 0:c.email)||""},l=Object(r.useState)(o.id?o:{name:"",lastName:"",role:{name:""},email:"",password:"",confirmPassword:""}),s=Object(j.a)(l,2),u=s[0],d=s[1],b=Object(r.useState)([]),m=Object(j.a)(b,2),g=m[0],f=m[1],v=Object(me.c)(),y=function(){var e=Object(O.useMutation)(Vc),t=Object(j.a)(e,2),n=t[0],a=t[1];return{updateUser:n,error:a.error,loading:a.loading}}(),C=pc().data,w=function(){var e=Object(O.useMutation)(Jc,{refetchQueries:function(){return[{query:Wc}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{registerUser:n,error:a.error,loading:a.loading}}(),S=Object(me.d)((function(e){return e.authReducer.authUser})),k=function(e){d(Object(x.a)(Object(x.a)({},u),{},Object(Ce.a)({},e.target.name,e.target.value))),v(Object(Me.b)({type:"",text:""}))},I=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!u.id){e.next=13;break}return e.prev=2,e.next=5,y.updateUser({variables:{userInput:u}});case 5:v(Object(Me.b)({type:"success",text:"El usuario se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),v(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,w.registerUser({variables:{userInput:u}});case 16:v(Object(Me.b)({type:"success",text:"El usuario ha sido registrado correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),v(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){C&&f(C.getRoles)}),[C]),Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)("form",{onSubmit:I,children:Object(pe.jsxs)(De.a,{container:!0,spacing:3,children:[Object(pe.jsx)(De.a,{item:!0,xs:6,children:Object(pe.jsx)(Re.a,{fullWidth:!0,onChange:k,name:"name",autoComplete:"off",id:"idNombres",label:"Nombres",variant:"outlined",value:u.name})}),Object(pe.jsx)(De.a,{item:!0,xs:6,children:Object(pe.jsx)(Re.a,{fullWidth:!0,onChange:k,name:"lastName",autoComplete:"off",id:"idApellidos",label:"Apellidos",value:u.lastName,variant:"outlined"})}),(null===(n=u.role)||void 0===n?void 0:n.name)===ve.i||Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsxs)(yt.a,{variant:"outlined",fullWidth:!0,children:[Object(pe.jsx)(Ct.a,{id:"idRole",children:"Rol"}),Object(pe.jsx)(St.a,{labelId:"Rol",id:"idRole",value:null===(a=u.role)||void 0===a?void 0:a.name,onChange:function(e){d(Object(x.a)(Object(x.a)({},u),{},Object(Ce.a)({},e.target.name,{name:e.target.value}))),v(Object(Me.b)({type:"",text:""}))},label:"Rol",name:"role",children:g.map((function(e){var t;return((null===S||void 0===S||null===(t=S.role)||void 0===t?void 0:t.name)===ve.i||e.name!==ve.i)&&Object(pe.jsx)(wt.a,{value:e.name,children:e.name},e.id)}))})]})})}),Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Re.a,{fullWidth:!0,onChange:k,name:"email",autoComplete:"off",id:"idEmail",label:"Correo",value:u.email,variant:"outlined",InputProps:{readOnly:!!u.id}})}),u.id?"":Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Re.a,{fullWidth:!0,onChange:k,name:"password",autoComplete:"off",id:"idPassword",label:"Contrase\xf1a",value:u.password,variant:"outlined",type:"password"})}),Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Re.a,{fullWidth:!0,onChange:k,name:"confirmPassword",autoComplete:"off",id:"idConfirmPassword",label:"Repetir contrase\xf1a",value:u.confirmPassword,variant:"outlined",type:"password"})})]}),Object(pe.jsxs)(Ye.a,{style:{width:"100%"},children:[Object(pe.jsx)(Pe.a,{onClick:function(){return i()},color:"primary",children:"Cancelar"}),u.id?y.loading?Object(pe.jsx)(qe.a,{}):Object(pe.jsx)(Pe.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):w.loading?Object(pe.jsx)(qe.a,{}):Object(pe.jsx)(Pe.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})})},Hc=n(206),Kc=n.n(Hc),Xc=Object(O.gql)(_a||(_a=Object(b.a)(["\n  mutation activateUser($id: String!) {\n    activateUser(id: $id) {\n      id\n      status\n    }\n  }\n"]))),Zc=Object(O.gql)(Va||(Va=Object(b.a)(["\n  mutation desactivateUser($id: String!) {\n    desactivateUser(id: $id) {\n      id\n      status\n    }\n  }\n"]))),ei=n(207),ti=n.n(ei),ni=Object(O.gql)(Ja||(Ja=Object(b.a)(["\n  mutation changePasswordToAdmin($authInput: AuthChangePasswordInputToAdmin!) {\n    changePasswordToAdmin(authInput: $authInput)\n  }\n"]))),ai=(Object(O.gql)(Ga||(Ga=Object(b.a)(["\n  mutation changePasswordToUser($authInput: AuthChangePasswordInputToUser!) {\n    changePasswordToUser(authInput: $authInput)\n  }\n"]))),function(e){var t=e.user,n=e.handleClose,a={id:(null===t||void 0===t?void 0:t.id)||"",newPassword:"",confirmNewPassword:""},c=Object(r.useState)(a),i=Object(j.a)(c,2),o=i[0],l=i[1],s=Object(me.c)(),u=function(){var e=Object(O.useMutation)(ni),t=Object(j.a)(e,2),n=t[0],a=t[1];return{changePasswordToAdmin:n,error:a.error,loading:a.loading}}(),d=u.changePasswordToAdmin,b=(u.error,u.loading),m=function(e){l(Object(x.a)(Object(x.a)({},o),{},Object(Ce.a)({},e.target.name,e.target.value))),s(Object(Me.b)({type:"",text:""}))},g=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,d({variables:{authInput:o}});case 4:s(Object(Me.b)({type:"success",text:"La contrase\xf1a ha sido cambiada correctamente."})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),s(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t0)}));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(pe.jsx)("form",{onSubmit:g,children:Object(pe.jsxs)(De.a,{container:!0,spacing:3,children:[Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Re.a,{fullWidth:!0,onChange:m,name:"newPassword",autoComplete:"off",id:"idNewPassword",label:"Nueva Contrase\xf1a",value:o.newPassword,variant:"outlined"})}),Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Re.a,{fullWidth:!0,onChange:m,name:"confirmNewPassword",autoComplete:"off",id:"idConfirmNewPassword",label:"Confirmar nueva contrase\xf1a",value:o.confirmNewPassword,variant:"outlined"})}),Object(pe.jsxs)(Ye.a,{style:{width:"100%"},children:[Object(pe.jsx)(Pe.a,{onClick:function(){return n()},color:"primary",children:"Cancelar"}),b?Object(pe.jsx)(qe.a,{}):Object(pe.jsx)(Pe.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"})]})]})})}),ri={name:"",active:!1},ci=function(e){var t=e.user,n=Object(me.d)((function(e){return e.authReducer.authUser})),a=Object(me.d)((function(e){return e.page.user.module})),c=Object(r.useState)(ri),i=Object(j.a)(c,2),o=i[0],l=i[1],s=Object(me.c)(),u=function(){var e=Object(O.useMutation)(Xc),t=Object(j.a)(e,2),n=t[0],a=t[1];return{activateUser:n,error:a.error,loading:a.loading}}(),d=function(){var e=Object(O.useMutation)(Zc),t=Object(j.a)(e,2),n=t[0],a=t[1];return{desactivateUser:n,error:a.error,loading:a.loading}}(),b=function(){l(Object(x.a)(Object(x.a)({},o),{},{active:!1})),s(Object(Me.b)({type:"",text:""}))},m=function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.desactivateUser({variables:{id:t.id}});case 3:e.next=10;break;case 5:e.prev=5,e.t0=e.catch(0),l({name:"error",active:!0}),s(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t0)})),o.active,o.name;case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),g=function(e){switch(e){case"Usuario":return Object(pe.jsx)(Gc,{user:t,handleClose:b});case"Contrase\xf1a":return Object(pe.jsx)(ai,{user:t,handleClose:b})}},f=function(){var e;return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(nt,{open:o.active,dialog:t,title:o.name,component:g(o.name),handleClose:b}),Object(pe.jsxs)(Le.a,{align:"right",children:[(null===(e=t.role)||void 0===e?void 0:e.name)===ve.i?"":Object(pe.jsx)(pe.Fragment,{children:2===t.status?Object(pe.jsx)(Te.a,{title:"Activar usuario",onClick:function(){return u.activateUser({variables:{id:t.id}})},children:Object(pe.jsx)(Ke.a,{"aria-label":"desactivate",size:"small",color:"secondary",children:Object(pe.jsx)(_c.a,{style:{color:"#F44336"}})})}):1===t.status?Object(pe.jsx)(Te.a,{title:"Desactivar usuario",onClick:m,children:Object(pe.jsx)(Ke.a,{"aria-label":"activate",size:"small",style:{color:"#4CAF50"},children:Object(pe.jsx)(Kc.a,{style:{color:"#4CAF50"}})})}):""}),Object(pe.jsx)(Te.a,{title:"Editar usuario",onClick:function(){return l({name:"Usuario",active:!0})},children:Object(pe.jsx)(Ke.a,{"aria-label":"role",size:"small",children:Object(pe.jsx)(it.a,{})})}),Object(pe.jsx)(Te.a,{title:"Cambiar contrase\xf1a",onClick:function(){return l({name:"Contrase\xf1a",active:!0})},children:Object(pe.jsx)(Ke.a,{"aria-label":"password",size:"small",children:Object(pe.jsx)(ti.a,{})})})]})]})};return Object(pe.jsx)(pe.Fragment,{children:ye(ve.e,n,a,(function(){var e,r,c,i;return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)($e.a,{children:(null===n||void 0===n||null===(e=n.role)||void 0===e?void 0:e.name)===ve.i?Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsxs)(Le.a,{component:"th",scope:"row",children:[t.name," ",t.lastName]}),Object(pe.jsx)(Le.a,{children:null===(r=t.role)||void 0===r?void 0:r.name}),Object(pe.jsx)(Le.a,{children:t.email}),Object(pe.jsx)(Le.a,{children:rt()(t.createdAt).format("DD/MM/YYYY")}),Object(pe.jsx)(Le.a,{children:rt()(t.updatedAt).format("DD/MM/YYYY")}),ye(ve.h,n,a,f)]}):Object(pe.jsx)(pe.Fragment,{children:(null===(c=t.role)||void 0===c?void 0:c.name)===ve.i||Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsxs)(Le.a,{component:"th",scope:"row",children:[t.name," ",t.lastName]}),Object(pe.jsx)(Le.a,{children:null===(i=t.role)||void 0===i?void 0:i.name}),Object(pe.jsx)(Le.a,{children:t.email}),Object(pe.jsx)(Le.a,{children:rt()(t.createdAt).format("DD/MM/YYYY")}),Object(pe.jsx)(Le.a,{children:rt()(t.updatedAt).format("DD/MM/YYYY")}),ye(ve.h,n,a,f)]})})})})}))})},ii=Object(Ne.a)({table:{minWidth:650}}),oi={name:"",active:!1},li=function(){var e=Object(me.d)((function(e){return e.authReducer.authUser})),t=Object(me.d)((function(e){return e.page.user.module})),n=ii(),a=Object(r.useState)([]),c=Object(j.a)(a,2),i=c[0],o=c[1],l=Object(r.useState)(oi),s=Object(j.a)(l,2),u=s[0],d=s[1],b=function(){var e=Object(O.useQuery)(Wc);return{data:e.data,loading:e.loading,error:e.error}}(),m=b.data,h=b.loading,p=b.error,g=Object(me.c)(),f=function(){d(Object(x.a)(Object(x.a)({},u),{},{active:!1})),g(Object(Me.b)({type:"",text:""}))},v=function(e){switch(e){case"Crear":return Object(pe.jsx)(Gc,{handleClose:f})}};if(Object(r.useEffect)((function(){m&&o(m.getUsers)}),[m]),h)return Object(pe.jsx)("h1",{children:"Cargando..."});if(p)return Object(pe.jsx)("h1",{children:Object(Ae.a)(p)});return Object(pe.jsxs)(pe.Fragment,{children:[ye(ve.f,e,t,(function(){return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(nt,{open:u.active,title:"".concat(u.name," Usuario"),component:v(u.name),handleClose:f}),Object(pe.jsx)(Te.a,{title:"Crear Usuario",children:Object(pe.jsx)(Ke.a,{"aria-label":"add",size:"small",onClick:function(){return d({name:"Crear",active:!0})},children:Object(pe.jsx)(xt.a,{})})})]})})),Object(pe.jsx)(bt.a,{component:ht.a,style:{marginTop:10,whiteSpace:"nowrap"},children:Object(pe.jsxs)(jt.a,{className:n.table,size:"small","aria-label":"a dense table",children:[Object(pe.jsx)(Ot.a,{children:Object(pe.jsxs)($e.a,{children:[Object(pe.jsx)(Le.a,{children:"Nombres"}),Object(pe.jsx)(Le.a,{children:"Rol"}),Object(pe.jsx)(Le.a,{children:"Correo"}),Object(pe.jsx)(Le.a,{children:"Fecha creada"}),Object(pe.jsx)(Le.a,{children:"Fecha modificada"}),ye(ve.h,e,t,(function(){return Object(pe.jsx)(Le.a,{align:"right",children:"Opciones"})}))]})}),Object(pe.jsx)(mt.a,{children:i.map((function(e){return Object(pe.jsx)(ci,{user:e},e.id)}))})]})})]})},si=Object(O.gql)(Ha||(Ha=Object(b.a)(["\n  query getVehicles {\n    getVehicles {\n      id\n      customer {\n        id\n        name\n        lastName\n        document\n        numDocument\n      }\n      createdBy {\n        id\n        name\n      }\n      updatedBy {\n        id\n        name\n      }\n      device {\n        id\n        name\n      }\n      billing {\n        id\n        name\n        day\n      }\n      sim\n      platform\n      plate\n      nroGPS\n      billigStart\n      billigEnd\n      createdAt\n      updatedAt\n    }\n  }\n"]))),ui=Object(O.gql)(Ka||(Ka=Object(b.a)(["\n  mutation deleteVehicle($id: String!) {\n    deleteVehicle(id: $id)\n  }\n"]))),di=Object(O.gql)(Xa||(Xa=Object(b.a)(["\n  mutation registerVehicle($vehicleInput: CreateVehicleInput!) {\n    registerVehicle(vehicleInput: $vehicleInput) {\n      id\n      customer {\n        id\n        name\n        lastName\n        document\n        numDocument\n      }\n      createdBy {\n        id\n        name\n      }\n      updatedBy {\n        id\n        name\n      }\n      device {\n        id\n        name\n      }\n      billing {\n        id\n        name\n      }\n      sim\n      platform\n      plate\n      nroGPS\n      billigStart\n      billigEnd\n      createdAt\n      updatedAt\n    }\n  }\n"]))),ji=Object(O.gql)(Za||(Za=Object(b.a)(["\n  mutation updateVehicle($vehicleInput: UpdateVehicleInput!) {\n    updateVehicle(vehicleInput: $vehicleInput) {\n      id\n      customer {\n        id\n        name\n        lastName\n        document\n        numDocument\n      }\n      createdBy {\n        id\n        name\n      }\n      updatedBy {\n        id\n        name\n      }\n      device {\n        id\n        name\n      }\n      billing {\n        id\n        name\n      }\n      sim\n      platform\n      plate\n      nroGPS\n      billigStart\n      billigEnd\n      createdAt\n      updatedAt\n    }\n  }\n"]))),bi=function(e){var t,n,a,c,i,o,l=e.handleClose,s=e.vehicle,u=rt()().utc().local().format("YYYY-MM-DD"),d={customer:"",device:"",billing:"",plate:"",nroGPS:"",platform:"",sim:"",billigStart:u},b={id:(null===s||void 0===s?void 0:s.id)||"",customer:(null===s||void 0===s||null===(t=s.customer)||void 0===t?void 0:t.id)||"",device:(null===s||void 0===s||null===(n=s.device)||void 0===n?void 0:n.name)||"",billing:(null===s||void 0===s||null===(a=s.billing)||void 0===a?void 0:a.name)||"",plate:(null===s||void 0===s?void 0:s.plate)||"",nroGPS:(null===s||void 0===s?void 0:s.nroGPS)||"",platform:(null===s||void 0===s?void 0:s.platform)||"",sim:(null===s||void 0===s?void 0:s.sim)||"",billigStart:rt()(null===s||void 0===s?void 0:s.billigStart).format("YYYY-MM-DD")||u},m=Object(r.useState)(b.id?b:d),g=Object(j.a)(m,2),f=g[0],v=g[1],y=Object(me.c)(),C=function(){var e=Object(O.useMutation)(ji,{refetchQueries:function(){return[{query:si}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{updateVehicle:n,error:a.error,loading:a.loading}}(),w=function(){var e=Object(O.useMutation)(di,{refetchQueries:function(){return[{query:si}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{registerVehicle:n,error:a.error,loading:a.loading}}(),S=Object(r.useState)([]),k=Object(j.a)(S,2),I=k[0],A=k[1],M=Object(r.useState)({name:"",lastName:"",document:"",numDocument:"",cellphone_1:"",username:"",password:""}),D=Object(j.a)(M,2),N=D[0],E=D[1],R=Object(r.useState)([]),F=Object(j.a)(R,2),U=F[0],P=F[1],Y=Object(r.useState)({name:""}),q=Object(j.a)(Y,2),z=q[0],B=q[1],$=Object(r.useState)([]),L=Object(j.a)($,2),T=L[0],W=L[1],Q=Object(r.useState)({name:""}),_=Object(j.a)(Q,2),V=_[0],J=_[1],G=Gn(),H=lr(),K=Se(),X=function(e){v(Object(x.a)(Object(x.a)({},f),{},Object(Ce.a)({},e.target.name,e.target.value)))},Z=function(e){v(Object(x.a)(Object(x.a)({},f),{},Object(Ce.a)({},e.target.name,e.target.value)))},ee=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!f.id){e.next=13;break}return e.prev=2,e.next=5,C.updateVehicle({variables:{vehicleInput:f}});case 5:y(Object(Me.b)({type:"success",text:"El vehiculo se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),y(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,w.registerVehicle({variables:{vehicleInput:f}});case 16:y(Object(Me.b)({type:"success",text:"El vehiculo ha sido registrado correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),y(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){var e,t,n,a,r,c,i,o,l,u,d;G.data&&A(null===G||void 0===G||null===(t=G.data)||void 0===t?void 0:t.getCustomer);H.data&&P(null===H||void 0===H||null===(n=H.data)||void 0===n?void 0:n.getDevices);K.data&&W(null===K||void 0===K||null===(a=K.data)||void 0===a?void 0:a.getBillings);(null===(e=I[0])||void 0===e?void 0:e.name)&&(E(Object(x.a)(Object(x.a)({},N),{},{name:f.id?null===s||void 0===s?void 0:s.customer.name:null===(r=I[0])||void 0===r?void 0:r.name,lastName:f.id?null===s||void 0===s?void 0:s.customer.lastName:null===(c=I[0])||void 0===c?void 0:c.lastName})),B(Object(x.a)(Object(x.a)({},z),{},{name:f.id?null===s||void 0===s?void 0:s.device.name:null===(i=U[0])||void 0===i?void 0:i.name})),J(Object(x.a)(Object(x.a)({},V),{},{name:f.id?null===s||void 0===s?void 0:s.billing.name:null===(o=T[0])||void 0===o?void 0:o.name})),v(Object(x.a)(Object(x.a)({},f),{},{customer:f.id?null===s||void 0===s?void 0:s.customer.id:null===(l=I[0])||void 0===l?void 0:l.id,device:f.id?null===s||void 0===s?void 0:s.device.name:null===(u=U[0])||void 0===u?void 0:u.name,billing:f.id?null===s||void 0===s?void 0:s.billing.name:null===(d=T[0])||void 0===d?void 0:d.name,platform:f.id?s.platform:"PREMIUM",sim:f.id?s.sim:"MOVISTAR"})))}),[G.data,H.data,K.data,null===(c=I[0])||void 0===c?void 0:c.name,null===(i=U[0])||void 0===i?void 0:i.name,null===(o=T[0])||void 0===o?void 0:o.name]),Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)("form",{onSubmit:ee,children:Object(pe.jsxs)(De.a,{container:!0,spacing:3,children:[Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Zt.a,{id:"idCustomer",value:{name:null===N||void 0===N?void 0:N.name,lastName:null===N||void 0===N?void 0:N.lastName,document:null===N||void 0===N?void 0:N.document,numDocument:null===N||void 0===N?void 0:N.numDocument,cellphone_1:null===N||void 0===N?void 0:N.cellphone_1,username:null===N||void 0===N?void 0:N.username,password:null===N||void 0===N?void 0:N.password},onChange:function(e,t){var n,a,r;E(Object(x.a)(Object(x.a)({},N),{},{name:t?t.name:null===(n=I[0])||void 0===n?void 0:n.name,lastName:t?t.lastName:null===(a=I[0])||void 0===a?void 0:a.lastName})),v(Object(x.a)(Object(x.a)({},f),{},{customer:"".concat(t?t.id:null===(r=I[0])||void 0===r?void 0:r.id)}))},options:I,getOptionLabel:function(e){return e.name?"".concat(e.name," ").concat(e.lastName):""},getOptionSelected:function(e,t){var n,a;return t.name||(t=Object(x.a)(Object(x.a)({},t),{},{name:null===(n=I[0])||void 0===n?void 0:n.name,lastName:null===(a=I[0])||void 0===a?void 0:a.lastName})),"".concat(e.name," ").concat(e.lastName)==="".concat(t.name," ").concat(t.lastName)},loading:G.loading,loadingText:"Cargando...",noOptionsText:"No hay resultados",renderInput:function(e){return Object(pe.jsx)(Re.a,Object(x.a)(Object(x.a)({},e),{},{name:"customer",label:"Cliente",variant:"outlined"}))}})}),Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Zt.a,{id:"idDevice",value:{name:null===z||void 0===z?void 0:z.name},onChange:function(e,t){var n,a;B(Object(x.a)(Object(x.a)({},z),{},{name:t?t.name:null===(n=U[0])||void 0===n?void 0:n.name})),v(Object(x.a)(Object(x.a)({},f),{},{device:"".concat(t?t.name:null===(a=U[0])||void 0===a?void 0:a.name)}))},options:U,getOptionLabel:function(e){return e.name?e.name:""},getOptionSelected:function(e,t){var n;return t.name||(t=Object(x.a)(Object(x.a)({},t),{},{name:null===(n=U[0])||void 0===n?void 0:n.name})),e.name===t.name},loading:H.loading,loadingText:"Cargando...",noOptionsText:"No hay resultados",renderInput:function(e){return Object(pe.jsx)(Re.a,Object(x.a)(Object(x.a)({},e),{},{name:"device",label:"Dispositivo",variant:"outlined"}))}})}),Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Zt.a,{id:"idBilling",value:{name:null===V||void 0===V?void 0:V.name},onChange:function(e,t){var n,a;J(Object(x.a)(Object(x.a)({},V),{},{name:t?t.name:null===(n=T[0])||void 0===n?void 0:n.name})),v(Object(x.a)(Object(x.a)({},f),{},{billing:"".concat(t?t.name:null===(a=T[0])||void 0===a?void 0:a.name)}))},options:T,getOptionLabel:function(e){return e.name?e.name:""},getOptionSelected:function(e,t){var n;return t.name||(t=Object(x.a)(Object(x.a)({},t),{},{name:null===(n=T[0])||void 0===n?void 0:n.name})),e.name===t.name},loading:K.loading,loadingText:"Cargando...",noOptionsText:"No hay resultados",renderInput:function(e){return Object(pe.jsx)(Re.a,Object(x.a)(Object(x.a)({},e),{},{name:"billing",label:"Plan de facturaci\xf3n",variant:"outlined"}))}})}),Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsxs)(Re.a,{id:"idPlatform",select:!0,label:"Plataforma",fullWidth:!0,value:f.platform,onChange:Z,name:"platform",variant:"outlined",children:[Object(pe.jsx)(wt.a,{value:"PREMIUM",children:"PREMIUM"}),Object(pe.jsx)(wt.a,{value:"STANDAR",children:"STANDAR"}),Object(pe.jsx)(wt.a,{value:"SIN PLATAFORMA",children:"SIN PLATAFORMA"})]})}),Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Ue,{fullWidth:!0,type:"text",onChange:X,name:"plate",autoComplete:"off",id:"idPlate",label:"Placa",variant:"filled",value:f.plate})}),Object(pe.jsx)(De.a,{item:!0,xs:6,children:Object(pe.jsxs)(Re.a,{id:"idChip",select:!0,label:"Chip",fullWidth:!0,name:"sim",value:f.sim,onChange:Z,variant:"outlined",children:[Object(pe.jsx)(wt.a,{value:"CLARO",children:"CLARO"}),Object(pe.jsx)(wt.a,{value:"MOVISTAR",children:"MOVISTAR"}),Object(pe.jsx)(wt.a,{value:"INKACEL",children:"INKACEL"}),Object(pe.jsx)(wt.a,{value:"MULTIOPERADOR",children:"MULTIOPERADOR"})]})}),Object(pe.jsx)(De.a,{item:!0,xs:6,children:Object(pe.jsx)(Ue,{fullWidth:!0,type:"text",onChange:X,name:"nroGPS",autoComplete:"off",id:"idNro",label:"Nro de GPS",variant:"filled",value:f.nroGPS})}),Object(pe.jsx)(De.a,{item:!0,xs:12,children:Object(pe.jsx)(Ue,{fullWidth:!0,type:"date",onChange:X,name:"billigStart",autoComplete:"off",id:"idBilligStart",label:"Fecha de inicio",variant:"filled",value:f.billigStart})}),Object(pe.jsxs)(Ye.a,{style:{width:"100%"},children:[Object(pe.jsx)(Pe.a,{onClick:l,color:"primary",children:"Cancelar"}),f.id?C.loading?Object(pe.jsx)(qe.a,{}):Object(pe.jsx)(Pe.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):w.loading?Object(pe.jsx)(qe.a,{}):Object(pe.jsx)(Pe.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})})},Oi=n(209),mi=n.n(Oi),hi=n(292),pi=Object(O.gql)(er||(er=Object(b.a)(["\n  mutation registerRenew($renewInput: CreateRenewInput!) {\n    registerRenew(renewInput: $renewInput) {\n      id\n      registeredBy {\n        id\n        name\n        lastName\n      }\n      updatedBy {\n        id\n        name\n        lastName\n      }\n      vehicle {\n        id\n        plate\n      }\n      billing {\n        id\n        name\n      }\n      expirationDate\n      renovationStart\n      renovationEnd\n      createdAt\n      updatedAt\n    }\n  }\n"]))),xi=n(352),gi=n(360),fi=n(208),vi=n.n(fi),yi=Object(O.gql)(tr||(tr=Object(b.a)(["\n  query getBillingByName($name: String!) {\n    getBillingByName(name: $name) {\n      id\n      name\n      day\n    }\n  }\n"]))),Ci=function(e){var t=e.handleClose,n=e.vehicle,a=Object(r.useState)(!1),c=Object(j.a)(a,2),i=c[0],o=c[1],l=Object(r.useState)([]),s=Object(j.a)(l,2),u=s[0],d=s[1],b=Object(me.c)(),m=Object(r.useState)({vehicle:n.plate,billing:n.billing.name}),g=Object(j.a)(m,2),f=g[0],v=g[1],y=Object(r.useState)({day:n.billing.day}),C=Object(j.a)(y,2),w=C[0],S=C[1],k=Se(),I=function(){var e=Object(O.useLazyQuery)(yi),t=Object(j.a)(e,2),n=t[0],a=t[1];return{getBillingByName:n,data:a.data,error:a.error,loading:a.loading}}(),A=function(){var e=Object(O.useMutation)(pi,{refetchQueries:function(){return[{query:si}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{registerRenew:n,error:a.error,loading:a.loading}}(),M=Object(xi.a)(new Date),D=Object(gi.a)(M,{days:w.day}),N=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.getBillingByName({variables:{name:t}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),b(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t0)}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.registerRenew({variables:{renewInput:f}});case 3:b(Object(Me.b)({type:"success",text:"Se ha renovado correctamente."})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),b(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t0)}));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){k.data&&d(k.data.getBillings),I.data&&S(Object(x.a)(Object(x.a)({},w),{},{day:I.data.getBillingByName.day}))}),[k.data,I.data]),Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsxs)("p",{children:["Estas apunto de renovar su inscripci\xf3n del vehiculo"," ",Object(pe.jsx)("strong",{children:n.plate})," que pertenece a"," ",Object(pe.jsxs)("strong",{children:[n.customer.name," ",n.customer.lastName]})," ","con n\xfamero de ",Object(pe.jsx)("strong",{children:n.customer.document}),","," ",Object(pe.jsx)("strong",{children:n.customer.numDocument}),"."]}),Object(pe.jsx)("br",{}),Object(pe.jsx)(hi.a,{}),Object(pe.jsx)("br",{}),i?Object(pe.jsxs)(yt.a,{variant:"outlined",style:{width:300},children:[Object(pe.jsx)(Ct.a,{id:"idBilling-label",children:"Plan de facturaci\xf3n"}),Object(pe.jsx)(St.a,{labelId:"idBilling-label",id:"idBilling",value:f.billing,onChange:function(e){v(Object(x.a)(Object(x.a)({},f),{},{billing:e.target.value}))},label:"Age",children:u.map((function(e){return Object(pe.jsx)(wt.a,{value:e.name,children:e.name},e.id)}))})]}):Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)("label",{children:f.billing!==n.billing.name?Object(pe.jsx)("label",{style:{background:"yellow"},children:"Cambiado a"}):"Actualmente tiene"})," ",f.billing]})," ",Object(pe.jsx)(Te.a,{title:"Editar plan de facturaci\xf3n",onClick:function(){o(!i),N(f.billing)},children:Object(pe.jsxs)(Ke.a,{"aria-label":"vehicle",size:"small",style:{color:"blue"},children:[i?"Guardar":"Editar",i?Object(pe.jsx)(vi.a,{}):Object(pe.jsx)(it.a,{})]})}),Object(pe.jsx)("br",{}),Object(pe.jsx)("br",{}),Object(pe.jsxs)("div",{style:{width:"100%",height:"auto"},children:[Object(pe.jsxs)("div",{style:{width:"50%",float:"left"},children:[Object(pe.jsx)("label",{children:"Fecha de caducidad"})," "]}),Object(pe.jsx)("div",{style:{width:"50%",float:"left"},children:rt()(n.billigEnd).format("DD/MM/YYYY")})]}),Object(pe.jsx)("br",{}),Object(pe.jsx)("br",{}),Object(pe.jsx)(hi.a,{}),Object(pe.jsx)("br",{}),Object(pe.jsxs)("div",{style:{filter:i?"blur(4px)":"blur(0)",userSelect:i?"none":"text"},children:[Object(pe.jsxs)("div",{style:{width:"100%",height:"auto"},children:[Object(pe.jsx)("div",{style:{width:"50%",float:"left",backgroundColor:"#fff"},children:"Renueva desde"}),Object(pe.jsx)("div",{style:{width:"50%",float:"left"},children:rt()().format("DD/MM/YYYY")})]}),Object(pe.jsxs)("div",{style:{width:"100%",height:"auto"},children:[Object(pe.jsx)("div",{style:{width:"50%",float:"left",backgroundColor:"#fff"},children:"\xa0"}),Object(pe.jsxs)("div",{style:{width:"50%",float:"left"},children:[Object(pe.jsx)("strong",{children:"+"})," ",w.day," d\xedas"]})]}),Object(pe.jsxs)("div",{style:{width:"100%",height:"auto"},children:[Object(pe.jsx)("div",{style:{width:"50%",float:"left",backgroundColor:"#fff"},children:"Renovando hasta"}),Object(pe.jsx)("div",{style:{width:"50%",float:"left"},children:rt()(D).format("DD/MM/YYYY")})]})]}),Object(pe.jsxs)(Ye.a,{style:{width:"100%"},children:[Object(pe.jsx)(Pe.a,{onClick:t,color:"primary",children:"Cancelar"}),A.loading?Object(pe.jsx)(qe.a,{}):Object(pe.jsx)(Pe.a,{onClick:E,color:"primary",autoFocus:!0,disabled:!!i,variant:"contained",children:"Aceptar"})]})]})},wi={type:"",text:""},Si={name:"",active:!1},ki=function(e){var t=e.vehicle,n=Object(me.d)((function(e){return e.authReducer.authUser})),a=Object(me.d)((function(e){return e.page.user.module})),c=Object(r.useState)(Si),i=Object(j.a)(c,2),o=i[0],l=i[1],s=Object(me.c)(),u=function(){var e=Object(O.useMutation)(ui,{refetchQueries:function(){return[{query:si}]}}),t=Object(j.a)(e,2),n=t[0],a=t[1];return{deleteVehicle:n,error:a.error,loading:a.loading}}(),d=function(){l(Si),s(Object(Me.b)(wi))},b=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.deleteVehicle({variables:{id:t}});case 3:e.next=10;break;case 5:e.prev=5,e.t0=e.catch(0),l({name:"error",active:!0}),s(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t0)})),o.active,o.name;case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(Te.a,{title:"Eliminar vehiculo",onClick:function(){return b(t.id)},children:Object(pe.jsx)(Ke.a,{"aria-label":"vehicle",size:"small",children:Object(pe.jsx)(lt.a,{})})})})},x=function(){return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(Te.a,{title:"Editar vehiclo",onClick:function(){return l({name:"Vehiculo",active:!0})},children:Object(pe.jsx)(Ke.a,{"aria-label":"vehicle",size:"small",children:Object(pe.jsx)(it.a,{})})})})},g=(new Date).getTime(),f=t.billigEnd?new Date(t.billigEnd).getTime():"";return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(nt,{open:o.active,dialog:t,title:o.name,component:function(e){switch(e){case"Vehiculo":return Object(pe.jsx)(bi,{vehicle:t,handleClose:d});case"Renovar":return Object(pe.jsx)(Ci,{vehicle:t,handleClose:d})}}(o.name),handleClose:d}),ye(ve.e,n,a,(function(){return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsxs)($e.a,{style:{background:f>g?"#28A745":"#DC3545"},children:[Object(pe.jsxs)(Le.a,{component:"th",scope:"row",children:[t.customer.name," ",t.customer.lastName]}),Object(pe.jsx)(Le.a,{component:"th",scope:"row",children:t.device.name}),Object(pe.jsx)(Le.a,{component:"th",scope:"row",children:t.platform}),Object(pe.jsx)(Le.a,{component:"th",scope:"row",children:t.billing.name}),Object(pe.jsx)(Le.a,{component:"th",scope:"row",children:t.plate}),Object(pe.jsx)(Le.a,{component:"th",scope:"row",children:t.sim}),Object(pe.jsx)(Le.a,{component:"th",scope:"row",children:t.nroGPS}),Object(pe.jsx)(Le.a,{component:"th",scope:"row",align:"center",children:rt()(t.billigStart).format("DD/MM/YYYY")}),Object(pe.jsx)(Le.a,{component:"th",scope:"row",align:"center",children:rt()(t.billigEnd).format("DD/MM/YYYY")}),Object(pe.jsx)(Le.a,{children:rt()(t.createdAt).format("DD/MM/YYYY")}),Object(pe.jsx)(Le.a,{children:rt()(t.updatedAt).format("DD/MM/YYYY")}),Object(pe.jsxs)(Le.a,{align:"right",children:[ye(ve.h,n,a,x),ye(ve.g,n,a,m),Object(pe.jsx)(Te.a,{title:"Renovar vehiculo",onClick:function(){return l({name:"Renovar",active:!0})},children:Object(pe.jsx)(Ke.a,{"aria-label":"renew",size:"small",children:Object(pe.jsx)(mi.a,{})})})]})]})})}))]})},Ii={name:"",active:!1},Ai={type:"",text:""},Mi=function(){var e=Object(me.d)((function(e){return e.authReducer.authUser})),t=Object(me.d)((function(e){return e.page.user.module})),n=Object(r.useState)(Ii),a=Object(j.a)(n,2),c=a[0],i=a[1],o=Object(me.c)(),l=Object(r.useState)([]),s=Object(j.a)(l,2),u=s[0],d=s[1],b=function(){var e=Object(O.useQuery)(si);return{data:e.data,error:e.error,loading:e.loading}}(),m=b.data,h=b.loading,p=b.error,g=Object(r.useState)(5),f=Object(j.a)(g,2),v=f[0],y=f[1],C=Object(r.useState)(0),w=Object(j.a)(C,2),S=w[0],k=w[1],I=(Math.min(v,u.length-S*v),function(){i(Ii),o(Object(Me.b)(Ai))});if(Object(r.useEffect)((function(){if(m){var e=m.getVehicles.map((function(e){return Object(x.a)(Object(x.a)({},e),{},{billigStart:e.billigStart?new Date(e.billigStart):new Date})})).sort((function(e,t){return t.billigStart.getTime()-e.billigStart.getTime()}));d(e)}}),[m]),h)return Object(pe.jsx)("h1",{children:"Cargando..."});if(p)return Object(pe.jsx)("h1",{children:Object(Ae.a)(p)});return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(nt,{open:c.active,title:"".concat(c.name," Vehiculo"),component:function(e){switch(e){case"Crear":return Object(pe.jsx)(bi,{handleClose:I})}}(c.name),handleClose:I}),ye(ve.f,e,t,(function(){return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(Te.a,{title:"Crear vehiculo",children:Object(pe.jsx)(Ke.a,{"aria-label":"add",size:"small",onClick:function(){return i({name:"Crear",active:!0})},children:Object(pe.jsx)(xt.a,{})})})})})),Object(pe.jsx)(bt.a,{component:ht.a,style:{whiteSpace:"nowrap",marginTop:10},children:Object(pe.jsxs)(jt.a,{stickyHeader:!0,size:"small","aria-label":"a dense table",children:[Object(pe.jsx)(Ot.a,{children:Object(pe.jsxs)($e.a,{children:[Object(pe.jsx)(Le.a,{children:"Cliente"}),Object(pe.jsx)(Le.a,{children:"Dispositivo"}),Object(pe.jsx)(Le.a,{children:"Plataforma"}),Object(pe.jsx)(Le.a,{children:"Plan"}),Object(pe.jsx)(Le.a,{children:"Placa"}),Object(pe.jsx)(Le.a,{children:"Chip"}),Object(pe.jsx)(Le.a,{children:"Nro GPS"}),Object(pe.jsx)(Le.a,{children:"Fecha de instalaci\xf3n"}),Object(pe.jsx)(Le.a,{children:"Fecha de termino"}),Object(pe.jsx)(Le.a,{children:"Fecha creada"}),Object(pe.jsx)(Le.a,{children:"Fecha modificada"}),Object(pe.jsx)(Le.a,{align:"right",children:"Opciones"})]})}),Object(pe.jsx)(mt.a,{children:(v>0?u.slice(S*v,S*v+v):u).map((function(e){return Object(pe.jsx)(ki,{vehicle:e},e.id)}))})]})}),Object(pe.jsx)("div",{children:Object(pe.jsx)(ar.a,{rowsPerPageOptions:[5,10,25,{label:"Todos los registros",value:-1}],style:{borderBottom:"none"},count:u.length,rowsPerPage:v,page:S,SelectProps:{inputProps:{"aria-label":"filas por p\xe1gina"},native:!0},labelRowsPerPage:"filas por p\xe1gina",labelDisplayedRows:function(e){var t=e.from,n=e.to,a=e.count;return"".concat(t,"-").concat(n," de ").concat(a)},onPageChange:function(e,t){k(t)},onRowsPerPageChange:function(e){y(parseInt(e.target.value,10)),k(0)},ActionsComponent:va})})]})},Di=Object(me.b)((function(e){var t=e.page.user;return{link:t.link,page:t.page}}),null)((function(e){var t=e.link,n=e.page,a=Object(s.h)(),c=a.pathname.replace("/",""),i=function(e){var t=e.component,n=e.toLogin,a=Object(ge.a)(e,["component","toLogin"]);return Object(pe.jsx)(s.b,Object(x.a)(Object(x.a)({},a),{},{render:function(e){switch(n){case!0:return u("accessToken")?Object(pe.jsx)(s.a,{to:{pathname:"/"}}):Object(r.createElement)(t,e);case!1:return u("accessToken")?Object(r.createElement)(t,e):Object(pe.jsx)(s.a,{to:{pathname:"/"}})}}}))};return Object(pe.jsx)(pe.Fragment,{children:t===c||t===a.pathname?Object(pe.jsx)(i,{exact:!0,path:"/".concat(t),toLogin:!1,component:function(e){switch(e){case"DASHBOARD":return function(){return Object(pe.jsx)("h1",{children:"Bienvenido"})};case"MODULOS":return function(){return Object(pe.jsx)(nc,{})};case"ROLES":return function(){return Object(pe.jsx)(Nc,{})};case"USUARIOS":return function(){return Object(pe.jsx)(li,{})};case"CATEGORIAS":return function(){return Object(pe.jsx)(Gt,{})};case"MARCAS":return function(){return Object(pe.jsx)(zt,{})};case"MODELOS":return function(){return Object(pe.jsx)(Mr,{})};case"PRODUCTOS":return function(){return Object(pe.jsx)(mc,{})};case"SERVICIOS":return function(){return Object(pe.jsx)(Tc,{})};case"INGRESOS":return function(){return Object(pe.jsx)(An,{})};case"EGRESOS":return function(){return Object(pe.jsx)(On,{})};case"RESUMEN-CAJA":return function(){return Object(pe.jsx)(Mn,{})};case"CONSULTAR-CAJA":return function(){return Object(pe.jsx)(En,{})};case"CONSULTAR-PRECIOS":return function(){return Object(pe.jsx)(Vn,{})};case"CLIENTES":return function(){return Object(pe.jsx)(ir,{})};case"VEHICULOS":return function(){return Object(pe.jsx)(Mi,{})};case"DISPOSITIVOS":return function(){return Object(pe.jsx)(xr,{})};case"PLAN-DE-FACTURACION":return function(){return Object(pe.jsx)(vt,{})};default:return function(){return Object(pe.jsx)(fe,{})}}}("".concat(n))}):Object(pe.jsx)(i,{toLogin:!1,path:"*",component:fe})})})),Ni=function(){return Object(pe.jsx)(s.d,{children:Object(pe.jsx)(Di,{})})},Ei=(n(271),function(){var e=Object(me.d)((function(e){return e.page.user})),t=e.module,n=(e.page,e.name),a=null===n||void 0===n?void 0:n.charAt(0).toUpperCase(),r=null===n||void 0===n?void 0:n.substr(1,null===n||void 0===n?void 0:n.length),c="".concat(a).concat(r.toLowerCase());return Object(pe.jsx)("div",{className:"wrapper",children:Object(pe.jsxs)("div",{className:"content-wrapper",children:[Object(pe.jsxs)("div",{className:"content-wrapper-header items-center",children:[Object(pe.jsx)("h1",{children:n.toUpperCase()}),Object(pe.jsxs)("ol",{children:[Object(pe.jsx)("li",{className:"list-style-none text-active",children:Object(pe.jsx)("strong",{children:t})}),Object(pe.jsx)("li",{className:"list-style-none text-inactive",children:c})]})]}),Object(pe.jsx)("div",{className:"content-wrapper-main",children:Object(pe.jsx)(Ni,{})})]})})}),Ri=(n(272),function(){return Object(pe.jsx)("footer",{children:Object(pe.jsx)("div",{className:"center",children:Object(pe.jsxs)("p",{children:["\xa9 2020-2021 by"," ",Object(pe.jsx)("a",{href:"https://kemaytechnology.com/",target:"_blank",rel:"noreferrer",children:"Kemay Technology"}),". Todos los derechos reservados. Si tuviese alg\xfan inconveniente por favor contactarnos al siguiente correo:",Object(pe.jsx)("a",{href:"mailto:dperez@kemaytechnology.com",target:"_blank",rel:"noreferrer",children:"dperez@kemaytechnology.com"}),Object(pe.jsx)("br",{})," Version: 0.0.1 | Powered by",Object(pe.jsx)("a",{href:"http://github.com/davisperezg",target:"_blank",rel:"noreferrer",children:"@davisperezg"})]})})})}),Fi=n(353),Ui=n(354),Pi="@page/LINK_USER",Yi=function(e,t,n){return function(){var a=Object(p.a)(h.a.mark((function a(r){return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r({type:Pi,payload:{link:t,module:e,page:"/"===t?"DASHBOARD":t.toUpperCase(),name:n}});case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},qi=Object(me.b)(null,{setLink:Yi})((function(e){var t,n=e.menu,a=e.setLink,r=e.module,c=Object(s.g)(),i=Object(me.d)((function(e){return e.authReducer.authUser})),o=function(){a(r.name,n.link,n.name),document.title="RPUM - ".concat(n.link.toUpperCase()),c.push("/".concat(n.link))};return Object(pe.jsx)(pe.Fragment,{children:((null===i||void 0===i||null===(t=i.role)||void 0===t?void 0:t.name)===ve.i||n.name!==ve.c)&&Object(pe.jsx)("li",{onClick:function(){return o()},children:n.name})})})),zi=function(e){var t=e.module,n=Object(r.useState)(!1),a=Object(j.a)(n,2),i=a[0],o=a[1],l=Object(r.useState)(!1),s=Object(j.a)(l,2),u=s[0],d=s[1],b=t.menus,O=c.a.useState([]),m=Object(j.a)(O,2),h=m[0],p=m[1];return Object(r.useEffect)((function(){p(b||[])}),[b]),Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsxs)("li",{style:u?{color:"#fff",fontWeight:"bold"}:{color:"#67677e"},onClick:function(){return o(!i),void d(!u)},children:[t.name," ",i?Object(pe.jsx)(Fi.a,{}):Object(pe.jsx)(Ui.a,{})]}),i&&Object(pe.jsx)("ul",{children:h.map((function(e){return Object(pe.jsx)(qi,{menu:e,module:t},e.id)}))})]})},Bi=n.p+"static/media/logo_kemay_antena.16ba1da3.png",$i=(n(273),function(){var e,t=Object(me.d)((function(e){return e.authReducer.authUser})),n=Object(me.d)((function(e){return e.page.user})),a=(n.module,n.page,null===t||void 0===t||null===(e=t.role)||void 0===e?void 0:e.modules),c=Object(r.useState)([]),i=Object(j.a)(c,2),o=i[0],l=i[1],u=Object(s.g)(),d=Object(me.c)();return Object(r.useEffect)((function(){l(a||[])}),[a]),Object(pe.jsxs)("aside",{children:[Object(pe.jsx)("div",{className:"content-logo",children:Object(pe.jsx)("div",{className:"logo",onClick:function(){u.push("/"),d(Yi("Inicio","/","Dashboard"))},children:Object(pe.jsx)("img",{width:"100",height:"100",src:Bi,alt:"Logo"})})}),Object(pe.jsx)("div",{className:"sidebar",children:Object(pe.jsx)("ul",{children:o.map((function(e){return Object(pe.jsx)(zi,{module:e},e.id)}))})})]})}),Li=(n(274),function(){return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)("section",{className:"menu",children:Object(pe.jsx)($i,{})}),Object(pe.jsxs)("section",{className:"content",children:[Object(pe.jsxs)("div",{className:"body",children:[Object(pe.jsx)(xe,{}),Object(pe.jsx)(Ei,{})]}),Object(pe.jsx)(Ri,{})]})]})}),Ti=n.p+"static/media/B_logo_kemay.bec2fe6e.png",Wi=Object(O.gql)(nr||(nr=Object(b.a)(["\n  mutation login($authInput: AuthInput!) {\n    login(authInput: $authInput) {\n      access_token\n      refresh_token\n    }\n  }\n"]))),Qi=(n(275),{email:"",password:""}),_i={path:"",message:""},Vi=Object(me.b)((function(e){return{loading:e.authReducer.loading}}),{setLoading:be})((function(e){var t=e.loading,n=e.setLoading,a=Object(r.useState)(_i),c=Object(j.a)(a,2),i=c[0],o=c[1],l=Object(r.useState)(Qi),s=Object(j.a)(l,2),u=s[0],b=s[1],m=Object(me.d)((function(e){return e.message})),g=function(){var e=Object(O.useMutation)(Wi);return Object(j.a)(e,1)[0]}(),f=Object(me.c)(),v=function(e){f(Object(Me.b)({type:"",text:""})),o(_i),b(Object(x.a)(Object(x.a)({},u),{},Object(Ce.a)({},e.target.name,e.target.value)))},y=function(){var e=Object(p.a)(h.a.mark((function e(t){var a,r,c,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n(!0),e.prev=2,e.next=5,g({variables:{authInput:{email:u.email,password:u.password}}});case 5:a=e.sent,r=a.data.login,c=r.access_token,i=r.refresh_token,d("accessToken",c),d("refreshToken",i),oe.resetStore(),window.location.href="/",e.next=21;break;case 13:if(e.prev=13,e.t0=e.catch(2),401!==e.t0.graphQLErrors[0].extensions.exception.status){e.next=19;break}return f(Object(Me.b)({type:"error",text:Object(Ae.a)(e.t0)})),n(!1),e.abrupt("return");case 19:o(e.t0.graphQLErrors[0].extensions.exception.response),n(!1);case 21:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(pe.jsxs)("div",{className:"login",children:[Object(pe.jsx)("div",{className:"content-login-logo content-items-center",children:Object(pe.jsx)("img",{width:"450",height:"400",src:Ti,alt:"Logo"})}),Object(pe.jsx)("div",{className:"content-login-form content-items-center",children:Object(pe.jsxs)("div",{className:"content-login-form-main",children:[Object(pe.jsx)("div",{className:"content-login-form-header content-items-center",children:Object(pe.jsx)("h1",{children:"ACCESO AL SISTEMA"})}),m.type&&Object(pe.jsx)(He.a,{severity:m.type,children:m.text}),Object(pe.jsx)("form",{onSubmit:y,children:Object(pe.jsxs)("div",{className:"content-login-form-body",children:[Object(pe.jsx)("div",{className:"content-login-form-input",children:Object(pe.jsx)(Re.a,{error:"username"===(null===i||void 0===i?void 0:i.path),id:"idUsername",label:"Usuario",helperText:"username"===(null===i||void 0===i?void 0:i.path)?null===i||void 0===i?void 0:i.message:"",name:"email",onChange:v,variant:"outlined",fullWidth:!0})}),Object(pe.jsx)("br",{}),Object(pe.jsx)("div",{className:"content-login-form-input",children:Object(pe.jsx)(Re.a,{error:"password"===(null===i||void 0===i?void 0:i.path),id:"idPassword",label:"Contrase\xf1a",helperText:"password"===(null===i||void 0===i?void 0:i.path)?null===i||void 0===i?void 0:i.message:"",name:"password",onChange:v,variant:"outlined",type:"password",fullWidth:!0})}),Object(pe.jsx)("br",{}),Object(pe.jsx)("div",{className:"content-login-form-input content-items-center",children:t?Object(pe.jsx)(aa.a,{}):Object(pe.jsx)(Pe.a,{disabled:!!t,type:"submit",size:"large",variant:"contained",color:"primary",fullWidth:!0,children:"Iniciar sesion"})}),Object(pe.jsx)("br",{}),Object(pe.jsx)("div",{className:"content-login-form-footer content-items-center",children:"\xbfOlvidaste tu contrase\xf1a?"})]})})]})})]})})),Ji=function(){return Object(pe.jsx)(l.a,{children:u("accessToken")?Object(pe.jsx)(Li,{}):Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(Vi,{}),Object(pe.jsx)(s.a,{to:"/"})]})})},Gi=n(92),Hi=n(210),Ki=n(211),Xi=n(164),Zi=n(212),eo=n.n(Zi),to={loading:!1,authUser:void 0,error:void 0},no={user:{link:"/",module:"Inicio",page:"DASHBOARD",name:"Dashboard"}},ao={type:"",text:""},ro=Object(Gi.combineReducers)({authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:to,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ue:return Object(x.a)(Object(x.a)({},e),{},{loading:t.payload});case le:case se:return Object(x.a)(Object(x.a)({},e),{},{authUser:t.payload});case de:return Object(x.a)(Object(x.a)({},e),{},{error:t.payload});default:return e}},page:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:no,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Pi:return Object(x.a)(Object(x.a)({},e),{},{user:t.payload});default:return e}},message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ao,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Me.a:return t.payload;default:return e}}}),co={key:"root",storage:eo.a,whitelist:["page"]},io=Object(Xi.a)(co,ro),oo=Object(Gi.createStore)(io,Object(Ki.composeWithDevTools)(Object(Gi.applyMiddleware)(Hi.a))),lo=Object(Xi.b)(oo),so=n(213);n(278);o.a.render(Object(pe.jsx)(c.a.StrictMode,{children:Object(pe.jsx)(O.ApolloProvider,{client:oe,children:Object(pe.jsx)(me.a,{store:oo,children:Object(pe.jsx)(so.a,{loading:null,persistor:lo,children:Object(pe.jsx)(Ji,{})})})})}),document.getElementById("root"))},79:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var a,r=n(12),c=n(5),i=Object(c.gql)(a||(a=Object(r.a)(["\n  query getModules {\n    getModules {\n      id\n      name\n      description\n      createdAt\n      updatedAt\n      menus {\n        id\n        name\n        link\n      }\n      access {\n        id\n        name\n      }\n    }\n  }\n"]))),o=function(){var e=Object(c.useQuery)(i);return{data:e.data,loading:e.loading,error:e.error}}},8:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var a="@message/ALERT",r=function(e){return{type:a,payload:e}}}},[[279,1,2]]]);
//# sourceMappingURL=main.7c4c3654.chunk.js.map