(this.webpackJsonprpum=this.webpackJsonprpum||[]).push([[0],{10:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var a="@message/ALERT",r=function(e){return{type:a,payload:e}}},106:function(e,t,n){"use strict";var a=n(111),r=(n(0),n(95)),c=n(233),i=n(236),o=n(237),s=n(148),l=n(240),u=n(239),d=n(185),j=n(135),b=n(238),O=n(28),m=n(1);function h(e,t){return e.filter((function(e){return-1===t.indexOf(e)}))}function p(e,t){return e.filter((function(e){return-1!==t.indexOf(e)}))}t.a=function(e){var t=e.setListAvailable,n=e.setListCurrent,x=e.listAvailable,f=e.setChecked,g=e.checked,v=e.titleAvailable,y=e.listCurrent,C=e.titleCurrent,k=e.loading,w=p(g,x),M=p(g,y),I=function(e){return function(){var t=g.indexOf(e),n=Object(a.a)(g);-1===t?n.push(e):n.splice(t,1),f(n)}},S=function(e){return p(g,e).length},A=function(e){return function(){var t,n;S(e)===e.length?f(h(g,e)):f((t=g,n=e,[].concat(Object(a.a)(t),Object(a.a)(h(n,t)))))}},F=function(e,t){return Object(m.jsxs)(i.a,{children:[Object(m.jsx)(o.a,{avatar:Object(m.jsx)(d.a,{onClick:A(t),checked:S(t)===t.length&&0!==t.length,indeterminate:S(t)!==t.length&&0!==S(t),disabled:0===t.length,inputProps:{"aria-label":"all items selected"}}),title:e,subheader:"".concat(S(t),"/").concat(t.length," selected")}),Object(m.jsx)(b.a,{}),Object(m.jsxs)(c.a,{dense:!0,component:"div",role:"list",children:[k?Object(m.jsx)(O.a,{}):t.map((function(e){var t="transfer-list-all-item-".concat(e.name,"-label");return Object(m.jsxs)(s.a,{role:"listitem",button:!0,onClick:I(e),children:[Object(m.jsx)(u.a,{children:Object(m.jsx)(d.a,{checked:-1!==g.indexOf(e),tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":t}})}),Object(m.jsx)(l.a,{id:t,primary:"".concat(e.name)})]},e.id)})),Object(m.jsx)(s.a,{})]})]})};return Object(m.jsxs)(r.a,{container:!0,spacing:2,justify:"center",alignItems:"center",children:[Object(m.jsx)(r.a,{item:!0,children:F(v,x)}),Object(m.jsx)(r.a,{item:!0,children:Object(m.jsxs)(r.a,{container:!0,direction:"column",alignItems:"center",children:[Object(m.jsx)(j.a,{variant:"outlined",size:"small",onClick:function(){n(y.concat(w)),t(h(x,w)),f(h(g,w))},disabled:0===w.length,"aria-label":"move selected right",children:">"}),Object(m.jsx)(j.a,{variant:"outlined",size:"small",onClick:function(){t(x.concat(M)),n(h(y,M)),f(h(g,M))},disabled:0===M.length,"aria-label":"move selected left",children:"<"})]})}),Object(m.jsx)(r.a,{item:!0,children:F(C,y)})]})}},13:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"f",(function(){return r})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"g",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l}));var a="Crear",r="Editar",c="Eliminar",i="Ver",o="SuperAdmin",s="Administraci\xf3n de modulos",l="Modulos"},133:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a,r,c=n(111),i=n(7),o=n(16),s=n(11),l=Object(s.gql)(a||(a=Object(o.a)(["\n  mutation updateRole($roleInput: RoleUpdateInput!) {\n    updateRole(roleInput: $roleInput) {\n      id\n      name\n      description\n      modules {\n        id\n        name\n      }\n    }\n  }\n"]))),u=function(){var e=Object(s.useMutation)(l,{update:function(e,t){var n=t.data.updateRole;e.modify({fields:{updateRole:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=e.writeFragment({data:n,fragment:Object(s.gql)(r||(r=Object(o.a)(["\n                fragment NewRole on Role {\n                  id\n                  name\n                  description\n                  modules {\n                    id\n                    name\n                  }\n                }\n              "])))});return[].concat(Object(c.a)(t),[a])}}})}}),t=Object(i.a)(e,2),n=t[0],a=t[1];return{updateRole:n,error:a.error,loading:a.loading}}},176:function(e,t,n){"use strict";var a=n(19),r=n.n(a),c=n(23),i=n(7),o=n(0),s=n(10),l=n(234),u=n(6),d=n(95),j=n(135),b=n(64),O=n(133),m=n(106),h=n(13),p=n(18),x=n(1);t.a=function(t){var n=t.role,a=t.handleClose,f=Object(o.useState)([]),g=Object(i.a)(f,2),v=g[0],y=g[1],C=Object(o.useState)([]),k=Object(i.a)(C,2),w=k[0],M=k[1],I=Object(o.useState)([]),S=Object(i.a)(I,2),A=S[0],F=S[1],R=Object(u.c)(),U=Object(b.b)(),Y=Object(O.a)(),E=Object(u.d)((function(e){return e.message})),D=E.type,N=E.text,P=(Object(u.d)((function(e){return e.authReducer.authUser})),function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=w.map((function(e){return{name:e.name}})),e.prev=2,e.next=5,Y.updateRole({variables:{roleInput:{id:n.id,modules:a}}});case 5:return e.abrupt("return",R(Object(s.b)({type:"success",text:"El rol actualiz\xf3 sus modulos correctamente."})));case 8:e.prev=8,e.t0=e.catch(2),R(Object(s.b)({type:"error",text:Object(p.a)(e.t0)}));case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()),z=Object(o.useCallback)((function(){var e=U.data.getModules.filter((function(e){var t;return!(null===(t=n.modules)||void 0===t?void 0:t.some((function(t){return e.name===t.name})))})).filter((function(e){return e.name!==h.b}));y(e)}),[n,U.data]);return Object(o.useEffect)((function(){if(n&&U.data){var e,t=null===(e=n.modules)||void 0===e?void 0:e.filter((function(e){return e.name!==h.b}));M(t||[]),z()}}),[n,U.data,z]),"error"===D?Object(x.jsx)("h1",{children:N}):Object(x.jsx)("form",{onSubmit:P,children:Object(x.jsxs)(d.a,{container:!0,spacing:3,children:[Object(x.jsx)(d.a,{item:!0,xs:12,children:Object(x.jsx)(m.a,{setListAvailable:y,setListCurrent:M,setChecked:F,checked:A,listAvailable:v,titleAvailable:"Modulos disponibles",listCurrent:w,titleCurrent:"Modulos actuales",loading:U.loading})}),Object(x.jsxs)(l.a,{style:{width:"100%"},children:[Object(x.jsx)(j.a,{onClick:a,color:"primary",children:"Cancelar"}),Object(x.jsx)(j.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",disabled:!!Y.loading,children:e.i?"Actualizar":"Registrar"})]})]})})}},18:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e){for(var t=0;t<e.graphQLErrors.length;t++)for(var n=e.graphQLErrors[t].extensions.exception.response.message,a=0;a<n.length;a++){return n[a]}}},214:function(e,t,n){},217:function(e,t,n){},220:function(e,t,n){},221:function(e,t,n){},222:function(e,t,n){},225:function(e,t,n){},226:function(e,t,n){"use strict";n.r(t);var a,r,c,i,o,s,l,u,d,j,b,O,m,h,p,x,f,g,v,y,C,k,w,M,I,S,A,F,R,U,Y,E,D,N=n(0),P=n.n(N),z=n(26),q=n.n(z),L=n(100),$=n(34),W=function(e){return localStorage.getItem(e)},T=function(e,t){return localStorage.setItem(e,t)},B=n.p+"static/media/logo.8da9e76e.png",Q=n(7),_=n(16),V=n(11),H=n(19),K=n.n(H),G=n(23),J=n(9),X=n(166),Z=n(167),ee=n(172),te=Object(V.gql)(a||(a=Object(_.a)(["\n  mutation refreshToken($authInput: AuthRefreshTokenInput!) {\n    refreshToken(authInput: $authInput) {\n      access_token\n    }\n  }\n"]))),ne=!1,ae=[],re=Object(ee.a)((function(e){var t=e.graphQLErrors,n=e.networkError,a=e.operation,r=e.forward;if(t){var c,i=Object(X.a)(t);try{for(i.s();!(c=i.n()).done;){var o=c.value;switch(o.extensions.exception.status){case 401:var s=void 0;return ne?s=Object(V.fromPromise)(new Promise((function(e){ae.push((function(){return e()}))}))):(ne=!0,s=Object(V.fromPromise)(oe.mutate({mutation:te,variables:{authInput:{email:W("username"),refresh_token:W("refreshToken")}}}).then((function(e){var t=e.data.refreshToken.access_token;return T("accessToken",t),!0})).then((function(){return ae.map((function(e){return e()})),ae=[],!0})).catch((function(){return ae=[],!1})).finally((function(){ne=!1})))),s.flatMap((function(){return r(a)}));default:console.log("[ERROR]: Message: ".concat(o.message,", Location: ").concat(o.locations,", Path: ").concat(o.path))}}}catch(o){i.e(o)}finally{i.f()}}n&&console.log("[Network error]: ".concat(n))})),ce=Object(V.createHttpLink)({uri:"https://web.kemaytechnology.com/graphql"}),ie=Object(Z.a)((function(e,t){var n=t.headers,a=W("accessToken");return{headers:Object(J.a)(Object(J.a)({},n),{},{authorization:a?"Bearer ".concat(a):""})}})),oe=new V.ApolloClient({link:Object(V.from)([re,ie,ce]),cache:new V.InMemoryCache}),se=oe,le="@auth/LOGIN_USER",ue="@auth/LOGOUT_USER",de="@auth/LOADING_USER",je="@auth/ERROR_USER",be={name:"Anonimo",lastName:""},Oe=function(e){return{type:de,payload:e}},me=function(){return function(){var e=Object(G.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.clear(),se.resetStore(),window.location.href="/",e.next=5,t({type:ue,payload:be});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},he=n(6),pe=Object(V.gql)(r||(r=Object(_.a)(["\n  query me {\n    me {\n      id\n      name\n      lastName\n      email\n      status\n      role {\n        name\n        modules {\n          id\n          name\n          access {\n            name\n          }\n          menus {\n            id\n            name\n            link\n          }\n        }\n      }\n    }\n  }\n"]))),xe="@page/LINK_USER",fe=function(e,t){return function(){var n=Object(G.a)(K.a.mark((function n(a){return K.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a({type:xe,payload:{link:t,module:e,page:"/"===t?"HOME":t.toUpperCase()}});case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},ge=(n(214),n(1)),ve=Object(he.b)((function(e){return{loading:e.authReducer.loading,authUser:e.authReducer.authUser}}),{setLoading:Oe,whoisme:function(e){return function(){var t=Object(G.a)(K.a.mark((function t(n){return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n(Oe(!0));case 3:return t.next=5,n({type:le,payload:e.me});case 5:return t.next=7,n(Oe(!1));case 7:t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(0),t.next=13,n({type:je,payload:t.t0.message});case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},logout:me,setLink:fe})((function(e){var t,n=e.authUser,a=e.loading,r=e.whoisme,c=e.setLink,i=e.logout,o=function(){var e,t=Object(V.useLazyQuery)(pe,{pollInterval:500}),n=Object(Q.a)(t,2),a=n[0],r=n[1],c=r.data,i=r.loading,o=r.error,s=Object(he.c)();return o&&401===(null===o||void 0===o||null===(e=o.graphQLErrors[0].extensions)||void 0===e?void 0:e.exception.status)&&(alert(o.graphQLErrors[0].extensions.exception.response.message),s(me())),{me:a,data:c,loading:i}}(),s=o.me,l=o.data,u=Object($.g)(),d=function(){u.push("/"),c("/")};return Object(N.useEffect)((function(){var e;s(),r(l),T("username",null===l||void 0===l||null===(e=l.me)||void 0===e?void 0:e.email)}),[s,r,l]),2===(null===l||void 0===l||null===(t=l.me)||void 0===t?void 0:t.status)&&i(),Object(ge.jsxs)("header",{children:[Object(ge.jsxs)("div",{className:"content-logo",children:[Object(ge.jsx)("div",{onClick:function(){return d()},className:"logo",children:Object(ge.jsx)("img",{width:"60",height:"60",src:B,alt:"Logo"})}),Object(ge.jsx)("div",{onClick:function(){return d()},className:"title-logo",children:Object(ge.jsx)("p",{children:"RPUM"})})]}),Object(ge.jsx)("div",{className:"content-options",children:Object(ge.jsxs)("div",{className:"options",children:[Object(ge.jsx)("a",{children:a?"Cargando usuario...":"Bienvenido, ".concat(null===n||void 0===n?void 0:n.name," ").concat(null===n||void 0===n?void 0:n.lastName)}),Object(ge.jsx)("button",{className:"buttonLogout",onClick:function(){return i()},children:"Cerrar sesion"})]})})]})})),ye=(n(217),function(){return Object(ge.jsx)("footer",{children:Object(ge.jsx)("div",{className:"center",children:Object(ge.jsxs)("p",{children:["\xa9 2020-2021 by"," ",Object(ge.jsx)("a",{href:"https://kemaytechnology.com/",target:"_blank",rel:"noreferrer",children:"Kemay Technology"}),". Todos los derechos reservados. Si tuviese alg\xfan inconveniente por favor contactarnos al siguiente correo:",Object(ge.jsx)("a",{href:"mailto:dperez@kemaytechnology.com",target:"_blank",rel:"noreferrer",children:"dperez@kemaytechnology.com"}),Object(ge.jsx)("br",{})," Version: 0.0.1 | Powered by",Object(ge.jsx)("a",{href:"http://github.com/davisperezg",target:"_blank",rel:"noreferrer",children:"@davisperezg"})]})})})}),Ce=n(134),ke=function(){return Object(ge.jsx)(ge.Fragment,{children:"4040404040404040"})},we=n(18),Me=n(13),Ie=function(e,t,n,a,r){var c,i,o,s,l,u,d,j;switch(e){case Me.d:var b=null===t||void 0===t||null===(c=t.role)||void 0===c||null===(i=c.modules)||void 0===i?void 0:i.map((function(t){var a;return null===(a=t.access)||void 0===a?void 0:a.filter((function(a){return t.name===n&&a.name===e}))}));return null===b||void 0===b?void 0:b.map((function(e,t){return e?(null===e||void 0===e?void 0:e.length)>0&&Object(ge.jsx)(a,{},t):""}));case Me.f:var O=null===t||void 0===t||null===(o=t.role)||void 0===o||null===(s=o.modules)||void 0===s?void 0:s.map((function(t){var a;return null===(a=t.access)||void 0===a?void 0:a.filter((function(a){return t.name===n&&a.name===e}))}));return null===O||void 0===O?void 0:O.map((function(e,t){return e?(null===e||void 0===e?void 0:e.length)>0&&Object(ge.jsx)(a,{},t):""}));case Me.e:var m=null===t||void 0===t||null===(l=t.role)||void 0===l||null===(u=l.modules)||void 0===u?void 0:u.map((function(t){var a;return null===(a=t.access)||void 0===a?void 0:a.filter((function(a){return t.name===n&&a.name===e}))}));return null===m||void 0===m?void 0:m.map((function(e,t){return e?(null===e||void 0===e?void 0:e.length)>0&&Object(ge.jsx)(a,{},t):""}));case Me.c:var h=null===t||void 0===t||null===(d=t.role)||void 0===d||null===(j=d.modules)||void 0===j?void 0:j.map((function(t){var a;return null===(a=t.access)||void 0===a?void 0:a.filter((function(a){return t.name===n&&a.name===e}))}));return null===h||void 0===h?void 0:h.map((function(e,t){return e?(null===e||void 0===e?void 0:e.length)>0&&Object(ge.jsx)(a,{},t):""}))}},Se=n(10),Ae=n(288),Fe=n(287),Re=n(289),Ue=n(286),Ye=n(284),Ee=n(290),De=n(229),Ne=n(285),Pe=n(301),ze=n(12),qe=n(299),Le=n(279),$e=n(67),We=n(278),Te=n(63),Be=n(296),Qe=n(277),_e=n(276),Ve=n(173),He=n.n(Ve),Ke=Object(ze.a)((function(e){return Object(Pe.a)({root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})}))((function(e){var t=e.children,n=e.classes,a=e.onClose,r=Object(Ce.a)(e,["children","classes","onClose"]);return Object(ge.jsxs)(_e.a,Object(J.a)(Object(J.a)({disableTypography:!0,className:n.root},r),{},{children:[Object(ge.jsx)($e.a,{variant:"h6",children:t}),a?Object(ge.jsx)(Qe.a,{"aria-label":"close",className:n.closeButton,onClick:a,children:Object(ge.jsx)(He.a,{})}):null]}))})),Ge=function(e){var t=e.open,n=e.dialog,a=e.title,r=e.component,c=e.handleClose,i=Object(he.d)((function(e){return e.message})),o=Object(Te.a)(),s=Object(We.a)(o.breakpoints.down("sm"));return Object(ge.jsxs)(qe.a,{fullScreen:s,open:t,"aria-labelledby":"idModal",disableBackdropClick:!0,disableEscapeKeyDown:!0,children:[Object(ge.jsxs)(Ke,{id:"idModal",onClose:c,children:[a," ",null===n||void 0===n?void 0:n.name]}),i.type&&Object(ge.jsx)(Be.a,{severity:i.type,children:i.text}),Object(ge.jsx)(Le.a,{dividers:!0,style:{overflowY:"visible"},children:r})]})},Je=n(40),Xe=n.n(Je),Ze=n(39),et=n.n(Ze),tt=n(30),nt=n.n(tt),at=n(32),rt=n(95),ct=n(300),it=n(135),ot=n(234),st=n(28),lt=n(280),ut=n(302),dt=n(283),jt=n(295),bt=Object(V.gql)(c||(c=Object(_.a)(["\n  query getCategorys {\n    getCategorys {\n      id\n      name\n      createdAt\n      updatedAt\n    }\n  }\n"]))),Ot=function(){var e=Object(V.useQuery)(bt);return{data:e.data,error:e.error,loading:e.loading}},mt=Object(V.gql)(i||(i=Object(_.a)(["\n  query getBrands {\n    getBrands {\n      id\n      name\n      category {\n        id\n        name\n      }\n    }\n  }\n"]))),ht=function(){var e=Object(V.useQuery)(mt);return{data:e.data,error:e.error,loading:e.loading}},pt=Object(V.gql)(o||(o=Object(_.a)(["\n  mutation updateBrand($brandInput: UpdateBrandInput!) {\n    updateBrand(brandInput: $brandInput) {\n      id\n      name\n    }\n  }\n"]))),xt=Object(V.gql)(s||(s=Object(_.a)(["\n  mutation registerBrand($brandInput: CreateBrandInput!) {\n    registerBrand(brandInput: $brandInput) {\n      id\n      name\n      category {\n        id\n        name\n      }\n    }\n  }\n"]))),ft={type:"",text:""},gt=function(e){var t,n=e.handleClose,a=e.brand,r={id:(null===a||void 0===a?void 0:a.id)||"",name:(null===a||void 0===a?void 0:a.name)||"",category:(null===a||void 0===a||null===(t=a.category)||void 0===t?void 0:t.name)||""},c=Object(N.useState)(r.id?r:{name:"",category:""}),i=Object(Q.a)(c,2),o=i[0],s=i[1],l=Object(N.useState)([]),u=Object(Q.a)(l,2),d=u[0],j=u[1],b=Ot().data,O=Object(he.c)(),m=function(){var e=Object(V.useMutation)(pt,{refetchQueries:function(){return[{query:mt}]}}),t=Object(Q.a)(e,2),n=t[0],a=t[1];return{updateBrand:n,error:a.error,loading:a.loading}}(),h=function(){var e=Object(V.useMutation)(xt,{refetchQueries:function(){return[{query:mt}]}}),t=Object(Q.a)(e,2),n=t[0],a=t[1];return{registerBrand:n,error:a.error,loading:a.loading}}(),p=function(){var e=Object(G.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!o.id){e.next=13;break}return e.prev=2,e.next=5,m.updateBrand({variables:{brandInput:o}});case 5:O(Object(Se.b)({type:"success",text:"La marca se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),O(Object(Se.b)({type:"error",text:Object(we.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,h.registerBrand({variables:{brandInput:o}});case 16:O(Object(Se.b)({type:"success",text:"La marca ha sido registrada correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),O(Object(Se.b)({type:"error",text:Object(we.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(N.useEffect)((function(){b&&j(b.getCategorys)}),[b]),Object(ge.jsx)("form",{onSubmit:p,children:Object(ge.jsxs)(rt.a,{container:!0,spacing:3,children:[Object(ge.jsx)(rt.a,{item:!0,xs:12,children:Object(ge.jsxs)(lt.a,{variant:"outlined",fullWidth:!0,children:[Object(ge.jsx)(ut.a,{id:"idCategory",children:"Categoria"}),Object(ge.jsx)(jt.a,{labelId:"Categoria",id:"idCategory",value:o.category,onChange:function(e){s(Object(J.a)(Object(J.a)({},o),{},Object(at.a)({},e.target.name,e.target.value))),O(Object(Se.b)(ft))},label:"Categoria",name:"category",children:d.map((function(e){return Object(ge.jsx)(dt.a,{value:e.name,children:e.name},e.id)}))})]})}),Object(ge.jsx)(rt.a,{item:!0,xs:12,children:Object(ge.jsx)(ct.a,{fullWidth:!0,onChange:function(e){s(Object(J.a)(Object(J.a)({},o),{},Object(at.a)({},e.target.name,e.target.value))),O(Object(Se.b)(ft))},name:"name",autoComplete:"off",id:"idName",label:"Marca",variant:"outlined",value:o.name})}),Object(ge.jsxs)(ot.a,{style:{width:"100%"},children:[Object(ge.jsx)(it.a,{onClick:function(){return n()},color:"primary",children:"Cancelar"}),o.id?m.loading?Object(ge.jsx)(st.a,{}):Object(ge.jsx)(it.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):h.loading?Object(ge.jsx)(st.a,{}):Object(ge.jsx)(it.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})},vt={type:"",text:""},yt={name:"",active:!1},Ct=function(e){var t=e.brand,n=Object(he.d)((function(e){return e.authReducer.authUser})),a=Object(he.d)((function(e){return e.page.user.module})),r=Object(N.useState)(yt),c=Object(Q.a)(r,2),i=c[0],o=c[1],s=Object(he.c)(),l=function(){o(yt),s(Object(Se.b)(vt))},u=function(e){switch(e){case"Marca":return Object(ge.jsx)(gt,{brand:t,handleClose:l})}},d=function(){return Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)(Ge,{open:i.active,dialog:t,title:i.name,component:u(i.name),handleClose:l}),Object(ge.jsx)(Ye.a,{align:"right",children:Object(ge.jsx)(Ne.a,{title:"Editar Marca",onClick:function(){return o({name:"Marca",active:!0})},children:Object(ge.jsx)(Qe.a,{"aria-label":"role",size:"small",children:Object(ge.jsx)(et.a,{})})})})]})};return Object(ge.jsx)(ge.Fragment,{children:Ie(Me.c,n,a,(function(){return Object(ge.jsx)(ge.Fragment,{children:Object(ge.jsxs)(Ue.a,{children:[Object(ge.jsx)(Ye.a,{component:"th",scope:"row",children:t.category.name}),Object(ge.jsx)(Ye.a,{component:"th",scope:"row",children:t.name}),Object(ge.jsx)(Ye.a,{children:nt()(t.createdAt).format("DD/MM/YYYY")}),Object(ge.jsx)(Ye.a,{children:nt()(t.updatedAt).format("DD/MM/YYYY")}),Ie(Me.f,n,a,d)]})})}))})},kt={type:"",text:""},wt={name:"",active:!1},Mt=function(){var e=Object(he.d)((function(e){return e.authReducer.authUser})),t=Object(he.d)((function(e){return e.page.user.module})),n=Object(N.useState)(wt),a=Object(Q.a)(n,2),r=a[0],c=a[1],i=Object(he.c)(),o=ht(),s=o.data,l=o.loading,u=o.error,d=Object(N.useState)([]),j=Object(Q.a)(d,2),b=j[0],O=j[1],m=function(){c(wt),i(Object(Se.b)(kt))},h=function(e){switch(e){case"Crear":return Object(ge.jsx)(gt,{handleClose:m})}};if(Object(N.useEffect)((function(){s&&O(s.getBrands)}),[s]),l)return Object(ge.jsx)("h1",{children:"Cargando..."});if(u)return Object(ge.jsx)("h1",{children:Object(we.a)(u)});return Object(ge.jsxs)(ge.Fragment,{children:[Ie(Me.d,e,t,(function(){return Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)(Ge,{open:r.active,title:"".concat(r.name," Marca"),component:h(r.name),handleClose:m}),Object(ge.jsx)(Ne.a,{title:"Crear Marca",children:Object(ge.jsx)(Qe.a,{"aria-label":"add",size:"small",onClick:function(){return c({name:"Crear",active:!0})},children:Object(ge.jsx)(Xe.a,{})})})]})})),Object(ge.jsx)(Fe.a,{component:De.a,style:{marginTop:10},children:Object(ge.jsxs)(Ae.a,{size:"small","aria-label":"a dense table",children:[Object(ge.jsx)(Re.a,{children:Object(ge.jsxs)(Ue.a,{children:[Object(ge.jsx)(Ye.a,{children:"Categoria"}),Object(ge.jsx)(Ye.a,{children:"Marca"}),Object(ge.jsx)(Ye.a,{children:"Fecha creada"}),Object(ge.jsx)(Ye.a,{children:"Fecha modificada"}),Ie(Me.f,e,t,(function(){return Object(ge.jsx)(Ye.a,{align:"right",children:"Opciones"})}))]})}),Object(ge.jsx)(Ee.a,{children:b.map((function(e){return Object(ge.jsx)(Ct,{brand:e},e.id)}))})]})})]})},It=Object(V.gql)(l||(l=Object(_.a)(["\n  mutation registerCategory($categoryInput: CreateCategoryInput!) {\n    registerCategory(categoryInput: $categoryInput) {\n      id\n      name\n    }\n  }\n"]))),St=Object(V.gql)(u||(u=Object(_.a)(["\n  mutation updateCategory($categoryInput: UpdateCategoryInput!) {\n    updateCategory(categoryInput: $categoryInput) {\n      id\n      name\n    }\n  }\n"]))),At={type:"",text:""},Ft=function(e){var t=e.handleClose,n=e.category,a={id:(null===n||void 0===n?void 0:n.id)||"",name:(null===n||void 0===n?void 0:n.name)||""},r=Object(N.useState)(a.id?a:{name:""}),c=Object(Q.a)(r,2),i=c[0],o=c[1],s=Object(he.c)(),l=function(){var e=Object(V.useMutation)(St),t=Object(Q.a)(e,2),n=t[0],a=t[1];return{updateCategory:n,error:a.error,loading:a.loading}}(),u=function(){var e=Object(V.useMutation)(It,{refetchQueries:function(){return[{query:bt}]}}),t=Object(Q.a)(e,2),n=t[0],a=t[1];return{registerCategory:n,error:a.error,loading:a.loading}}(),d=function(){var e=Object(G.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!i.id){e.next=13;break}return e.prev=2,e.next=5,l.updateCategory({variables:{categoryInput:i}});case 5:s(Object(Se.b)({type:"success",text:"La categoria se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),s(Object(Se.b)({type:"error",text:Object(we.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,u.registerCategory({variables:{categoryInput:i}});case 16:s(Object(Se.b)({type:"success",text:"La categoria ha sido registrado correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),s(Object(Se.b)({type:"error",text:Object(we.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(ge.jsx)("form",{onSubmit:d,children:Object(ge.jsxs)(rt.a,{container:!0,spacing:3,children:[Object(ge.jsx)(rt.a,{item:!0,xs:12,children:Object(ge.jsx)(ct.a,{fullWidth:!0,onChange:function(e){o(Object(J.a)(Object(J.a)({},i),{},Object(at.a)({},e.target.name,e.target.value))),s(Object(Se.b)(At))},name:"name",autoComplete:"off",id:"idName",label:"Nombre",variant:"outlined",value:i.name})}),Object(ge.jsxs)(ot.a,{style:{width:"100%"},children:[Object(ge.jsx)(it.a,{onClick:function(){return t()},color:"primary",children:"Cancelar"}),i.id?l.loading?Object(ge.jsx)(st.a,{}):Object(ge.jsx)(it.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):u.loading?Object(ge.jsx)(st.a,{}):Object(ge.jsx)(it.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})},Rt={type:"",text:""},Ut={name:"",active:!1},Yt=function(e){var t=e.category,n=Object(he.d)((function(e){return e.authReducer.authUser})),a=Object(he.d)((function(e){return e.page.user.module})),r=Object(N.useState)(Ut),c=Object(Q.a)(r,2),i=c[0],o=c[1],s=Object(he.c)(),l=function(){o(Ut),s(Object(Se.b)(Rt))},u=function(e){switch(e){case"Categoria":return Object(ge.jsx)(Ft,{category:t,handleClose:l})}},d=function(){return Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)(Ge,{open:i.active,dialog:t,title:i.name,component:u(i.name),handleClose:l}),Object(ge.jsx)(Ye.a,{align:"right",children:Object(ge.jsx)(Ne.a,{title:"Editar categoria",onClick:function(){return o({name:"Categoria",active:!0})},children:Object(ge.jsx)(Qe.a,{"aria-label":"role",size:"small",children:Object(ge.jsx)(et.a,{})})})})]})};return Object(ge.jsx)(ge.Fragment,{children:Ie(Me.c,n,a,(function(){return Object(ge.jsx)(ge.Fragment,{children:Object(ge.jsxs)(Ue.a,{children:[Object(ge.jsx)(Ye.a,{component:"th",scope:"row",children:t.name}),Object(ge.jsx)(Ye.a,{children:nt()(t.createdAt).format("DD/MM/YYYY")}),Object(ge.jsx)(Ye.a,{children:nt()(t.updatedAt).format("DD/MM/YYYY")}),Ie(Me.f,n,a,d)]})})}))})},Et={type:"",text:""},Dt={name:"",active:!1},Nt=function(){var e=Object(he.d)((function(e){return e.authReducer.authUser})),t=Object(he.d)((function(e){return e.page.user.module})),n=Object(N.useState)(Dt),a=Object(Q.a)(n,2),r=a[0],c=a[1],i=Object(he.c)(),o=Ot(),s=o.data,l=o.loading,u=o.error,d=Object(N.useState)([]),j=Object(Q.a)(d,2),b=j[0],O=j[1],m=function(){c(Dt),i(Object(Se.b)(Et))},h=function(e){switch(e){case"Crear":return Object(ge.jsx)(Ft,{handleClose:m})}};if(Object(N.useEffect)((function(){s&&O(s.getCategorys)}),[s]),l)return Object(ge.jsx)("h1",{children:"Cargando..."});if(u)return Object(ge.jsx)("h1",{children:Object(we.a)(u)});return Object(ge.jsxs)(ge.Fragment,{children:[Ie(Me.d,e,t,(function(){return Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)(Ge,{open:r.active,title:"".concat(r.name," Categoria"),component:h(r.name),handleClose:m}),Object(ge.jsx)(Ne.a,{title:"Crear Categoria",children:Object(ge.jsx)(Qe.a,{"aria-label":"add",size:"small",onClick:function(){return c({name:"Crear",active:!0})},children:Object(ge.jsx)(Xe.a,{})})})]})})),Object(ge.jsx)(Fe.a,{component:De.a,style:{marginTop:10},children:Object(ge.jsxs)(Ae.a,{size:"small","aria-label":"a dense table",children:[Object(ge.jsx)(Re.a,{children:Object(ge.jsxs)(Ue.a,{children:[Object(ge.jsx)(Ye.a,{children:"Categoria"}),Object(ge.jsx)(Ye.a,{children:"Fecha creada"}),Object(ge.jsx)(Ye.a,{children:"Fecha modificada"}),Ie(Me.f,e,t,(function(){return Object(ge.jsx)(Ye.a,{align:"right",children:"Opciones"})}))]})}),Object(ge.jsx)(Ee.a,{children:b.map((function(e){return Object(ge.jsx)(Yt,{category:e},e.id)}))})]})})]})},Pt=Object(V.gql)(d||(d=Object(_.a)(["\n  query getModels {\n    getModels {\n      id\n      name\n      brand {\n        id\n        name\n      }\n    }\n  }\n"]))),zt=Object(V.gql)(j||(j=Object(_.a)(["\n  mutation updateModel($modelInput: UpdateModelInput!) {\n    updateModel(modelInput: $modelInput) {\n      id\n      name\n    }\n  }\n"]))),qt=Object(V.gql)(b||(b=Object(_.a)(["\n  mutation registerModel($modelInput: CreateModelInput!) {\n    registerModel(modelInput: $modelInput) {\n      id\n      name\n      brand {\n        id\n        name\n      }\n    }\n  }\n"]))),Lt={type:"",text:""},$t=function(e){var t,n=e.handleClose,a=e.model,r={id:(null===a||void 0===a?void 0:a.id)||"",name:(null===a||void 0===a?void 0:a.name)||"",brand:(null===a||void 0===a||null===(t=a.brand)||void 0===t?void 0:t.name)||""},c=Object(N.useState)(r.id?r:{name:"",brand:""}),i=Object(Q.a)(c,2),o=i[0],s=i[1],l=Object(N.useState)([]),u=Object(Q.a)(l,2),d=u[0],j=u[1],b=ht().data,O=Object(he.c)(),m=function(){var e=Object(V.useMutation)(zt,{refetchQueries:function(){return[{query:Pt}]}}),t=Object(Q.a)(e,2),n=t[0],a=t[1];return{updateModel:n,error:a.error,loading:a.loading}}(),h=function(){var e=Object(V.useMutation)(qt,{refetchQueries:function(){return[{query:Pt}]}}),t=Object(Q.a)(e,2),n=t[0],a=t[1];return{registerModel:n,error:a.error,loading:a.loading}}(),p=function(){var e=Object(G.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!o.id){e.next=13;break}return e.prev=2,e.next=5,m.updateModel({variables:{modelInput:o}});case 5:O(Object(Se.b)({type:"success",text:"El modelo se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),O(Object(Se.b)({type:"error",text:Object(we.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,h.registerModel({variables:{modelInput:o}});case 16:O(Object(Se.b)({type:"success",text:"El modelo ha sido registrado correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),O(Object(Se.b)({type:"error",text:Object(we.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(N.useEffect)((function(){b&&j(b.getBrands)}),[b]),Object(ge.jsx)("form",{onSubmit:p,children:Object(ge.jsxs)(rt.a,{container:!0,spacing:3,children:[Object(ge.jsx)(rt.a,{item:!0,xs:12,children:Object(ge.jsxs)(lt.a,{variant:"outlined",fullWidth:!0,children:[Object(ge.jsx)(ut.a,{id:"idMarca",children:"Marca"}),Object(ge.jsx)(jt.a,{labelId:"Marca",id:"idMarca",value:o.brand,onChange:function(e){s(Object(J.a)(Object(J.a)({},o),{},Object(at.a)({},e.target.name,e.target.value))),O(Object(Se.b)(Lt))},label:"Marca",name:"brand",children:d.map((function(e){return Object(ge.jsx)(dt.a,{value:e.name,children:e.name},e.id)}))})]})}),Object(ge.jsx)(rt.a,{item:!0,xs:12,children:Object(ge.jsx)(ct.a,{fullWidth:!0,onChange:function(e){s(Object(J.a)(Object(J.a)({},o),{},Object(at.a)({},e.target.name,e.target.value))),O(Object(Se.b)(Lt))},name:"name",autoComplete:"off",id:"idName",label:"Modelo",variant:"outlined",value:o.name})}),Object(ge.jsxs)(ot.a,{style:{width:"100%"},children:[Object(ge.jsx)(it.a,{onClick:function(){return n()},color:"primary",children:"Cancelar"}),o.id?m.loading?Object(ge.jsx)(st.a,{}):Object(ge.jsx)(it.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):h.loading?Object(ge.jsx)(st.a,{}):Object(ge.jsx)(it.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})},Wt={type:"",text:""},Tt={name:"",active:!1},Bt=function(e){var t=e.model,n=Object(he.d)((function(e){return e.authReducer.authUser})),a=Object(he.d)((function(e){return e.page.user.module})),r=Object(N.useState)(Tt),c=Object(Q.a)(r,2),i=c[0],o=c[1],s=Object(he.c)(),l=function(){o(Tt),s(Object(Se.b)(Wt))},u=function(e){switch(e){case"Modelo":return Object(ge.jsx)($t,{model:t,handleClose:l})}},d=function(){return Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)(Ge,{open:i.active,dialog:t,title:i.name,component:u(i.name),handleClose:l}),Object(ge.jsx)(Ye.a,{align:"right",children:Object(ge.jsx)(Ne.a,{title:"Editar Modelo",onClick:function(){return o({name:"Modelo",active:!0})},children:Object(ge.jsx)(Qe.a,{"aria-label":"role",size:"small",children:Object(ge.jsx)(et.a,{})})})})]})};return Object(ge.jsx)(ge.Fragment,{children:Ie(Me.c,n,a,(function(){var e;return Object(ge.jsx)(ge.Fragment,{children:Object(ge.jsxs)(Ue.a,{children:[Object(ge.jsx)(Ye.a,{component:"th",scope:"row",children:null===(e=t.brand)||void 0===e?void 0:e.name}),Object(ge.jsx)(Ye.a,{component:"th",scope:"row",children:t.name}),Object(ge.jsx)(Ye.a,{children:nt()(t.createdAt).format("DD/MM/YYYY")}),Object(ge.jsx)(Ye.a,{children:nt()(t.updatedAt).format("DD/MM/YYYY")}),Ie(Me.f,n,a,d)]})})}))})},Qt={type:"",text:""},_t={name:"",active:!1},Vt=function(){var e=Object(he.d)((function(e){return e.authReducer.authUser})),t=Object(he.d)((function(e){return e.page.user.module})),n=Object(N.useState)(_t),a=Object(Q.a)(n,2),r=a[0],c=a[1],i=Object(he.c)(),o=function(){var e=Object(V.useQuery)(Pt);return{data:e.data,error:e.error,loading:e.loading}}(),s=o.data,l=o.loading,u=o.error,d=Object(N.useState)([]),j=Object(Q.a)(d,2),b=j[0],O=j[1],m=function(){c(_t),i(Object(Se.b)(Qt))},h=function(e){switch(e){case"Crear":return Object(ge.jsx)($t,{handleClose:m})}};if(Object(N.useEffect)((function(){s&&O(s.getModels)}),[s]),l)return Object(ge.jsx)("h1",{children:"Cargando..."});if(u)return Object(ge.jsx)("h1",{children:Object(we.a)(u)});return Object(ge.jsxs)(ge.Fragment,{children:[Ie(Me.d,e,t,(function(){return Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)(Ge,{open:r.active,title:"".concat(r.name," Modelo"),component:h(r.name),handleClose:m}),Object(ge.jsx)(Ne.a,{title:"Crear Modelo",children:Object(ge.jsx)(Qe.a,{"aria-label":"add",size:"small",onClick:function(){return c({name:"Crear",active:!0})},children:Object(ge.jsx)(Xe.a,{})})})]})})),Object(ge.jsx)(Fe.a,{component:De.a,style:{marginTop:10},children:Object(ge.jsxs)(Ae.a,{size:"small","aria-label":"a dense table",children:[Object(ge.jsx)(Re.a,{children:Object(ge.jsxs)(Ue.a,{children:[Object(ge.jsx)(Ye.a,{children:"Marca"}),Object(ge.jsx)(Ye.a,{children:"Modelo"}),Object(ge.jsx)(Ye.a,{children:"Fecha creada"}),Object(ge.jsx)(Ye.a,{children:"Fecha modificada"}),Ie(Me.f,e,t,(function(){return Object(ge.jsx)(Ye.a,{align:"right",children:"Opciones"})}))]})}),Object(ge.jsx)(Ee.a,{children:b.map((function(e){return Object(ge.jsx)(Bt,{model:e},e.id)}))})]})})]})},Ht=n(64),Kt=n(291),Gt=n(304),Jt=function(e){var t=e.menu;return Object(ge.jsxs)(ge.Fragment,{children:[t.name===Me.a?Object(ge.jsx)(Gt.a,{style:{margin:"3px"},size:"small",label:t.name,color:"primary"}):Object(ge.jsx)(Gt.a,{style:{margin:"3px"},size:"small",label:t.name,onDelete:function(){return alert("keiner")},color:"primary"}),"\xa0"]})},Xt=function(e){var t=e.access;return Object(ge.jsx)(ge.Fragment,{children:Object(ge.jsx)(Gt.a,{style:{margin:"3px"},size:"small",label:t.name,onDelete:function(){return alert("keiner")},color:"primary"})})},Zt=n(145),en=n.n(Zt),tn=n(175),nn=n.n(tn),an=Object(V.gql)(O||(O=Object(_.a)(["\n  mutation updateModule($moduleInput: UpdateModuleInput!) {\n    updateModule(moduleInput: $moduleInput) {\n      id\n      name\n      description\n      menus {\n        id\n        name\n      }\n      access {\n        id\n        name\n      }\n    }\n  }\n"]))),rn=function(){var e=Object(V.useMutation)(an,{refetchQueries:function(){return[{query:Ht.a}]}}),t=Object(Q.a)(e,2),n=t[0],a=t[1];return{updateModule:n,error:a.error,loading:a.loading}},cn=n(281),on=Object(V.gql)(m||(m=Object(_.a)(["\n  mutation registerModule($moduleInput: CreateModuleInput!) {\n    registerModule(moduleInput: $moduleInput) {\n      id\n      name\n      description\n      createdAt\n      updatedAt\n      menus {\n        id\n        name\n      }\n      access {\n        id\n        name\n      }\n    }\n  }\n"]))),sn=Object(V.gql)(h||(h=Object(_.a)(["\n  query getAccess {\n    getAccess {\n      id\n      name\n    }\n  }\n"]))),ln=function(){var e=Object(V.useQuery)(sn),t=e.data,n=e.error,a=e.loading,r=Object(he.c)();return n&&r(Object(Se.b)({type:"error",text:n.message})),{data:t,error:n,loading:a}},un=Object(V.gql)(p||(p=Object(_.a)(["\n  query getMenus {\n    getMenus {\n      id\n      name\n      link\n      createdAt\n      updatedAt\n    }\n  }\n"]))),dn=function(){var e=Object(V.useQuery)(un),t=e.data,n=e.error,a=e.loading,r=Object(he.c)();return n&&r(Object(Se.b)({type:"error",text:n.message})),{data:t,error:n,loading:a}},jn=Object(Kt.a)((function(e){return Object(Pe.a)({formControl:{margin:e.spacing(1),minWidth:120,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}})})),bn={PaperProps:{style:{maxHeight:224,width:250}}},On=function(e){var t=e.module,n=e.handleClose,a={id:(null===t||void 0===t?void 0:t.id)||"",name:(null===t||void 0===t?void 0:t.name)||"",description:(null===t||void 0===t?void 0:t.description)||""},r=rn(),c=function(){var e=Object(V.useMutation)(on,{refetchQueries:function(){return[{query:Ht.a}]}}),t=Object(Q.a)(e,2),n=t[0],a=t[1];return{registerModule:n,error:a.error,loading:a.loading}}(),i=ln(),o=dn(),s=Object(N.useState)([]),l=Object(Q.a)(s,2),u=l[0],d=l[1],j=Object(N.useState)([]),b=Object(Q.a)(j,2),O=b[0],m=b[1],h=Object(N.useState)([]),p=Object(Q.a)(h,2),x=p[0],f=p[1],g=Object(N.useState)([]),v=Object(Q.a)(g,2),y=v[0],C=v[1],k=Object(N.useState)(a.id?a:{name:"",description:""}),w=Object(Q.a)(k,2),M=w[0],I=w[1],S=Object(he.c)(),A=jn(),F=Object(Te.a)(),R=function(e){I(Object(J.a)(Object(J.a)({},M),{},Object(at.a)({},e.target.name,e.target.value))),S(Object(Se.b)({type:"",text:""}))},U=u.map((function(e){return{name:e}})),Y=O.map((function(e){return{name:e}}));function E(e,t,n){return{fontWeight:-1===t.indexOf(e)?n.typography.fontWeightRegular:n.typography.fontWeightMedium}}var D=function(){var e=Object(G.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!M.id){e.next=13;break}return e.prev=2,e.next=5,r.updateModule({variables:{moduleInput:M}});case 5:S(Object(Se.b)({type:"success",text:"El modulo se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),S(Object(Se.b)({type:"error",text:Object(we.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,c.registerModule({variables:{moduleInput:Object(J.a)(Object(J.a)({},M),{},{access:Y,menus:U})}});case 16:S(Object(Se.b)({type:"success",text:"El modulo se registr\xf3 correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),S(Object(Se.b)({type:"error",text:Object(we.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(N.useEffect)((function(){if(o.data&&i.data){var e=o.data.getMenus.filter((function(e){return e.name!==Me.a}));f(e),C(i.data.getAccess)}}),[o.data,i.data,M.name]),Object(ge.jsx)(ge.Fragment,{children:Object(ge.jsx)("form",{onSubmit:D,children:Object(ge.jsxs)(rt.a,{container:!0,spacing:3,children:[M.id&&M.name===Me.b?"":Object(ge.jsx)(rt.a,{item:!0,xs:12,children:Object(ge.jsx)(ct.a,{fullWidth:!0,onChange:R,name:"name",id:"idName",label:"Modulo",variant:"outlined",value:M.name})}),Object(ge.jsx)(rt.a,{item:!0,xs:12,children:Object(ge.jsx)(ct.a,{fullWidth:!0,onChange:R,name:"description",id:"idDescription",label:"Descripci\xf3n",multiline:!0,value:M.description,variant:"outlined"})}),!a.id&&Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)(rt.a,{item:!0,xs:12,children:Object(ge.jsxs)(lt.a,{variant:"outlined",fullWidth:!0,children:[Object(ge.jsx)(ut.a,{id:"menus-mutiple-chip-label",children:"Menus"}),Object(ge.jsx)(jt.a,{labelId:"menus-mutiple-chip-label",id:"menus-mutiple-chip",multiple:!0,value:u,onChange:function(e){d(e.target.value),S(Object(Se.b)({type:"",text:""}))},input:Object(ge.jsx)(cn.a,{id:"select-multiple-chip"}),renderValue:function(e){return Object(ge.jsx)("div",{className:A.chips,children:e.map((function(e){return Object(ge.jsx)(Gt.a,{label:e,className:e.chip},e)}))})},MenuProps:bn,children:x.map((function(e){return Object(ge.jsx)(dt.a,{value:e.name,style:E(e.name,M.menus||[],F),children:e.name},e.id)}))})]})}),Object(ge.jsx)(rt.a,{item:!0,xs:12,children:Object(ge.jsxs)(lt.a,{variant:"outlined",fullWidth:!0,children:[Object(ge.jsx)(ut.a,{id:"access-mutiple-chip-label",children:"Accesos"}),Object(ge.jsx)(jt.a,{labelId:"access-mutiple-chip-label",id:"access-mutiple-chip",multiple:!0,value:O,onChange:function(e){m(e.target.value),S(Object(Se.b)({type:"",text:""}))},input:Object(ge.jsx)(cn.a,{id:"select-multiple-chip"}),renderValue:function(e){return Object(ge.jsx)("div",{className:A.chips,children:e.map((function(e){return Object(ge.jsx)(Gt.a,{label:e,className:e.chip},e)}))})},MenuProps:bn,children:y.map((function(e){return Object(ge.jsx)(dt.a,{value:e.name,style:E(e.name,M.access||[],F),children:e.name},e.id)}))})]})})]}),Object(ge.jsxs)(ot.a,{style:{width:"100%"},children:[Object(ge.jsx)(it.a,{onClick:function(){return n()},color:"primary",children:"Cancelar"}),M.id?r.loading?Object(ge.jsx)(st.a,{}):Object(ge.jsx)(it.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):c.loading?Object(ge.jsx)(st.a,{}):Object(ge.jsx)(it.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})})},mn=n(106),hn=function(e){var t=e.module,n=e.handleClose,a=Object(N.useState)([]),r=Object(Q.a)(a,2),c=r[0],i=r[1],o=Object(N.useState)([]),s=Object(Q.a)(o,2),l=s[0],u=s[1],d=Object(N.useState)([]),j=Object(Q.a)(d,2),b=j[0],O=j[1],m=Object(he.c)(),h=rn(),p=ln(),x=Object(he.d)((function(e){return e.message})),f=x.type,g=x.text,v=function(){var e=Object(G.a)(K.a.mark((function e(n){var a;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=l.map((function(e){return{name:e.name}})),e.prev=2,e.next=5,h.updateModule({variables:{moduleInput:{id:t.id,access:a}}});case 5:return e.abrupt("return",m(Object(Se.b)({type:"success",text:"El modulo actualiz\xf3 sus accesos correctamente."})));case 8:e.prev=8,e.t0=e.catch(2),m(Object(Se.b)({type:"error",text:Object(we.a)(e.t0)}));case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),y=Object(N.useCallback)((function(){var e=p.data.getAccess.filter((function(e){var n;return!(null===(n=t.access)||void 0===n?void 0:n.some((function(t){return e.name===t.name})))}));i(e)}),[t,p.data]);return Object(N.useEffect)((function(){t&&p.data&&(u(t.access||[]),y())}),[t,p.data,y]),"error"===f?Object(ge.jsx)("h1",{children:g}):Object(ge.jsx)("form",{onSubmit:v,children:Object(ge.jsxs)(rt.a,{container:!0,spacing:3,children:[Object(ge.jsx)(rt.a,{item:!0,xs:12,children:Object(ge.jsx)(mn.a,{setListAvailable:i,setListCurrent:u,setChecked:O,checked:b,listAvailable:c,titleAvailable:"Accesos disponibles",listCurrent:l,titleCurrent:"Accesos actuales",loading:p.loading})}),Object(ge.jsxs)(ot.a,{style:{width:"100%"},children:[Object(ge.jsx)(it.a,{onClick:n,color:"primary",children:"Cancelar"}),Object(ge.jsx)(it.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",disabled:!!h.loading,children:t.id?"Actualizar":"Registrar"})]})]})})},pn=function(e){var t=e.module,n=e.handleClose,a=Object(N.useState)([]),r=Object(Q.a)(a,2),c=r[0],i=r[1],o=Object(N.useState)([]),s=Object(Q.a)(o,2),l=s[0],u=s[1],d=Object(N.useState)([]),j=Object(Q.a)(d,2),b=j[0],O=j[1],m=Object(he.c)(),h=dn(),p=rn(),x=Object(he.d)((function(e){return e.message})),f=x.type,g=x.text,v=function(){var e=Object(G.a)(K.a.mark((function e(n){var a;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=l.map((function(e){return{name:e.name}})),e.prev=2,e.next=5,p.updateModule({variables:{moduleInput:{id:t.id,menus:a}}});case 5:return e.abrupt("return",m(Object(Se.b)({type:"success",text:"El modulo actualiz\xf3 sus menu correctamente."})));case 8:e.prev=8,e.t0=e.catch(2),m(Object(Se.b)({type:"error",text:Object(we.a)(e.t0)}));case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),y=Object(N.useCallback)((function(){var e=h.data.getMenus.filter((function(e){var n;return!(null===(n=t.menus)||void 0===n?void 0:n.some((function(t){return e.name===t.name})))})).filter((function(e){return e.name!==Me.a}));i(e)}),[t,h.data]);return Object(N.useEffect)((function(){if(t&&h.data){var e,n=null===(e=t.menus)||void 0===e?void 0:e.filter((function(e){return e.name!==Me.a}));u(n||[]),y()}}),[t,h.data,y]),"error"===f?Object(ge.jsx)("h1",{children:g}):Object(ge.jsx)("form",{onSubmit:v,children:Object(ge.jsxs)(rt.a,{container:!0,spacing:3,children:[Object(ge.jsx)(rt.a,{item:!0,xs:12,children:Object(ge.jsx)(mn.a,{setListAvailable:i,setListCurrent:u,setChecked:O,checked:b,listAvailable:c,titleAvailable:"Menus disponibles",listCurrent:l,titleCurrent:"Menus actuales",loading:h.loading})}),Object(ge.jsxs)(ot.a,{style:{width:"100%"},children:[Object(ge.jsx)(it.a,{onClick:n,color:"primary",children:"Cancelar"}),Object(ge.jsx)(it.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",disabled:!!p.loading,children:t.id?"Actualizar":"Registrar"})]})]})})},xn={name:"",active:!1},fn=function(e){var t=e.module,n=Object(N.useState)(xn),a=Object(Q.a)(n,2),r=a[0],c=a[1],i=Object(he.c)(),o=function(){c(Object(J.a)(Object(J.a)({},r),{},{active:!1})),i(Object(Se.b)({type:"",text:""}))};return Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)(Ge,{open:r.active,dialog:t,title:r.name,component:function(e){switch(e){case"Modulo":return Object(ge.jsx)(On,{module:t,handleClose:o});case"Acceso":return Object(ge.jsx)(hn,{module:t,handleClose:o});case"Menu":return Object(ge.jsx)(pn,{module:t,handleClose:o})}}(r.name),handleClose:o}),Object(ge.jsxs)(Ue.a,{children:[Object(ge.jsx)(Ye.a,{component:"th",scope:"row",children:t.name}),Object(ge.jsx)(Ye.a,{children:t.description}),Object(ge.jsx)(Ye.a,{children:nt()(t.createdAt).format("DD/MM/YYYY")}),Object(ge.jsx)(Ye.a,{children:nt()(t.updatedAt).format("DD/MM/YYYY")}),Object(ge.jsx)(Ye.a,{align:"center",children:t.menus&&t.menus.map((function(e){return Object(ge.jsx)(Jt,{menu:e},e.id)}))}),Object(ge.jsx)(Ye.a,{align:"center",children:t.name===Me.b?Object(ge.jsx)(Gt.a,{style:{margin:"3px"},size:"small",label:"Todos los permisos",color:"primary"}):t.access&&t.access.map((function(e){return Object(ge.jsx)(Xt,{access:e},e.id)}))}),t.name===Me.b?Object(ge.jsx)(Ye.a,{align:"center",children:Object(ge.jsx)(Ne.a,{title:"Asignar menu",onClick:function(){return c({name:"Menu",active:!0})},children:Object(ge.jsx)(Qe.a,{"aria-label":"menu",size:"small",children:Object(ge.jsx)(en.a,{})})})}):Object(ge.jsx)(ge.Fragment,{children:Object(ge.jsxs)(Ye.a,{align:"right",children:[Object(ge.jsx)(Ne.a,{title:"Asignar menu",onClick:function(){return c({name:"Menu",active:!0})},children:Object(ge.jsx)(Qe.a,{"aria-label":"menu",size:"small",children:Object(ge.jsx)(en.a,{})})}),Object(ge.jsx)(Ne.a,{title:"Asignar acceso",onClick:function(){return c({name:"Acceso",active:!0})},children:Object(ge.jsx)(Qe.a,{"aria-label":"acceso",size:"small",children:Object(ge.jsx)(nn.a,{})})}),Object(ge.jsx)(Ne.a,{title:"Editar modulo",onClick:function(){return c({name:"Modulo",active:!0})},children:Object(ge.jsx)(Qe.a,{"aria-label":"acceso",size:"small",children:Object(ge.jsx)(et.a,{})})})]})})]})]})},gn=Object(Kt.a)({table:{minWidth:650}}),vn={name:"",active:!1},yn=function(){var e,t=Object(N.useState)([]),n=Object(Q.a)(t,2),a=n[0],r=n[1],c=Object(Ht.b)(),i=c.data,o=c.loading,s=c.error,l=Object(N.useState)(vn),u=Object(Q.a)(l,2),d=u[0],j=u[1],b=Object(he.c)(),O=gn(),m=Object(he.d)((function(e){return e.authReducer.authUser})),h=function(){j(Object(J.a)(Object(J.a)({},d),{},{active:!1})),b(Object(Se.b)({type:"",text:""}))};return Object(N.useEffect)((function(){i&&r(i.getModules)}),[i]),o?Object(ge.jsx)("h1",{children:"Cargando..."}):s?Object(ge.jsx)("h1",{children:Object(we.a)(s)}):Object(ge.jsx)(ge.Fragment,{children:(null===m||void 0===m||null===(e=m.role)||void 0===e?void 0:e.name)===Me.g?Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)(Ge,{open:d.active,title:"".concat(d.name," Modulo"),component:function(e){switch(e){case"Crear":return Object(ge.jsx)(On,{handleClose:h})}}(d.name),handleClose:h}),Object(ge.jsx)(Ne.a,{title:"Crear Rol",children:Object(ge.jsx)(Qe.a,{"aria-label":"add",size:"small",onClick:function(){return j({name:"Crear",active:!0})},children:Object(ge.jsx)(Xe.a,{})})}),Object(ge.jsx)(Fe.a,{component:De.a,children:Object(ge.jsxs)(Ae.a,{className:O.table,size:"small","aria-label":"a dense table",children:[Object(ge.jsx)(Re.a,{children:Object(ge.jsxs)(Ue.a,{children:[Object(ge.jsx)(Ye.a,{children:"Modulo"}),Object(ge.jsx)(Ye.a,{children:"Descripci\xf3n"}),Object(ge.jsx)(Ye.a,{children:"Fecha creada"}),Object(ge.jsx)(Ye.a,{children:"Fecha modificada"}),Object(ge.jsx)(Ye.a,{align:"center",children:"Menus"}),Object(ge.jsx)(Ye.a,{align:"center",children:"Permisos"}),Object(ge.jsx)(Ye.a,{align:"right",children:"Opciones"})]})}),Object(ge.jsx)(Ee.a,{children:a.map((function(e){return Object(ge.jsx)(fn,{module:e},e.id)}))})]})})]}):Object(ge.jsx)(ge.Fragment,{children:Object(ge.jsx)("h1",{children:"No tiene permiso para acceder a este recurso."})})})},Cn=n(292),kn=Object(V.gql)(x||(x=Object(_.a)(["\n  query getProducts {\n    getProducts {\n      id\n      name\n      description\n      price\n      createdAt\n      updatedAt\n      category {\n        id\n        name\n      }\n      brand {\n        id\n        name\n      }\n      model {\n        id\n        name\n      }\n    }\n  }\n"]))),wn=Object(V.gql)(f||(f=Object(_.a)(["\n  mutation updateService($productInput: UpdateProductInput!) {\n    updateProduct(productInput: $productInput) {\n      id\n      name\n      description\n      price\n      category {\n        id\n        name\n      }\n      brand {\n        id\n        name\n      }\n      model {\n        id\n        name\n      }\n    }\n  }\n"]))),Mn=Object(V.gql)(g||(g=Object(_.a)(["\n  mutation registerProduct($productInput: CreateProductInput!) {\n    registerProduct(productInput: $productInput) {\n      id\n      name\n      description\n      price\n      category {\n        id\n        name\n      }\n      brand {\n        id\n        name\n      }\n      model {\n        id\n        name\n      }\n    }\n  }\n"]))),In=n(298),Sn=Object(V.gql)(v||(v=Object(_.a)(["\n  query getBrandsByCategory($category: String!) {\n    getBrandsByCategory(category: $category) {\n      id\n      name\n    }\n  }\n"]))),An=Object(V.gql)(y||(y=Object(_.a)(["\n  query getModelsByBrand($brand: String!) {\n    getModelsByBrand(brand: $brand) {\n      id\n      name\n    }\n  }\n"]))),Fn={type:"",text:""},Rn={category:"",brand:"",model:""},Un=function(e){var t,n,a,r=e.handleClose,c=e.product,i={id:(null===c||void 0===c?void 0:c.id)||"",name:(null===c||void 0===c?void 0:c.name)||"",description:(null===c||void 0===c?void 0:c.description)||"",price:(null===c||void 0===c?void 0:c.price)||0,category:(null===c||void 0===c||null===(t=c.category)||void 0===t?void 0:t.name)||"",brand:(null===c||void 0===c||null===(n=c.brand)||void 0===n?void 0:n.name)||"",model:(null===c||void 0===c||null===(a=c.model)||void 0===a?void 0:a.name)||""},o=Object(N.useState)(i.id?i:{name:"",description:"",price:0,category:"",brand:"",model:""}),s=Object(Q.a)(o,2),l=s[0],u=s[1],d=Object(N.useState)(Rn),j=Object(Q.a)(d,2),b=j[0],O=j[1],m=Object(N.useState)([]),h=Object(Q.a)(m,2),p=h[0],x=h[1],f=Object(N.useState)([]),g=Object(Q.a)(f,2),v=g[0],y=g[1],C=Ot().data,k=Object(N.useState)([]),w=Object(Q.a)(k,2),M=w[0],I=w[1],S=Object(he.c)(),A=function(){var e=Object(V.useMutation)(wn,{refetchQueries:function(){return[{query:kn}]}}),t=Object(Q.a)(e,2),n=t[0],a=t[1];return{updateProduct:n,error:a.error,loading:a.loading}}(),F=function(){var e=Object(V.useMutation)(Mn,{refetchQueries:function(){return[{query:kn}]}}),t=Object(Q.a)(e,2),n=t[0],a=t[1];return{registerProduct:n,error:a.error,loading:a.loading}}(),R=function(e){var t=Object(V.useQuery)(Sn,{variables:{category:e}}),n=t.error,a=t.loading;return{data:t.data,error:n,loading:a}}(l.category||""),U=function(e){var t=Object(V.useQuery)(An,{variables:{brand:e}}),n=t.error,a=t.loading;return{data:t.data,error:n,loading:a}}(l.brand||""),Y=function(e){u(Object(J.a)(Object(J.a)({},l),{},Object(at.a)({},e.target.name,e.target.value))),S(Object(Se.b)(Fn))},E=Object(N.useCallback)((function(){I(C.getCategorys)}),[C]),D=Object(N.useCallback)((function(){var e;x((null===R||void 0===R||null===(e=R.data)||void 0===e?void 0:e.getBrandsByCategory)||[])}),[R]),P=Object(N.useCallback)((function(){var e;y((null===U||void 0===U||null===(e=U.data)||void 0===e?void 0:e.getModelsByBrand)||[])}),[U]),z=function(){var e=Object(G.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!l.id){e.next=13;break}return e.prev=2,e.next=5,A.updateProduct({variables:{productInput:l}});case 5:S(Object(Se.b)({type:"success",text:"El producto se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),S(Object(Se.b)({type:"error",text:Object(we.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,F.registerProduct({variables:{productInput:l}});case 16:S(Object(Se.b)({type:"success",text:"El producto ha sido registrada correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),S(Object(Se.b)({type:"error",text:Object(we.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(N.useEffect)((function(){C&&(E(),D(),P())}),[C,E,D,P]),Object(ge.jsx)("form",{onSubmit:z,children:Object(ge.jsxs)(rt.a,{container:!0,spacing:3,children:[Object(ge.jsx)(rt.a,{item:!0,xs:12,children:Object(ge.jsx)(In.a,{id:"idCategory",onChange:function(e,t){u(Object(J.a)(Object(J.a)({},l),{},{category:(null===t||void 0===t?void 0:t.name)||"",brand:"",model:""})),O(Object(J.a)(Object(J.a)({},b),{},{brand:"",model:""})),S(Object(Se.b)(Fn))},onKeyUp:function(e){(e.target.value.length<l.category.length||0===e.target.value.length)&&(u(Object(J.a)(Object(J.a)({},l),{},{category:"",brand:"",model:""})),O(Object(J.a)(Object(J.a)({},b),{},{category:"",brand:"",model:""})))},inputValue:b.category?b.category:l.category,onInputChange:function(e,t){O(Object(J.a)(Object(J.a)({},b),{},{category:t}))},options:M,getOptionLabel:function(e){return e.name?e.name:""},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){return Object(ge.jsx)(ct.a,Object(J.a)(Object(J.a)({},e),{},{name:"category",label:"Categoria",variant:"outlined"}))}})}),Object(ge.jsx)(rt.a,{item:!0,xs:6,children:Object(ge.jsx)(In.a,{id:"idBrand",onChange:function(e,t){u(Object(J.a)(Object(J.a)({},l),{},{brand:(null===t||void 0===t?void 0:t.name)||"",model:""})),O(Object(J.a)(Object(J.a)({},b),{},{model:""})),S(Object(Se.b)(Fn))},onKeyUp:function(e){(e.target.value.length<l.brand.length||0===e.target.value.length)&&(u(Object(J.a)(Object(J.a)({},l),{},{brand:"",model:""})),O(Object(J.a)(Object(J.a)({},b),{},{brand:"",model:""})))},inputValue:b.brand?b.brand:l.brand,onInputChange:function(e,t){O(Object(J.a)(Object(J.a)({},b),{},{brand:t}))},options:p,getOptionLabel:function(e){return e.name?e.name:""},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){return Object(ge.jsx)(ct.a,Object(J.a)(Object(J.a)({},e),{},{name:"brand",label:"Marca",variant:"outlined"}))}})}),Object(ge.jsx)(rt.a,{item:!0,xs:6,children:Object(ge.jsx)(In.a,{id:"idModel",onChange:function(e,t){u(Object(J.a)(Object(J.a)({},l),{},{model:(null===t||void 0===t?void 0:t.name)||""})),S(Object(Se.b)(Fn))},onKeyUp:function(e){(e.target.value.length<l.model.length||0===e.target.value.length)&&(u(Object(J.a)(Object(J.a)({},l),{},{model:""})),O(Object(J.a)(Object(J.a)({},b),{},{model:""})))},inputValue:b.model?b.model:l.model,onInputChange:function(e,t){O(Object(J.a)(Object(J.a)({},b),{},{model:t}))},options:v,getOptionLabel:function(e){return e.name?e.name:""},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){return Object(ge.jsx)(ct.a,Object(J.a)(Object(J.a)({name:"model"},e),{},{label:"Modelo",variant:"outlined"}))}})}),Object(ge.jsx)(rt.a,{item:!0,xs:12,children:Object(ge.jsx)(ct.a,{fullWidth:!0,onChange:Y,name:"name",autoComplete:"off",id:"idName",label:"Producto",variant:"outlined",value:l.name})}),Object(ge.jsx)(rt.a,{item:!0,xs:12,children:Object(ge.jsx)(ct.a,{fullWidth:!0,name:"description",onChange:Y,id:"idDescription",label:"Descripci\xf3n",multiline:!0,rows:6,defaultValue:l.description,variant:"outlined"})}),Object(ge.jsx)(rt.a,{item:!0,xs:12,children:Object(ge.jsx)(ct.a,{fullWidth:!0,onChange:Y,name:"price",autoComplete:"off",id:"idPrice",label:"Precio",variant:"outlined",value:l.price,InputProps:{startAdornment:Object(ge.jsx)(Cn.a,{position:"start",children:"S/"})}})}),Object(ge.jsxs)(ot.a,{style:{width:"100%"},children:[Object(ge.jsx)(it.a,{onClick:function(){return r()},color:"primary",children:"Cancelar"}),l.id?A.loading?Object(ge.jsx)(st.a,{}):Object(ge.jsx)(it.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):F.loading?Object(ge.jsx)(st.a,{}):Object(ge.jsx)(it.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})},Yn=function(e){return new Intl.NumberFormat("de-DE",{style:"currency",currency:"PEN"}).format(e)},En={type:"",text:""},Dn={name:"",active:!1},Nn=function(e){var t=e.product,n=Object(he.d)((function(e){return e.authReducer.authUser})),a=Object(he.d)((function(e){return e.page.user.module})),r=Object(N.useState)(Dn),c=Object(Q.a)(r,2),i=c[0],o=c[1],s=Object(he.c)(),l=function(){o(Dn),s(Object(Se.b)(En))},u=function(e){switch(e){case"Producto":return Object(ge.jsx)(Un,{product:t,handleClose:l})}},d=function(){return Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)(Ge,{open:i.active,dialog:t,title:i.name,component:u(i.name),handleClose:l}),Object(ge.jsx)(Ye.a,{align:"right",children:Object(ge.jsx)(Ne.a,{title:"Editar Producto",onClick:function(){return o({name:"Producto",active:!0})},children:Object(ge.jsx)(Qe.a,{"aria-label":"product",size:"small",children:Object(ge.jsx)(et.a,{})})})})]})};return Object(ge.jsx)(ge.Fragment,{children:Ie(Me.c,n,a,(function(){return Object(ge.jsx)(ge.Fragment,{children:Object(ge.jsxs)(Ue.a,{children:[Object(ge.jsx)(Ye.a,{component:"th",scope:"row",children:t.category.name}),Object(ge.jsx)(Ye.a,{component:"th",scope:"row",children:t.brand.name}),Object(ge.jsx)(Ye.a,{component:"th",scope:"row",children:t.model.name}),Object(ge.jsx)(Ye.a,{component:"th",scope:"row",children:t.name}),Object(ge.jsx)(Ye.a,{component:"th",scope:"row",children:t.description}),Object(ge.jsx)(Ye.a,{component:"th",scope:"row",children:Yn(t.price)}),Object(ge.jsx)(Ye.a,{children:nt()(t.createdAt).format("DD/MM/YYYY")}),Object(ge.jsx)(Ye.a,{children:nt()(t.updatedAt).format("DD/MM/YYYY")}),Ie(Me.f,n,a,d)]})})}))})},Pn={type:"",text:""},zn={name:"",active:!1},qn=function(){var e=Object(he.d)((function(e){return e.authReducer.authUser})),t=Object(he.d)((function(e){return e.page.user.module})),n=Object(N.useState)(zn),a=Object(Q.a)(n,2),r=a[0],c=a[1],i=Object(he.c)(),o=function(){var e=Object(V.useQuery)(kn);return{data:e.data,error:e.error,loading:e.loading}}(),s=o.data,l=o.loading,u=o.error,d=Object(N.useState)([]),j=Object(Q.a)(d,2),b=j[0],O=j[1],m=function(){c(zn),i(Object(Se.b)(Pn))},h=function(e){switch(e){case"Crear":return Object(ge.jsx)(Un,{handleClose:m})}};if(Object(N.useEffect)((function(){s&&O(s.getProducts)}),[s]),l)return Object(ge.jsx)("h1",{children:"Cargando..."});if(u)return Object(ge.jsx)("h1",{children:Object(we.a)(u)});return Object(ge.jsxs)(ge.Fragment,{children:[Ie(Me.d,e,t,(function(){return Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)(Ge,{open:r.active,title:"".concat(r.name," Producto"),component:h(r.name),handleClose:m}),Object(ge.jsx)(Ne.a,{title:"Crear Producto",children:Object(ge.jsx)(Qe.a,{"aria-label":"add",size:"small",onClick:function(){return c({name:"Crear",active:!0})},children:Object(ge.jsx)(Xe.a,{})})})]})})),Object(ge.jsx)(Fe.a,{component:De.a,style:{marginTop:10},children:Object(ge.jsxs)(Ae.a,{size:"small","aria-label":"a dense table",children:[Object(ge.jsx)(Re.a,{children:Object(ge.jsxs)(Ue.a,{children:[Object(ge.jsx)(Ye.a,{children:"Categoria"}),Object(ge.jsx)(Ye.a,{children:"Marca"}),Object(ge.jsx)(Ye.a,{children:"Model"}),Object(ge.jsx)(Ye.a,{children:"Producto"}),Object(ge.jsx)(Ye.a,{children:"Descripci\xf3n"}),Object(ge.jsx)(Ye.a,{children:"Precio"}),Object(ge.jsx)(Ye.a,{children:"Fecha creada"}),Object(ge.jsx)(Ye.a,{children:"Fecha modificada"}),Ie(Me.f,e,t,(function(){return Object(ge.jsx)(Ye.a,{align:"right",children:"Opciones"})}))]})}),Object(ge.jsx)(Ee.a,{children:b.map((function(e){return Object(ge.jsx)(Nn,{product:e},e.id)}))})]})})]})},Ln=Object(V.gql)(C||(C=Object(_.a)(["\n  query getRoles {\n    getRoles {\n      id\n      name\n      description\n      createdAt\n      updatedAt\n      modules {\n        id\n        name\n        description\n      }\n    }\n  }\n"]))),$n=function(){var e=Object(V.useQuery)(Ln);return{data:e.data,loading:e.loading,error:e.error}},Wn=function(e){var t=e.module;return Object(ge.jsxs)(ge.Fragment,{children:[t.name===Me.b?Object(ge.jsx)(Gt.a,{style:{margin:"3px"},size:"small",label:t.name,color:"primary"}):Object(ge.jsx)(Gt.a,{style:{margin:"3px"},size:"small",label:t.name,onDelete:function(){return alert("keiner")},color:"primary"}),"\xa0"]})},Tn=n(133),Bn=Object(V.gql)(k||(k=Object(_.a)(["\n  mutation registerRole($roleInput: RoleInput!) {\n    registerRole(roleInput: $roleInput) {\n      id\n      name\n      description\n      modules {\n        id\n        name\n      }\n    }\n  }\n"]))),Qn=Object(Kt.a)((function(e){return Object(Pe.a)({formControl:{margin:e.spacing(1),minWidth:120,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}})})),_n={PaperProps:{style:{maxHeight:224,width:250}}},Vn=function(e){var t=e.role,n=e.handleClose,a={id:(null===t||void 0===t?void 0:t.id)||"",name:(null===t||void 0===t?void 0:t.name)||"",description:(null===t||void 0===t?void 0:t.description)||""},r=Object(Tn.a)(),c=function(){var e=Object(V.useMutation)(Bn,{refetchQueries:function(){return[{query:Ln}]}}),t=Object(Q.a)(e,2),n=t[0],a=t[1];return{registerRole:n,error:a.error,loading:a.loading}}(),i=Object(Ht.b)(),o=Object(N.useState)(a.id?a:{name:"",description:""}),s=Object(Q.a)(o,2),l=s[0],u=s[1],d=Object(N.useState)([]),j=Object(Q.a)(d,2),b=j[0],O=j[1],m=Object(N.useState)([]),h=Object(Q.a)(m,2),p=h[0],x=h[1],f=Object(Te.a)(),g=Object(he.c)(),v=Qn(),y=Object(he.d)((function(e){return e.authReducer.authUser})),C=function(e){u(Object(J.a)(Object(J.a)({},l),{},Object(at.a)({},e.target.name,e.target.value))),g(Object(Se.b)({type:"",text:""}))},k=b.map((function(e){return{name:e}}));function w(e,t,n){return{fontWeight:-1===t.indexOf(e)?n.typography.fontWeightRegular:n.typography.fontWeightMedium}}var M=function(){var e=Object(G.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!l.id){e.next=13;break}return e.prev=2,e.next=5,r.updateRole({variables:{roleInput:l}});case 5:g(Object(Se.b)({type:"success",text:"El rol se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),g(Object(Se.b)({type:"error",text:Object(we.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,c.registerRole({variables:{roleInput:Object(J.a)(Object(J.a)({},l),{},{modules:k})}});case 16:g(Object(Se.b)({type:"success",text:"El rol se registr\xf3 correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),g(Object(Se.b)({type:"error",text:Object(we.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(N.useEffect)((function(){if(i.data){var e=i.data.getModules.filter((function(e){return e.name!==Me.b}));x(e)}}),[i.data]),Object(ge.jsx)(ge.Fragment,{children:Object(ge.jsx)("form",{onSubmit:M,children:Object(ge.jsxs)(rt.a,{container:!0,spacing:3,children:[l.id&&l.name===Me.g?"":Object(ge.jsx)(rt.a,{item:!0,xs:12,children:Object(ge.jsx)(ct.a,{fullWidth:!0,onChange:C,name:"name",id:"idName",label:"Role",variant:"outlined",value:l.name})}),Object(ge.jsx)(rt.a,{item:!0,xs:12,children:Object(ge.jsx)(ct.a,{fullWidth:!0,onChange:C,name:"description",id:"idDescription",label:"Descripci\xf3n",multiline:!0,value:l.description,variant:"outlined"})}),!a.id&&Object(ge.jsx)(rt.a,{item:!0,xs:12,children:Object(ge.jsxs)(lt.a,{variant:"outlined",fullWidth:!0,children:[Object(ge.jsx)(ut.a,{id:"module-mutiple-chip-label",children:"Modulos"}),Object(ge.jsx)(jt.a,{labelId:"module-mutiple-chip-label",id:"module-mutiple-chip",multiple:!0,value:b,onChange:function(e){O(e.target.value),g(Object(Se.b)({type:"",text:""}))},input:Object(ge.jsx)(cn.a,{id:"select-multiple-chip"}),renderValue:function(e){return Object(ge.jsx)("div",{className:v.chips,children:e.map((function(e){return Object(ge.jsx)(Gt.a,{label:e,className:v.chip},e)}))})},MenuProps:_n,children:p.map((function(e){var t;return((null===y||void 0===y||null===(t=y.role)||void 0===t?void 0:t.name)===Me.g||e.name!==Me.b)&&Object(ge.jsx)(dt.a,{value:e.name,style:w(e.name,l.modules||[],f),children:e.name},e.id)}))})]})}),Object(ge.jsxs)(ot.a,{style:{width:"100%"},children:[Object(ge.jsx)(it.a,{onClick:function(){return n()},color:"primary",children:"Cancelar"}),l.id?r.loading?Object(ge.jsx)(st.a,{}):Object(ge.jsx)(it.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):c.loading?Object(ge.jsx)(st.a,{}):Object(ge.jsx)(it.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})})},Hn=n(176),Kn=n(146),Gn=n.n(Kn),Jn={name:"",active:!1},Xn=function(e){var t=e.role,n=Object(N.useState)(Jn),a=Object(Q.a)(n,2),r=a[0],c=a[1],i=Object(he.c)(),o=Object(he.d)((function(e){return e.authReducer.authUser})),s=Object(he.d)((function(e){return e.page.user.module})),l=function(){c(Object(J.a)(Object(J.a)({},r),{},{active:!1})),i(Object(Se.b)({type:"",text:""}))},u=function(e){switch(e){case"Modulo":return Object(ge.jsx)(Hn.a,{role:t,handleClose:l});case"Rol":return Object(ge.jsx)(Vn,{role:t,handleClose:l})}},d=function(){return Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)(Ge,{open:r.active,dialog:t,title:r.name,component:u(r.name),handleClose:l}),t.name===Me.g?Object(ge.jsx)(Ye.a,{align:"center",children:Object(ge.jsx)(Ne.a,{title:"Asignar modulos",onClick:function(){return c({name:"Modulo",active:!0})},children:Object(ge.jsx)(Qe.a,{"aria-label":"modules",size:"small",children:Object(ge.jsx)(Gn.a,{})})})}):Object(ge.jsxs)(Ye.a,{align:"right",children:[Object(ge.jsx)(Ne.a,{title:"Asignar modulos",onClick:function(){return c({name:"Modulo",active:!0})},children:Object(ge.jsx)(Qe.a,{"aria-label":"modules",size:"small",children:Object(ge.jsx)(Gn.a,{})})}),Object(ge.jsx)(Ne.a,{title:"Editar rol",onClick:function(){return c({name:"Rol",active:!0})},children:Object(ge.jsx)(Qe.a,{"aria-label":"role",size:"small",children:Object(ge.jsx)(et.a,{})})})]})]})};return Object(ge.jsx)(ge.Fragment,{children:Ie(Me.c,o,s,(function(){var e;return Object(ge.jsx)(ge.Fragment,{children:Object(ge.jsx)(Ue.a,{children:(null===o||void 0===o||null===(e=o.role)||void 0===e?void 0:e.name)===Me.g?Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)(Ye.a,{component:"th",scope:"row",children:t.name}),Object(ge.jsx)(Ye.a,{children:t.description}),Object(ge.jsx)(Ye.a,{children:nt()(t.createdAt).format("DD/MM/YYYY")}),Object(ge.jsx)(Ye.a,{children:nt()(t.updatedAt).format("DD/MM/YYYY")}),Object(ge.jsx)(Ye.a,{align:"center",children:t.modules&&t.modules.map((function(e){return Object(ge.jsx)(Wn,{module:e},e.id)}))}),Ie(Me.f,o,s,d)]}):Object(ge.jsx)(ge.Fragment,{children:t.name===Me.g||Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)(Ye.a,{component:"th",scope:"row",children:t.name}),Object(ge.jsx)(Ye.a,{children:t.description}),Object(ge.jsx)(Ye.a,{children:nt()(t.createdAt).format("DD/MM/YYYY")}),Object(ge.jsx)(Ye.a,{children:nt()(t.updatedAt).format("DD/MM/YYYY")}),Object(ge.jsx)(Ye.a,{align:"center",children:t.modules&&t.modules.map((function(e){return Object(ge.jsx)(Wn,{module:e},e.id)}))}),Ie(Me.f,o,s,d)]})})})})}))})},Zn=Object(Kt.a)({table:{minWidth:650}}),ea={name:"",active:!1},ta=function(){var e=Object(N.useState)([]),t=Object(Q.a)(e,2),n=t[0],a=t[1],r=Object(he.d)((function(e){return e.authReducer.authUser})),c=Object(he.d)((function(e){return e.page.user.module})),i=Object(N.useState)(ea),o=Object(Q.a)(i,2),s=o[0],l=o[1],u=Object(he.c)(),d=$n(),j=d.data,b=d.loading,O=d.error,m=Zn(),h=function(){l(Object(J.a)(Object(J.a)({},s),{},{active:!1})),u(Object(Se.b)({type:"",text:""}))},p=function(e){switch(e){case"Crear":return Object(ge.jsx)(Vn,{handleClose:h})}};if(Object(N.useEffect)((function(){j&&a(j.getRoles)}),[j]),b)return Object(ge.jsx)("h1",{children:"Cargando..."});if(O)return Object(ge.jsx)("h1",{children:Object(we.a)(O)});return Object(ge.jsxs)(ge.Fragment,{children:[Ie(Me.d,r,c,(function(){return Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)(Ge,{open:s.active,title:"".concat(s.name," Rol"),component:p(s.name),handleClose:h}),Object(ge.jsx)(Ne.a,{title:"Crear Rol",children:Object(ge.jsx)(Qe.a,{"aria-label":"add",size:"small",onClick:function(){return l({name:"Crear",active:!0})},children:Object(ge.jsx)(Xe.a,{})})})]})})),Object(ge.jsx)(Fe.a,{component:De.a,children:Object(ge.jsxs)(Ae.a,{className:m.table,size:"small","aria-label":"a dense table",children:[Object(ge.jsx)(Re.a,{children:Object(ge.jsxs)(Ue.a,{children:[Object(ge.jsx)(Ye.a,{children:"Rol"}),Object(ge.jsx)(Ye.a,{children:"Descripci\xf3n"}),Object(ge.jsx)(Ye.a,{children:"Fecha creada"}),Object(ge.jsx)(Ye.a,{children:"Fecha modificada"}),Object(ge.jsx)(Ye.a,{align:"center",children:"Modulos"}),Ie(Me.f,r,c,(function(){return Object(ge.jsx)(Ye.a,{align:"right",children:"Opciones"})}))]})}),Object(ge.jsx)(Ee.a,{children:n.map((function(e){return Object(ge.jsx)(Xn,{role:e},e.id)}))})]})})]})},na=Object(V.gql)(w||(w=Object(_.a)(["\n  query getServices {\n    getServices {\n      id\n      name\n      description\n      price\n      createdAt\n      updatedAt\n      category {\n        id\n        name\n      }\n    }\n  }\n"]))),aa=Object(V.gql)(M||(M=Object(_.a)(["\n  mutation updateService($serviceInput: UpdateServiceInput!) {\n    updateService(serviceInput: $serviceInput) {\n      id\n      name\n      description\n      price\n      category {\n        id\n        name\n      }\n    }\n  }\n"]))),ra=Object(V.gql)(I||(I=Object(_.a)(["\n  mutation registerService($serviceInput: CreateServiceInput!) {\n    registerService(serviceInput: $serviceInput) {\n      id\n      name\n      description\n      price\n      category {\n        id\n        name\n      }\n    }\n  }\n"]))),ca={type:"",text:""},ia=function(e){var t,n=e.handleClose,a=e.service,r={id:(null===a||void 0===a?void 0:a.id)||"",name:(null===a||void 0===a?void 0:a.name)||"",description:(null===a||void 0===a?void 0:a.description)||"",price:(null===a||void 0===a?void 0:a.price)||0,category:(null===a||void 0===a||null===(t=a.category)||void 0===t?void 0:t.name)||""},c=Object(N.useState)(r.id?r:{name:"",description:"",price:0,category:""}),i=Object(Q.a)(c,2),o=i[0],s=i[1],l=Object(N.useState)([]),u=Object(Q.a)(l,2),d=u[0],j=u[1],b=Ot().data,O=Object(he.c)(),m=function(){var e=Object(V.useMutation)(aa,{refetchQueries:function(){return[{query:na}]}}),t=Object(Q.a)(e,2),n=t[0],a=t[1];return{updateService:n,error:a.error,loading:a.loading}}(),h=function(){var e=Object(V.useMutation)(ra,{refetchQueries:function(){return[{query:na}]}}),t=Object(Q.a)(e,2),n=t[0],a=t[1];return{registerService:n,error:a.error,loading:a.loading}}(),p=function(e){s(Object(J.a)(Object(J.a)({},o),{},Object(at.a)({},e.target.name,e.target.value))),O(Object(Se.b)(ca))},x=function(){var e=Object(G.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!o.id){e.next=13;break}return e.prev=2,e.next=5,m.updateService({variables:{serviceInput:o}});case 5:O(Object(Se.b)({type:"success",text:"El servicio se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),O(Object(Se.b)({type:"error",text:Object(we.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,h.registerService({variables:{serviceInput:o}});case 16:O(Object(Se.b)({type:"success",text:"El servicio ha sido registrada correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),O(Object(Se.b)({type:"error",text:Object(we.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(N.useEffect)((function(){b&&j(b.getCategorys)}),[b]),Object(ge.jsx)("form",{onSubmit:x,children:Object(ge.jsxs)(rt.a,{container:!0,spacing:3,children:[Object(ge.jsx)(rt.a,{item:!0,xs:12,children:Object(ge.jsxs)(lt.a,{variant:"outlined",fullWidth:!0,children:[Object(ge.jsx)(ut.a,{id:"idCategory",children:"Categoria"}),Object(ge.jsx)(jt.a,{labelId:"Categoria",id:"idCategory",value:o.category,onChange:function(e){s(Object(J.a)(Object(J.a)({},o),{},Object(at.a)({},e.target.name,e.target.value))),O(Object(Se.b)(ca))},label:"Categoria",name:"category",children:d.map((function(e){return Object(ge.jsx)(dt.a,{value:e.name,children:e.name},e.id)}))})]})}),Object(ge.jsx)(rt.a,{item:!0,xs:12,children:Object(ge.jsx)(ct.a,{fullWidth:!0,onChange:p,name:"name",autoComplete:"off",id:"idName",label:"Servicio",variant:"outlined",value:o.name})}),Object(ge.jsx)(rt.a,{item:!0,xs:12,children:Object(ge.jsx)(ct.a,{fullWidth:!0,onChange:p,name:"description",autoComplete:"off",id:"idDescription",label:"Descripci\xf3n",variant:"outlined",multiline:!0,value:o.description})}),Object(ge.jsx)(rt.a,{item:!0,xs:12,children:Object(ge.jsx)(ct.a,{fullWidth:!0,onChange:p,name:"price",autoComplete:"off",id:"idPrice",label:"Precio",variant:"outlined",value:o.price,InputProps:{startAdornment:Object(ge.jsx)(Cn.a,{position:"start",children:"S/"})}})}),Object(ge.jsxs)(ot.a,{style:{width:"100%"},children:[Object(ge.jsx)(it.a,{onClick:function(){return n()},color:"primary",children:"Cancelar"}),o.id?m.loading?Object(ge.jsx)(st.a,{}):Object(ge.jsx)(it.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):h.loading?Object(ge.jsx)(st.a,{}):Object(ge.jsx)(it.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})},oa={type:"",text:""},sa={name:"",active:!1},la=function(e){var t=e.service,n=Object(he.d)((function(e){return e.authReducer.authUser})),a=Object(he.d)((function(e){return e.page.user.module})),r=Object(N.useState)(sa),c=Object(Q.a)(r,2),i=c[0],o=c[1],s=Object(he.c)(),l=function(){o(sa),s(Object(Se.b)(oa))},u=function(e){switch(e){case"Servicio":return Object(ge.jsx)(ia,{service:t,handleClose:l})}},d=function(){return Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)(Ge,{open:i.active,dialog:t,title:i.name,component:u(i.name),handleClose:l}),Object(ge.jsx)(Ye.a,{align:"right",children:Object(ge.jsx)(Ne.a,{title:"Editar Servicio",onClick:function(){return o({name:"Servicio",active:!0})},children:Object(ge.jsx)(Qe.a,{"aria-label":"service",size:"small",children:Object(ge.jsx)(et.a,{})})})})]})};return Object(ge.jsx)(ge.Fragment,{children:Ie(Me.c,n,a,(function(){return Object(ge.jsx)(ge.Fragment,{children:Object(ge.jsxs)(Ue.a,{children:[Object(ge.jsx)(Ye.a,{component:"th",scope:"row",children:t.category.name}),Object(ge.jsx)(Ye.a,{component:"th",scope:"row",children:t.name}),Object(ge.jsx)(Ye.a,{component:"th",scope:"row",children:t.description}),Object(ge.jsx)(Ye.a,{component:"th",scope:"row",children:Yn(t.price)}),Object(ge.jsx)(Ye.a,{children:nt()(t.createdAt).format("DD/MM/YYYY")}),Object(ge.jsx)(Ye.a,{children:nt()(t.updatedAt).format("DD/MM/YYYY")}),Ie(Me.f,n,a,d)]})})}))})},ua={type:"",text:""},da={name:"",active:!1},ja=function(){var e=Object(he.d)((function(e){return e.authReducer.authUser})),t=Object(he.d)((function(e){return e.page.user.module})),n=Object(N.useState)(da),a=Object(Q.a)(n,2),r=a[0],c=a[1],i=Object(he.c)(),o=function(){var e=Object(V.useQuery)(na);return{data:e.data,error:e.error,loading:e.loading}}(),s=o.data,l=o.loading,u=o.error,d=Object(N.useState)([]),j=Object(Q.a)(d,2),b=j[0],O=j[1],m=function(){c(da),i(Object(Se.b)(ua))},h=function(e){switch(e){case"Crear":return Object(ge.jsx)(ia,{handleClose:m})}};if(Object(N.useEffect)((function(){s&&O(s.getServices)}),[s]),l)return Object(ge.jsx)("h1",{children:"Cargando..."});if(u)return Object(ge.jsx)("h1",{children:Object(we.a)(u)});return Object(ge.jsxs)(ge.Fragment,{children:[Ie(Me.d,e,t,(function(){return Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)(Ge,{open:r.active,title:"".concat(r.name," Servicio"),component:h(r.name),handleClose:m}),Object(ge.jsx)(Ne.a,{title:"Crear Servicio",children:Object(ge.jsx)(Qe.a,{"aria-label":"add",size:"small",onClick:function(){return c({name:"Crear",active:!0})},children:Object(ge.jsx)(Xe.a,{})})})]})})),Object(ge.jsx)(Fe.a,{component:De.a,style:{marginTop:10},children:Object(ge.jsxs)(Ae.a,{size:"small","aria-label":"a dense table",children:[Object(ge.jsx)(Re.a,{children:Object(ge.jsxs)(Ue.a,{children:[Object(ge.jsx)(Ye.a,{children:"Categoria"}),Object(ge.jsx)(Ye.a,{children:"Servicio"}),Object(ge.jsx)(Ye.a,{children:"Descripci\xf3n"}),Object(ge.jsx)(Ye.a,{children:"Precio"}),Object(ge.jsx)(Ye.a,{children:"Fecha creada"}),Object(ge.jsx)(Ye.a,{children:"Fecha modificada"}),Ie(Me.f,e,t,(function(){return Object(ge.jsx)(Ye.a,{align:"right",children:"Opciones"})}))]})}),Object(ge.jsx)(Ee.a,{children:b.map((function(e){return Object(ge.jsx)(la,{service:e},e.id)}))})]})})]})},ba=Object(V.gql)(S||(S=Object(_.a)(["\n  query getUsers {\n    getUsers {\n      id\n      name\n      lastName\n      email\n      status\n      createdAt\n      updatedAt\n      role {\n        name\n        description\n        modules {\n          access {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n"]))),Oa=n(177),ma=n.n(Oa),ha=Object(V.gql)(A||(A=Object(_.a)(["\n  mutation updateRole($userInput: UserUpdateInput!) {\n    updateUser(userInput: $userInput) {\n      id\n      name\n      lastName\n      email\n      role {\n        id\n        name\n      }\n    }\n  }\n"]))),pa=Object(V.gql)(F||(F=Object(_.a)(["\n  mutation registerUser($userInput: UserInput!) {\n    registerUser(userInput: $userInput) {\n      id\n      name\n      lastName\n      email\n      createdAt\n      updatedAt\n      role {\n        name\n      }\n    }\n  }\n"]))),xa=function(e){var t,n,a,r=e.user,c=e.handleClose,i={id:(null===r||void 0===r?void 0:r.id)||"",name:(null===r||void 0===r?void 0:r.name)||"",lastName:(null===r||void 0===r?void 0:r.lastName)||"",role:{name:(null===r||void 0===r||null===(t=r.role)||void 0===t?void 0:t.name)||""},email:(null===r||void 0===r?void 0:r.email)||""},o=Object(N.useState)(i.id?i:{name:"",lastName:"",role:{name:""},email:"",password:"",confirmPassword:""}),s=Object(Q.a)(o,2),l=s[0],u=s[1],d=Object(N.useState)([]),j=Object(Q.a)(d,2),b=j[0],O=j[1],m=Object(he.c)(),h=function(){var e=Object(V.useMutation)(ha),t=Object(Q.a)(e,2),n=t[0],a=t[1];return{updateUser:n,error:a.error,loading:a.loading}}(),p=$n().data,x=function(){var e=Object(V.useMutation)(pa,{refetchQueries:function(){return[{query:ba}]}}),t=Object(Q.a)(e,2),n=t[0],a=t[1];return{registerUser:n,error:a.error,loading:a.loading}}(),f=Object(he.d)((function(e){return e.authReducer.authUser})),g=function(e){u(Object(J.a)(Object(J.a)({},l),{},Object(at.a)({},e.target.name,e.target.value))),m(Object(Se.b)({type:"",text:""}))},v=function(){var e=Object(G.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!l.id){e.next=13;break}return e.prev=2,e.next=5,h.updateUser({variables:{userInput:l}});case 5:m(Object(Se.b)({type:"success",text:"El usuario se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),m(Object(Se.b)({type:"error",text:Object(we.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,x.registerUser({variables:{userInput:l}});case 16:m(Object(Se.b)({type:"success",text:"El usuario ha sido registrado correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),m(Object(Se.b)({type:"error",text:Object(we.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(N.useEffect)((function(){p&&O(p.getRoles)}),[p]),Object(ge.jsx)(ge.Fragment,{children:Object(ge.jsx)("form",{onSubmit:v,children:Object(ge.jsxs)(rt.a,{container:!0,spacing:3,children:[Object(ge.jsx)(rt.a,{item:!0,xs:6,children:Object(ge.jsx)(ct.a,{fullWidth:!0,onChange:g,name:"name",autoComplete:"off",id:"idNombres",label:"Nombres",variant:"outlined",value:l.name})}),Object(ge.jsx)(rt.a,{item:!0,xs:6,children:Object(ge.jsx)(ct.a,{fullWidth:!0,onChange:g,name:"lastName",autoComplete:"off",id:"idApellidos",label:"Apellidos",value:l.lastName,variant:"outlined"})}),(null===(n=l.role)||void 0===n?void 0:n.name)===Me.g||Object(ge.jsx)(ge.Fragment,{children:Object(ge.jsx)(rt.a,{item:!0,xs:12,children:Object(ge.jsxs)(lt.a,{variant:"outlined",fullWidth:!0,children:[Object(ge.jsx)(ut.a,{id:"idRole",children:"Rol"}),Object(ge.jsx)(jt.a,{labelId:"Rol",id:"idRole",value:null===(a=l.role)||void 0===a?void 0:a.name,onChange:function(e){u(Object(J.a)(Object(J.a)({},l),{},Object(at.a)({},e.target.name,{name:e.target.value}))),m(Object(Se.b)({type:"",text:""}))},label:"Rol",name:"role",children:b.map((function(e){var t;return((null===f||void 0===f||null===(t=f.role)||void 0===t?void 0:t.name)===Me.g||e.name!==Me.g)&&Object(ge.jsx)(dt.a,{value:e.name,children:e.name},e.id)}))})]})})}),Object(ge.jsx)(rt.a,{item:!0,xs:12,children:Object(ge.jsx)(ct.a,{fullWidth:!0,onChange:g,name:"email",autoComplete:"off",id:"idEmail",label:"Correo",value:l.email,variant:"outlined",InputProps:{readOnly:!!l.id}})}),l.id?"":Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)(rt.a,{item:!0,xs:12,children:Object(ge.jsx)(ct.a,{fullWidth:!0,onChange:g,name:"password",autoComplete:"off",id:"idPassword",label:"Contrase\xf1a",value:l.password,variant:"outlined",type:"password"})}),Object(ge.jsx)(rt.a,{item:!0,xs:12,children:Object(ge.jsx)(ct.a,{fullWidth:!0,onChange:g,name:"confirmPassword",autoComplete:"off",id:"idConfirmPassword",label:"Repetir contrase\xf1a",value:l.confirmPassword,variant:"outlined",type:"password"})})]}),Object(ge.jsxs)(ot.a,{style:{width:"100%"},children:[Object(ge.jsx)(it.a,{onClick:function(){return c()},color:"primary",children:"Cancelar"}),l.id?h.loading?Object(ge.jsx)(st.a,{}):Object(ge.jsx)(it.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):x.loading?Object(ge.jsx)(st.a,{}):Object(ge.jsx)(it.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})})},fa=n(178),ga=n.n(fa),va=Object(V.gql)(R||(R=Object(_.a)(["\n  mutation activateUser($id: String!) {\n    activateUser(id: $id) {\n      id\n      status\n    }\n  }\n"]))),ya=Object(V.gql)(U||(U=Object(_.a)(["\n  mutation desactivateUser($id: String!) {\n    desactivateUser(id: $id) {\n      id\n      status\n    }\n  }\n"]))),Ca=n(179),ka=n.n(Ca),wa=Object(V.gql)(Y||(Y=Object(_.a)(["\n  mutation changePasswordToAdmin($authInput: AuthChangePasswordInputToAdmin!) {\n    changePasswordToAdmin(authInput: $authInput)\n  }\n"]))),Ma=(Object(V.gql)(E||(E=Object(_.a)(["\n  mutation changePasswordToUser($authInput: AuthChangePasswordInputToUser!) {\n    changePasswordToUser(authInput: $authInput)\n  }\n"]))),function(e){var t=e.user,n=e.handleClose,a={id:(null===t||void 0===t?void 0:t.id)||"",newPassword:"",confirmNewPassword:""},r=Object(N.useState)(a),c=Object(Q.a)(r,2),i=c[0],o=c[1],s=Object(he.c)(),l=function(){var e=Object(V.useMutation)(wa),t=Object(Q.a)(e,2),n=t[0],a=t[1];return{changePasswordToAdmin:n,error:a.error,loading:a.loading}}(),u=l.changePasswordToAdmin,d=(l.error,l.loading),j=function(e){o(Object(J.a)(Object(J.a)({},i),{},Object(at.a)({},e.target.name,e.target.value))),s(Object(Se.b)({type:"",text:""}))},b=function(){var e=Object(G.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,u({variables:{authInput:i}});case 4:s(Object(Se.b)({type:"success",text:"La contrase\xf1a ha sido cambiada correctamente."})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),s(Object(Se.b)({type:"error",text:Object(we.a)(e.t0)}));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(ge.jsx)("form",{onSubmit:b,children:Object(ge.jsxs)(rt.a,{container:!0,spacing:3,children:[Object(ge.jsx)(rt.a,{item:!0,xs:12,children:Object(ge.jsx)(ct.a,{fullWidth:!0,onChange:j,name:"newPassword",autoComplete:"off",id:"idNewPassword",label:"Nueva Contrase\xf1a",value:i.newPassword,variant:"outlined"})}),Object(ge.jsx)(rt.a,{item:!0,xs:12,children:Object(ge.jsx)(ct.a,{fullWidth:!0,onChange:j,name:"confirmNewPassword",autoComplete:"off",id:"idConfirmNewPassword",label:"Confirmar nueva contrase\xf1a",value:i.confirmNewPassword,variant:"outlined"})}),Object(ge.jsxs)(ot.a,{style:{width:"100%"},children:[Object(ge.jsx)(it.a,{onClick:function(){return n()},color:"primary",children:"Cancelar"}),d?Object(ge.jsx)(st.a,{}):Object(ge.jsx)(it.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"})]})]})})}),Ia={name:"",active:!1},Sa=function(e){var t=e.user,n=Object(he.d)((function(e){return e.authReducer.authUser})),a=Object(he.d)((function(e){return e.page.user.module})),r=Object(N.useState)(Ia),c=Object(Q.a)(r,2),i=c[0],o=c[1],s=Object(he.c)(),l=function(){var e=Object(V.useMutation)(va),t=Object(Q.a)(e,2),n=t[0],a=t[1];return{activateUser:n,error:a.error,loading:a.loading}}(),u=function(){var e=Object(V.useMutation)(ya),t=Object(Q.a)(e,2),n=t[0],a=t[1];return{desactivateUser:n,error:a.error,loading:a.loading}}(),d=function(){o(Object(J.a)(Object(J.a)({},i),{},{active:!1})),s(Object(Se.b)({type:"",text:""}))},j=function(){var e=Object(G.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.desactivateUser({variables:{id:t.id}});case 3:e.next=10;break;case 5:e.prev=5,e.t0=e.catch(0),o({name:"error",active:!0}),s(Object(Se.b)({type:"error",text:Object(we.a)(e.t0)})),i.active,i.name;case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),b=function(e){switch(e){case"Usuario":return Object(ge.jsx)(xa,{user:t,handleClose:d});case"Contrase\xf1a":return Object(ge.jsx)(Ma,{user:t,handleClose:d})}},O=function(){var e;return Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)(Ge,{open:i.active,dialog:t,title:i.name,component:b(i.name),handleClose:d}),Object(ge.jsxs)(Ye.a,{align:"right",children:[(null===(e=t.role)||void 0===e?void 0:e.name)===Me.g?"":Object(ge.jsx)(ge.Fragment,{children:2===t.status?Object(ge.jsx)(Ne.a,{title:"Activar usuario",onClick:function(){return l.activateUser({variables:{id:t.id}})},children:Object(ge.jsx)(Qe.a,{"aria-label":"desactivate",size:"small",color:"secondary",children:Object(ge.jsx)(ma.a,{style:{color:"#F44336"}})})}):1===t.status?Object(ge.jsx)(Ne.a,{title:"Desactivar usuario",onClick:j,children:Object(ge.jsx)(Qe.a,{"aria-label":"activate",size:"small",style:{color:"#4CAF50"},children:Object(ge.jsx)(ga.a,{style:{color:"#4CAF50"}})})}):""}),Object(ge.jsx)(Ne.a,{title:"Editar usuario",onClick:function(){return o({name:"Usuario",active:!0})},children:Object(ge.jsx)(Qe.a,{"aria-label":"role",size:"small",children:Object(ge.jsx)(et.a,{})})}),Object(ge.jsx)(Ne.a,{title:"Cambiar contrase\xf1a",onClick:function(){return o({name:"Contrase\xf1a",active:!0})},children:Object(ge.jsx)(Qe.a,{"aria-label":"password",size:"small",children:Object(ge.jsx)(ka.a,{})})})]})]})};return Object(ge.jsx)(ge.Fragment,{children:Ie(Me.c,n,a,(function(){var e,r,c,i;return Object(ge.jsx)(ge.Fragment,{children:Object(ge.jsx)(Ue.a,{children:(null===n||void 0===n||null===(e=n.role)||void 0===e?void 0:e.name)===Me.g?Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsxs)(Ye.a,{component:"th",scope:"row",children:[t.name," ",t.lastName]}),Object(ge.jsx)(Ye.a,{children:null===(r=t.role)||void 0===r?void 0:r.name}),Object(ge.jsx)(Ye.a,{children:t.email}),Object(ge.jsx)(Ye.a,{children:nt()(t.createdAt).format("DD/MM/YYYY")}),Object(ge.jsx)(Ye.a,{children:nt()(t.updatedAt).format("DD/MM/YYYY")}),Ie(Me.f,n,a,O)]}):Object(ge.jsx)(ge.Fragment,{children:(null===(c=t.role)||void 0===c?void 0:c.name)===Me.g||Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsxs)(Ye.a,{component:"th",scope:"row",children:[t.name," ",t.lastName]}),Object(ge.jsx)(Ye.a,{children:null===(i=t.role)||void 0===i?void 0:i.name}),Object(ge.jsx)(Ye.a,{children:t.email}),Object(ge.jsx)(Ye.a,{children:nt()(t.createdAt).format("DD/MM/YYYY")}),Object(ge.jsx)(Ye.a,{children:nt()(t.updatedAt).format("DD/MM/YYYY")}),Ie(Me.f,n,a,O)]})})})})}))})},Aa=Object(Kt.a)({table:{minWidth:650}}),Fa={name:"",active:!1},Ra=function(){var e=Object(he.d)((function(e){return e.authReducer.authUser})),t=Object(he.d)((function(e){return e.page.user.module})),n=Aa(),a=Object(N.useState)([]),r=Object(Q.a)(a,2),c=r[0],i=r[1],o=Object(N.useState)(Fa),s=Object(Q.a)(o,2),l=s[0],u=s[1],d=function(){var e=Object(V.useQuery)(ba);return{data:e.data,loading:e.loading,error:e.error}}(),j=d.data,b=d.loading,O=d.error,m=Object(he.c)(),h=function(){u(Object(J.a)(Object(J.a)({},l),{},{active:!1})),m(Object(Se.b)({type:"",text:""}))},p=function(e){switch(e){case"Crear":return Object(ge.jsx)(xa,{handleClose:h})}};if(Object(N.useEffect)((function(){j&&i(j.getUsers)}),[j]),b)return Object(ge.jsx)("h1",{children:"Cargando..."});if(O)return Object(ge.jsx)("h1",{children:Object(we.a)(O)});return Object(ge.jsxs)(ge.Fragment,{children:[Ie(Me.d,e,t,(function(){return Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)(Ge,{open:l.active,title:"".concat(l.name," Usuario"),component:p(l.name),handleClose:h}),Object(ge.jsx)(Ne.a,{title:"Crear Usuario",children:Object(ge.jsx)(Qe.a,{"aria-label":"add",size:"small",onClick:function(){return u({name:"Crear",active:!0})},children:Object(ge.jsx)(Xe.a,{})})})]})})),Object(ge.jsx)(Fe.a,{component:De.a,style:{marginTop:10},children:Object(ge.jsxs)(Ae.a,{className:n.table,size:"small","aria-label":"a dense table",children:[Object(ge.jsx)(Re.a,{children:Object(ge.jsxs)(Ue.a,{children:[Object(ge.jsx)(Ye.a,{children:"Nombres"}),Object(ge.jsx)(Ye.a,{children:"Rol"}),Object(ge.jsx)(Ye.a,{children:"Correo"}),Object(ge.jsx)(Ye.a,{children:"Fecha creada"}),Object(ge.jsx)(Ye.a,{children:"Fecha modificada"}),Ie(Me.f,e,t,(function(){return Object(ge.jsx)(Ye.a,{align:"right",children:"Opciones"})}))]})}),Object(ge.jsx)(Ee.a,{children:c.map((function(e){return Object(ge.jsx)(Sa,{user:e},e.id)}))})]})})]})},Ua=Object(he.b)((function(e){var t=e.page.user;return{link:t.link,page:t.page}}),null)((function(e){var t=e.link,n=e.page,a=Object($.h)(),r=a.pathname.replace("/",""),c=function(e){var t=e.component,n=e.toLogin,a=Object(Ce.a)(e,["component","toLogin"]);return Object(ge.jsx)($.b,Object(J.a)(Object(J.a)({},a),{},{render:function(e){switch(n){case!0:return W("accessToken")?Object(ge.jsx)($.a,{to:{pathname:"/"}}):Object(N.createElement)(t,e);case!1:return W("accessToken")?Object(N.createElement)(t,e):Object(ge.jsx)($.a,{to:{pathname:"/"}})}}}))};return Object(ge.jsx)(ge.Fragment,{children:t===r||t===a.pathname?Object(ge.jsx)(c,{exact:!0,path:"/".concat(t),toLogin:!1,component:function(e){switch(e){case"HOME":return function(){return Object(ge.jsx)("h1",{children:"Hola Home"})};case"MODULOS":return function(){return Object(ge.jsx)(yn,{})};case"ROLES":return function(){return Object(ge.jsx)(ta,{})};case"USUARIOS":return function(){return Object(ge.jsx)(Ra,{})};case"CATEGORIAS":return function(){return Object(ge.jsx)(Nt,{})};case"MARCAS":return function(){return Object(ge.jsx)(Mt,{})};case"MODELOS":return function(){return Object(ge.jsx)(Vt,{})};case"PRODUCTOS":return function(){return Object(ge.jsx)(qn,{})};case"SERVICIOS":return function(){return Object(ge.jsx)(ja,{})};default:return function(){return Object(ge.jsx)(ke,{})}}}("".concat(n))}):Object(ge.jsx)(c,{toLogin:!1,path:"*",component:ke})})})),Ya=function(){return Object(ge.jsx)($.d,{children:Object(ge.jsx)(Ua,{})})},Ea=n(293),Da=n(294),Na=Object(he.b)(null,{setLink:fe})((function(e){var t,n=e.menu,a=e.setLink,r=e.module,c=Object($.g)(),i=Object(he.d)((function(e){return e.authReducer.authUser})),o=function(){a(r.name,n.link),document.title="RPUM - ".concat(n.link.toUpperCase()),c.push("/".concat(n.link))};return Object(ge.jsx)(ge.Fragment,{children:((null===i||void 0===i||null===(t=i.role)||void 0===t?void 0:t.name)===Me.g||n.name!==Me.a)&&Object(ge.jsx)("li",{onClick:function(){return o()},children:n.name})})})),Pa=function(e){var t=e.module,n=Object(N.useState)(!1),a=Object(Q.a)(n,2),r=a[0],c=a[1],i=Object(N.useState)(!1),o=Object(Q.a)(i,2),s=o[0],l=o[1],u=t.menus,d=P.a.useState([]),j=Object(Q.a)(d,2),b=j[0],O=j[1];return Object(N.useEffect)((function(){O(u||[])}),[u]),Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsxs)("li",{style:s?{color:"#fff",fontWeight:"bold"}:{color:"#67677e"},onClick:function(){return c(!r),void l(!s)},children:[t.name," ",r?Object(ge.jsx)(Ea.a,{}):Object(ge.jsx)(Da.a,{})]}),r&&Object(ge.jsx)("ul",{children:b.map((function(e){return Object(ge.jsx)(Na,{menu:e,module:t},e.id)}))})]})},za=(n(220),Object(he.b)((function(e){var t=e.authReducer,n=t.loading,a=t.authUser,r=e.page.user,c=r.link;return{loading:n,authUser:a,page:r.page,link:c}}),null)((function(e){var t,n=e.authUser,a=e.page,r=a.charAt(0).toUpperCase(),c=a.substr(1,a.length),i="".concat(r).concat(c.toLowerCase()),o=null===n||void 0===n||null===(t=n.role)||void 0===t?void 0:t.modules,s=Object(N.useState)([]),l=Object(Q.a)(s,2),u=l[0],d=l[1];return Object(N.useEffect)((function(){d(o||[])}),[o]),Object(ge.jsxs)("div",{className:"wrapper",children:[Object(ge.jsx)("aside",{children:Object(ge.jsx)("div",{className:"sidebar",children:Object(ge.jsx)("ul",{children:u.map((function(e){return Object(ge.jsx)(Pa,{module:e},e.id)}))})})}),Object(ge.jsxs)("section",{children:[Object(ge.jsxs)("div",{className:"content-wrapper",children:[Object(ge.jsxs)("div",{className:"content-wrapper-header items-center",children:[Object(ge.jsx)("h1",{children:a}),Object(ge.jsxs)("ol",{children:[Object(ge.jsx)("li",{className:"list-style-none text-active",children:Object(ge.jsx)("strong",{children:"Home"})}),Object(ge.jsx)("li",{className:"list-style-none text-inactive",children:i})]})]}),Object(ge.jsx)("div",{className:"content-wrapper-main",children:Object(ge.jsx)(Ya,{})})]}),Object(ge.jsx)(ye,{})]})]})}))),qa=(n(221),function(){return Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)(ve,{}),Object(ge.jsx)(za,{})]})}),La=n(231),$a=Object(V.gql)(D||(D=Object(_.a)(["\n  mutation login($authInput: AuthInput!) {\n    login(authInput: $authInput) {\n      access_token\n      refresh_token\n    }\n  }\n"]))),Wa=(n(222),{email:"",password:""}),Ta={path:"",message:""},Ba=Object(he.b)((function(e){return{loading:e.authReducer.loading}}),{setLoading:Oe})((function(e){var t=e.loading,n=e.setLoading,a=Object(N.useState)(Ta),r=Object(Q.a)(a,2),c=r[0],i=r[1],o=Object(N.useState)(Wa),s=Object(Q.a)(o,2),l=s[0],u=s[1],d=Object(he.d)((function(e){return e.message})),j=function(){var e=Object(V.useMutation)($a);return Object(Q.a)(e,1)[0]}(),b=Object(he.c)(),O=function(e){b(Object(Se.b)({type:"",text:""})),i(Ta),u(Object(J.a)(Object(J.a)({},l),{},Object(at.a)({},e.target.name,e.target.value)))},m=function(){var e=Object(G.a)(K.a.mark((function e(t){var a,r,c,o;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n(!0),e.prev=2,e.next=5,j({variables:{authInput:{email:l.email,password:l.password}}});case 5:a=e.sent,r=a.data.login,c=r.access_token,o=r.refresh_token,T("accessToken",c),T("refreshToken",o),se.resetStore(),window.location.href="/",e.next=21;break;case 13:if(e.prev=13,e.t0=e.catch(2),401!==e.t0.graphQLErrors[0].extensions.exception.status){e.next=19;break}return b(Object(Se.b)({type:"error",text:Object(we.a)(e.t0)})),n(!1),e.abrupt("return");case 19:i(e.t0.graphQLErrors[0].extensions.exception.response),n(!1);case 21:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(ge.jsxs)("div",{className:"login",children:[Object(ge.jsx)("div",{className:"content-login-logo content-items-center",children:Object(ge.jsx)("img",{width:"250",height:"250",src:B,alt:"Logo"})}),Object(ge.jsx)("div",{className:"content-login-form content-items-center",children:Object(ge.jsxs)("div",{className:"content-login-form-main",children:[Object(ge.jsx)("div",{className:"content-login-form-header content-items-center",children:Object(ge.jsx)("h1",{children:"SISTEMA RPUM"})}),d.type&&Object(ge.jsx)(Be.a,{severity:d.type,children:d.text}),Object(ge.jsx)("form",{onSubmit:m,children:Object(ge.jsxs)("div",{className:"content-login-form-body",children:[Object(ge.jsx)("div",{className:"content-login-form-input",children:Object(ge.jsx)(ct.a,{error:"username"===(null===c||void 0===c?void 0:c.path),id:"idUsername",label:"Usuario",helperText:"username"===(null===c||void 0===c?void 0:c.path)?null===c||void 0===c?void 0:c.message:"",name:"email",onChange:O,variant:"outlined",fullWidth:!0})}),Object(ge.jsx)("br",{}),Object(ge.jsx)("div",{className:"content-login-form-input",children:Object(ge.jsx)(ct.a,{error:"password"===(null===c||void 0===c?void 0:c.path),id:"idPassword",label:"Contrase\xf1a",helperText:"password"===(null===c||void 0===c?void 0:c.path)?null===c||void 0===c?void 0:c.message:"",name:"password",onChange:O,variant:"outlined",type:"password",fullWidth:!0})}),Object(ge.jsx)("br",{}),Object(ge.jsx)("div",{className:"content-login-form-input content-items-center",children:t?Object(ge.jsx)(La.a,{}):Object(ge.jsx)(it.a,{disabled:!!t,type:"submit",size:"large",variant:"contained",color:"primary",fullWidth:!0,children:"Iniciar sesion"})}),Object(ge.jsx)("br",{}),Object(ge.jsx)("div",{className:"content-login-form-footer content-items-center",children:"\xbfOlvidaste tu contrase\xf1a?"})]})})]})})]})})),Qa=function(){return Object(ge.jsx)(L.a,{children:W("accessToken")?Object(ge.jsx)(qa,{}):Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)(Ba,{}),Object(ge.jsx)($.a,{to:"/"})]})})},_a=n(78),Va=n(180),Ha=n(181),Ka=n(147),Ga=n(182),Ja=n.n(Ga),Xa={loading:!1,authUser:void 0,error:void 0},Za={user:{link:"/",module:"",page:"HOME"}},er={type:"",text:""},tr=Object(_a.combineReducers)({authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case de:return Object(J.a)(Object(J.a)({},e),{},{loading:t.payload});case le:case ue:return Object(J.a)(Object(J.a)({},e),{},{authUser:t.payload});case je:return Object(J.a)(Object(J.a)({},e),{},{error:t.payload});default:return e}},page:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Za,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xe:return Object(J.a)(Object(J.a)({},e),{},{user:t.payload});default:return e}},message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:er,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Se.a:return t.payload;default:return e}}}),nr={key:"root",storage:Ja.a,whitelist:["page"]},ar=Object(Ka.a)(nr,tr),rr=Object(_a.createStore)(ar,Object(Ha.composeWithDevTools)(Object(_a.applyMiddleware)(Va.a))),cr=Object(Ka.b)(rr),ir=n(183);n(225);q.a.render(Object(ge.jsx)(P.a.StrictMode,{children:Object(ge.jsx)(V.ApolloProvider,{client:se,children:Object(ge.jsx)(he.a,{store:rr,children:Object(ge.jsx)(ir.a,{loading:null,persistor:cr,children:Object(ge.jsx)(Qa,{})})})})}),document.getElementById("root"))},28:function(e,t,n){"use strict";n(0);var a=n(231),r=n(1);t.a=function(){return Object(r.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(r.jsx)(a.a,{disableShrink:!0})})}},64:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var a,r=n(16),c=n(11),i=Object(c.gql)(a||(a=Object(r.a)(["\n  query getModules {\n    getModules {\n      id\n      name\n      description\n      createdAt\n      updatedAt\n      menus {\n        id\n        name\n        link\n      }\n      access {\n        id\n        name\n      }\n    }\n  }\n"]))),o=function(){var e=Object(c.useQuery)(i);return{data:e.data,loading:e.loading,error:e.error}}}},[[226,1,2]]]);
//# sourceMappingURL=main.e99ad4ec.chunk.js.map