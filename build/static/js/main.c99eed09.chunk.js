(this.webpackJsonprpum=this.webpackJsonprpum||[]).push([[0],{109:function(e,t,n){"use strict";var a=n(114),r=(n(1),n(98)),c=n(242),i=n(245),o=n(246),s=n(155),l=n(249),u=n(248),d=n(192),j=n(139),b=n(247),O=n(23),m=n(0);function h(e,t){return e.filter((function(e){return-1===t.indexOf(e)}))}function p(e,t){return e.filter((function(e){return-1!==t.indexOf(e)}))}t.a=function(e){var t=e.setListAvailable,n=e.setListCurrent,g=e.listAvailable,x=e.setChecked,f=e.checked,v=e.titleAvailable,y=e.listCurrent,C=e.titleCurrent,S=e.loading,k=p(f,g),w=p(f,y),I=function(e){return function(){var t=f.indexOf(e),n=Object(a.a)(f);-1===t?n.push(e):n.splice(t,1),x(n)}},A=function(e){return p(f,e).length},M=function(e){return function(){var t,n;A(e)===e.length?x(h(f,e)):x((t=f,n=e,[].concat(Object(a.a)(t),Object(a.a)(h(n,t)))))}},E=function(e,t){return Object(m.jsxs)(i.a,{children:[Object(m.jsx)(o.a,{avatar:Object(m.jsx)(d.a,{onClick:M(t),checked:A(t)===t.length&&0!==t.length,indeterminate:A(t)!==t.length&&0!==A(t),disabled:0===t.length,inputProps:{"aria-label":"all items selected"}}),title:e,subheader:"".concat(A(t),"/").concat(t.length," selected")}),Object(m.jsx)(b.a,{}),Object(m.jsxs)(c.a,{dense:!0,component:"div",role:"list",children:[S?Object(m.jsx)(O.a,{}):t.map((function(e){var t="transfer-list-all-item-".concat(e.name,"-label");return Object(m.jsxs)(s.a,{role:"listitem",button:!0,onClick:I(e),children:[Object(m.jsx)(u.a,{children:Object(m.jsx)(d.a,{checked:-1!==f.indexOf(e),tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":t}})}),Object(m.jsx)(l.a,{id:t,primary:"".concat(e.name)})]},e.id)})),Object(m.jsx)(s.a,{})]})]})};return Object(m.jsxs)(r.a,{container:!0,spacing:2,justify:"center",alignItems:"center",children:[Object(m.jsx)(r.a,{item:!0,children:E(v,g)}),Object(m.jsx)(r.a,{item:!0,children:Object(m.jsxs)(r.a,{container:!0,direction:"column",alignItems:"center",children:[Object(m.jsx)(j.a,{variant:"outlined",size:"small",onClick:function(){n(y.concat(k)),t(h(g,k)),x(h(f,k))},disabled:0===k.length,"aria-label":"move selected right",children:">"}),Object(m.jsx)(j.a,{variant:"outlined",size:"small",onClick:function(){t(g.concat(w)),n(h(y,w)),x(h(f,w))},disabled:0===w.length,"aria-label":"move selected left",children:"<"})]})}),Object(m.jsx)(r.a,{item:!0,children:E(C,y)})]})}},11:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var a="@message/ALERT",r=function(e){return{type:a,payload:e}}},137:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a,r,c=n(114),i=n(5),o=n(13),s=n(7),l=Object(s.gql)(a||(a=Object(o.a)(["\n  mutation updateRole($roleInput: RoleUpdateInput!) {\n    updateRole(roleInput: $roleInput) {\n      id\n      name\n      description\n      modules {\n        id\n        name\n      }\n    }\n  }\n"]))),u=function(){var e=Object(s.useMutation)(l,{update:function(e,t){var n=t.data.updateRole;e.modify({fields:{updateRole:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=e.writeFragment({data:n,fragment:Object(s.gql)(r||(r=Object(o.a)(["\n                fragment NewRole on Role {\n                  id\n                  name\n                  description\n                  modules {\n                    id\n                    name\n                  }\n                }\n              "])))});return[].concat(Object(c.a)(t),[a])}}})}}),t=Object(i.a)(e,2),n=t[0],a=t[1];return{updateRole:n,error:a.error,loading:a.loading}}},14:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"f",(function(){return r})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"g",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l}));var a="Crear",r="Editar",c="Eliminar",i="Ver",o="SuperAdmin",s="Administraci\xf3n de modulos",l="Modulos"},18:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e){for(var t=0;t<e.graphQLErrors.length;t++)for(var n=e.graphQLErrors[t].extensions.exception.response.message,a=0;a<n.length;a++){return n[a]}}},183:function(e,t,n){"use strict";var a=n(17),r=n.n(a),c=n(20),i=n(5),o=n(1),s=n(11),l=n(243),u=n(6),d=n(98),j=n(139),b=n(76),O=n(137),m=n(109),h=n(14),p=n(18),g=n(0);t.a=function(t){var n=t.role,a=t.handleClose,x=Object(o.useState)([]),f=Object(i.a)(x,2),v=f[0],y=f[1],C=Object(o.useState)([]),S=Object(i.a)(C,2),k=S[0],w=S[1],I=Object(o.useState)([]),A=Object(i.a)(I,2),M=A[0],E=A[1],R=Object(u.c)(),N=Object(b.b)(),F=Object(O.a)(),U=Object(u.d)((function(e){return e.message})),D=U.type,q=U.text,z=(Object(u.d)((function(e){return e.authReducer.authUser})),function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=k.map((function(e){return{name:e.name}})),e.prev=2,e.next=5,F.updateRole({variables:{roleInput:{id:n.id,modules:a}}});case 5:return e.abrupt("return",R(Object(s.b)({type:"success",text:"El rol actualiz\xf3 sus modulos correctamente."})));case 8:e.prev=8,e.t0=e.catch(2),R(Object(s.b)({type:"error",text:Object(p.a)(e.t0)}));case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()),P=Object(o.useCallback)((function(){var e=N.data.getModules.filter((function(e){var t;return!(null===(t=n.modules)||void 0===t?void 0:t.some((function(t){return e.name===t.name})))})).filter((function(e){return e.name!==h.b}));y(e)}),[n,N.data]);return Object(o.useEffect)((function(){if(n&&N.data){var e,t=null===(e=n.modules)||void 0===e?void 0:e.filter((function(e){return e.name!==h.b}));w(t||[]),P()}}),[n,N.data,P]),"error"===D?Object(g.jsx)("h1",{children:q}):Object(g.jsx)("form",{onSubmit:z,children:Object(g.jsxs)(d.a,{container:!0,spacing:3,children:[Object(g.jsx)(d.a,{item:!0,xs:12,children:Object(g.jsx)(m.a,{setListAvailable:y,setListCurrent:w,setChecked:E,checked:M,listAvailable:v,titleAvailable:"Modulos disponibles",listCurrent:k,titleCurrent:"Modulos actuales",loading:N.loading})}),Object(g.jsxs)(l.a,{style:{width:"100%"},children:[Object(g.jsx)(j.a,{onClick:a,color:"primary",children:"Cancelar"}),Object(g.jsx)(j.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",disabled:!!F.loading,children:e.i?"Actualizar":"Registrar"})]})]})})}},220:function(e,t,n){},224:function(e,t,n){},226:function(e,t,n){},227:function(e,t,n){},228:function(e,t,n){},229:function(e,t,n){},23:function(e,t,n){"use strict";n(1);var a=n(240),r=n(0);t.a=function(){return Object(r.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(r.jsx)(a.a,{disableShrink:!0})})}},230:function(e,t,n){},233:function(e,t,n){},234:function(e,t,n){"use strict";n.r(t);var a,r,c,i,o,s,l,u,d,j,b,O,m,h,p,g,x,f,v,y,C,S,k,w,I,A,M,E,R,N,F,U,D,q,z,P,Y,$,B,L,T,W,Q,J,_,V,H,G,K,X=n(1),Z=n.n(X),ee=n(29),te=n.n(ee),ne=n(102),ae=n(35),re=function(e){return localStorage.getItem(e)},ce=function(e,t){return localStorage.setItem(e,t)},ie=n(5),oe=n(13),se=n(7),le=n(17),ue=n.n(le),de=n(20),je=n(3),be=n(173),Oe=n(174),me=n(179),he=Object(se.gql)(a||(a=Object(oe.a)(["\n  mutation refreshToken($authInput: AuthRefreshTokenInput!) {\n    refreshToken(authInput: $authInput) {\n      access_token\n    }\n  }\n"]))),pe=!1,ge=[],xe=Object(me.a)((function(e){var t=e.graphQLErrors,n=e.networkError,a=e.operation,r=e.forward;if(t){var c,i=Object(be.a)(t);try{for(i.s();!(c=i.n()).done;){var o=c.value;switch(o.extensions.exception.status){case 401:var s=void 0;return pe?s=Object(se.fromPromise)(new Promise((function(e){ge.push((function(){return e()}))}))):(pe=!0,s=Object(se.fromPromise)(ye.mutate({mutation:he,variables:{authInput:{email:re("username"),refresh_token:re("refreshToken")}}}).then((function(e){var t=e.data.refreshToken.access_token;return ce("accessToken",t),!0})).then((function(){return ge.map((function(e){return e()})),ge=[],!0})).catch((function(){return ge=[],!1})).finally((function(){pe=!1})))),s.flatMap((function(){return r(a)}));default:console.log("[ERROR]: Message: ".concat(o.message,", Location: ").concat(o.locations,", Path: ").concat(o.path))}}}catch(o){i.e(o)}finally{i.f()}}n&&console.log("[Network error]: ".concat(n))})),fe=Object(se.createHttpLink)({uri:"https://web.kemaytechnology.com/graphql"}),ve=Object(Oe.a)((function(e,t){var n=t.headers,a=re("accessToken");return{headers:Object(je.a)(Object(je.a)({},n),{},{authorization:a?"Bearer ".concat(a):""})}})),ye=new se.ApolloClient({link:Object(se.from)([xe,ve,fe]),cache:new se.InMemoryCache}),Ce=ye,Se="@auth/LOGIN_USER",ke="@auth/LOGOUT_USER",we="@auth/LOADING_USER",Ie="@auth/ERROR_USER",Ae={name:"Anonimo",lastName:""},Me=function(e){return{type:we,payload:e}},Ee=function(){return function(){var e=Object(de.a)(ue.a.mark((function e(t){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.clear(),Ce.resetStore(),window.location.href="/",e.next=5,t({type:ke,payload:Ae});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Re=n(6),Ne=Object(se.gql)(r||(r=Object(oe.a)(["\n  query me {\n    me {\n      id\n      name\n      lastName\n      email\n      status\n      role {\n        name\n        modules {\n          id\n          name\n          access {\n            name\n          }\n          menus {\n            id\n            name\n            link\n          }\n        }\n      }\n    }\n  }\n"]))),Fe=(n(220),n(0)),Ue=Object(Re.b)((function(e){return{loading:e.authReducer.loading,authUser:e.authReducer.authUser}}),{setLoading:Me,whoisme:function(e){return function(){var t=Object(de.a)(ue.a.mark((function t(n){return ue.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n(Me(!0));case 3:return t.next=5,n({type:Se,payload:e.me});case 5:return t.next=7,n(Me(!1));case 7:t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(0),t.next=13,n({type:Ie,payload:t.t0.message});case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},logout:Ee})((function(e){var t,n=e.authUser,a=e.loading,r=e.whoisme,c=e.logout,i=function(){var e,t=Object(se.useLazyQuery)(Ne,{pollInterval:500}),n=Object(ie.a)(t,2),a=n[0],r=n[1],c=r.data,i=r.loading,o=r.error,s=Object(Re.c)();return o&&401===(null===o||void 0===o||null===(e=o.graphQLErrors[0].extensions)||void 0===e?void 0:e.exception.status)&&(alert(o.graphQLErrors[0].extensions.exception.response.message),s(Ee())),{me:a,data:c,loading:i}}(),o=i.me,s=i.data;return Object(X.useEffect)((function(){var e;o(),r(s),ce("username",null===s||void 0===s||null===(e=s.me)||void 0===e?void 0:e.email)}),[o,r,s]),2===(null===s||void 0===s||null===(t=s.me)||void 0===t?void 0:t.status)&&c(),Object(Fe.jsxs)("header",{children:[Object(Fe.jsx)("a",{children:a?"Cargando usuario...":Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)("strong",{children:"Bienvenido, "}),null===n||void 0===n?void 0:n.name," ",null===n||void 0===n?void 0:n.lastName]})}),"\xa0\xa0",Object(Fe.jsx)("button",{className:"buttonLogout",onClick:function(){return c()},children:"Cerrar sesion"})]})})),De=n(138),qe=function(){return Object(Fe.jsx)(Fe.Fragment,{children:"4040404040404040"})},ze=n(18),Pe=n(14),Ye=function(e,t,n,a,r){var c,i,o,s,l,u,d,j;switch(e){case Pe.d:var b=null===t||void 0===t||null===(c=t.role)||void 0===c||null===(i=c.modules)||void 0===i?void 0:i.map((function(t){var a;return null===(a=t.access)||void 0===a?void 0:a.filter((function(a){return t.name===n&&a.name===e}))}));return null===b||void 0===b?void 0:b.map((function(e,t){return e?(null===e||void 0===e?void 0:e.length)>0&&Object(Fe.jsx)(a,{},t):""}));case Pe.f:var O=null===t||void 0===t||null===(o=t.role)||void 0===o||null===(s=o.modules)||void 0===s?void 0:s.map((function(t){var a;return null===(a=t.access)||void 0===a?void 0:a.filter((function(a){return t.name===n&&a.name===e}))}));return null===O||void 0===O?void 0:O.map((function(e,t){return e?(null===e||void 0===e?void 0:e.length)>0&&Object(Fe.jsx)(a,{},t):""}));case Pe.e:var m=null===t||void 0===t||null===(l=t.role)||void 0===l||null===(u=l.modules)||void 0===u?void 0:u.map((function(t){var a;return null===(a=t.access)||void 0===a?void 0:a.filter((function(a){return t.name===n&&a.name===e}))}));return null===m||void 0===m?void 0:m.map((function(e,t){return e?(null===e||void 0===e?void 0:e.length)>0&&Object(Fe.jsx)(a,{},t):""}));case Pe.c:var h=null===t||void 0===t||null===(d=t.role)||void 0===d||null===(j=d.modules)||void 0===j?void 0:j.map((function(t){var a;return null===(a=t.access)||void 0===a?void 0:a.filter((function(a){return t.name===n&&a.name===e}))}));return null===h||void 0===h?void 0:h.map((function(e,t){return e?(null===e||void 0===e?void 0:e.length)>0&&Object(Fe.jsx)(a,{},t):""}))}},$e=n(11),Be=n(299),Le=n(298),Te=n(300),We=n(297),Qe=n(295),Je=n(301),_e=n(238),Ve=n(296),He=n(314),Ge=n(12),Ke=n(312),Xe=n(290),Ze=n(64),et=n(289),tt=n(75),nt=n(308),at=n(237),rt=n(288),ct=n(180),it=n.n(ct),ot=Object(Ge.a)((function(e){return Object(He.a)({root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})}))((function(e){var t=e.children,n=e.classes,a=e.onClose,r=Object(De.a)(e,["children","classes","onClose"]);return Object(Fe.jsxs)(rt.a,Object(je.a)(Object(je.a)({disableTypography:!0,className:n.root},r),{},{children:[Object(Fe.jsx)(Ze.a,{variant:"h6",children:t}),a?Object(Fe.jsx)(at.a,{"aria-label":"close",className:n.closeButton,onClick:a,children:Object(Fe.jsx)(it.a,{})}):null]}))})),st=function(e){var t=e.open,n=e.dialog,a=e.title,r=e.component,c=e.handleClose,i=Object(Re.d)((function(e){return e.message})),o=Object(tt.a)(),s=Object(et.a)(o.breakpoints.down("sm"));return Object(Fe.jsxs)(Ke.a,{fullScreen:s,open:t,"aria-labelledby":"idModal",disableBackdropClick:!0,disableEscapeKeyDown:!0,children:[Object(Fe.jsxs)(ot,{id:"idModal",onClose:c,children:[a," ",null===n||void 0===n?void 0:n.name]}),i.type&&Object(Fe.jsx)(nt.a,{severity:i.type,children:i.text}),Object(Fe.jsx)(Xe.a,{dividers:!0,style:{overflowY:"visible"},children:r})]})},lt=n(39),ut=n.n(lt),dt=n(38),jt=n.n(dt),bt=n(28),Ot=n.n(bt),mt=n(26),ht=n(98),pt=n(313),gt=n(139),xt=n(243),ft=n(23),vt=n(291),yt=n(315),Ct=n(294),St=n(307),kt=Object(se.gql)(c||(c=Object(oe.a)(["\n  query getCategorys {\n    getCategorys {\n      id\n      name\n      createdAt\n      updatedAt\n    }\n  }\n"]))),wt=function(){var e=Object(se.useQuery)(kt);return{data:e.data,error:e.error,loading:e.loading}},It=Object(se.gql)(i||(i=Object(oe.a)(["\n  query getBrands {\n    getBrands {\n      id\n      name\n      category {\n        id\n        name\n      }\n    }\n  }\n"]))),At=function(){var e=Object(se.useQuery)(It);return{data:e.data,error:e.error,loading:e.loading}},Mt=Object(se.gql)(o||(o=Object(oe.a)(["\n  mutation updateBrand($brandInput: UpdateBrandInput!) {\n    updateBrand(brandInput: $brandInput) {\n      id\n      name\n    }\n  }\n"]))),Et=Object(se.gql)(s||(s=Object(oe.a)(["\n  mutation registerBrand($brandInput: CreateBrandInput!) {\n    registerBrand(brandInput: $brandInput) {\n      id\n      name\n      category {\n        id\n        name\n      }\n    }\n  }\n"]))),Rt={type:"",text:""},Nt=function(e){var t,n=e.handleClose,a=e.brand,r={id:(null===a||void 0===a?void 0:a.id)||"",name:(null===a||void 0===a?void 0:a.name)||"",category:(null===a||void 0===a||null===(t=a.category)||void 0===t?void 0:t.name)||""},c=Object(X.useState)(r.id?r:{name:"",category:""}),i=Object(ie.a)(c,2),o=i[0],s=i[1],l=Object(X.useState)([]),u=Object(ie.a)(l,2),d=u[0],j=u[1],b=wt().data,O=Object(Re.c)(),m=function(){var e=Object(se.useMutation)(Mt,{refetchQueries:function(){return[{query:It}]}}),t=Object(ie.a)(e,2),n=t[0],a=t[1];return{updateBrand:n,error:a.error,loading:a.loading}}(),h=function(){var e=Object(se.useMutation)(Et,{refetchQueries:function(){return[{query:It}]}}),t=Object(ie.a)(e,2),n=t[0],a=t[1];return{registerBrand:n,error:a.error,loading:a.loading}}(),p=function(){var e=Object(de.a)(ue.a.mark((function e(t){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!o.id){e.next=13;break}return e.prev=2,e.next=5,m.updateBrand({variables:{brandInput:o}});case 5:O(Object($e.b)({type:"success",text:"La marca se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),O(Object($e.b)({type:"error",text:Object(ze.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,h.registerBrand({variables:{brandInput:o}});case 16:O(Object($e.b)({type:"success",text:"La marca ha sido registrada correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),O(Object($e.b)({type:"error",text:Object(ze.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(X.useEffect)((function(){b&&j(b.getCategorys)}),[b]),Object(Fe.jsx)("form",{onSubmit:p,children:Object(Fe.jsxs)(ht.a,{container:!0,spacing:3,children:[Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsxs)(vt.a,{variant:"outlined",fullWidth:!0,children:[Object(Fe.jsx)(yt.a,{id:"idCategory",children:"Categoria"}),Object(Fe.jsx)(St.a,{labelId:"Categoria",id:"idCategory",value:o.category,onChange:function(e){s(Object(je.a)(Object(je.a)({},o),{},Object(mt.a)({},e.target.name,e.target.value))),O(Object($e.b)(Rt))},label:"Categoria",name:"category",children:d.map((function(e){return Object(Fe.jsx)(Ct.a,{value:e.name,children:e.name},e.id)}))})]})}),Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsx)(pt.a,{fullWidth:!0,onChange:function(e){s(Object(je.a)(Object(je.a)({},o),{},Object(mt.a)({},e.target.name,e.target.value))),O(Object($e.b)(Rt))},name:"name",autoComplete:"off",id:"idName",label:"Marca",variant:"outlined",value:o.name})}),Object(Fe.jsxs)(xt.a,{style:{width:"100%"},children:[Object(Fe.jsx)(gt.a,{onClick:function(){return n()},color:"primary",children:"Cancelar"}),o.id?m.loading?Object(Fe.jsx)(ft.a,{}):Object(Fe.jsx)(gt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):h.loading?Object(Fe.jsx)(ft.a,{}):Object(Fe.jsx)(gt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})},Ft={type:"",text:""},Ut={name:"",active:!1},Dt=function(e){var t=e.brand,n=Object(Re.d)((function(e){return e.authReducer.authUser})),a=Object(Re.d)((function(e){return e.page.user.module})),r=Object(X.useState)(Ut),c=Object(ie.a)(r,2),i=c[0],o=c[1],s=Object(Re.c)(),l=function(){o(Ut),s(Object($e.b)(Ft))},u=function(e){switch(e){case"Marca":return Object(Fe.jsx)(Nt,{brand:t,handleClose:l})}},d=function(){return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(st,{open:i.active,dialog:t,title:i.name,component:u(i.name),handleClose:l}),Object(Fe.jsx)(Qe.a,{align:"right",children:Object(Fe.jsx)(Ve.a,{title:"Editar Marca",onClick:function(){return o({name:"Marca",active:!0})},children:Object(Fe.jsx)(at.a,{"aria-label":"role",size:"small",children:Object(Fe.jsx)(jt.a,{})})})})]})};return Object(Fe.jsx)(Fe.Fragment,{children:Ye(Pe.c,n,a,(function(){return Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsxs)(We.a,{children:[Object(Fe.jsx)(Qe.a,{component:"th",scope:"row",children:t.category.name}),Object(Fe.jsx)(Qe.a,{component:"th",scope:"row",children:t.name}),Object(Fe.jsx)(Qe.a,{children:Ot()(t.createdAt).format("DD/MM/YYYY")}),Object(Fe.jsx)(Qe.a,{children:Ot()(t.updatedAt).format("DD/MM/YYYY")}),Ye(Pe.f,n,a,d)]})})}))})},qt={type:"",text:""},zt={name:"",active:!1},Pt=function(){var e=Object(Re.d)((function(e){return e.authReducer.authUser})),t=Object(Re.d)((function(e){return e.page.user.module})),n=Object(X.useState)(zt),a=Object(ie.a)(n,2),r=a[0],c=a[1],i=Object(Re.c)(),o=At(),s=o.data,l=o.loading,u=o.error,d=Object(X.useState)([]),j=Object(ie.a)(d,2),b=j[0],O=j[1],m=function(){c(zt),i(Object($e.b)(qt))},h=function(e){switch(e){case"Crear":return Object(Fe.jsx)(Nt,{handleClose:m})}};if(Object(X.useEffect)((function(){s&&O(s.getBrands)}),[s]),l)return Object(Fe.jsx)("h1",{children:"Cargando..."});if(u)return Object(Fe.jsx)("h1",{children:Object(ze.a)(u)});return Object(Fe.jsxs)(Fe.Fragment,{children:[Ye(Pe.d,e,t,(function(){return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(st,{open:r.active,title:"".concat(r.name," Marca"),component:h(r.name),handleClose:m}),Object(Fe.jsx)(Ve.a,{title:"Crear Marca",children:Object(Fe.jsx)(at.a,{"aria-label":"add",size:"small",onClick:function(){return c({name:"Crear",active:!0})},children:Object(Fe.jsx)(ut.a,{})})})]})})),Object(Fe.jsx)(Le.a,{component:_e.a,style:{marginTop:10},children:Object(Fe.jsxs)(Be.a,{size:"small","aria-label":"a dense table",children:[Object(Fe.jsx)(Te.a,{children:Object(Fe.jsxs)(We.a,{children:[Object(Fe.jsx)(Qe.a,{children:"Categoria"}),Object(Fe.jsx)(Qe.a,{children:"Marca"}),Object(Fe.jsx)(Qe.a,{children:"Fecha creada"}),Object(Fe.jsx)(Qe.a,{children:"Fecha modificada"}),Ye(Pe.f,e,t,(function(){return Object(Fe.jsx)(Qe.a,{align:"right",children:"Opciones"})}))]})}),Object(Fe.jsx)(Je.a,{children:b.map((function(e){return Object(Fe.jsx)(Dt,{brand:e},e.id)}))})]})})]})},Yt=Object(se.gql)(l||(l=Object(oe.a)(["\n  mutation registerCategory($categoryInput: CreateCategoryInput!) {\n    registerCategory(categoryInput: $categoryInput) {\n      id\n      name\n    }\n  }\n"]))),$t=Object(se.gql)(u||(u=Object(oe.a)(["\n  mutation updateCategory($categoryInput: UpdateCategoryInput!) {\n    updateCategory(categoryInput: $categoryInput) {\n      id\n      name\n    }\n  }\n"]))),Bt={type:"",text:""},Lt=function(e){var t=e.handleClose,n=e.category,a={id:(null===n||void 0===n?void 0:n.id)||"",name:(null===n||void 0===n?void 0:n.name)||""},r=Object(X.useState)(a.id?a:{name:""}),c=Object(ie.a)(r,2),i=c[0],o=c[1],s=Object(Re.c)(),l=function(){var e=Object(se.useMutation)($t),t=Object(ie.a)(e,2),n=t[0],a=t[1];return{updateCategory:n,error:a.error,loading:a.loading}}(),u=function(){var e=Object(se.useMutation)(Yt,{refetchQueries:function(){return[{query:kt}]}}),t=Object(ie.a)(e,2),n=t[0],a=t[1];return{registerCategory:n,error:a.error,loading:a.loading}}(),d=function(){var e=Object(de.a)(ue.a.mark((function e(t){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!i.id){e.next=13;break}return e.prev=2,e.next=5,l.updateCategory({variables:{categoryInput:i}});case 5:s(Object($e.b)({type:"success",text:"La categoria se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),s(Object($e.b)({type:"error",text:Object(ze.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,u.registerCategory({variables:{categoryInput:i}});case 16:s(Object($e.b)({type:"success",text:"La categoria ha sido registrado correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),s(Object($e.b)({type:"error",text:Object(ze.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(Fe.jsx)("form",{onSubmit:d,children:Object(Fe.jsxs)(ht.a,{container:!0,spacing:3,children:[Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsx)(pt.a,{fullWidth:!0,onChange:function(e){o(Object(je.a)(Object(je.a)({},i),{},Object(mt.a)({},e.target.name,e.target.value))),s(Object($e.b)(Bt))},name:"name",autoComplete:"off",id:"idName",label:"Nombre",variant:"outlined",value:i.name})}),Object(Fe.jsxs)(xt.a,{style:{width:"100%"},children:[Object(Fe.jsx)(gt.a,{onClick:function(){return t()},color:"primary",children:"Cancelar"}),i.id?l.loading?Object(Fe.jsx)(ft.a,{}):Object(Fe.jsx)(gt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):u.loading?Object(Fe.jsx)(ft.a,{}):Object(Fe.jsx)(gt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})},Tt={type:"",text:""},Wt={name:"",active:!1},Qt=function(e){var t=e.category,n=Object(Re.d)((function(e){return e.authReducer.authUser})),a=Object(Re.d)((function(e){return e.page.user.module})),r=Object(X.useState)(Wt),c=Object(ie.a)(r,2),i=c[0],o=c[1],s=Object(Re.c)(),l=function(){o(Wt),s(Object($e.b)(Tt))},u=function(e){switch(e){case"Categoria":return Object(Fe.jsx)(Lt,{category:t,handleClose:l})}},d=function(){return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(st,{open:i.active,dialog:t,title:i.name,component:u(i.name),handleClose:l}),Object(Fe.jsx)(Qe.a,{align:"right",children:Object(Fe.jsx)(Ve.a,{title:"Editar categoria",onClick:function(){return o({name:"Categoria",active:!0})},children:Object(Fe.jsx)(at.a,{"aria-label":"role",size:"small",children:Object(Fe.jsx)(jt.a,{})})})})]})};return Object(Fe.jsx)(Fe.Fragment,{children:Ye(Pe.c,n,a,(function(){return Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsxs)(We.a,{children:[Object(Fe.jsx)(Qe.a,{component:"th",scope:"row",children:t.name}),Object(Fe.jsx)(Qe.a,{children:Ot()(t.createdAt).format("DD/MM/YYYY")}),Object(Fe.jsx)(Qe.a,{children:Ot()(t.updatedAt).format("DD/MM/YYYY")}),Ye(Pe.f,n,a,d)]})})}))})},Jt={type:"",text:""},_t={name:"",active:!1},Vt=function(){var e=Object(Re.d)((function(e){return e.authReducer.authUser})),t=Object(Re.d)((function(e){return e.page.user.module})),n=Object(X.useState)(_t),a=Object(ie.a)(n,2),r=a[0],c=a[1],i=Object(Re.c)(),o=wt(),s=o.data,l=o.loading,u=o.error,d=Object(X.useState)([]),j=Object(ie.a)(d,2),b=j[0],O=j[1],m=function(){c(_t),i(Object($e.b)(Jt))},h=function(e){switch(e){case"Crear":return Object(Fe.jsx)(Lt,{handleClose:m})}};if(Object(X.useEffect)((function(){s&&O(s.getCategorys)}),[s]),l)return Object(Fe.jsx)("h1",{children:"Cargando..."});if(u)return Object(Fe.jsx)("h1",{children:Object(ze.a)(u)});return Object(Fe.jsxs)(Fe.Fragment,{children:[Ye(Pe.d,e,t,(function(){return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(st,{open:r.active,title:"".concat(r.name," Categoria"),component:h(r.name),handleClose:m}),Object(Fe.jsx)(Ve.a,{title:"Crear Categoria",children:Object(Fe.jsx)(at.a,{"aria-label":"add",size:"small",onClick:function(){return c({name:"Crear",active:!0})},children:Object(Fe.jsx)(ut.a,{})})})]})})),Object(Fe.jsx)(Le.a,{component:_e.a,style:{marginTop:10},children:Object(Fe.jsxs)(Be.a,{size:"small","aria-label":"a dense table",children:[Object(Fe.jsx)(Te.a,{children:Object(Fe.jsxs)(We.a,{children:[Object(Fe.jsx)(Qe.a,{children:"Categoria"}),Object(Fe.jsx)(Qe.a,{children:"Fecha creada"}),Object(Fe.jsx)(Qe.a,{children:"Fecha modificada"}),Ye(Pe.f,e,t,(function(){return Object(Fe.jsx)(Qe.a,{align:"right",children:"Opciones"})}))]})}),Object(Fe.jsx)(Je.a,{children:b.map((function(e){return Object(Fe.jsx)(Qt,{category:e},e.id)}))})]})})]})},Ht=n(302),Gt=Object(Ht.a)((function(e){return Object(He.a)({root:{border:"1px solid #e2e2e1",overflow:"hidden",borderRadius:4,backgroundColor:"#fcfcfb",transition:e.transitions.create(["border-color","box-shadow"]),"&:hover":{backgroundColor:"#fff"},"&$focused":{backgroundColor:"#fff",borderColor:e.palette.primary.main}},focused:{}})})),Kt=function(e){var t=Gt();return Object(Fe.jsx)(pt.a,Object(je.a)({InputProps:{classes:t,disableUnderline:!0}},e))},Xt=function(e){return new Intl.NumberFormat("de-DE",{style:"currency",currency:"PEN"}).format(e)},Zt=n(89),en=n.n(Zt),tn=Object(se.gql)(d||(d=Object(oe.a)(["\n  query getEgress {\n    getEgress {\n      id\n      category {\n        name\n      }\n      user {\n        name\n      }\n      detail\n      observation\n      units\n      amount\n      createdAt\n      updatedAt\n    }\n  }\n"]))),nn=Object(se.gql)(j||(j=Object(oe.a)(["\n  mutation deleteEgress($id: String!) {\n    deleteEgress(id: $id)\n  }\n"]))),an=n(311),rn=Object(se.gql)(b||(b=Object(oe.a)(["\n  mutation updateEgress($egressInput: UpdateEgressInput!) {\n    updateEgress(egressInput: $egressInput) {\n      id\n      category {\n        id\n        name\n      }\n      detail\n      observation\n      units\n      amount\n    }\n  }\n"]))),cn=Object(se.gql)(O||(O=Object(oe.a)(["\n  mutation registerEgress($egressInput: CreateEgressInput!) {\n    registerEgress(egressInput: $egressInput) {\n      id\n      category {\n        id\n        name\n      }\n      detail\n      observation\n      units\n      amount\n    }\n  }\n"]))),on=n(303),sn={type:"",text:""},ln={category:""},un=function(e){var t,n=e.handleClose,a=e.egress,r={detail:"",amount:0,units:0,category:"",user:Object(Re.d)((function(e){return e.authReducer.authUser})).name},c={id:(null===a||void 0===a?void 0:a.id)||"",detail:(null===a||void 0===a?void 0:a.detail)||"",amount:(null===a||void 0===a?void 0:a.amount)||0,units:(null===a||void 0===a?void 0:a.units)||0,category:(null===a||void 0===a||null===(t=a.category)||void 0===t?void 0:t.name)||"",observation:(null===a||void 0===a?void 0:a.observation)||""},i=Object(X.useState)(c.id?c:r),o=Object(ie.a)(i,2),s=o[0],l=o[1],u=Object(X.useState)(ln),d=Object(ie.a)(u,2),j=d[0],b=d[1],O=Object(X.useState)([]),m=Object(ie.a)(O,2),h=m[0],p=m[1],g=wt().data,x=function(){var e=Object(se.useMutation)(rn,{refetchQueries:function(){return[{query:tn}]}}),t=Object(ie.a)(e,2),n=t[0],a=t[1];return{updateEgress:n,error:a.error,loading:a.loading}}(),f=function(){var e=Object(se.useMutation)(cn,{refetchQueries:function(){return[{query:tn}]}}),t=Object(ie.a)(e,2),n=t[0],a=t[1];return{registerEgress:n,error:a.error,loading:a.loading}}(),v=Object(Re.c)(),y=function(e){l(Object(je.a)(Object(je.a)({},s),{},Object(mt.a)({},e.target.name,e.target.value))),v(Object($e.b)(sn))},C=Object(X.useCallback)((function(){p((null===g||void 0===g?void 0:g.getCategorys)||[])}),[g]),S=function(){var e=Object(de.a)(ue.a.mark((function e(t){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!s.id){e.next=13;break}return e.prev=2,e.next=5,x.updateEgress({variables:{egressInput:Object(je.a)(Object(je.a)({},s),{},{units:Number(s.units),amount:Number(s.amount)})}});case 5:v(Object($e.b)({type:"success",text:"El egreso se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),v(Object($e.b)({type:"error",text:Object(ze.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,f.registerEgress({variables:{egressInput:Object(je.a)(Object(je.a)({},s),{},{units:Number(s.units),amount:Number(s.amount)})}});case 16:v(Object($e.b)({type:"success",text:"El egreso ha sido registrado correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),v(Object($e.b)({type:"error",text:Object(ze.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(X.useEffect)((function(){C()}),[C]),Object(Fe.jsx)("form",{onSubmit:S,children:Object(Fe.jsxs)(ht.a,{container:!0,spacing:3,children:[Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsx)(an.a,{id:"idCategory",value:s.category,onChange:function(e,t){l(Object(je.a)(Object(je.a)({},s),{},{category:(null===t||void 0===t?void 0:t.name)||""})),v(Object($e.b)(sn))},inputValue:j.category?j.category:s.category,onInputChange:function(e,t){b(Object(je.a)(Object(je.a)({},j),{},{category:t}))},options:h,getOptionLabel:function(e){return e.name?e.name:""},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){return Object(Fe.jsx)(pt.a,Object(je.a)(Object(je.a)({},e),{},{name:"category",label:"Categoria",variant:"outlined"}))}})}),Object(Fe.jsx)(ht.a,{item:!0,xs:4,children:Object(Fe.jsx)(pt.a,{fullWidth:!0,onChange:y,name:"units",autoComplete:"off",id:"idUnits",label:"Unidades",variant:"outlined",value:s.units})}),Object(Fe.jsx)(ht.a,{item:!0,xs:4,children:Object(Fe.jsx)(pt.a,{fullWidth:!0,onChange:y,name:"amount",autoComplete:"off",id:"idAmount",label:"Monto",variant:"outlined",value:s.amount,InputProps:{startAdornment:Object(Fe.jsx)(on.a,{position:"start",children:"S/"})}})}),Object(Fe.jsx)(ht.a,{item:!0,xs:4,children:Object(Fe.jsx)(pt.a,{fullWidth:!0,autoComplete:"off",id:"idTotal",label:"Total",variant:"outlined",value:s.units*s.amount,InputProps:{readOnly:!0,startAdornment:Object(Fe.jsx)(on.a,{position:"start",children:"S/"})}})}),Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsx)(pt.a,{fullWidth:!0,onChange:y,name:"detail",autoComplete:"off",id:"idDetail",multiline:!0,rows:3,label:"Detalle",variant:"outlined",value:s.detail})}),Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsx)(pt.a,{fullWidth:!0,onChange:y,name:"observation",autoComplete:"off",id:"idObservation",multiline:!0,rows:5,label:"Observaci\xf3n",variant:"outlined",value:s.observation})}),Object(Fe.jsxs)(xt.a,{style:{width:"100%"},children:[Object(Fe.jsx)(gt.a,{onClick:function(){return n()},color:"primary",children:"Cancelar"}),s.id?x.loading?Object(Fe.jsx)(ft.a,{}):Object(Fe.jsx)(gt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):f.loading?Object(Fe.jsx)(ft.a,{}):Object(Fe.jsx)(gt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})},dn={type:"",text:""},jn={name:"",active:!1},bn=function(e){var t=e.egres,n=Object(Re.d)((function(e){return e.authReducer.authUser})),a=Object(Re.d)((function(e){return e.page.user})),r=a.module,c=a.page,i=Object(Re.c)(),o=Object(X.useState)(jn),s=Object(ie.a)(o,2),l=s[0],u=s[1],d=function(){var e=Object(se.useMutation)(nn,{refetchQueries:function(){return[{query:tn}]}}),t=Object(ie.a)(e,2),n=t[0],a=t[1];return{deleteEgress:n,error:a.error,loading:a.loading}}(),j=function(){var e=Object(de.a)(ue.a.mark((function e(t){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.deleteEgress({variables:{id:t}});case 3:e.next=10;break;case 5:e.prev=5,e.t0=e.catch(0),u({name:"error",active:!0}),i(Object($e.b)({type:"error",text:Object(ze.a)(e.t0)})),l.active,l.name;case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){u(jn),i(Object($e.b)(dn))},O=function(){return Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsx)(Ve.a,{title:"Editar egreso",onClick:function(){return u({name:"Egreso",active:!0})},children:Object(Fe.jsx)(at.a,{"aria-label":"egress",size:"small",children:Object(Fe.jsx)(jt.a,{})})})})},m=function(){return Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsx)(Ve.a,{title:"Eliminar egreso",onClick:function(){return j(t.id)},children:Object(Fe.jsx)(at.a,{"aria-label":"egress",size:"small",children:Object(Fe.jsx)(en.a,{})})})})};return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(st,{open:l.active,dialog:t,title:l.name,component:function(e){switch(e){case"Egreso":return Object(Fe.jsx)(un,{egress:t,handleClose:b})}}(l.name),handleClose:b}),Ye(Pe.c,n,r,(function(){var e;return Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsxs)(We.a,{children:[Object(Fe.jsx)(Qe.a,{component:"th",scope:"row",style:{wordBreak:"break-all"},children:t.category.name}),Object(Fe.jsx)(Qe.a,{component:"th",scope:"row",style:{wordBreak:"break-all"},children:t.detail}),"RESUMEN-CAJA"===c||Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsx)(Qe.a,{component:"th",scope:"row",style:{wordBreak:"break-all"},children:t.observation})}),Object(Fe.jsx)(Qe.a,{component:"th",scope:"row",children:null===t||void 0===t||null===(e=t.user)||void 0===e?void 0:e.name}),Object(Fe.jsx)(Qe.a,{component:"th",scope:"row",align:"center",children:t.units}),Object(Fe.jsx)(Qe.a,{component:"th",scope:"row",align:"right",children:Xt(t.amount)}),Object(Fe.jsx)(Qe.a,{component:"th",scope:"row",align:"right",children:Xt(t.units*t.amount)}),"RESUMEN-CAJA"===c||"CONSULTAR-CAJA"===c?"":Object(Fe.jsx)(Qe.a,{component:"th",scope:"row",align:"right",children:Object(Fe.jsxs)(Fe.Fragment,{children:[Ye(Pe.f,n,r,O),Ye(Pe.e,n,r,m)]})})]})})}))]})},On=Object(X.createContext)({summaryIngress:{ingress:0},setSummaryIngress:function(e){},summaryEgress:{egress:0},setSummaryEgress:function(e){}}),mn=On.Provider,hn=(On.Consumer,{type:"",text:""}),pn={name:"",active:!1},gn=function(e){var t=e.checkMoney,n=e.resultEgress,a=Object(Re.d)((function(e){return e.authReducer.authUser})),r=Object(Re.d)((function(e){return e.page.user})),c=r.page,i=r.module,o=Object(X.useState)([]),s=Object(ie.a)(o,2),l=s[0],u=s[1],d=function(){var e=Object(se.useQuery)(tn);return{data:e.data,error:e.error,loading:e.loading}}(),j=d.data,b=d.loading,O=d.error,m=Object(X.useState)(pn),h=Object(ie.a)(m,2),p=h[0],g=h[1],x=Object(Re.c)(),f=Object(X.useContext)(On),v=f.summaryEgress,y=f.setSummaryEgress,C=function(){g(pn),x(Object($e.b)(hn))},S=l.map((function(e){return e.units*e.amount})).reduce((function(e,t){return e+t}),0);if(Object(X.useEffect)((function(){void 0===t?j&&u(j.getEgress):u(n),y(Object(je.a)(Object(je.a)({},v),{},{egress:S}))}),[j,y,S]),b)return Object(Fe.jsx)("h1",{children:"Cargando..."});if(O)return Object(Fe.jsx)("h1",{children:Object(ze.a)(O)});return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(st,{open:p.active,title:"".concat(p.name," Egreso"),component:function(e){switch(e){case"Crear":return Object(Fe.jsx)(un,{handleClose:C})}}(p.name),handleClose:C}),"RESUMEN-CAJA"===c||"CONSULTAR-CAJA"===c?"":Ye(Pe.d,a,i,(function(){return Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsx)(Ve.a,{title:"Crear Egreso",children:Object(Fe.jsx)(at.a,{"aria-label":"add",size:"small",onClick:function(){return g({name:"Crear",active:!0})},children:Object(Fe.jsx)(ut.a,{})})})})})),Object(Fe.jsx)(Le.a,{component:_e.a,style:{marginTop:"CONSULTAR-CAJA"===c?20:0},children:Object(Fe.jsxs)(Be.a,{size:"small","aria-label":"a dense table",children:[Object(Fe.jsxs)(Te.a,{children:[Object(Fe.jsxs)(We.a,{style:{background:"#dc3545"},children:[Object(Fe.jsx)(Qe.a,{style:{color:"#fff"},align:"center",colSpan:"RESUMEN-CAJA"===c?4:5,children:"CONSULTAR-CAJA"===c?"Egreso Total":"Ingreso de hoy"}),Object(Fe.jsx)(Qe.a,{style:{color:"#fff"},align:"center",colSpan:"RESUMEN-CAJA"===c?2:3,children:"Costo"})]}),Object(Fe.jsxs)(We.a,{children:[Object(Fe.jsx)(Qe.a,{children:"Categoria"}),Object(Fe.jsx)(Qe.a,{children:"Detalle"}),"RESUMEN-CAJA"===c||Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsx)(Qe.a,{children:"Observaci\xf3n"})}),Object(Fe.jsx)(Qe.a,{children:"Usuario"}),Object(Fe.jsx)(Qe.a,{align:"center",children:"Unidades"}),Object(Fe.jsx)(Qe.a,{align:"right",children:"Monto"}),Object(Fe.jsx)(Qe.a,{align:"right",children:"Monto total"}),"RESUMEN-CAJA"===c||"CONSULTAR-CAJA"===c?"":Object(Fe.jsx)(Qe.a,{align:"right",children:"Opciones"})]})]}),Object(Fe.jsxs)(Je.a,{children:[l.map((function(e){return Object(Fe.jsx)(bn,{egres:e},e.id)})),Object(Fe.jsxs)(We.a,{children:[Object(Fe.jsx)(Qe.a,{colSpan:"RESUMEN-CAJA"===c?4:5}),Object(Fe.jsx)(Qe.a,{children:Object(Fe.jsx)("strong",{children:"Total"})}),Object(Fe.jsx)(Qe.a,{align:"right",children:Object(Fe.jsx)("strong",{style:{color:"red"},children:Xt(S)})}),"RESUMEN-CAJA"===c||"CONSULTAR-CAJA"===c?"":Object(Fe.jsx)(Qe.a,{colSpan:3})]})]})]})})]})},xn=Object(se.gql)(m||(m=Object(oe.a)(["\n  query getIngress {\n    getIngress {\n      id\n      category {\n        name\n      }\n      user {\n        name\n      }\n      detail\n      observation\n      units\n      amount\n      createdAt\n      updatedAt\n    }\n  }\n"]))),fn=Object(se.gql)(h||(h=Object(oe.a)(["\n  mutation deleteIngress($id: String!) {\n    deleteIngress(id: $id)\n  }\n"]))),vn=Object(se.gql)(p||(p=Object(oe.a)(["\n  mutation updateIngress($ingressInput: UpdateIngressInput!) {\n    updateIngress(ingressInput: $ingressInput) {\n      id\n      category {\n        id\n        name\n      }\n      detail\n      observation\n      units\n      amount\n    }\n  }\n"]))),yn=Object(se.gql)(g||(g=Object(oe.a)(["\n  mutation registerIngress($ingressInput: CreateIngressInput!) {\n    registerIngress(ingressInput: $ingressInput) {\n      id\n      category {\n        id\n        name\n      }\n      detail\n      observation\n      units\n      amount\n    }\n  }\n"]))),Cn={type:"",text:""},Sn={category:""},kn=function(e){var t,n=e.handleClose,a=e.ingres,r={detail:"",amount:0,units:0,category:"",user:Object(Re.d)((function(e){return e.authReducer.authUser})).name},c={id:(null===a||void 0===a?void 0:a.id)||"",detail:(null===a||void 0===a?void 0:a.detail)||"",amount:(null===a||void 0===a?void 0:a.amount)||0,units:(null===a||void 0===a?void 0:a.units)||0,category:(null===a||void 0===a||null===(t=a.category)||void 0===t?void 0:t.name)||"",observation:(null===a||void 0===a?void 0:a.observation)||""},i=Object(X.useState)(c.id?c:r),o=Object(ie.a)(i,2),s=o[0],l=o[1],u=Object(X.useState)(Sn),d=Object(ie.a)(u,2),j=d[0],b=d[1],O=Object(X.useState)([]),m=Object(ie.a)(O,2),h=m[0],p=m[1],g=wt().data,x=function(){var e=Object(se.useMutation)(vn,{refetchQueries:function(){return[{query:xn}]}}),t=Object(ie.a)(e,2),n=t[0],a=t[1];return{updateIngress:n,error:a.error,loading:a.loading}}(),f=function(){var e=Object(se.useMutation)(yn,{refetchQueries:function(){return[{query:xn}]}}),t=Object(ie.a)(e,2),n=t[0],a=t[1];return{registerIngress:n,error:a.error,loading:a.loading}}(),v=Object(Re.c)(),y=function(e){l(Object(je.a)(Object(je.a)({},s),{},Object(mt.a)({},e.target.name,e.target.value))),v(Object($e.b)(Cn))},C=Object(X.useCallback)((function(){p((null===g||void 0===g?void 0:g.getCategorys)||[])}),[g]),S=function(){var e=Object(de.a)(ue.a.mark((function e(t){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!s.id){e.next=13;break}return e.prev=2,e.next=5,x.updateIngress({variables:{ingressInput:Object(je.a)(Object(je.a)({},s),{},{units:Number(s.units),amount:Number(s.amount)})}});case 5:v(Object($e.b)({type:"success",text:"El ingreso se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),v(Object($e.b)({type:"error",text:Object(ze.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,f.registerIngress({variables:{ingressInput:Object(je.a)(Object(je.a)({},s),{},{units:Number(s.units),amount:Number(s.amount)})}});case 16:v(Object($e.b)({type:"success",text:"El ingreso ha sido registrado correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),v(Object($e.b)({type:"error",text:Object(ze.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(X.useEffect)((function(){C()}),[C]),Object(Fe.jsx)("form",{onSubmit:S,children:Object(Fe.jsxs)(ht.a,{container:!0,spacing:3,children:[Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsx)(an.a,{id:"idCategory",value:s.category,onChange:function(e,t){l(Object(je.a)(Object(je.a)({},s),{},{category:(null===t||void 0===t?void 0:t.name)||""})),v(Object($e.b)(Cn))},inputValue:j.category?j.category:s.category,onInputChange:function(e,t){b(Object(je.a)(Object(je.a)({},j),{},{category:t}))},options:h,getOptionLabel:function(e){return e.name?e.name:""},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){return Object(Fe.jsx)(pt.a,Object(je.a)(Object(je.a)({},e),{},{name:"category",label:"Categoria",variant:"outlined"}))}})}),Object(Fe.jsx)(ht.a,{item:!0,xs:4,children:Object(Fe.jsx)(pt.a,{fullWidth:!0,onChange:y,name:"units",autoComplete:"off",id:"idUnits",label:"Unidades",variant:"outlined",value:s.units})}),Object(Fe.jsx)(ht.a,{item:!0,xs:4,children:Object(Fe.jsx)(pt.a,{fullWidth:!0,onChange:y,name:"amount",autoComplete:"off",id:"idAmount",label:"Monto",variant:"outlined",value:s.amount,InputProps:{startAdornment:Object(Fe.jsx)(on.a,{position:"start",children:"S/"})}})}),Object(Fe.jsx)(ht.a,{item:!0,xs:4,children:Object(Fe.jsx)(pt.a,{fullWidth:!0,autoComplete:"off",id:"idTotal",label:"Total",variant:"outlined",value:s.units*s.amount,InputProps:{readOnly:!0,startAdornment:Object(Fe.jsx)(on.a,{position:"start",children:"S/"})}})}),Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsx)(pt.a,{fullWidth:!0,onChange:y,name:"detail",autoComplete:"off",id:"idDetail",multiline:!0,rows:3,label:"Detalle",variant:"outlined",value:s.detail})}),Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsx)(pt.a,{fullWidth:!0,onChange:y,name:"observation",autoComplete:"off",id:"idObservation",multiline:!0,rows:5,label:"Observaci\xf3n",variant:"outlined",value:s.observation})}),Object(Fe.jsxs)(xt.a,{style:{width:"100%"},children:[Object(Fe.jsx)(gt.a,{onClick:function(){return n()},color:"primary",children:"Cancelar"}),s.id?x.loading?Object(Fe.jsx)(ft.a,{}):Object(Fe.jsx)(gt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):f.loading?Object(Fe.jsx)(ft.a,{}):Object(Fe.jsx)(gt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})},wn={type:"",text:""},In={name:"",active:!1},An=Object(Ht.a)((function(e){return{row:{width:700,backgroundColor:"grey"},cell_long:{fontSize:"10px",width:150,minWidth:1,backgroundColor:"#ee82ee"},cell_default:{fontSize:"10px",width:200,minWidth:1,backgroundColor:"#ee82ee"},cell_short:{fontSize:"10px",width:80,backgroundColor:"yellow"}}})),Mn=function(e){var t=e.ingres,n=(An(),Object(Re.d)((function(e){return e.authReducer.authUser}))),a=Object(Re.d)((function(e){return e.page.user})),r=a.module,c=a.page,i=Object(Re.c)(),o=Object(X.useState)(In),s=Object(ie.a)(o,2),l=s[0],u=s[1],d=function(){var e=Object(se.useMutation)(fn,{refetchQueries:function(){return[{query:xn}]}}),t=Object(ie.a)(e,2),n=t[0],a=t[1];return{deleteIngress:n,error:a.error,loading:a.loading}}(),j=function(){var e=Object(de.a)(ue.a.mark((function e(t){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.deleteIngress({variables:{id:t}});case 3:e.next=10;break;case 5:e.prev=5,e.t0=e.catch(0),u({name:"error",active:!0}),i(Object($e.b)({type:"error",text:Object(ze.a)(e.t0)})),l.active,l.name;case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){u(In),i(Object($e.b)(wn))},O=function(){return Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsx)(Ve.a,{title:"Editar ingreso",onClick:function(){return u({name:"Ingreso",active:!0})},children:Object(Fe.jsx)(at.a,{"aria-label":"egress",size:"small",children:Object(Fe.jsx)(jt.a,{})})})})},m=function(){return Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsx)(Ve.a,{title:"Eliminar ingreso",onClick:function(){return j(t.id)},children:Object(Fe.jsx)(at.a,{"aria-label":"egress",size:"small",children:Object(Fe.jsx)(en.a,{})})})})};return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(st,{open:l.active,dialog:t,title:l.name,component:function(e){switch(e){case"Ingreso":return Object(Fe.jsx)(kn,{ingres:t,handleClose:b})}}(l.name),handleClose:b}),Ye(Pe.c,n,r,(function(){var e;return Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsxs)(We.a,{children:[Object(Fe.jsx)(Qe.a,{component:"th",scope:"row",style:{wordBreak:"break-all"},children:t.category.name}),Object(Fe.jsx)(Qe.a,{component:"th",scope:"row",style:{wordBreak:"break-all"},children:t.detail}),"RESUMEN-CAJA"===c||Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsx)(Qe.a,{component:"th",scope:"row",style:{wordBreak:"break-all"},children:t.observation})}),Object(Fe.jsx)(Qe.a,{component:"th",scope:"row",children:null===t||void 0===t||null===(e=t.user)||void 0===e?void 0:e.name}),Object(Fe.jsx)(Qe.a,{component:"th",scope:"row",align:"center",children:t.units}),Object(Fe.jsx)(Qe.a,{component:"th",scope:"row",align:"right",children:Xt(t.amount)}),Object(Fe.jsx)(Qe.a,{component:"th",scope:"row",align:"right",children:Xt(t.units*t.amount)}),"RESUMEN-CAJA"===c||"CONSULTAR-CAJA"===c?"":Object(Fe.jsx)(Qe.a,{component:"th",scope:"row",align:"right",children:Object(Fe.jsxs)(Fe.Fragment,{children:[Ye(Pe.f,n,r,O),Ye(Pe.e,n,r,m)]})})]})})}))]})},En={type:"",text:""},Rn={name:"",active:!1},Nn=function(e){var t=e.checkMoney,n=e.resultIngress,a=Object(Re.d)((function(e){return e.authReducer.authUser})),r=Object(Re.d)((function(e){return e.page.user})),c=r.module,i=r.page,o=Object(X.useState)([]),s=Object(ie.a)(o,2),l=s[0],u=s[1],d=function(){var e=Object(se.useQuery)(xn);return{data:e.data,error:e.error,loading:e.loading}}(),j=d.data,b=d.loading,O=d.error,m=Object(X.useState)(Rn),h=Object(ie.a)(m,2),p=h[0],g=h[1],x=Object(Re.c)(),f=Object(X.useContext)(On),v=f.summaryIngress,y=f.setSummaryIngress,C=function(){g(Rn),x(Object($e.b)(En))},S=l.map((function(e){return e.units*e.amount})).reduce((function(e,t){return e+t}),0);if(Object(X.useEffect)((function(){void 0===t?j&&u(j.getIngress):u(n),y(Object(je.a)(Object(je.a)({},v),{},{ingress:S}))}),[j,y,S]),b)return Object(Fe.jsx)("h1",{children:"Cargando..."});if(O)return Object(Fe.jsx)("h1",{children:Object(ze.a)(O)});return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(st,{open:p.active,title:"".concat(p.name," Ingreso"),component:function(e){switch(e){case"Crear":return Object(Fe.jsx)(kn,{handleClose:C})}}(p.name),handleClose:C}),"RESUMEN-CAJA"===i||"CONSULTAR-CAJA"===i?"":Ye(Pe.d,a,c,(function(){return Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsx)(Ve.a,{title:"Crear Ingreso",children:Object(Fe.jsx)(at.a,{"aria-label":"add",size:"small",onClick:function(){return g({name:"Crear",active:!0})},children:Object(Fe.jsx)(ut.a,{})})})})})),Object(Fe.jsx)(Le.a,{component:_e.a,style:{marginTop:"CONSULTAR-CAJA"===i?20:0},children:Object(Fe.jsxs)(Be.a,{size:"small","aria-label":"a dense table",children:[Object(Fe.jsxs)(Te.a,{children:[Object(Fe.jsxs)(We.a,{style:{background:"#28a745"},children:[Object(Fe.jsx)(Qe.a,{style:{color:"#fff"},align:"center",colSpan:"RESUMEN-CAJA"===i?4:5,children:"CONSULTAR-CAJA"===i?"Ingreso Total":"Ingreso de hoy"}),Object(Fe.jsx)(Qe.a,{style:{color:"#fff"},align:"center",colSpan:"RESUMEN-CAJA"===i?2:4,children:"Costo"})]}),Object(Fe.jsxs)(We.a,{children:[Object(Fe.jsx)(Qe.a,{children:"Categoria"}),Object(Fe.jsx)(Qe.a,{children:"Detalle"}),"RESUMEN-CAJA"===i||Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsx)(Qe.a,{children:"Observaci\xf3n"})}),Object(Fe.jsx)(Qe.a,{children:"Usuario"}),Object(Fe.jsx)(Qe.a,{align:"center",children:"Unidades"}),Object(Fe.jsx)(Qe.a,{align:"right",children:"Monto"}),Object(Fe.jsx)(Qe.a,{align:"right",children:"Monto total"}),"RESUMEN-CAJA"===i||"CONSULTAR-CAJA"===i?"":Object(Fe.jsx)(Qe.a,{align:"right",children:"Opciones"})]})]}),Object(Fe.jsxs)(Je.a,{children:[l.map((function(e){return Object(Fe.jsx)(Mn,{ingres:e},e.id)})),Object(Fe.jsxs)(We.a,{children:[Object(Fe.jsx)(Qe.a,{colSpan:"RESUMEN-CAJA"===i?4:5}),Object(Fe.jsx)(Qe.a,{children:Object(Fe.jsx)("strong",{children:"Total"})}),Object(Fe.jsx)(Qe.a,{align:"right",children:Object(Fe.jsx)("strong",{style:{color:"green"},children:Xt(S)})}),"RESUMEN-CAJA"===i||"CONSULTAR-CAJA"===i?"":Object(Fe.jsx)(Qe.a,{colSpan:3})]})]})]})})]})},Fn=(n(224),function(e){var t=e.checkMoney,n=e.resultIngress,a=e.resultEgress,r=Object(X.useState)({ingress:0}),c=Object(ie.a)(r,2),i=c[0],o=c[1],s=Object(X.useState)({egress:0}),l=Object(ie.a)(s,2),u=l[0],d=l[1];return Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsxs)(mn,{value:{summaryIngress:i,setSummaryIngress:o,summaryEgress:u,setSummaryEgress:d},children:[Object(Fe.jsxs)("div",{className:"content-tables-i-e",children:[Object(Fe.jsx)("div",{className:"card-table",style:{marginRight:"4%"},children:Object(Fe.jsx)(Nn,{checkMoney:t,resultIngress:n,resultEgress:a})}),Object(Fe.jsx)("div",{className:"card-table",children:Object(Fe.jsx)(gn,{checkMoney:t,resultIngress:n,resultEgress:a})})]}),Object(Fe.jsx)("div",{style:{marginTop:20},children:Object(Fe.jsx)(Le.a,{component:_e.a,children:Object(Fe.jsx)(Be.a,{size:"small","aria-label":"a dense table",children:Object(Fe.jsx)(Je.a,{children:Object(Fe.jsxs)(We.a,{children:[Object(Fe.jsx)(Qe.a,{children:Object(Fe.jsx)("strong",{children:"Resumen total"})}),Object(Fe.jsx)(Qe.a,{align:"right",children:Object(Fe.jsx)("strong",{style:i.ingress-u.egress<0?{color:"red"}:{color:"green"},children:i.ingress-u.egress<0?Xt(i.ingress-u.egress):"+".concat(Xt(i.ingress-u.egress))})})]})})})})})]})})}),Un=Object(se.gql)(x||(x=Object(oe.a)(["\n  query getEgressByDates($start: String!, $end: String!) {\n    getEgressByDates(start: $start, end: $end) {\n      id\n      detail\n      observation\n      units\n      amount\n      createdAt\n      updatedAt\n      category {\n        name\n      }\n      user {\n        name\n      }\n    }\n  }\n"]))),Dn=Object(se.gql)(f||(f=Object(oe.a)(["\n  query getIngressByDates($start: String!, $end: String!) {\n    getIngressByDates(start: $start, end: $end) {\n      id\n      detail\n      observation\n      units\n      amount\n      createdAt\n      updatedAt\n      category {\n        name\n      }\n      user {\n        name\n      }\n    }\n  }\n"]))),qn=function(){var e=Ot()().utc().local().format("YYYY-MM-DD"),t=Object(Re.d)((function(e){return e.authReducer.authUser})),n=Object(Re.d)((function(e){return e.page.user})),a=n.module,r=(n.page,function(){var e=Object(se.useLazyQuery)(Dn),t=Object(ie.a)(e,2),n=t[0],a=t[1],r=a.error,c=a.loading;return{getIngressByDates:n,data:a.data,error:r,loading:c}}()),c=function(){var e=Object(se.useLazyQuery)(Un),t=Object(ie.a)(e,2),n=t[0],a=t[1],r=a.error,c=a.loading;return{getEgressByDates:n,data:a.data,error:r,loading:c}}(),i={dateStart:e,dateEnd:e},o=Object(X.useState)(i),s=Object(ie.a)(o,2),l=s[0],u=s[1],d=Object(X.useState)([]),j=Object(ie.a)(d,2),b=j[0],O=j[1],m=Object(X.useState)([]),h=Object(ie.a)(m,2),p=h[0],g=h[1],x=function(e){u(Object(je.a)(Object(je.a)({},l),{},Object(mt.a)({},e.target.name,e.target.value)))},f=function(){var e=Object(de.a)(ue.a.mark((function e(t,n){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.getIngressByDates({variables:{start:t,end:n}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(de.a)(ue.a.mark((function e(t,n){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.getEgressByDates({variables:{start:t,end:n}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}();Object(X.useEffect)((function(){var e,t;r.data&&O((null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.getIngressByDates)||[]);c.data&&g((null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.getEgressByDates)||[])}),[r.data,c.data]);return Object(Fe.jsx)(Fe.Fragment,{children:Ye(Pe.c,t,a,(function(){return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsxs)(ht.a,{container:!0,spacing:3,children:[Object(Fe.jsx)(ht.a,{item:!0,xs:3,children:Object(Fe.jsx)(Kt,{fullWidth:!0,type:"date",onChange:x,name:"dateStart",autoComplete:"off",id:"idStart",label:"Desde",variant:"filled",value:l.dateStart})}),Object(Fe.jsx)(ht.a,{item:!0,xs:3,children:Object(Fe.jsx)(Kt,{fullWidth:!0,type:"date",onChange:x,name:"dateEnd",autoComplete:"off",id:"idEnd",label:"Hasta",variant:"filled",value:l.dateEnd})}),Object(Fe.jsx)(ht.a,{item:!0,xs:3,style:{display:"flex",alignItems:"center"},children:Object(Fe.jsx)(gt.a,{onClick:function(){return f(l.dateStart,l.dateEnd)&&v(l.dateStart,l.dateEnd)},variant:"contained",size:"large",color:"primary",children:"Consultar"})})]}),Object(Fe.jsx)(Fn,{checkMoney:l,resultIngress:b,resultEgress:p})]})}))})},zn=Object(se.gql)(v||(v=Object(oe.a)(["\n  query getBrandsByCategory($category: String!) {\n    getBrandsByCategory(category: $category) {\n      id\n      name\n    }\n  }\n"]))),Pn=function(e){var t=Object(se.useQuery)(zn,{variables:{category:e}}),n=t.error,a=t.loading;return{data:t.data,error:n,loading:a}},Yn=Object(se.gql)(y||(y=Object(oe.a)(["\n  query getModelsByBrand($brand: String!) {\n    getModelsByBrand(brand: $brand) {\n      id\n      name\n    }\n  }\n"]))),$n=function(e){var t=Object(se.useQuery)(Yn,{variables:{brand:e}}),n=t.error,a=t.loading;return{data:t.data,error:n,loading:a}},Bn=Object(se.gql)(C||(C=Object(oe.a)(["\n  query getProductsByCategoryBrandModel(\n    $category: String!\n    $brand: String!\n    $model: String!\n  ) {\n    getProductsByCategoryBrandModel(\n      category: $category\n      brand: $brand\n      model: $model\n    ) {\n      id\n      name\n    }\n  }\n"]))),Ln=Object(se.gql)(S||(S=Object(oe.a)(["\n  query getProductByName($product: String!) {\n    getProductByName(product: $product) {\n      id\n      name\n      description\n      price\n      createdAt\n      updatedAt\n    }\n  }\n"]))),Tn=n(309),Wn=n(317),Qn=n(304),Jn=Object(se.gql)(k||(k=Object(oe.a)(["\n  query getServicesByCategory($category: String!) {\n    getServicesByCategory(category: $category) {\n      id\n      name\n      description\n      price\n    }\n  }\n"]))),_n=Object(se.gql)(w||(w=Object(oe.a)(["\n  query getServiceByName($service: String!) {\n    getServiceByName(service: $service) {\n      id\n      name\n      description\n      price\n      createdAt\n      updatedAt\n    }\n  }\n"]))),Vn={category:"",brand:"",model:"",product:"",service:""},Hn={category:"",brand:"",model:"",product:"",service:""},Gn={product:!0,service:!1},Kn=function(){Object(Re.d)((function(e){return e.authReducer.authUser}));var e=Object(Re.d)((function(e){return e.page.user})),t=(e.module,e.page,Object(X.useState)(Hn)),n=Object(ie.a)(t,2),a=n[0],r=n[1],c=Object(X.useState)(Vn),i=Object(ie.a)(c,2),o=i[0],s=i[1],l=Object(X.useState)([]),u=Object(ie.a)(l,2),d=u[0],j=u[1],b=Object(X.useState)([]),O=Object(ie.a)(b,2),m=O[0],h=O[1],p=Object(X.useState)([]),g=Object(ie.a)(p,2),x=g[0],f=g[1],v=Object(X.useState)([]),y=Object(ie.a)(v,2),C=y[0],S=y[1],k=Object(X.useState)([]),w=Object(ie.a)(k,2),I=w[0],A=w[1],M=Object(X.useState)(Gn),E=Object(ie.a)(M,2),R=E[0],N=E[1],F=wt().data,U=Pn(a.category||""),D=function(e){var t=Object(se.useQuery)(Jn,{variables:{category:e}}),n=t.error,a=t.loading;return{data:t.data,error:n,loading:a}}(a.category||""),q=$n(a.brand||""),z=function(e,t,n){var a=Object(se.useQuery)(Bn,{variables:{category:e,brand:t,model:n}}),r=a.error,c=a.loading;return{data:a.data,error:r,loading:c}}(a.category||"",a.brand||"",a.model||""),P=function(){var e=Object(se.useLazyQuery)(Ln),t=Object(ie.a)(e,2),n=t[0],a=t[1],r=a.error,c=a.loading;return{getProductByName:n,data:a.data,error:r,loading:c}}(),Y=function(){var e=Object(se.useLazyQuery)(_n),t=Object(ie.a)(e,2),n=t[0],a=t[1],r=a.error,c=a.loading;return{getServiceByName:n,data:a.data,error:r,loading:c}}(),$=Object(X.useCallback)((function(){j((null===F||void 0===F?void 0:F.getCategorys)||[])}),[F]),B=Object(X.useCallback)((function(){var e;h((null===U||void 0===U||null===(e=U.data)||void 0===e?void 0:e.getBrandsByCategory)||[])}),[U]),L=Object(X.useCallback)((function(){var e;A((null===D||void 0===D||null===(e=D.data)||void 0===e?void 0:e.getServicesByCategory)||[])}),[D]),T=Object(X.useCallback)((function(){var e;f((null===q||void 0===q||null===(e=q.data)||void 0===e?void 0:e.getModelsByBrand)||[])}),[q]),W=Object(X.useCallback)((function(){var e;S((null===z||void 0===z||null===(e=z.data)||void 0===e?void 0:e.getProductsByCategoryBrandModel)||[])}),[z]),Q=function(){var e=Object(de.a)(ue.a.mark((function e(t){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.getProductByName({variables:{product:t}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(de.a)(ue.a.mark((function e(t){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.getServiceByName({variables:{service:t}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}();return Object(X.useEffect)((function(){$(),B(),T(),W(),L()}),[$,B,T,W,L]),Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsxs)("div",{style:{background:"#fff",borderRadius:6,border:"1px solid #e2e2e1"},children:[Object(Fe.jsx)("div",{style:{margin:"20px 20px 0px 20px"},children:Object(Fe.jsxs)(Wn.a,{row:!0,"aria-label":"position",onChange:function(e){"product"===e.target.name?N({product:R.service,service:!R.service}):N({product:!R.product,service:R.product})},children:[Object(Fe.jsx)(Qn.a,{value:"product",checked:R.product,control:Object(Fe.jsx)(Tn.a,{color:"primary",name:"product"}),label:"Producto"}),Object(Fe.jsx)(Qn.a,{value:"service",checked:R.service,control:Object(Fe.jsx)(Tn.a,{color:"primary",name:"service"}),label:"Servicio"})]})}),Object(Fe.jsxs)("div",{style:{display:"flex",padding:20},children:[Object(Fe.jsx)("div",{style:{width:"50%"},children:Object(Fe.jsxs)(ht.a,{container:!0,spacing:3,style:{display:"flex",flexDirection:"column"},children:[Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsx)(an.a,{id:"idCategory",onChange:function(e,t){r(Object(je.a)(Object(je.a)({},a),{},{category:(null===t||void 0===t?void 0:t.name)||"",brand:"",model:"",product:""})),s(Object(je.a)(Object(je.a)({},o),{},{brand:"",model:""}))},onInputChange:function(e,t){s(Object(je.a)(Object(je.a)({},o),{},{category:t}))},options:d,getOptionLabel:function(e){return e.name},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){return Object(Fe.jsx)(pt.a,Object(je.a)(Object(je.a)({},e),{},{name:"category",label:"Categoria",variant:"outlined"}))}})}),R.product?Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsx)(an.a,{id:"idBrand",onChange:function(e,t){r(Object(je.a)(Object(je.a)({},a),{},{brand:(null===t||void 0===t?void 0:t.name)||"",model:"",product:""})),s(Object(je.a)(Object(je.a)({},o),{},{model:"",product:""}))},onInputChange:function(e,t){s(Object(je.a)(Object(je.a)({},o),{},{brand:t}))},options:m,getOptionLabel:function(e){return e.name},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){return Object(Fe.jsx)(pt.a,Object(je.a)(Object(je.a)({},e),{},{name:"brand",label:"Marca",variant:"outlined"}))}})}),Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsx)(an.a,{id:"idModel",onChange:function(e,t){r(Object(je.a)(Object(je.a)({},a),{},{model:(null===t||void 0===t?void 0:t.name)||"",product:""})),s(Object(je.a)(Object(je.a)({},o),{},{product:""}))},onInputChange:function(e,t){s(Object(je.a)(Object(je.a)({},o),{},{model:t}))},options:x,getOptionLabel:function(e){return e.name},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){return Object(Fe.jsx)(pt.a,Object(je.a)(Object(je.a)({},e),{},{name:"model",label:"Modelo",variant:"outlined"}))}})}),Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsx)(an.a,{id:"idProduct",onChange:function(e,t){r(Object(je.a)(Object(je.a)({},a),{},{product:(null===t||void 0===t?void 0:t.name)||""}))},onInputChange:function(e,t){s(Object(je.a)(Object(je.a)({},o),{},{product:t}))},options:C,getOptionLabel:function(e){return e.name},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){return Object(Fe.jsx)(pt.a,Object(je.a)(Object(je.a)({},e),{},{name:"product",label:"Productos",variant:"outlined"}))}})})]}):Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsx)(an.a,{id:"idService",onChange:function(e,t){r(Object(je.a)(Object(je.a)({},a),{},{service:(null===t||void 0===t?void 0:t.name)||""}))},onInputChange:function(e,t){s(Object(je.a)(Object(je.a)({},o),{},{service:t}))},options:I,getOptionLabel:function(e){return e.name},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){return Object(Fe.jsx)(pt.a,Object(je.a)(Object(je.a)({},e),{},{name:"service",label:"Servicios",variant:"outlined"}))}})}),R.product?Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:P.loading?Object(Fe.jsx)(ft.a,{}):Object(Fe.jsx)(gt.a,{fullWidth:!0,type:"button",onClick:function(){return Q(o.product)},color:"primary",variant:"contained",children:"Consultar"})}):Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Y.loading?Object(Fe.jsx)(ft.a,{}):Object(Fe.jsx)(gt.a,{fullWidth:!0,type:"button",onClick:function(){return J(o.service)},color:"primary",variant:"contained",children:"Consultar"})})]})}),Object(Fe.jsxs)("div",{style:{width:"50%",padding:"0px 0px 0px 20px",display:"flex",flexDirection:"column"},children:[Object(Fe.jsxs)("div",{style:{height:"80%",display:"flex",flexDirection:"column"},children:[Object(Fe.jsx)("div",{style:{height:"10%",display:"flex",justifyContent:"center",background:P.data||Y.data?"yellow":"#fff"},children:Object(Fe.jsx)("strong",{children:R.product?P.data&&"Descripci\xf3n del producto ".concat(P.data.getProductByName.name):Y.data&&"Descripci\xf3n del servicio ".concat(Y.data.getServiceByName.name)})}),Object(Fe.jsx)("div",{style:{height:"90%",display:"flex",justifyContent:"center",wordBreak:"break-all",fontSize:"15px",alignItems:"center"},children:R.product?P.data&&P.data.getProductByName.description:Y.data&&Y.data.getServiceByName.description})]}),Object(Fe.jsx)("div",{style:{height:"20%",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(Fe.jsx)("label",{style:{fontSize:75},children:R.product?P.data&&Xt(P.data.getProductByName.price):Y.data&&Xt(Y.data.getServiceByName.price)})})]})]})]})})},Xn=Object(se.gql)(I||(I=Object(oe.a)(["\n  query getModels {\n    getModels {\n      id\n      name\n      brand {\n        id\n        name\n      }\n    }\n  }\n"]))),Zn=Object(se.gql)(A||(A=Object(oe.a)(["\n  mutation updateModel($modelInput: UpdateModelInput!) {\n    updateModel(modelInput: $modelInput) {\n      id\n      name\n    }\n  }\n"]))),ea=Object(se.gql)(M||(M=Object(oe.a)(["\n  mutation registerModel($modelInput: CreateModelInput!) {\n    registerModel(modelInput: $modelInput) {\n      id\n      name\n      brand {\n        id\n        name\n      }\n    }\n  }\n"]))),ta={type:"",text:""},na=function(e){var t,n=e.handleClose,a=e.model,r={id:(null===a||void 0===a?void 0:a.id)||"",name:(null===a||void 0===a?void 0:a.name)||"",brand:(null===a||void 0===a||null===(t=a.brand)||void 0===t?void 0:t.name)||""},c=Object(X.useState)(r.id?r:{name:"",brand:""}),i=Object(ie.a)(c,2),o=i[0],s=i[1],l=Object(X.useState)([]),u=Object(ie.a)(l,2),d=u[0],j=u[1],b=At().data,O=Object(Re.c)(),m=function(){var e=Object(se.useMutation)(Zn,{refetchQueries:function(){return[{query:Xn}]}}),t=Object(ie.a)(e,2),n=t[0],a=t[1];return{updateModel:n,error:a.error,loading:a.loading}}(),h=function(){var e=Object(se.useMutation)(ea,{refetchQueries:function(){return[{query:Xn}]}}),t=Object(ie.a)(e,2),n=t[0],a=t[1];return{registerModel:n,error:a.error,loading:a.loading}}(),p=function(){var e=Object(de.a)(ue.a.mark((function e(t){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!o.id){e.next=13;break}return e.prev=2,e.next=5,m.updateModel({variables:{modelInput:o}});case 5:O(Object($e.b)({type:"success",text:"El modelo se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),O(Object($e.b)({type:"error",text:Object(ze.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,h.registerModel({variables:{modelInput:o}});case 16:O(Object($e.b)({type:"success",text:"El modelo ha sido registrado correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),O(Object($e.b)({type:"error",text:Object(ze.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(X.useEffect)((function(){b&&j(b.getBrands)}),[b]),Object(Fe.jsx)("form",{onSubmit:p,children:Object(Fe.jsxs)(ht.a,{container:!0,spacing:3,children:[Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsxs)(vt.a,{variant:"outlined",fullWidth:!0,children:[Object(Fe.jsx)(yt.a,{id:"idMarca",children:"Marca"}),Object(Fe.jsx)(St.a,{labelId:"Marca",id:"idMarca",value:o.brand,onChange:function(e){s(Object(je.a)(Object(je.a)({},o),{},Object(mt.a)({},e.target.name,e.target.value))),O(Object($e.b)(ta))},label:"Marca",name:"brand",children:d.map((function(e){return Object(Fe.jsx)(Ct.a,{value:e.name,children:e.name},e.id)}))})]})}),Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsx)(pt.a,{fullWidth:!0,onChange:function(e){s(Object(je.a)(Object(je.a)({},o),{},Object(mt.a)({},e.target.name,e.target.value))),O(Object($e.b)(ta))},name:"name",autoComplete:"off",id:"idName",label:"Modelo",variant:"outlined",value:o.name})}),Object(Fe.jsxs)(xt.a,{style:{width:"100%"},children:[Object(Fe.jsx)(gt.a,{onClick:function(){return n()},color:"primary",children:"Cancelar"}),o.id?m.loading?Object(Fe.jsx)(ft.a,{}):Object(Fe.jsx)(gt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):h.loading?Object(Fe.jsx)(ft.a,{}):Object(Fe.jsx)(gt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})},aa={type:"",text:""},ra={name:"",active:!1},ca=function(e){var t=e.model,n=Object(Re.d)((function(e){return e.authReducer.authUser})),a=Object(Re.d)((function(e){return e.page.user.module})),r=Object(X.useState)(ra),c=Object(ie.a)(r,2),i=c[0],o=c[1],s=Object(Re.c)(),l=function(){o(ra),s(Object($e.b)(aa))},u=function(e){switch(e){case"Modelo":return Object(Fe.jsx)(na,{model:t,handleClose:l})}},d=function(){return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(st,{open:i.active,dialog:t,title:i.name,component:u(i.name),handleClose:l}),Object(Fe.jsx)(Qe.a,{align:"right",children:Object(Fe.jsx)(Ve.a,{title:"Editar Modelo",onClick:function(){return o({name:"Modelo",active:!0})},children:Object(Fe.jsx)(at.a,{"aria-label":"role",size:"small",children:Object(Fe.jsx)(jt.a,{})})})})]})};return Object(Fe.jsx)(Fe.Fragment,{children:Ye(Pe.c,n,a,(function(){var e;return Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsxs)(We.a,{children:[Object(Fe.jsx)(Qe.a,{component:"th",scope:"row",children:null===(e=t.brand)||void 0===e?void 0:e.name}),Object(Fe.jsx)(Qe.a,{component:"th",scope:"row",children:t.name}),Object(Fe.jsx)(Qe.a,{children:Ot()(t.createdAt).format("DD/MM/YYYY")}),Object(Fe.jsx)(Qe.a,{children:Ot()(t.updatedAt).format("DD/MM/YYYY")}),Ye(Pe.f,n,a,d)]})})}))})},ia={type:"",text:""},oa={name:"",active:!1},sa=function(){var e=Object(Re.d)((function(e){return e.authReducer.authUser})),t=Object(Re.d)((function(e){return e.page.user.module})),n=Object(X.useState)(oa),a=Object(ie.a)(n,2),r=a[0],c=a[1],i=Object(Re.c)(),o=function(){var e=Object(se.useQuery)(Xn);return{data:e.data,error:e.error,loading:e.loading}}(),s=o.data,l=o.loading,u=o.error,d=Object(X.useState)([]),j=Object(ie.a)(d,2),b=j[0],O=j[1],m=function(){c(oa),i(Object($e.b)(ia))},h=function(e){switch(e){case"Crear":return Object(Fe.jsx)(na,{handleClose:m})}};if(Object(X.useEffect)((function(){s&&O(s.getModels)}),[s]),l)return Object(Fe.jsx)("h1",{children:"Cargando..."});if(u)return Object(Fe.jsx)("h1",{children:Object(ze.a)(u)});return Object(Fe.jsxs)(Fe.Fragment,{children:[Ye(Pe.d,e,t,(function(){return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(st,{open:r.active,title:"".concat(r.name," Modelo"),component:h(r.name),handleClose:m}),Object(Fe.jsx)(Ve.a,{title:"Crear Modelo",children:Object(Fe.jsx)(at.a,{"aria-label":"add",size:"small",onClick:function(){return c({name:"Crear",active:!0})},children:Object(Fe.jsx)(ut.a,{})})})]})})),Object(Fe.jsx)(Le.a,{component:_e.a,style:{marginTop:10},children:Object(Fe.jsxs)(Be.a,{size:"small","aria-label":"a dense table",children:[Object(Fe.jsx)(Te.a,{children:Object(Fe.jsxs)(We.a,{children:[Object(Fe.jsx)(Qe.a,{children:"Marca"}),Object(Fe.jsx)(Qe.a,{children:"Modelo"}),Object(Fe.jsx)(Qe.a,{children:"Fecha creada"}),Object(Fe.jsx)(Qe.a,{children:"Fecha modificada"}),Ye(Pe.f,e,t,(function(){return Object(Fe.jsx)(Qe.a,{align:"right",children:"Opciones"})}))]})}),Object(Fe.jsx)(Je.a,{children:b.map((function(e){return Object(Fe.jsx)(ca,{model:e},e.id)}))})]})})]})},la=n(76),ua=n(318),da=function(e){var t=e.menu;return Object(Fe.jsxs)(Fe.Fragment,{children:[t.name===Pe.a?Object(Fe.jsx)(ua.a,{style:{margin:"3px"},size:"small",label:t.name,color:"primary"}):Object(Fe.jsx)(ua.a,{style:{margin:"3px"},size:"small",label:t.name,onDelete:function(){return alert("keiner")},color:"primary"}),"\xa0"]})},ja=function(e){var t=e.access;return Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsx)(ua.a,{style:{margin:"3px"},size:"small",label:t.name,onDelete:function(){return alert("keiner")},color:"primary"})})},ba=n(150),Oa=n.n(ba),ma=n(182),ha=n.n(ma),pa=Object(se.gql)(E||(E=Object(oe.a)(["\n  mutation updateModule($moduleInput: UpdateModuleInput!) {\n    updateModule(moduleInput: $moduleInput) {\n      id\n      name\n      description\n      menus {\n        id\n        name\n      }\n      access {\n        id\n        name\n      }\n    }\n  }\n"]))),ga=function(){var e=Object(se.useMutation)(pa,{refetchQueries:function(){return[{query:la.a}]}}),t=Object(ie.a)(e,2),n=t[0],a=t[1];return{updateModule:n,error:a.error,loading:a.loading}},xa=n(292),fa=Object(se.gql)(R||(R=Object(oe.a)(["\n  mutation registerModule($moduleInput: CreateModuleInput!) {\n    registerModule(moduleInput: $moduleInput) {\n      id\n      name\n      description\n      createdAt\n      updatedAt\n      menus {\n        id\n        name\n      }\n      access {\n        id\n        name\n      }\n    }\n  }\n"]))),va=Object(se.gql)(N||(N=Object(oe.a)(["\n  query getAccess {\n    getAccess {\n      id\n      name\n    }\n  }\n"]))),ya=function(){var e=Object(se.useQuery)(va),t=e.data,n=e.error,a=e.loading,r=Object(Re.c)();return n&&r(Object($e.b)({type:"error",text:n.message})),{data:t,error:n,loading:a}},Ca=Object(se.gql)(F||(F=Object(oe.a)(["\n  query getMenus {\n    getMenus {\n      id\n      name\n      link\n      createdAt\n      updatedAt\n    }\n  }\n"]))),Sa=function(){var e=Object(se.useQuery)(Ca),t=e.data,n=e.error,a=e.loading,r=Object(Re.c)();return n&&r(Object($e.b)({type:"error",text:n.message})),{data:t,error:n,loading:a}},ka=Object(Ht.a)((function(e){return Object(He.a)({formControl:{margin:e.spacing(1),minWidth:120,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}})})),wa={PaperProps:{style:{maxHeight:224,width:250}}},Ia=function(e){var t=e.module,n=e.handleClose,a={id:(null===t||void 0===t?void 0:t.id)||"",name:(null===t||void 0===t?void 0:t.name)||"",description:(null===t||void 0===t?void 0:t.description)||""},r=ga(),c=function(){var e=Object(se.useMutation)(fa,{refetchQueries:function(){return[{query:la.a}]}}),t=Object(ie.a)(e,2),n=t[0],a=t[1];return{registerModule:n,error:a.error,loading:a.loading}}(),i=ya(),o=Sa(),s=Object(X.useState)([]),l=Object(ie.a)(s,2),u=l[0],d=l[1],j=Object(X.useState)([]),b=Object(ie.a)(j,2),O=b[0],m=b[1],h=Object(X.useState)([]),p=Object(ie.a)(h,2),g=p[0],x=p[1],f=Object(X.useState)([]),v=Object(ie.a)(f,2),y=v[0],C=v[1],S=Object(X.useState)(a.id?a:{name:"",description:""}),k=Object(ie.a)(S,2),w=k[0],I=k[1],A=Object(Re.c)(),M=ka(),E=Object(tt.a)(),R=function(e){I(Object(je.a)(Object(je.a)({},w),{},Object(mt.a)({},e.target.name,e.target.value))),A(Object($e.b)({type:"",text:""}))},N=u.map((function(e){return{name:e}})),F=O.map((function(e){return{name:e}}));function U(e,t,n){return{fontWeight:-1===t.indexOf(e)?n.typography.fontWeightRegular:n.typography.fontWeightMedium}}var D=function(){var e=Object(de.a)(ue.a.mark((function e(t){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!w.id){e.next=13;break}return e.prev=2,e.next=5,r.updateModule({variables:{moduleInput:w}});case 5:A(Object($e.b)({type:"success",text:"El modulo se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),A(Object($e.b)({type:"error",text:Object(ze.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,c.registerModule({variables:{moduleInput:Object(je.a)(Object(je.a)({},w),{},{access:F,menus:N})}});case 16:A(Object($e.b)({type:"success",text:"El modulo se registr\xf3 correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),A(Object($e.b)({type:"error",text:Object(ze.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(X.useEffect)((function(){if(o.data&&i.data){var e=o.data.getMenus.filter((function(e){return e.name!==Pe.a}));x(e),C(i.data.getAccess)}}),[o.data,i.data,w.name]),Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsx)("form",{onSubmit:D,children:Object(Fe.jsxs)(ht.a,{container:!0,spacing:3,children:[w.id&&w.name===Pe.b?"":Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsx)(pt.a,{fullWidth:!0,onChange:R,name:"name",id:"idName",label:"Modulo",variant:"outlined",value:w.name})}),Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsx)(pt.a,{fullWidth:!0,onChange:R,name:"description",id:"idDescription",label:"Descripci\xf3n",multiline:!0,value:w.description,variant:"outlined"})}),!a.id&&Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsxs)(vt.a,{variant:"outlined",fullWidth:!0,children:[Object(Fe.jsx)(yt.a,{id:"menus-mutiple-chip-label",children:"Menus"}),Object(Fe.jsx)(St.a,{labelId:"menus-mutiple-chip-label",id:"menus-mutiple-chip",multiple:!0,value:u,onChange:function(e){d(e.target.value),A(Object($e.b)({type:"",text:""}))},input:Object(Fe.jsx)(xa.a,{id:"select-multiple-chip"}),renderValue:function(e){return Object(Fe.jsx)("div",{className:M.chips,children:e.map((function(e){return Object(Fe.jsx)(ua.a,{label:e,className:e.chip},e)}))})},MenuProps:wa,children:g.map((function(e){return Object(Fe.jsx)(Ct.a,{value:e.name,style:U(e.name,w.menus||[],E),children:e.name},e.id)}))})]})}),Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsxs)(vt.a,{variant:"outlined",fullWidth:!0,children:[Object(Fe.jsx)(yt.a,{id:"access-mutiple-chip-label",children:"Accesos"}),Object(Fe.jsx)(St.a,{labelId:"access-mutiple-chip-label",id:"access-mutiple-chip",multiple:!0,value:O,onChange:function(e){m(e.target.value),A(Object($e.b)({type:"",text:""}))},input:Object(Fe.jsx)(xa.a,{id:"select-multiple-chip"}),renderValue:function(e){return Object(Fe.jsx)("div",{className:M.chips,children:e.map((function(e){return Object(Fe.jsx)(ua.a,{label:e,className:e.chip},e)}))})},MenuProps:wa,children:y.map((function(e){return Object(Fe.jsx)(Ct.a,{value:e.name,style:U(e.name,w.access||[],E),children:e.name},e.id)}))})]})})]}),Object(Fe.jsxs)(xt.a,{style:{width:"100%"},children:[Object(Fe.jsx)(gt.a,{onClick:function(){return n()},color:"primary",children:"Cancelar"}),w.id?r.loading?Object(Fe.jsx)(ft.a,{}):Object(Fe.jsx)(gt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):c.loading?Object(Fe.jsx)(ft.a,{}):Object(Fe.jsx)(gt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})})},Aa=n(109),Ma=function(e){var t=e.module,n=e.handleClose,a=Object(X.useState)([]),r=Object(ie.a)(a,2),c=r[0],i=r[1],o=Object(X.useState)([]),s=Object(ie.a)(o,2),l=s[0],u=s[1],d=Object(X.useState)([]),j=Object(ie.a)(d,2),b=j[0],O=j[1],m=Object(Re.c)(),h=ga(),p=ya(),g=Object(Re.d)((function(e){return e.message})),x=g.type,f=g.text,v=function(){var e=Object(de.a)(ue.a.mark((function e(n){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=l.map((function(e){return{name:e.name}})),e.prev=2,e.next=5,h.updateModule({variables:{moduleInput:{id:t.id,access:a}}});case 5:return e.abrupt("return",m(Object($e.b)({type:"success",text:"El modulo actualiz\xf3 sus accesos correctamente."})));case 8:e.prev=8,e.t0=e.catch(2),m(Object($e.b)({type:"error",text:Object(ze.a)(e.t0)}));case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),y=Object(X.useCallback)((function(){var e=p.data.getAccess.filter((function(e){var n;return!(null===(n=t.access)||void 0===n?void 0:n.some((function(t){return e.name===t.name})))}));i(e)}),[t,p.data]);return Object(X.useEffect)((function(){t&&p.data&&(u(t.access||[]),y())}),[t,p.data,y]),"error"===x?Object(Fe.jsx)("h1",{children:f}):Object(Fe.jsx)("form",{onSubmit:v,children:Object(Fe.jsxs)(ht.a,{container:!0,spacing:3,children:[Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsx)(Aa.a,{setListAvailable:i,setListCurrent:u,setChecked:O,checked:b,listAvailable:c,titleAvailable:"Accesos disponibles",listCurrent:l,titleCurrent:"Accesos actuales",loading:p.loading})}),Object(Fe.jsxs)(xt.a,{style:{width:"100%"},children:[Object(Fe.jsx)(gt.a,{onClick:n,color:"primary",children:"Cancelar"}),Object(Fe.jsx)(gt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",disabled:!!h.loading,children:t.id?"Actualizar":"Registrar"})]})]})})},Ea=function(e){var t=e.module,n=e.handleClose,a=Object(X.useState)([]),r=Object(ie.a)(a,2),c=r[0],i=r[1],o=Object(X.useState)([]),s=Object(ie.a)(o,2),l=s[0],u=s[1],d=Object(X.useState)([]),j=Object(ie.a)(d,2),b=j[0],O=j[1],m=Object(Re.c)(),h=Sa(),p=ga(),g=Object(Re.d)((function(e){return e.message})),x=g.type,f=g.text,v=function(){var e=Object(de.a)(ue.a.mark((function e(n){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=l.map((function(e){return{name:e.name}})),e.prev=2,e.next=5,p.updateModule({variables:{moduleInput:{id:t.id,menus:a}}});case 5:return e.abrupt("return",m(Object($e.b)({type:"success",text:"El modulo actualiz\xf3 sus menu correctamente."})));case 8:e.prev=8,e.t0=e.catch(2),m(Object($e.b)({type:"error",text:Object(ze.a)(e.t0)}));case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),y=Object(X.useCallback)((function(){var e=h.data.getMenus.filter((function(e){var n;return!(null===(n=t.menus)||void 0===n?void 0:n.some((function(t){return e.name===t.name})))})).filter((function(e){return e.name!==Pe.a}));i(e)}),[t,h.data]);return Object(X.useEffect)((function(){if(t&&h.data){var e,n=null===(e=t.menus)||void 0===e?void 0:e.filter((function(e){return e.name!==Pe.a}));u(n||[]),y()}}),[t,h.data,y]),"error"===x?Object(Fe.jsx)("h1",{children:f}):Object(Fe.jsx)("form",{onSubmit:v,children:Object(Fe.jsxs)(ht.a,{container:!0,spacing:3,children:[Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsx)(Aa.a,{setListAvailable:i,setListCurrent:u,setChecked:O,checked:b,listAvailable:c,titleAvailable:"Menus disponibles",listCurrent:l,titleCurrent:"Menus actuales",loading:h.loading})}),Object(Fe.jsxs)(xt.a,{style:{width:"100%"},children:[Object(Fe.jsx)(gt.a,{onClick:n,color:"primary",children:"Cancelar"}),Object(Fe.jsx)(gt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",disabled:!!p.loading,children:t.id?"Actualizar":"Registrar"})]})]})})},Ra={name:"",active:!1},Na=function(e){var t=e.module,n=Object(X.useState)(Ra),a=Object(ie.a)(n,2),r=a[0],c=a[1],i=Object(Re.c)(),o=function(){c(Object(je.a)(Object(je.a)({},r),{},{active:!1})),i(Object($e.b)({type:"",text:""}))};return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(st,{open:r.active,dialog:t,title:r.name,component:function(e){switch(e){case"Modulo":return Object(Fe.jsx)(Ia,{module:t,handleClose:o});case"Acceso":return Object(Fe.jsx)(Ma,{module:t,handleClose:o});case"Menu":return Object(Fe.jsx)(Ea,{module:t,handleClose:o})}}(r.name),handleClose:o}),Object(Fe.jsxs)(We.a,{children:[Object(Fe.jsx)(Qe.a,{component:"th",scope:"row",children:t.name}),Object(Fe.jsx)(Qe.a,{children:t.description}),Object(Fe.jsx)(Qe.a,{children:Ot()(t.createdAt).format("DD/MM/YYYY")}),Object(Fe.jsx)(Qe.a,{children:Ot()(t.updatedAt).format("DD/MM/YYYY")}),Object(Fe.jsx)(Qe.a,{align:"center",children:t.menus&&t.menus.map((function(e){return Object(Fe.jsx)(da,{menu:e},e.id)}))}),Object(Fe.jsx)(Qe.a,{align:"center",children:t.name===Pe.b?Object(Fe.jsx)(ua.a,{style:{margin:"3px"},size:"small",label:"Todos los permisos",color:"primary"}):t.access&&t.access.map((function(e){return Object(Fe.jsx)(ja,{access:e},e.id)}))}),t.name===Pe.b?Object(Fe.jsx)(Qe.a,{align:"center",children:Object(Fe.jsx)(Ve.a,{title:"Asignar menu",onClick:function(){return c({name:"Menu",active:!0})},children:Object(Fe.jsx)(at.a,{"aria-label":"menu",size:"small",children:Object(Fe.jsx)(Oa.a,{})})})}):Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsxs)(Qe.a,{align:"right",children:[Object(Fe.jsx)(Ve.a,{title:"Asignar menu",onClick:function(){return c({name:"Menu",active:!0})},children:Object(Fe.jsx)(at.a,{"aria-label":"menu",size:"small",children:Object(Fe.jsx)(Oa.a,{})})}),Object(Fe.jsx)(Ve.a,{title:"Asignar acceso",onClick:function(){return c({name:"Acceso",active:!0})},children:Object(Fe.jsx)(at.a,{"aria-label":"acceso",size:"small",children:Object(Fe.jsx)(ha.a,{})})}),Object(Fe.jsx)(Ve.a,{title:"Editar modulo",onClick:function(){return c({name:"Modulo",active:!0})},children:Object(Fe.jsx)(at.a,{"aria-label":"acceso",size:"small",children:Object(Fe.jsx)(jt.a,{})})})]})})]})]})},Fa=Object(Ht.a)({table:{minWidth:650}}),Ua={name:"",active:!1},Da=function(){var e,t=Object(X.useState)([]),n=Object(ie.a)(t,2),a=n[0],r=n[1],c=Object(la.b)(),i=c.data,o=c.loading,s=c.error,l=Object(X.useState)(Ua),u=Object(ie.a)(l,2),d=u[0],j=u[1],b=Object(Re.c)(),O=Fa(),m=Object(Re.d)((function(e){return e.authReducer.authUser})),h=function(){j(Object(je.a)(Object(je.a)({},d),{},{active:!1})),b(Object($e.b)({type:"",text:""}))};return Object(X.useEffect)((function(){i&&r(i.getModules)}),[i]),o?Object(Fe.jsx)("h1",{children:"Cargando..."}):s?Object(Fe.jsx)("h1",{children:Object(ze.a)(s)}):Object(Fe.jsx)(Fe.Fragment,{children:(null===m||void 0===m||null===(e=m.role)||void 0===e?void 0:e.name)===Pe.g?Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(st,{open:d.active,title:"".concat(d.name," Modulo"),component:function(e){switch(e){case"Crear":return Object(Fe.jsx)(Ia,{handleClose:h})}}(d.name),handleClose:h}),Object(Fe.jsx)(Ve.a,{title:"Crear Rol",children:Object(Fe.jsx)(at.a,{"aria-label":"add",size:"small",onClick:function(){return j({name:"Crear",active:!0})},children:Object(Fe.jsx)(ut.a,{})})}),Object(Fe.jsx)(Le.a,{component:_e.a,children:Object(Fe.jsxs)(Be.a,{className:O.table,size:"small","aria-label":"a dense table",children:[Object(Fe.jsx)(Te.a,{children:Object(Fe.jsxs)(We.a,{children:[Object(Fe.jsx)(Qe.a,{children:"Modulo"}),Object(Fe.jsx)(Qe.a,{children:"Descripci\xf3n"}),Object(Fe.jsx)(Qe.a,{children:"Fecha creada"}),Object(Fe.jsx)(Qe.a,{children:"Fecha modificada"}),Object(Fe.jsx)(Qe.a,{align:"center",children:"Menus"}),Object(Fe.jsx)(Qe.a,{align:"center",children:"Permisos"}),Object(Fe.jsx)(Qe.a,{align:"right",children:"Opciones"})]})}),Object(Fe.jsx)(Je.a,{children:a.map((function(e){return Object(Fe.jsx)(Na,{module:e},e.id)}))})]})})]}):Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsx)("h1",{children:"No tiene permiso para acceder a este recurso."})})})},qa=Object(se.gql)(U||(U=Object(oe.a)(["\n  query getProducts {\n    getProducts {\n      id\n      name\n      description\n      price\n      cant\n      createdAt\n      updatedAt\n      category {\n        id\n        name\n      }\n      brand {\n        id\n        name\n      }\n      model {\n        id\n        name\n      }\n    }\n  }\n"]))),za=Object(se.gql)(D||(D=Object(oe.a)(["\n  mutation updateService($productInput: UpdateProductInput!) {\n    updateProduct(productInput: $productInput) {\n      id\n      name\n      description\n      price\n      category {\n        id\n        name\n      }\n      brand {\n        id\n        name\n      }\n      model {\n        id\n        name\n      }\n    }\n  }\n"]))),Pa=Object(se.gql)(q||(q=Object(oe.a)(["\n  mutation registerProduct($productInput: CreateProductInput!) {\n    registerProduct(productInput: $productInput) {\n      id\n      name\n      description\n      price\n      category {\n        id\n        name\n      }\n      brand {\n        id\n        name\n      }\n      model {\n        id\n        name\n      }\n    }\n  }\n"]))),Ya={type:"",text:""},$a={category:"",brand:"",model:""},Ba=function(e){var t,n,a,r=e.handleClose,c=e.product,i={id:(null===c||void 0===c?void 0:c.id)||"",name:(null===c||void 0===c?void 0:c.name)||"",description:(null===c||void 0===c?void 0:c.description)||"",price:(null===c||void 0===c?void 0:c.price)||0,cant:(null===c||void 0===c?void 0:c.cant)||0,category:(null===c||void 0===c||null===(t=c.category)||void 0===t?void 0:t.name)||"",brand:(null===c||void 0===c||null===(n=c.brand)||void 0===n?void 0:n.name)||"",model:(null===c||void 0===c||null===(a=c.model)||void 0===a?void 0:a.name)||""},o=Object(X.useState)(i.id?i:{name:"",price:0,category:"",brand:"",model:"",cant:0}),s=Object(ie.a)(o,2),l=s[0],u=s[1],d=Object(X.useState)($a),j=Object(ie.a)(d,2),b=j[0],O=j[1],m=Object(X.useState)([]),h=Object(ie.a)(m,2),p=h[0],g=h[1],x=Object(X.useState)([]),f=Object(ie.a)(x,2),v=f[0],y=f[1],C=wt().data,S=Object(X.useState)([]),k=Object(ie.a)(S,2),w=k[0],I=k[1],A=Object(Re.c)(),M=function(){var e=Object(se.useMutation)(za,{refetchQueries:function(){return[{query:qa}]}}),t=Object(ie.a)(e,2),n=t[0],a=t[1];return{updateProduct:n,error:a.error,loading:a.loading}}(),E=function(){var e=Object(se.useMutation)(Pa,{refetchQueries:function(){return[{query:qa}]}}),t=Object(ie.a)(e,2),n=t[0],a=t[1];return{registerProduct:n,error:a.error,loading:a.loading}}(),R=Pn(l.category||""),N=$n(l.brand||""),F=function(e){u(Object(je.a)(Object(je.a)({},l),{},Object(mt.a)({},e.target.name,e.target.value))),A(Object($e.b)(Ya))},U=Object(X.useCallback)((function(){I(C.getCategorys)}),[C]),D=Object(X.useCallback)((function(){var e;g((null===R||void 0===R||null===(e=R.data)||void 0===e?void 0:e.getBrandsByCategory)||[])}),[R]),q=Object(X.useCallback)((function(){var e;y((null===N||void 0===N||null===(e=N.data)||void 0===e?void 0:e.getModelsByBrand)||[])}),[N]),z=function(){var e=Object(de.a)(ue.a.mark((function e(t){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!l.id){e.next=13;break}return e.prev=2,e.next=5,M.updateProduct({variables:{productInput:Object(je.a)(Object(je.a)({},l),{},{price:Number(l.price),cant:Number(l.cant)})}});case 5:A(Object($e.b)({type:"success",text:"El producto se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),A(Object($e.b)({type:"error",text:Object(ze.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,E.registerProduct({variables:{productInput:Object(je.a)(Object(je.a)({},l),{},{price:Number(l.price),cant:Number(l.cant)})}});case 16:A(Object($e.b)({type:"success",text:"El producto ha sido registrada correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),A(Object($e.b)({type:"error",text:Object(ze.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(X.useEffect)((function(){C&&(U(),D(),q())}),[C,U,D,q]),Object(Fe.jsx)("form",{onSubmit:z,children:Object(Fe.jsxs)(ht.a,{container:!0,spacing:3,children:[Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsx)(an.a,{id:"idCategory",onChange:function(e,t){u(Object(je.a)(Object(je.a)({},l),{},{category:(null===t||void 0===t?void 0:t.name)||"",brand:"",model:""})),O(Object(je.a)(Object(je.a)({},b),{},{brand:"",model:""})),A(Object($e.b)(Ya))},onKeyUp:function(e){(e.target.value.length<l.category.length||0===e.target.value.length)&&(u(Object(je.a)(Object(je.a)({},l),{},{category:"",brand:"",model:""})),O(Object(je.a)(Object(je.a)({},b),{},{category:"",brand:"",model:""})))},inputValue:b.category?b.category:l.category,onInputChange:function(e,t){O(Object(je.a)(Object(je.a)({},b),{},{category:t}))},options:w,getOptionLabel:function(e){return e.name?e.name:""},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){return Object(Fe.jsx)(pt.a,Object(je.a)(Object(je.a)({},e),{},{name:"category",label:"Categoria",variant:"outlined"}))}})}),Object(Fe.jsx)(ht.a,{item:!0,xs:6,children:Object(Fe.jsx)(an.a,{id:"idBrand",onChange:function(e,t){u(Object(je.a)(Object(je.a)({},l),{},{brand:(null===t||void 0===t?void 0:t.name)||"",model:""})),O(Object(je.a)(Object(je.a)({},b),{},{model:""})),A(Object($e.b)(Ya))},onKeyUp:function(e){(e.target.value.length<l.brand.length||0===e.target.value.length)&&(u(Object(je.a)(Object(je.a)({},l),{},{brand:"",model:""})),O(Object(je.a)(Object(je.a)({},b),{},{brand:"",model:""})))},inputValue:b.brand?b.brand:l.brand,onInputChange:function(e,t){O(Object(je.a)(Object(je.a)({},b),{},{brand:t}))},options:p,getOptionLabel:function(e){return e.name?e.name:""},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){return Object(Fe.jsx)(pt.a,Object(je.a)(Object(je.a)({},e),{},{name:"brand",label:"Marca",variant:"outlined"}))}})}),Object(Fe.jsx)(ht.a,{item:!0,xs:6,children:Object(Fe.jsx)(an.a,{id:"idModel",onChange:function(e,t){u(Object(je.a)(Object(je.a)({},l),{},{model:(null===t||void 0===t?void 0:t.name)||""})),A(Object($e.b)(Ya))},onKeyUp:function(e){(e.target.value.length<l.model.length||0===e.target.value.length)&&(u(Object(je.a)(Object(je.a)({},l),{},{model:""})),O(Object(je.a)(Object(je.a)({},b),{},{model:""})))},inputValue:b.model?b.model:l.model,onInputChange:function(e,t){O(Object(je.a)(Object(je.a)({},b),{},{model:t}))},options:v,getOptionLabel:function(e){return e.name?e.name:""},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){return Object(Fe.jsx)(pt.a,Object(je.a)(Object(je.a)({name:"model"},e),{},{label:"Modelo",variant:"outlined"}))}})}),Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsx)(pt.a,{fullWidth:!0,onChange:F,name:"name",autoComplete:"off",id:"idName",label:"Producto",variant:"outlined",value:l.name})}),Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsx)(pt.a,{fullWidth:!0,name:"description",onChange:F,id:"idDescription",label:"Descripci\xf3n",multiline:!0,rows:6,defaultValue:l.description,variant:"outlined"})}),Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsx)(pt.a,{fullWidth:!0,onChange:F,name:"price",autoComplete:"off",id:"idPrice",label:"Precio",variant:"outlined",value:l.price,InputProps:{startAdornment:Object(Fe.jsx)(on.a,{position:"start",children:"S/"})}})}),Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsx)(pt.a,{fullWidth:!0,onChange:F,name:"cant",autoComplete:"off",id:"idCant",label:"Cantidad",variant:"outlined",value:l.cant})}),Object(Fe.jsxs)(xt.a,{style:{width:"100%"},children:[Object(Fe.jsx)(gt.a,{onClick:function(){return r()},color:"primary",children:"Cancelar"}),l.id?M.loading?Object(Fe.jsx)(ft.a,{}):Object(Fe.jsx)(gt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):E.loading?Object(Fe.jsx)(ft.a,{}):Object(Fe.jsx)(gt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})},La=Object(se.gql)(z||(z=Object(oe.a)(["\n  mutation deleteProduct($id: String!) {\n    deleteProduct(id: $id)\n  }\n"]))),Ta={type:"",text:""},Wa={name:"",active:!1},Qa=function(e){var t=e.product,n=Object(Re.d)((function(e){return e.authReducer.authUser})),a=Object(Re.d)((function(e){return e.page.user.module})),r=Object(X.useState)(Wa),c=Object(ie.a)(r,2),i=c[0],o=c[1],s=Object(Re.c)(),l=function(){var e=Object(se.useMutation)(La,{refetchQueries:function(){return[{query:qa}]}}),t=Object(ie.a)(e,2),n=t[0],a=t[1];return{deleteProduct:n,error:a.error,loading:a.loading}}(),u=function(){var e=Object(de.a)(ue.a.mark((function e(t){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.deleteProduct({variables:{id:t}});case 3:e.next=10;break;case 5:e.prev=5,e.t0=e.catch(0),o({name:"error",active:!0}),s(Object($e.b)({type:"error",text:Object(ze.a)(e.t0)})),i.active,i.name;case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){o(Wa),s(Object($e.b)(Ta))},j=function(){return Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsx)(Ve.a,{title:"Editar Producto",onClick:function(){return o({name:"Producto",active:!0})},children:Object(Fe.jsx)(at.a,{"aria-label":"product",size:"small",children:Object(Fe.jsx)(jt.a,{})})})})},b=function(){return Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsx)(Ve.a,{title:"Eliminar egreso",onClick:function(){return u(t.id)},children:Object(Fe.jsx)(at.a,{"aria-label":"egress",size:"small",children:Object(Fe.jsx)(en.a,{})})})})};return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(st,{open:i.active,dialog:t,title:i.name,component:function(e){switch(e){case"Producto":return Object(Fe.jsx)(Ba,{product:t,handleClose:d})}}(i.name),handleClose:d}),Ye(Pe.c,n,a,(function(){return Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsxs)(We.a,{children:[Object(Fe.jsx)(Qe.a,{component:"th",scope:"row",children:t.category.name}),Object(Fe.jsx)(Qe.a,{component:"th",scope:"row",children:t.brand.name}),Object(Fe.jsx)(Qe.a,{component:"th",scope:"row",children:t.model.name}),Object(Fe.jsx)(Qe.a,{component:"th",scope:"row",children:t.name}),Object(Fe.jsx)(Qe.a,{component:"th",scope:"row",children:Xt(t.price)}),Object(Fe.jsx)(Qe.a,{component:"th",scope:"row",align:"center",children:t.cant}),Object(Fe.jsx)(Qe.a,{children:Ot()(t.createdAt).format("DD/MM/YYYY")}),Object(Fe.jsx)(Qe.a,{children:Ot()(t.updatedAt).format("DD/MM/YYYY")}),Object(Fe.jsxs)(Qe.a,{align:"right",children:[Ye(Pe.f,n,a,j),Ye(Pe.e,n,a,b)]})]})})}))]})},Ja={type:"",text:""},_a={name:"",active:!1},Va=function(){var e=Object(Re.d)((function(e){return e.authReducer.authUser})),t=Object(Re.d)((function(e){return e.page.user.module})),n=Object(X.useState)(_a),a=Object(ie.a)(n,2),r=a[0],c=a[1],i=Object(Re.c)(),o=function(){var e=Object(se.useQuery)(qa);return{data:e.data,error:e.error,loading:e.loading}}(),s=o.data,l=o.loading,u=o.error,d=Object(X.useState)([]),j=Object(ie.a)(d,2),b=j[0],O=j[1],m=function(){c(_a),i(Object($e.b)(Ja))};if(Object(X.useEffect)((function(){s&&O(s.getProducts)}),[s]),l)return Object(Fe.jsx)("h1",{children:"Cargando..."});if(u)return Object(Fe.jsx)("h1",{children:Object(ze.a)(u)});return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(st,{open:r.active,title:"".concat(r.name," Producto"),component:function(e){switch(e){case"Crear":return Object(Fe.jsx)(Ba,{handleClose:m})}}(r.name),handleClose:m}),Ye(Pe.d,e,t,(function(){return Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsx)(Ve.a,{title:"Crear Producto",children:Object(Fe.jsx)(at.a,{"aria-label":"add",size:"small",onClick:function(){return c({name:"Crear",active:!0})},children:Object(Fe.jsx)(ut.a,{})})})})})),Object(Fe.jsx)(Le.a,{component:_e.a,style:{marginTop:10},children:Object(Fe.jsxs)(Be.a,{size:"small","aria-label":"a dense table",children:[Object(Fe.jsx)(Te.a,{children:Object(Fe.jsxs)(We.a,{children:[Object(Fe.jsx)(Qe.a,{children:"Categoria"}),Object(Fe.jsx)(Qe.a,{children:"Marca"}),Object(Fe.jsx)(Qe.a,{children:"Model"}),Object(Fe.jsx)(Qe.a,{children:"Producto"}),Object(Fe.jsx)(Qe.a,{children:"Precio"}),Object(Fe.jsx)(Qe.a,{children:"Cantidad"}),Object(Fe.jsx)(Qe.a,{children:"Fecha creada"}),Object(Fe.jsx)(Qe.a,{children:"Fecha modificada"}),Object(Fe.jsx)(Qe.a,{align:"right",children:"Opciones"})," "]})}),Object(Fe.jsx)(Je.a,{children:b.map((function(e){return Object(Fe.jsx)(Qa,{product:e},e.id)}))})]})})]})},Ha=Object(se.gql)(P||(P=Object(oe.a)(["\n  query getRoles {\n    getRoles {\n      id\n      name\n      description\n      createdAt\n      updatedAt\n      modules {\n        id\n        name\n        description\n      }\n    }\n  }\n"]))),Ga=function(){var e=Object(se.useQuery)(Ha);return{data:e.data,loading:e.loading,error:e.error}},Ka=function(e){var t=e.module;return Object(Fe.jsxs)(Fe.Fragment,{children:[t.name===Pe.b?Object(Fe.jsx)(ua.a,{style:{margin:"3px"},size:"small",label:t.name,color:"primary"}):Object(Fe.jsx)(ua.a,{style:{margin:"3px"},size:"small",label:t.name,onDelete:function(){return alert("keiner")},color:"primary"}),"\xa0"]})},Xa=n(137),Za=Object(se.gql)(Y||(Y=Object(oe.a)(["\n  mutation registerRole($roleInput: RoleInput!) {\n    registerRole(roleInput: $roleInput) {\n      id\n      name\n      description\n      modules {\n        id\n        name\n      }\n    }\n  }\n"]))),er=Object(Ht.a)((function(e){return Object(He.a)({formControl:{margin:e.spacing(1),minWidth:120,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}})})),tr={PaperProps:{style:{maxHeight:224,width:250}}},nr=function(e){var t=e.role,n=e.handleClose,a={id:(null===t||void 0===t?void 0:t.id)||"",name:(null===t||void 0===t?void 0:t.name)||"",description:(null===t||void 0===t?void 0:t.description)||""},r=Object(Xa.a)(),c=function(){var e=Object(se.useMutation)(Za,{refetchQueries:function(){return[{query:Ha}]}}),t=Object(ie.a)(e,2),n=t[0],a=t[1];return{registerRole:n,error:a.error,loading:a.loading}}(),i=Object(la.b)(),o=Object(X.useState)(a.id?a:{name:"",description:""}),s=Object(ie.a)(o,2),l=s[0],u=s[1],d=Object(X.useState)([]),j=Object(ie.a)(d,2),b=j[0],O=j[1],m=Object(X.useState)([]),h=Object(ie.a)(m,2),p=h[0],g=h[1],x=Object(tt.a)(),f=Object(Re.c)(),v=er(),y=Object(Re.d)((function(e){return e.authReducer.authUser})),C=function(e){u(Object(je.a)(Object(je.a)({},l),{},Object(mt.a)({},e.target.name,e.target.value))),f(Object($e.b)({type:"",text:""}))},S=b.map((function(e){return{name:e}}));function k(e,t,n){return{fontWeight:-1===t.indexOf(e)?n.typography.fontWeightRegular:n.typography.fontWeightMedium}}var w=function(){var e=Object(de.a)(ue.a.mark((function e(t){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!l.id){e.next=13;break}return e.prev=2,e.next=5,r.updateRole({variables:{roleInput:l}});case 5:f(Object($e.b)({type:"success",text:"El rol se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),f(Object($e.b)({type:"error",text:Object(ze.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,c.registerRole({variables:{roleInput:Object(je.a)(Object(je.a)({},l),{},{modules:S})}});case 16:f(Object($e.b)({type:"success",text:"El rol se registr\xf3 correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),f(Object($e.b)({type:"error",text:Object(ze.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(X.useEffect)((function(){if(i.data){var e=i.data.getModules.filter((function(e){return e.name!==Pe.b}));g(e)}}),[i.data]),Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsx)("form",{onSubmit:w,children:Object(Fe.jsxs)(ht.a,{container:!0,spacing:3,children:[l.id&&l.name===Pe.g?"":Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsx)(pt.a,{fullWidth:!0,onChange:C,name:"name",id:"idName",label:"Role",variant:"outlined",value:l.name})}),Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsx)(pt.a,{fullWidth:!0,onChange:C,name:"description",id:"idDescription",label:"Descripci\xf3n",multiline:!0,value:l.description,variant:"outlined"})}),!a.id&&Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsxs)(vt.a,{variant:"outlined",fullWidth:!0,children:[Object(Fe.jsx)(yt.a,{id:"module-mutiple-chip-label",children:"Modulos"}),Object(Fe.jsx)(St.a,{labelId:"module-mutiple-chip-label",id:"module-mutiple-chip",multiple:!0,value:b,onChange:function(e){O(e.target.value),f(Object($e.b)({type:"",text:""}))},input:Object(Fe.jsx)(xa.a,{id:"select-multiple-chip"}),renderValue:function(e){return Object(Fe.jsx)("div",{className:v.chips,children:e.map((function(e){return Object(Fe.jsx)(ua.a,{label:e,className:v.chip},e)}))})},MenuProps:tr,children:p.map((function(e){var t;return((null===y||void 0===y||null===(t=y.role)||void 0===t?void 0:t.name)===Pe.g||e.name!==Pe.b)&&Object(Fe.jsx)(Ct.a,{value:e.name,style:k(e.name,l.modules||[],x),children:e.name},e.id)}))})]})}),Object(Fe.jsxs)(xt.a,{style:{width:"100%"},children:[Object(Fe.jsx)(gt.a,{onClick:function(){return n()},color:"primary",children:"Cancelar"}),l.id?r.loading?Object(Fe.jsx)(ft.a,{}):Object(Fe.jsx)(gt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):c.loading?Object(Fe.jsx)(ft.a,{}):Object(Fe.jsx)(gt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})})},ar=n(183),rr=n(151),cr=n.n(rr),ir={name:"",active:!1},or=function(e){var t=e.role,n=Object(X.useState)(ir),a=Object(ie.a)(n,2),r=a[0],c=a[1],i=Object(Re.c)(),o=Object(Re.d)((function(e){return e.authReducer.authUser})),s=Object(Re.d)((function(e){return e.page.user.module})),l=function(){c(Object(je.a)(Object(je.a)({},r),{},{active:!1})),i(Object($e.b)({type:"",text:""}))},u=function(e){switch(e){case"Modulo":return Object(Fe.jsx)(ar.a,{role:t,handleClose:l});case"Rol":return Object(Fe.jsx)(nr,{role:t,handleClose:l})}},d=function(){return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(st,{open:r.active,dialog:t,title:r.name,component:u(r.name),handleClose:l}),t.name===Pe.g?Object(Fe.jsx)(Qe.a,{align:"center",children:Object(Fe.jsx)(Ve.a,{title:"Asignar modulos",onClick:function(){return c({name:"Modulo",active:!0})},children:Object(Fe.jsx)(at.a,{"aria-label":"modules",size:"small",children:Object(Fe.jsx)(cr.a,{})})})}):Object(Fe.jsxs)(Qe.a,{align:"right",children:[Object(Fe.jsx)(Ve.a,{title:"Asignar modulos",onClick:function(){return c({name:"Modulo",active:!0})},children:Object(Fe.jsx)(at.a,{"aria-label":"modules",size:"small",children:Object(Fe.jsx)(cr.a,{})})}),Object(Fe.jsx)(Ve.a,{title:"Editar rol",onClick:function(){return c({name:"Rol",active:!0})},children:Object(Fe.jsx)(at.a,{"aria-label":"role",size:"small",children:Object(Fe.jsx)(jt.a,{})})})]})]})};return Object(Fe.jsx)(Fe.Fragment,{children:Ye(Pe.c,o,s,(function(){var e;return Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsx)(We.a,{children:(null===o||void 0===o||null===(e=o.role)||void 0===e?void 0:e.name)===Pe.g?Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(Qe.a,{component:"th",scope:"row",children:t.name}),Object(Fe.jsx)(Qe.a,{children:t.description}),Object(Fe.jsx)(Qe.a,{children:Ot()(t.createdAt).format("DD/MM/YYYY")}),Object(Fe.jsx)(Qe.a,{children:Ot()(t.updatedAt).format("DD/MM/YYYY")}),Object(Fe.jsx)(Qe.a,{align:"center",children:t.modules&&t.modules.map((function(e){return Object(Fe.jsx)(Ka,{module:e},e.id)}))}),Ye(Pe.f,o,s,d)]}):Object(Fe.jsx)(Fe.Fragment,{children:t.name===Pe.g||Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(Qe.a,{component:"th",scope:"row",children:t.name}),Object(Fe.jsx)(Qe.a,{children:t.description}),Object(Fe.jsx)(Qe.a,{children:Ot()(t.createdAt).format("DD/MM/YYYY")}),Object(Fe.jsx)(Qe.a,{children:Ot()(t.updatedAt).format("DD/MM/YYYY")}),Object(Fe.jsx)(Qe.a,{align:"center",children:t.modules&&t.modules.map((function(e){return Object(Fe.jsx)(Ka,{module:e},e.id)}))}),Ye(Pe.f,o,s,d)]})})})})}))})},sr=Object(Ht.a)({table:{minWidth:650}}),lr={name:"",active:!1},ur=function(){var e=Object(X.useState)([]),t=Object(ie.a)(e,2),n=t[0],a=t[1],r=Object(Re.d)((function(e){return e.authReducer.authUser})),c=Object(Re.d)((function(e){return e.page.user.module})),i=Object(X.useState)(lr),o=Object(ie.a)(i,2),s=o[0],l=o[1],u=Object(Re.c)(),d=Ga(),j=d.data,b=d.loading,O=d.error,m=sr(),h=function(){l(Object(je.a)(Object(je.a)({},s),{},{active:!1})),u(Object($e.b)({type:"",text:""}))},p=function(e){switch(e){case"Crear":return Object(Fe.jsx)(nr,{handleClose:h})}};if(Object(X.useEffect)((function(){j&&a(j.getRoles)}),[j]),b)return Object(Fe.jsx)("h1",{children:"Cargando..."});if(O)return Object(Fe.jsx)("h1",{children:Object(ze.a)(O)});return Object(Fe.jsxs)(Fe.Fragment,{children:[Ye(Pe.d,r,c,(function(){return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(st,{open:s.active,title:"".concat(s.name," Rol"),component:p(s.name),handleClose:h}),Object(Fe.jsx)(Ve.a,{title:"Crear Rol",children:Object(Fe.jsx)(at.a,{"aria-label":"add",size:"small",onClick:function(){return l({name:"Crear",active:!0})},children:Object(Fe.jsx)(ut.a,{})})})]})})),Object(Fe.jsx)(Le.a,{component:_e.a,children:Object(Fe.jsxs)(Be.a,{className:m.table,size:"small","aria-label":"a dense table",children:[Object(Fe.jsx)(Te.a,{children:Object(Fe.jsxs)(We.a,{children:[Object(Fe.jsx)(Qe.a,{children:"Rol"}),Object(Fe.jsx)(Qe.a,{children:"Descripci\xf3n"}),Object(Fe.jsx)(Qe.a,{children:"Fecha creada"}),Object(Fe.jsx)(Qe.a,{children:"Fecha modificada"}),Object(Fe.jsx)(Qe.a,{align:"center",children:"Modulos"}),Ye(Pe.f,r,c,(function(){return Object(Fe.jsx)(Qe.a,{align:"right",children:"Opciones"})}))]})}),Object(Fe.jsx)(Je.a,{children:n.map((function(e){return Object(Fe.jsx)(or,{role:e},e.id)}))})]})})]})},dr=Object(se.gql)($||($=Object(oe.a)(["\n  query getServices {\n    getServices {\n      id\n      name\n      description\n      price\n      createdAt\n      updatedAt\n      category {\n        id\n        name\n      }\n    }\n  }\n"]))),jr=Object(se.gql)(B||(B=Object(oe.a)(["\n  mutation updateService($serviceInput: UpdateServiceInput!) {\n    updateService(serviceInput: $serviceInput) {\n      id\n      name\n      description\n      price\n      category {\n        id\n        name\n      }\n    }\n  }\n"]))),br=Object(se.gql)(L||(L=Object(oe.a)(["\n  mutation registerService($serviceInput: CreateServiceInput!) {\n    registerService(serviceInput: $serviceInput) {\n      id\n      name\n      description\n      price\n      category {\n        id\n        name\n      }\n    }\n  }\n"]))),Or={type:"",text:""},mr=function(e){var t,n=e.handleClose,a=e.service,r={id:(null===a||void 0===a?void 0:a.id)||"",name:(null===a||void 0===a?void 0:a.name)||"",description:(null===a||void 0===a?void 0:a.description)||"",price:(null===a||void 0===a?void 0:a.price)||0,category:(null===a||void 0===a||null===(t=a.category)||void 0===t?void 0:t.name)||""},c=Object(X.useState)(r.id?r:{name:"",price:0,category:""}),i=Object(ie.a)(c,2),o=i[0],s=i[1],l=Object(X.useState)([]),u=Object(ie.a)(l,2),d=u[0],j=u[1],b=wt().data,O=Object(Re.c)(),m=function(){var e=Object(se.useMutation)(jr,{refetchQueries:function(){return[{query:dr}]}}),t=Object(ie.a)(e,2),n=t[0],a=t[1];return{updateService:n,error:a.error,loading:a.loading}}(),h=function(){var e=Object(se.useMutation)(br,{refetchQueries:function(){return[{query:dr}]}}),t=Object(ie.a)(e,2),n=t[0],a=t[1];return{registerService:n,error:a.error,loading:a.loading}}(),p=function(e){s(Object(je.a)(Object(je.a)({},o),{},Object(mt.a)({},e.target.name,e.target.value))),O(Object($e.b)(Or))},g=function(){var e=Object(de.a)(ue.a.mark((function e(t){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!o.id){e.next=13;break}return e.prev=2,e.next=5,m.updateService({variables:{serviceInput:Object(je.a)(Object(je.a)({},o),{},{price:Number(o.price)})}});case 5:O(Object($e.b)({type:"success",text:"El servicio se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),O(Object($e.b)({type:"error",text:Object(ze.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,h.registerService({variables:{serviceInput:Object(je.a)(Object(je.a)({},o),{},{price:Number(o.price)})}});case 16:O(Object($e.b)({type:"success",text:"El servicio ha sido registrada correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),O(Object($e.b)({type:"error",text:Object(ze.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(X.useEffect)((function(){b&&j(b.getCategorys)}),[b]),Object(Fe.jsx)("form",{onSubmit:g,children:Object(Fe.jsxs)(ht.a,{container:!0,spacing:3,children:[Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsxs)(vt.a,{variant:"outlined",fullWidth:!0,children:[Object(Fe.jsx)(yt.a,{id:"idCategory",children:"Categoria"}),Object(Fe.jsx)(St.a,{labelId:"Categoria",id:"idCategory",value:o.category,onChange:function(e){s(Object(je.a)(Object(je.a)({},o),{},Object(mt.a)({},e.target.name,e.target.value))),O(Object($e.b)(Or))},label:"Categoria",name:"category",children:d.map((function(e){return Object(Fe.jsx)(Ct.a,{value:e.name,children:e.name},e.id)}))})]})}),Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsx)(pt.a,{fullWidth:!0,onChange:p,name:"name",autoComplete:"off",id:"idName",label:"Servicio",variant:"outlined",value:o.name})}),Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsx)(pt.a,{fullWidth:!0,onChange:p,name:"description",autoComplete:"off",id:"idDescription",label:"Descripci\xf3n",variant:"outlined",multiline:!0,value:o.description})}),Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsx)(pt.a,{fullWidth:!0,onChange:p,name:"price",autoComplete:"off",id:"idPrice",label:"Precio",variant:"outlined",value:o.price,InputProps:{startAdornment:Object(Fe.jsx)(on.a,{position:"start",children:"S/"})}})}),Object(Fe.jsxs)(xt.a,{style:{width:"100%"},children:[Object(Fe.jsx)(gt.a,{onClick:function(){return n()},color:"primary",children:"Cancelar"}),o.id?m.loading?Object(Fe.jsx)(ft.a,{}):Object(Fe.jsx)(gt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):h.loading?Object(Fe.jsx)(ft.a,{}):Object(Fe.jsx)(gt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})},hr=Object(se.gql)(T||(T=Object(oe.a)(["\n  mutation deleteService($id: String!) {\n    deleteService(id: $id)\n  }\n"]))),pr={type:"",text:""},gr={name:"",active:!1},xr=function(e){var t=e.service,n=Object(Re.d)((function(e){return e.authReducer.authUser})),a=Object(Re.d)((function(e){return e.page.user.module})),r=Object(X.useState)(gr),c=Object(ie.a)(r,2),i=c[0],o=c[1],s=Object(Re.c)(),l=function(){var e=Object(se.useMutation)(hr,{refetchQueries:function(){return[{query:dr}]}}),t=Object(ie.a)(e,2),n=t[0],a=t[1];return{deleteService:n,error:a.error,loading:a.loading}}(),u=function(){var e=Object(de.a)(ue.a.mark((function e(t){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.deleteService({variables:{id:t}});case 3:e.next=10;break;case 5:e.prev=5,e.t0=e.catch(0),o({name:"error",active:!0}),s(Object($e.b)({type:"error",text:Object(ze.a)(e.t0)})),i.active,i.name;case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){o(gr),s(Object($e.b)(pr))},j=function(){return Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsx)(Ve.a,{title:"Editar Servicio",onClick:function(){return o({name:"Servicio",active:!0})},children:Object(Fe.jsx)(at.a,{"aria-label":"service",size:"small",children:Object(Fe.jsx)(jt.a,{})})})})},b=function(){return Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsx)(Ve.a,{title:"Eliminar egreso",onClick:function(){return u(t.id)},children:Object(Fe.jsx)(at.a,{"aria-label":"egress",size:"small",children:Object(Fe.jsx)(en.a,{})})})})};return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(st,{open:i.active,dialog:t,title:i.name,component:function(e){switch(e){case"Servicio":return Object(Fe.jsx)(mr,{service:t,handleClose:d})}}(i.name),handleClose:d}),Ye(Pe.c,n,a,(function(){return Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsxs)(We.a,{children:[Object(Fe.jsx)(Qe.a,{component:"th",scope:"row",children:t.category.name}),Object(Fe.jsx)(Qe.a,{component:"th",scope:"row",children:t.name}),Object(Fe.jsx)(Qe.a,{component:"th",scope:"row",children:Xt(t.price)}),Object(Fe.jsx)(Qe.a,{children:Ot()(t.createdAt).format("DD/MM/YYYY")}),Object(Fe.jsx)(Qe.a,{children:Ot()(t.updatedAt).format("DD/MM/YYYY")}),Object(Fe.jsxs)(Qe.a,{align:"right",children:[Ye(Pe.f,n,a,j),Ye(Pe.e,n,a,b)]})]})})}))]})},fr={type:"",text:""},vr={name:"",active:!1},yr=function(){var e=Object(Re.d)((function(e){return e.authReducer.authUser})),t=Object(Re.d)((function(e){return e.page.user.module})),n=Object(X.useState)(vr),a=Object(ie.a)(n,2),r=a[0],c=a[1],i=Object(Re.c)(),o=function(){var e=Object(se.useQuery)(dr);return{data:e.data,error:e.error,loading:e.loading}}(),s=o.data,l=o.loading,u=o.error,d=Object(X.useState)([]),j=Object(ie.a)(d,2),b=j[0],O=j[1],m=function(){c(vr),i(Object($e.b)(fr))},h=function(e){switch(e){case"Crear":return Object(Fe.jsx)(mr,{handleClose:m})}};if(Object(X.useEffect)((function(){s&&O(s.getServices)}),[s]),l)return Object(Fe.jsx)("h1",{children:"Cargando..."});if(u)return Object(Fe.jsx)("h1",{children:Object(ze.a)(u)});return Object(Fe.jsxs)(Fe.Fragment,{children:[Ye(Pe.d,e,t,(function(){return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(st,{open:r.active,title:"".concat(r.name," Servicio"),component:h(r.name),handleClose:m}),Object(Fe.jsx)(Ve.a,{title:"Crear Servicio",children:Object(Fe.jsx)(at.a,{"aria-label":"add",size:"small",onClick:function(){return c({name:"Crear",active:!0})},children:Object(Fe.jsx)(ut.a,{})})})]})})),Object(Fe.jsx)(Le.a,{component:_e.a,style:{marginTop:10},children:Object(Fe.jsxs)(Be.a,{size:"small","aria-label":"a dense table",children:[Object(Fe.jsx)(Te.a,{children:Object(Fe.jsxs)(We.a,{children:[Object(Fe.jsx)(Qe.a,{children:"Categoria"}),Object(Fe.jsx)(Qe.a,{children:"Servicio"}),Object(Fe.jsx)(Qe.a,{children:"Precio"}),Object(Fe.jsx)(Qe.a,{children:"Fecha creada"}),Object(Fe.jsx)(Qe.a,{children:"Fecha modificada"}),Object(Fe.jsx)(Qe.a,{align:"right",children:"Opciones"})]})}),Object(Fe.jsx)(Je.a,{children:b.map((function(e){return Object(Fe.jsx)(xr,{service:e},e.id)}))})]})})]})},Cr=Object(se.gql)(W||(W=Object(oe.a)(["\n  query getUsers {\n    getUsers {\n      id\n      name\n      lastName\n      email\n      status\n      createdAt\n      updatedAt\n      role {\n        name\n        description\n        modules {\n          access {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n"]))),Sr=n(184),kr=n.n(Sr),wr=Object(se.gql)(Q||(Q=Object(oe.a)(["\n  mutation updateRole($userInput: UserUpdateInput!) {\n    updateUser(userInput: $userInput) {\n      id\n      name\n      lastName\n      email\n      role {\n        id\n        name\n      }\n    }\n  }\n"]))),Ir=Object(se.gql)(J||(J=Object(oe.a)(["\n  mutation registerUser($userInput: UserInput!) {\n    registerUser(userInput: $userInput) {\n      id\n      name\n      lastName\n      email\n      createdAt\n      updatedAt\n      role {\n        name\n      }\n    }\n  }\n"]))),Ar=function(e){var t,n,a,r=e.user,c=e.handleClose,i={id:(null===r||void 0===r?void 0:r.id)||"",name:(null===r||void 0===r?void 0:r.name)||"",lastName:(null===r||void 0===r?void 0:r.lastName)||"",role:{name:(null===r||void 0===r||null===(t=r.role)||void 0===t?void 0:t.name)||""},email:(null===r||void 0===r?void 0:r.email)||""},o=Object(X.useState)(i.id?i:{name:"",lastName:"",role:{name:""},email:"",password:"",confirmPassword:""}),s=Object(ie.a)(o,2),l=s[0],u=s[1],d=Object(X.useState)([]),j=Object(ie.a)(d,2),b=j[0],O=j[1],m=Object(Re.c)(),h=function(){var e=Object(se.useMutation)(wr),t=Object(ie.a)(e,2),n=t[0],a=t[1];return{updateUser:n,error:a.error,loading:a.loading}}(),p=Ga().data,g=function(){var e=Object(se.useMutation)(Ir,{refetchQueries:function(){return[{query:Cr}]}}),t=Object(ie.a)(e,2),n=t[0],a=t[1];return{registerUser:n,error:a.error,loading:a.loading}}(),x=Object(Re.d)((function(e){return e.authReducer.authUser})),f=function(e){u(Object(je.a)(Object(je.a)({},l),{},Object(mt.a)({},e.target.name,e.target.value))),m(Object($e.b)({type:"",text:""}))},v=function(){var e=Object(de.a)(ue.a.mark((function e(t){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!l.id){e.next=13;break}return e.prev=2,e.next=5,h.updateUser({variables:{userInput:l}});case 5:m(Object($e.b)({type:"success",text:"El usuario se actualiz\xf3 correctamente."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),m(Object($e.b)({type:"error",text:Object(ze.a)(e.t0)}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,g.registerUser({variables:{userInput:l}});case 16:m(Object($e.b)({type:"success",text:"El usuario ha sido registrado correctamente."})),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),m(Object($e.b)({type:"error",text:Object(ze.a)(e.t1)}));case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(X.useEffect)((function(){p&&O(p.getRoles)}),[p]),Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsx)("form",{onSubmit:v,children:Object(Fe.jsxs)(ht.a,{container:!0,spacing:3,children:[Object(Fe.jsx)(ht.a,{item:!0,xs:6,children:Object(Fe.jsx)(pt.a,{fullWidth:!0,onChange:f,name:"name",autoComplete:"off",id:"idNombres",label:"Nombres",variant:"outlined",value:l.name})}),Object(Fe.jsx)(ht.a,{item:!0,xs:6,children:Object(Fe.jsx)(pt.a,{fullWidth:!0,onChange:f,name:"lastName",autoComplete:"off",id:"idApellidos",label:"Apellidos",value:l.lastName,variant:"outlined"})}),(null===(n=l.role)||void 0===n?void 0:n.name)===Pe.g||Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsxs)(vt.a,{variant:"outlined",fullWidth:!0,children:[Object(Fe.jsx)(yt.a,{id:"idRole",children:"Rol"}),Object(Fe.jsx)(St.a,{labelId:"Rol",id:"idRole",value:null===(a=l.role)||void 0===a?void 0:a.name,onChange:function(e){u(Object(je.a)(Object(je.a)({},l),{},Object(mt.a)({},e.target.name,{name:e.target.value}))),m(Object($e.b)({type:"",text:""}))},label:"Rol",name:"role",children:b.map((function(e){var t;return((null===x||void 0===x||null===(t=x.role)||void 0===t?void 0:t.name)===Pe.g||e.name!==Pe.g)&&Object(Fe.jsx)(Ct.a,{value:e.name,children:e.name},e.id)}))})]})})}),Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsx)(pt.a,{fullWidth:!0,onChange:f,name:"email",autoComplete:"off",id:"idEmail",label:"Correo",value:l.email,variant:"outlined",InputProps:{readOnly:!!l.id}})}),l.id?"":Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsx)(pt.a,{fullWidth:!0,onChange:f,name:"password",autoComplete:"off",id:"idPassword",label:"Contrase\xf1a",value:l.password,variant:"outlined",type:"password"})}),Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsx)(pt.a,{fullWidth:!0,onChange:f,name:"confirmPassword",autoComplete:"off",id:"idConfirmPassword",label:"Repetir contrase\xf1a",value:l.confirmPassword,variant:"outlined",type:"password"})})]}),Object(Fe.jsxs)(xt.a,{style:{width:"100%"},children:[Object(Fe.jsx)(gt.a,{onClick:function(){return c()},color:"primary",children:"Cancelar"}),l.id?h.loading?Object(Fe.jsx)(ft.a,{}):Object(Fe.jsx)(gt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"}):g.loading?Object(Fe.jsx)(ft.a,{}):Object(Fe.jsx)(gt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Registrar"})]})]})})})},Mr=n(185),Er=n.n(Mr),Rr=Object(se.gql)(_||(_=Object(oe.a)(["\n  mutation activateUser($id: String!) {\n    activateUser(id: $id) {\n      id\n      status\n    }\n  }\n"]))),Nr=Object(se.gql)(V||(V=Object(oe.a)(["\n  mutation desactivateUser($id: String!) {\n    desactivateUser(id: $id) {\n      id\n      status\n    }\n  }\n"]))),Fr=n(186),Ur=n.n(Fr),Dr=Object(se.gql)(H||(H=Object(oe.a)(["\n  mutation changePasswordToAdmin($authInput: AuthChangePasswordInputToAdmin!) {\n    changePasswordToAdmin(authInput: $authInput)\n  }\n"]))),qr=(Object(se.gql)(G||(G=Object(oe.a)(["\n  mutation changePasswordToUser($authInput: AuthChangePasswordInputToUser!) {\n    changePasswordToUser(authInput: $authInput)\n  }\n"]))),function(e){var t=e.user,n=e.handleClose,a={id:(null===t||void 0===t?void 0:t.id)||"",newPassword:"",confirmNewPassword:""},r=Object(X.useState)(a),c=Object(ie.a)(r,2),i=c[0],o=c[1],s=Object(Re.c)(),l=function(){var e=Object(se.useMutation)(Dr),t=Object(ie.a)(e,2),n=t[0],a=t[1];return{changePasswordToAdmin:n,error:a.error,loading:a.loading}}(),u=l.changePasswordToAdmin,d=(l.error,l.loading),j=function(e){o(Object(je.a)(Object(je.a)({},i),{},Object(mt.a)({},e.target.name,e.target.value))),s(Object($e.b)({type:"",text:""}))},b=function(){var e=Object(de.a)(ue.a.mark((function e(t){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,u({variables:{authInput:i}});case 4:s(Object($e.b)({type:"success",text:"La contrase\xf1a ha sido cambiada correctamente."})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),s(Object($e.b)({type:"error",text:Object(ze.a)(e.t0)}));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(Fe.jsx)("form",{onSubmit:b,children:Object(Fe.jsxs)(ht.a,{container:!0,spacing:3,children:[Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsx)(pt.a,{fullWidth:!0,onChange:j,name:"newPassword",autoComplete:"off",id:"idNewPassword",label:"Nueva Contrase\xf1a",value:i.newPassword,variant:"outlined"})}),Object(Fe.jsx)(ht.a,{item:!0,xs:12,children:Object(Fe.jsx)(pt.a,{fullWidth:!0,onChange:j,name:"confirmNewPassword",autoComplete:"off",id:"idConfirmNewPassword",label:"Confirmar nueva contrase\xf1a",value:i.confirmNewPassword,variant:"outlined"})}),Object(Fe.jsxs)(xt.a,{style:{width:"100%"},children:[Object(Fe.jsx)(gt.a,{onClick:function(){return n()},color:"primary",children:"Cancelar"}),d?Object(Fe.jsx)(ft.a,{}):Object(Fe.jsx)(gt.a,{type:"submit",color:"primary",autoFocus:!0,variant:"contained",children:"Actualizar"})]})]})})}),zr={name:"",active:!1},Pr=function(e){var t=e.user,n=Object(Re.d)((function(e){return e.authReducer.authUser})),a=Object(Re.d)((function(e){return e.page.user.module})),r=Object(X.useState)(zr),c=Object(ie.a)(r,2),i=c[0],o=c[1],s=Object(Re.c)(),l=function(){var e=Object(se.useMutation)(Rr),t=Object(ie.a)(e,2),n=t[0],a=t[1];return{activateUser:n,error:a.error,loading:a.loading}}(),u=function(){var e=Object(se.useMutation)(Nr),t=Object(ie.a)(e,2),n=t[0],a=t[1];return{desactivateUser:n,error:a.error,loading:a.loading}}(),d=function(){o(Object(je.a)(Object(je.a)({},i),{},{active:!1})),s(Object($e.b)({type:"",text:""}))},j=function(){var e=Object(de.a)(ue.a.mark((function e(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.desactivateUser({variables:{id:t.id}});case 3:e.next=10;break;case 5:e.prev=5,e.t0=e.catch(0),o({name:"error",active:!0}),s(Object($e.b)({type:"error",text:Object(ze.a)(e.t0)})),i.active,i.name;case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),b=function(e){switch(e){case"Usuario":return Object(Fe.jsx)(Ar,{user:t,handleClose:d});case"Contrase\xf1a":return Object(Fe.jsx)(qr,{user:t,handleClose:d})}},O=function(){var e;return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(st,{open:i.active,dialog:t,title:i.name,component:b(i.name),handleClose:d}),Object(Fe.jsxs)(Qe.a,{align:"right",children:[(null===(e=t.role)||void 0===e?void 0:e.name)===Pe.g?"":Object(Fe.jsx)(Fe.Fragment,{children:2===t.status?Object(Fe.jsx)(Ve.a,{title:"Activar usuario",onClick:function(){return l.activateUser({variables:{id:t.id}})},children:Object(Fe.jsx)(at.a,{"aria-label":"desactivate",size:"small",color:"secondary",children:Object(Fe.jsx)(kr.a,{style:{color:"#F44336"}})})}):1===t.status?Object(Fe.jsx)(Ve.a,{title:"Desactivar usuario",onClick:j,children:Object(Fe.jsx)(at.a,{"aria-label":"activate",size:"small",style:{color:"#4CAF50"},children:Object(Fe.jsx)(Er.a,{style:{color:"#4CAF50"}})})}):""}),Object(Fe.jsx)(Ve.a,{title:"Editar usuario",onClick:function(){return o({name:"Usuario",active:!0})},children:Object(Fe.jsx)(at.a,{"aria-label":"role",size:"small",children:Object(Fe.jsx)(jt.a,{})})}),Object(Fe.jsx)(Ve.a,{title:"Cambiar contrase\xf1a",onClick:function(){return o({name:"Contrase\xf1a",active:!0})},children:Object(Fe.jsx)(at.a,{"aria-label":"password",size:"small",children:Object(Fe.jsx)(Ur.a,{})})})]})]})};return Object(Fe.jsx)(Fe.Fragment,{children:Ye(Pe.c,n,a,(function(){var e,r,c,i;return Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsx)(We.a,{children:(null===n||void 0===n||null===(e=n.role)||void 0===e?void 0:e.name)===Pe.g?Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsxs)(Qe.a,{component:"th",scope:"row",children:[t.name," ",t.lastName]}),Object(Fe.jsx)(Qe.a,{children:null===(r=t.role)||void 0===r?void 0:r.name}),Object(Fe.jsx)(Qe.a,{children:t.email}),Object(Fe.jsx)(Qe.a,{children:Ot()(t.createdAt).format("DD/MM/YYYY")}),Object(Fe.jsx)(Qe.a,{children:Ot()(t.updatedAt).format("DD/MM/YYYY")}),Ye(Pe.f,n,a,O)]}):Object(Fe.jsx)(Fe.Fragment,{children:(null===(c=t.role)||void 0===c?void 0:c.name)===Pe.g||Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsxs)(Qe.a,{component:"th",scope:"row",children:[t.name," ",t.lastName]}),Object(Fe.jsx)(Qe.a,{children:null===(i=t.role)||void 0===i?void 0:i.name}),Object(Fe.jsx)(Qe.a,{children:t.email}),Object(Fe.jsx)(Qe.a,{children:Ot()(t.createdAt).format("DD/MM/YYYY")}),Object(Fe.jsx)(Qe.a,{children:Ot()(t.updatedAt).format("DD/MM/YYYY")}),Ye(Pe.f,n,a,O)]})})})})}))})},Yr=Object(Ht.a)({table:{minWidth:650}}),$r={name:"",active:!1},Br=function(){var e=Object(Re.d)((function(e){return e.authReducer.authUser})),t=Object(Re.d)((function(e){return e.page.user.module})),n=Yr(),a=Object(X.useState)([]),r=Object(ie.a)(a,2),c=r[0],i=r[1],o=Object(X.useState)($r),s=Object(ie.a)(o,2),l=s[0],u=s[1],d=function(){var e=Object(se.useQuery)(Cr);return{data:e.data,loading:e.loading,error:e.error}}(),j=d.data,b=d.loading,O=d.error,m=Object(Re.c)(),h=function(){u(Object(je.a)(Object(je.a)({},l),{},{active:!1})),m(Object($e.b)({type:"",text:""}))},p=function(e){switch(e){case"Crear":return Object(Fe.jsx)(Ar,{handleClose:h})}};if(Object(X.useEffect)((function(){j&&i(j.getUsers)}),[j]),b)return Object(Fe.jsx)("h1",{children:"Cargando..."});if(O)return Object(Fe.jsx)("h1",{children:Object(ze.a)(O)});return Object(Fe.jsxs)(Fe.Fragment,{children:[Ye(Pe.d,e,t,(function(){return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(st,{open:l.active,title:"".concat(l.name," Usuario"),component:p(l.name),handleClose:h}),Object(Fe.jsx)(Ve.a,{title:"Crear Usuario",children:Object(Fe.jsx)(at.a,{"aria-label":"add",size:"small",onClick:function(){return u({name:"Crear",active:!0})},children:Object(Fe.jsx)(ut.a,{})})})]})})),Object(Fe.jsx)(Le.a,{component:_e.a,style:{marginTop:10},children:Object(Fe.jsxs)(Be.a,{className:n.table,size:"small","aria-label":"a dense table",children:[Object(Fe.jsx)(Te.a,{children:Object(Fe.jsxs)(We.a,{children:[Object(Fe.jsx)(Qe.a,{children:"Nombres"}),Object(Fe.jsx)(Qe.a,{children:"Rol"}),Object(Fe.jsx)(Qe.a,{children:"Correo"}),Object(Fe.jsx)(Qe.a,{children:"Fecha creada"}),Object(Fe.jsx)(Qe.a,{children:"Fecha modificada"}),Ye(Pe.f,e,t,(function(){return Object(Fe.jsx)(Qe.a,{align:"right",children:"Opciones"})}))]})}),Object(Fe.jsx)(Je.a,{children:c.map((function(e){return Object(Fe.jsx)(Pr,{user:e},e.id)}))})]})})]})},Lr=Object(Re.b)((function(e){var t=e.page.user;return{link:t.link,page:t.page}}),null)((function(e){var t=e.link,n=e.page,a=Object(ae.h)(),r=a.pathname.replace("/",""),c=function(e){var t=e.component,n=e.toLogin,a=Object(De.a)(e,["component","toLogin"]);return Object(Fe.jsx)(ae.b,Object(je.a)(Object(je.a)({},a),{},{render:function(e){switch(n){case!0:return re("accessToken")?Object(Fe.jsx)(ae.a,{to:{pathname:"/"}}):Object(X.createElement)(t,e);case!1:return re("accessToken")?Object(X.createElement)(t,e):Object(Fe.jsx)(ae.a,{to:{pathname:"/"}})}}}))};return Object(Fe.jsx)(Fe.Fragment,{children:t===r||t===a.pathname?Object(Fe.jsx)(c,{exact:!0,path:"/".concat(t),toLogin:!1,component:function(e){switch(e){case"DASHBOARD":return function(){return Object(Fe.jsx)("h1",{children:"Bienvenido"})};case"MODULOS":return function(){return Object(Fe.jsx)(Da,{})};case"ROLES":return function(){return Object(Fe.jsx)(ur,{})};case"USUARIOS":return function(){return Object(Fe.jsx)(Br,{})};case"CATEGORIAS":return function(){return Object(Fe.jsx)(Vt,{})};case"MARCAS":return function(){return Object(Fe.jsx)(Pt,{})};case"MODELOS":return function(){return Object(Fe.jsx)(sa,{})};case"PRODUCTOS":return function(){return Object(Fe.jsx)(Va,{})};case"SERVICIOS":return function(){return Object(Fe.jsx)(yr,{})};case"INGRESOS":return function(){return Object(Fe.jsx)(Nn,{})};case"EGRESOS":return function(){return Object(Fe.jsx)(gn,{})};case"RESUMEN-CAJA":return function(){return Object(Fe.jsx)(Fn,{})};case"CONSULTAR-CAJA":return function(){return Object(Fe.jsx)(qn,{})};case"CONSULTAR-PRECIOS":return function(){return Object(Fe.jsx)(Kn,{})};default:return function(){return Object(Fe.jsx)(qe,{})}}}("".concat(n))}):Object(Fe.jsx)(c,{toLogin:!1,path:"*",component:qe})})})),Tr=function(){return Object(Fe.jsx)(ae.d,{children:Object(Fe.jsx)(Lr,{})})},Wr=(n(226),function(){var e=Object(Re.d)((function(e){return e.page.user})),t=e.module,n=(e.page,e.name),a=null===n||void 0===n?void 0:n.charAt(0).toUpperCase(),r=null===n||void 0===n?void 0:n.substr(1,null===n||void 0===n?void 0:n.length),c="".concat(a).concat(r.toLowerCase());return Object(Fe.jsx)("div",{className:"wrapper",children:Object(Fe.jsx)("section",{children:Object(Fe.jsxs)("div",{className:"content-wrapper",children:[Object(Fe.jsxs)("div",{className:"content-wrapper-header items-center",children:[Object(Fe.jsx)("h1",{children:n.toUpperCase()}),Object(Fe.jsxs)("ol",{children:[Object(Fe.jsx)("li",{className:"list-style-none text-active",children:Object(Fe.jsx)("strong",{children:t})}),Object(Fe.jsx)("li",{className:"list-style-none text-inactive",children:c})]})]}),Object(Fe.jsx)("div",{className:"content-wrapper-main",children:Object(Fe.jsx)(Tr,{})})]})})})}),Qr=(n(227),function(){return Object(Fe.jsx)("footer",{children:Object(Fe.jsx)("div",{className:"center",children:Object(Fe.jsxs)("p",{children:["\xa9 2020-2021 by"," ",Object(Fe.jsx)("a",{href:"https://kemaytechnology.com/",target:"_blank",rel:"noreferrer",children:"Kemay Technology"}),". Todos los derechos reservados. Si tuviese alg\xfan inconveniente por favor contactarnos al siguiente correo:",Object(Fe.jsx)("a",{href:"mailto:dperez@kemaytechnology.com",target:"_blank",rel:"noreferrer",children:"dperez@kemaytechnology.com"}),Object(Fe.jsx)("br",{})," Version: 0.0.1 | Powered by",Object(Fe.jsx)("a",{href:"http://github.com/davisperezg",target:"_blank",rel:"noreferrer",children:"@davisperezg"})]})})})}),Jr=n(305),_r=n(306),Vr="@page/LINK_USER",Hr=function(e,t,n){return function(){var a=Object(de.a)(ue.a.mark((function a(r){return ue.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r({type:Vr,payload:{link:t,module:e,page:"/"===t?"DASHBOARD":t.toUpperCase(),name:n}});case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},Gr=Object(Re.b)(null,{setLink:Hr})((function(e){var t,n=e.menu,a=e.setLink,r=e.module,c=Object(ae.g)(),i=Object(Re.d)((function(e){return e.authReducer.authUser})),o=function(){a(r.name,n.link,n.name),document.title="RPUM - ".concat(n.link.toUpperCase()),c.push("/".concat(n.link))};return Object(Fe.jsx)(Fe.Fragment,{children:((null===i||void 0===i||null===(t=i.role)||void 0===t?void 0:t.name)===Pe.g||n.name!==Pe.a)&&Object(Fe.jsx)("li",{onClick:function(){return o()},children:n.name})})})),Kr=function(e){var t=e.module,n=Object(X.useState)(!1),a=Object(ie.a)(n,2),r=a[0],c=a[1],i=Object(X.useState)(!1),o=Object(ie.a)(i,2),s=o[0],l=o[1],u=t.menus,d=Z.a.useState([]),j=Object(ie.a)(d,2),b=j[0],O=j[1];return Object(X.useEffect)((function(){O(u||[])}),[u]),Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsxs)("li",{style:s?{color:"#fff",fontWeight:"bold"}:{color:"#67677e"},onClick:function(){return c(!r),void l(!s)},children:[t.name," ",r?Object(Fe.jsx)(Jr.a,{}):Object(Fe.jsx)(_r.a,{})]}),r&&Object(Fe.jsx)("ul",{children:b.map((function(e){return Object(Fe.jsx)(Gr,{menu:e,module:t},e.id)}))})]})},Xr=n.p+"static/media/logo_kemay_antena.16ba1da3.png",Zr=(n(228),function(){var e,t=Object(Re.d)((function(e){return e.authReducer.authUser})),n=Object(Re.d)((function(e){return e.page.user})),a=(n.module,n.page,null===t||void 0===t||null===(e=t.role)||void 0===e?void 0:e.modules),r=Object(X.useState)([]),c=Object(ie.a)(r,2),i=c[0],o=c[1],s=Object(ae.g)(),l=Object(Re.c)();return Object(X.useEffect)((function(){o(a||[])}),[a]),Object(Fe.jsxs)("aside",{children:[Object(Fe.jsx)("div",{className:"content-logo",children:Object(Fe.jsx)("div",{className:"logo",onClick:function(){s.push("/"),l(Hr("Inicio","/","Dashboard"))},children:Object(Fe.jsx)("img",{width:"100",height:"100",src:Xr,alt:"Logo"})})}),Object(Fe.jsx)("div",{className:"sidebar",children:Object(Fe.jsx)("ul",{children:i.map((function(e){return Object(Fe.jsx)(Kr,{module:e},e.id)}))})})]})}),ec=(n(229),function(){return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)("section",{className:"menu",children:Object(Fe.jsx)(Zr,{})}),Object(Fe.jsxs)("section",{className:"content",children:[Object(Fe.jsxs)("div",{className:"body",children:[Object(Fe.jsx)(Ue,{}),Object(Fe.jsx)(Wr,{})]}),Object(Fe.jsx)(Qr,{})]})]})}),tc=n(240),nc=n.p+"static/media/B_logo_kemay.bec2fe6e.png",ac=Object(se.gql)(K||(K=Object(oe.a)(["\n  mutation login($authInput: AuthInput!) {\n    login(authInput: $authInput) {\n      access_token\n      refresh_token\n    }\n  }\n"]))),rc=(n(230),{email:"",password:""}),cc={path:"",message:""},ic=Object(Re.b)((function(e){return{loading:e.authReducer.loading}}),{setLoading:Me})((function(e){var t=e.loading,n=e.setLoading,a=Object(X.useState)(cc),r=Object(ie.a)(a,2),c=r[0],i=r[1],o=Object(X.useState)(rc),s=Object(ie.a)(o,2),l=s[0],u=s[1],d=Object(Re.d)((function(e){return e.message})),j=function(){var e=Object(se.useMutation)(ac);return Object(ie.a)(e,1)[0]}(),b=Object(Re.c)(),O=function(e){b(Object($e.b)({type:"",text:""})),i(cc),u(Object(je.a)(Object(je.a)({},l),{},Object(mt.a)({},e.target.name,e.target.value)))},m=function(){var e=Object(de.a)(ue.a.mark((function e(t){var a,r,c,o;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n(!0),e.prev=2,e.next=5,j({variables:{authInput:{email:l.email,password:l.password}}});case 5:a=e.sent,r=a.data.login,c=r.access_token,o=r.refresh_token,ce("accessToken",c),ce("refreshToken",o),Ce.resetStore(),window.location.href="/",e.next=21;break;case 13:if(e.prev=13,e.t0=e.catch(2),401!==e.t0.graphQLErrors[0].extensions.exception.status){e.next=19;break}return b(Object($e.b)({type:"error",text:Object(ze.a)(e.t0)})),n(!1),e.abrupt("return");case 19:i(e.t0.graphQLErrors[0].extensions.exception.response),n(!1);case 21:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(Fe.jsxs)("div",{className:"login",children:[Object(Fe.jsx)("div",{className:"content-login-logo content-items-center",children:Object(Fe.jsx)("img",{width:"450",height:"400",src:nc,alt:"Logo"})}),Object(Fe.jsx)("div",{className:"content-login-form content-items-center",children:Object(Fe.jsxs)("div",{className:"content-login-form-main",children:[Object(Fe.jsx)("div",{className:"content-login-form-header content-items-center",children:Object(Fe.jsx)("h1",{children:"ACCESO AL SISTEMA"})}),d.type&&Object(Fe.jsx)(nt.a,{severity:d.type,children:d.text}),Object(Fe.jsx)("form",{onSubmit:m,children:Object(Fe.jsxs)("div",{className:"content-login-form-body",children:[Object(Fe.jsx)("div",{className:"content-login-form-input",children:Object(Fe.jsx)(pt.a,{error:"username"===(null===c||void 0===c?void 0:c.path),id:"idUsername",label:"Usuario",helperText:"username"===(null===c||void 0===c?void 0:c.path)?null===c||void 0===c?void 0:c.message:"",name:"email",onChange:O,variant:"outlined",fullWidth:!0})}),Object(Fe.jsx)("br",{}),Object(Fe.jsx)("div",{className:"content-login-form-input",children:Object(Fe.jsx)(pt.a,{error:"password"===(null===c||void 0===c?void 0:c.path),id:"idPassword",label:"Contrase\xf1a",helperText:"password"===(null===c||void 0===c?void 0:c.path)?null===c||void 0===c?void 0:c.message:"",name:"password",onChange:O,variant:"outlined",type:"password",fullWidth:!0})}),Object(Fe.jsx)("br",{}),Object(Fe.jsx)("div",{className:"content-login-form-input content-items-center",children:t?Object(Fe.jsx)(tc.a,{}):Object(Fe.jsx)(gt.a,{disabled:!!t,type:"submit",size:"large",variant:"contained",color:"primary",fullWidth:!0,children:"Iniciar sesion"})}),Object(Fe.jsx)("br",{}),Object(Fe.jsx)("div",{className:"content-login-form-footer content-items-center",children:"\xbfOlvidaste tu contrase\xf1a?"})]})})]})})]})})),oc=function(){return Object(Fe.jsx)(ne.a,{children:re("accessToken")?Object(Fe.jsx)(ec,{}):Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(ic,{}),Object(Fe.jsx)(ae.a,{to:"/"})]})})},sc=n(86),lc=n(187),uc=n(188),dc=n(154),jc=n(189),bc=n.n(jc),Oc={loading:!1,authUser:void 0,error:void 0},mc={user:{link:"/",module:"Inicio",page:"DASHBOARD",name:"Dashboard"}},hc={type:"",text:""},pc=Object(sc.combineReducers)({authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case we:return Object(je.a)(Object(je.a)({},e),{},{loading:t.payload});case Se:case ke:return Object(je.a)(Object(je.a)({},e),{},{authUser:t.payload});case Ie:return Object(je.a)(Object(je.a)({},e),{},{error:t.payload});default:return e}},page:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Vr:return Object(je.a)(Object(je.a)({},e),{},{user:t.payload});default:return e}},message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $e.a:return t.payload;default:return e}}}),gc={key:"root",storage:bc.a,whitelist:["page"]},xc=Object(dc.a)(gc,pc),fc=Object(sc.createStore)(xc,Object(uc.composeWithDevTools)(Object(sc.applyMiddleware)(lc.a))),vc=Object(dc.b)(fc),yc=n(190);n(233);te.a.render(Object(Fe.jsx)(Z.a.StrictMode,{children:Object(Fe.jsx)(se.ApolloProvider,{client:Ce,children:Object(Fe.jsx)(Re.a,{store:fc,children:Object(Fe.jsx)(yc.a,{loading:null,persistor:vc,children:Object(Fe.jsx)(oc,{})})})})}),document.getElementById("root"))},76:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var a,r=n(13),c=n(7),i=Object(c.gql)(a||(a=Object(r.a)(["\n  query getModules {\n    getModules {\n      id\n      name\n      description\n      createdAt\n      updatedAt\n      menus {\n        id\n        name\n        link\n      }\n      access {\n        id\n        name\n      }\n    }\n  }\n"]))),o=function(){var e=Object(c.useQuery)(i);return{data:e.data,loading:e.loading,error:e.error}}}},[[234,1,2]]]);
//# sourceMappingURL=main.c99eed09.chunk.js.map